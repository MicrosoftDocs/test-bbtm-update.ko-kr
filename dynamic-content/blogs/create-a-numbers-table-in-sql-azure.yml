### YamlMime:Yaml
ms.openlocfilehash: 3414df726955549d37e53b8e45c1705639011977
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139898676"
Slug: create-a-numbers-table-in-sql-azure
Title: SQL Azure 숫자 테이블 만들기
Summary: '[이 문서는 SQL Azure 팀에서 제공했습니다.] CSV 파일을 테이블로 구문 분석, 문자열 조작 또는 누락된 ID 찾기와 같은 다양한 용도로 숫자 테이블이 필요할 수 있습니다(...'
Content: <p>[이 문서는 SQL Azure 팀에서 제공했습니다.]</p><p>CSV 파일을 테이블로 구문 분석, 문자열 조작 또는 누락된 ID 찾기(아래 예제 참조) 등 다양한 용도로 숫자 테이블이 필요할 수 있습니다. 숫자 테이블은 커서를 방지하여 성능을 높이고 쿼리를 간소화하는 데 사용됩니다. SQL Azure 모든 테이블에 클러스터형 인덱스가 있어야 하므로 SQL Server 또는 SQL Express와 약간 다른 항목이 필요합니다(SELECT INTO With SQL Azure 블로그 게시물 참조). 다음은 SQL Azure 숫자 테이블을 만드는 간단한 Transact-SQL 스크립트입니다.</p>  <p>스크립트:</p>  <pre class="csharpcode"><span class="kwrd">SET</span> NOCOUNT <span class="kwrd">ON</span>    <span class="kwrd">CREATE</span> <span class="kwrd">TABLE</span> Numbers (n bigint <span class="kwrd">PRIMARY</span> <span class="kwrd">KEY</span>)    <span class="kwrd">GO</span>    <span class="kwrd">DECLARE</span> @numbers <span class="kwrd">table</span>(number <span class="kwrd">int</span>);  <span class="kwrd">WITH</span> numbers(number) <span class="kwrd">as</span>  (   <span class="kwrd">SELECT</span> 1 <span class="kwrd">AS</span> number   <span class="kwrd">UNION</span> <span class="kwrd">all</span>   <span class="kwrd">SELECT</span> number+1 <span class="kwrd">FROM</span> numbers <span class="kwrd">WHERE</span> number&lt;10000  )  INSERT <span class="kwrd">INTO</span> @numbers(number)  <span class="kwrd">SELECT</span> number <span class="kwrd">FROM</span> numbers <span class="kwrd">OPTION</span>(maxrecursion 10000)    INSERT <span class="kwrd">INTO</span> Numbers(n)  <span class="kwrd">SELECT</span> number <span class="kwrd">FROM</span> @numbers</pre>      <p>날짜 범위에 대해 동일한 작업을 쉽게 수행할 수 있습니다. 스크립트는 다음과 같습니다.</p>    <pre class="csharpcode"><span class="kwrd">SET</span> NOCOUNT <span class="kwrd">ON</span>    <span class="kwrd">CREATE</span> <span class="kwrd">TABLE</span> Dates (n datetime <span class="kwrd">PRIMARY</span> <span class="kwrd">KEY</span>)    <span class="kwrd">GO</span>    <span class="kwrd">DECLARE</span> @dates <span class="kwrd">table</span>([<span class="kwrd">date</span>] datetime);  <span class="kwrd">WITH</span> dates([<span class="kwrd">date</span>]) <span class="kwrd">as</span>  (   <span class="kwrd">SELECT</span> <span class="kwrd">CONVERT</span>(datetime,<span class="str">'10/4/1971'</span>) <span class="kwrd">AS</span> [<span class="kwrd">date</span>]   <span class="kwrd">UNION</span> <span class="kwrd">all</span>   <span class="kwrd">SELECT</span> DATEADD(d, 1, [<span class="kwrd">date</span>]) <span class="kwrd">FROM</span> dates <span class="kwrd">WHERE</span> [<span class="kwrd">date</span>] &lt; <span class="str">'10/3/2060'</span>  )  INSERT <span class="kwrd">INTO</span> @dates(<span class="kwrd">date</span>)  <span class="kwrd">SELECT</span> <span class="kwrd">date</span> <span class="kwrd">FROM</span> dates <span class="kwrd">OPTION</span>(maxrecursion 32507)    INSERT <span class="kwrd">INTO</span> Dates(n)  <span class="kwrd">SELECT</span> [<span class="kwrd">date</span>] <span class="kwrd">FROM</span> @dates</pre>    <p>숫자 테이블을 만들었으므로 기본 키에서 ID 간격을 찾는 데 사용할 수 있습니다. 예제는 다음과 같습니다.</p>    <pre class="csharpcode"><span class="rem">-- Example Table</span>  <span class="kwrd">CREATE</span> <span class="kwrd">TABLE</span> Incomplete   (       ID <span class="kwrd">INT</span> <span class="kwrd">IDENTITY</span>(1,1),      <span class="kwrd">CONSTRAINT</span> [PK_Source] <span class="kwrd">PRIMARY</span> <span class="kwrd">KEY</span> <span class="kwrd">CLUSTERED</span> ( [ID] <span class="kwrd">ASC</span>)  )      <span class="rem">-- Fill It With Data</span>  INSERT Incomplete <span class="kwrd">DEFAULT</span> <span class="kwrd">VALUES</span>   INSERT Incomplete <span class="kwrd">DEFAULT</span> <span class="kwrd">VALUES</span>   INSERT Incomplete <span class="kwrd">DEFAULT</span> <span class="kwrd">VALUES</span>   INSERT Incomplete <span class="kwrd">DEFAULT</span> <span class="kwrd">VALUES</span>   INSERT Incomplete <span class="kwrd">DEFAULT</span> <span class="kwrd">VALUES</span>   INSERT Incomplete <span class="kwrd">DEFAULT</span> <span class="kwrd">VALUES</span>     <span class="rem">-- Remove A Random Row</span>  <span class="kwrd">DELETE</span> Incomplete <span class="kwrd">WHERE</span> ID = (<span class="kwrd">SELECT</span> <span class="kwrd">TOP</span> 1 ID <span class="kwrd">FROM</span> Incomplete <span class="kwrd">ORDER</span> <span class="kwrd">BY</span> NEWID())    <span class="kwrd">GO</span>     <span class="rem">-- Find Out What That Row Is </span>  <span class="kwrd">SELECT</span> n       <span class="kwrd">FROM</span> dbo.Numbers       <span class="kwrd">WHERE</span> n <span class="kwrd">NOT</span> <span class="kwrd">IN</span> (<span class="kwrd">SELECT</span> ID <span class="kwrd">FROM</span> Incomplete)       <span class="kwrd">AND</span> n &lt; (<span class="kwrd">SELECT</span> <span class="kwrd">MAX</span>(ID) <span class="kwrd">FROM</span> Incomplete)       <span class="kwrd">ORDER</span> <span class="kwrd">BY</span> n          <span class="rem">-- if you need only the first available </span>      <span class="rem">-- integer value, change the query to </span>      <span class="rem">-- SELECT MIN(Number) or TOP 1 Number </span>     <span class="rem">-- Clean Up The Example Table</span>  <span class="kwrd">DROP</span> <span class="kwrd">TABLE</span> Incomplete</pre>    <h2>요약</h2>    <p>SQL Azure 동일한 작업을 수행하는 더 좋은 방법이 있나요? 아래의 의견에 게시; 먼저 SQL Azure 테스트해야 합니다. 질문, 우려 사항, 의견이 있나요? 아래에 게시하고 우리는 그들을 해결하기 위해 노력할 것입니다.</p>
