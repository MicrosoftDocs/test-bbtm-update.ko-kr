### YamlMime:Yaml
ms.openlocfilehash: f0f05db50e512c62239c75cca4034cb9b8f68305
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139899603"
Slug: performance-in-the-new-azure-sql-database-service-tiers
Title: 새 Azure SQL Database 서비스 계층의 성능
Summary: 4월 24일에는 새로운 비즈니스 연속성 기능뿐만 아니라 SQL Database 위한 새로운 서비스 계층 미리 보기인 Basic 및 Standard가 도입되었습니다. 이 블로그 게시물에서 우리는 새로운 자세히 살펴 것입니다 ...
Content: >-
  4월 24일에는 새로운 비즈니스 연속성 기능뿐만 아니라 SQL Database 위한 새로운 서비스 계층 미리 보기인 Basic 및 Standard가 도입되었습니다. 이 블로그 게시물에서는 SQL Database 새로운 성능 접근 방식을 자세히 살펴보겠습니다.


  먼저 변경의 필요성부터 살펴보겠습니다. 성능, 특히 예측 가능한<b> </b>새 서비스 계층의 성능에 중점을 두는 것은 웹 및 비즈니스의 SQL Database 성능에 대한 강력한 고객 피드백에 의해 좌우됩니다. 웹 및 비즈니스 계층의 성능은 지금까지 예측할 수 없고 기회적이었으며, 이로 인해 비즈니스에 중요한 애플리케이션을 실행하는 고객에게 문제가 발생합니다. 우리는 고객의 예측 가능한 성능이 중요하다는 것을 이해합니다. 고객은 시간이 지남에 따라 플랫폼의 성능에 의존할 수 없는 경우 플랫폼에서 안정적으로 실행할 수 있는 시스템을 빌드하기가 너무 어렵다고 말합니다.


  이 피드백에 대한 응답으로 2013년 7월부터 미리 보기로 제공되며 주로 예측 가능한 성능을 제공하는 데 초점을 맞춘 Premium 가입하기 위해 Basic 및 Standard를 도입했습니다. Premium 성능에 대한 고객 피드백은 압도적으로 긍정적이었습니다. 기본 및 표준은 추가 가격대에서 고객에게 이 혜택을 확장합니다. 이제 고객은 제어할 수 있는 레버로서의 성능을 가지며 이는 클라우드 컴퓨팅 업계와 일치합니다. 고객에게 이 레버를 제공하는 것은 "가격/스토리지"의 웹 &amp; 비즈니스 서비스 모델에서 "가격/성능 및 기능"의 새로운 모델로 이동하는 기본 드라이버입니다.


  새 서비스 계층에서 애플리케이션을 테스트할 때 새 성능 환경의 지속적인 미세 조정을 포함하여 현재 미리 보기로 제공됩니다. 미리 보기를 사용하여 피드백을 면밀히 듣고 이 피드백을 사용하여 새 서비스 계층을 연마할 것입니다. 성능 테스트를 실행하는 경우 새 서비스 계층에서 사용할 수 있는 다양한 성능 수준을 가장 잘 이해할 수 있도록 주기적으로 다시 실행하도록 계획하세요. 미리 보기를 진행하면서 증분 성능 블로그를 게시하기 위해 최선을 다할 것입니다.


  <b>실제로 고객 피드백에 따라 5월 19일 월요일 주에 온라인 상태가 되는 기본 및 표준 계층의 처리량을 개선했습니다.</b>

  <ul>
   <li>기본: 1 DTU –&gt; <b>5DTU</b></li>
   <li>S1: 5 DTU –&gt; <b>15DTU</b></li>
   <li>S2: 25 DTU –&gt; <b>50DTU</b></li>
  </ul>

  <h1>성능의 의미는 무엇인가요?</h1>

  데이터베이스 성능은 많은 수의 메트릭이 일반적으로 업무 상태를 설명하는 데 사용되는 복잡한 주제입니다. 애플리케이션 관점에서 사용자가 진정으로 관심을 갖는 것은 다음과 같습니다.

  <ul>
   <li><b>응답 시간</b>
  <ul>
   <li>특정 쿼리 실행의 시작과 끝 사이에 경과된 시간입니다.</li>
  </ul>

  </li>
   <li><b>처리량</b>
  <ul>
   <li>시스템이 언제든지 실행할 수 있는 총 작업 시간 또는 실행 속도입니다. 처리량 속도는 일반적으로 개별 실행이 지정된 응답 시간 내에 완료되는 경우에만 유효한 것으로 간주됩니다.</li>
  </ul>

  </li>

  </ul>

  응답 시간과 처리량에 영향을 주는 여러 요인이 있지만 주로 애플리케이션 디자인 및 하드웨어 리소스라는 두 가지 범주로 나뉩니다. 다음은 데이터베이스 애플리케이션의 성능 문제를 해결할 때 자주 묻는 몇 가지 예제 질문입니다.

  <ul>
   <li><b>애플리케이션 디자인</b>
  <ul>
   <li>쿼리를 실행할 수 있는 최상의 플랫폼을 제공하기 위해 올바른 인덱스 집합이 만들어졌나요?</li>
   <li>올바른 트랜잭션 격리 수준이 사용 중입니까? 시스템이 잠긴 리소스를 불필요하게 기다리고 있나요?</li>
   <li>예를 들어 다중 문 일괄 처리 또는 저장 프로시저를 사용하여 왕복을 최소화합니까?</li>
  </ul>

  </li>
   <li><b>하드웨어 리소스</b>
  <ul>
   <li>워크로드를 실행할 수 있는 리소스가 충분한가요?</li>
   <li>시간이 지남에 따라 발생하는 다양한 유형의 워크로드에 필요한 리소스는 얼마인가요?</li>
  </ul>

  </li>

  </ul>

  성능과 관련하여 새로운 SQL Database 서비스 계층은 고객이 더 많은 하드웨어 리소스를 제공하는 성능 수준으로 업그레이드할 수 있도록 하여 하드웨어 리소스와 관련된 문제를 해결하는 데 도움이 될 수 있습니다. 스케일 아웃 디자인 패턴(분할)을 사용하는 경우 새 성능 수준을 사용하여 워크로드 배포에 따라 다른 분할된 데이터베이스에 제공된 리소스를 변경할 수 있습니다(예: 높은 활성 고객을 포함하는 분할된 데이터베이스에 더 높은 성능 수준 할당). 이를 위해 자세한 분할 지침에 대해 적극적으로 노력하고 있습니다. 계속 지켜봐 주세요!


  또한 클라우드 디자인 모범 사례는 애플리케이션 디자인을 계속 최적화하는 것입니다. 이러한 투자는 더 높은 성능 수준을 사용해야 하는 필요성을 줄이고 데이터베이스 워크로드를 실행하는 비용을 줄이는 데 도움이 될 수 있습니다.

  <h1>하드웨어 사양은 어떻습니까?</h1>

  데이터베이스 워크로드를 실행하는 데 필요한 리소스는 CPU, 디스크 IO 작업(읽기/쓰기) 및 메모리를 비롯한 다양한 유형의 하드웨어 리소스로 귀결됩니다. 이러한 각 리소스 차원 내에는 엄청난 차이가 있습니다. 예를 들어 서로 다른 유형의 코어는 클록 주기와 캐시 크기가 다르며, IO는 데이터베이스 시스템이 수행하는 작업에 따라 서로 다른 크기로 수행됩니다. 애플리케이션에 실제로 필요한 각 리소스의 양을 예측하고 시간에 따른 사용률을 비교하는 것은 어렵고 시간이 많이 소요되는 작업이 될 수 있습니다. 온-프레미스 환경에서는 데이터베이스가 실행되는 하드웨어에 대한 제어의 허용된 결과입니다. 클라우드로 이동하거나 특히 SQL Database 사용하는 경우의 매력은 하드웨어 또는 패치를 관리하고 데이터베이스 소프트웨어를 유지 관리할 필요 없이 훌륭한 애플리케이션을 빌드하는 데 집중할 수 있다는 것입니다. 고객은 번거로움을 원하지 않으며 필요할 때 처리량을 원한다고 말했습니다. 이것은 성능에 대한 새로운 초점을 가진 비전입니다.


  새 서비스 계층을 통해 예측 가능한 성능을 보장하는 데 도움이 되는 새로운 디자인 원칙을 적용했습니다. 각 성능 수준(기본, S1, S2, P1, P2, P3)은 리소스 집합(예: CPU, 메모리, IO)의 할당에 해당합니다. 각 수준 내에서 데이터베이스에서 사용할 수 있는 최대 리소스 양이 정의됩니다. 디자인 원칙은 데이터베이스의 성능이 성능 수준에 제공된 것과 동일한 리소스 집합이 있는 전용 컴퓨터에서 실행 중인 경우 데이터베이스의 성능이 달성될 정도여야 한다는 것입니다. 이 디자인 원칙은 예측 가능한 성능을 제공하는 데 기본 사항입니다.


  수준 간 리소스의 차이를 이해하기 위해 DTU(데이터베이스 처리량 단위)의 개념을 도입했습니다. DTU는 각 성능 수준에서 할당된 리소스의 혼합 측정값입니다. 예를 들어 P1의 DTU 등급은 100이고 S1의 DTU 등급은 15입니다. 즉, S1에는 P1 리소스의 1/7이 있습니다. 위에서 설명한 디자인 원칙에 따라 S1에서 실행되는 데이터베이스는 메모리가 ~1/7, IO 용량이 ~1/7인 P1만큼 빠른 CPU가 있는 전용 컴퓨터에서 실행되는 경우와 비슷한 수준의 성능을 가질 것으로 예상할 수 있습니다.


  <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/05/1.png"><img class="alignnone size-medium wp-image-146271" style="width: 625px; height: 434px;" alt="1" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1-469x369.png" width="469" height="369" /></a>


  사용자 및 문제 해결 관점에서 데이터베이스 워크로드가 각 리소스 차원에서 사용하는 현재 성능 수준의 백분율을 노출하여 다양한 유형의 IO, 디스크 큐 길이 등과 같은 사항을 이해할 필요가 없습니다. 이렇게 하면 현재 성능 수준에 비해 리소스 사용량을 쉽게 이해할 수 있습니다.


  CPU에서 사용량에 대한 원격 분석을 노출하고 master 데이터베이스의 <i>sys.resource_stats</i> 보기에서 쓰기를 읽습니다&amp;. 메모리는 미리 보기의 뒷부분에서 추가됩니다. 이 보기는 각 차원에 대해 평균 5분(총 소비/5분)을 포함하며 시간에 따른 리소스 요구 사항을 측정하는 데 유용합니다. 이 원격 분석은 포털을 통해서도 사용할 수 있습니다. <i>sys.resource_stats</i> 쿼리하고 사용된 DTU를 예측하는 방법에 대한 자세한 내용은 새 서비스 계층에 대한 정보를 제공하는 <a href="https://msdn.microsoft.com/en-us/library/dn369873.aspx">이</a> MSDN 문서를 참조하세요.


  성능 문제 해결을 위한 훌륭한 원격 분석 스토리를 제공하는 것이 중요하다는 것을 알고 있으며 미리 보기 중에 이를 추가로 개선할 것으로 예상할 수 있습니다.


  <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/05/clip_image002_thumb.png"><img class="alignnone size-medium wp-image-146241" alt="clip_image002_thumb.png" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/clip_image002_thumb-636x364.png" width="636" height="364" /></a>

  <h3></h3>

  <h1>데이터베이스 워크로드 수명 주기</h1>

  "데이터베이스 사용" 작업은 단일 작업이 아니라 다양한 유형의 작업으로 구성됩니다. 이는 분명해 보일 수 있지만 데이터베이스에 적합한 성능 계층을 계산하고 결과적으로 데이터베이스 워크로드를 실행하는 데 지출하는 금액을 계산하는 것이 중요합니다. 대답은 "<b>표준 S2</b> @ $200/월"만큼 간단하지 않을 수 있습니다(GA 가격 사용). 클라우드 및 특히 SQL Database 제공하는 가장 큰 기능 중 하나는 탄력적 확장 기능입니다. "기본 <b>,</b> Mon-Thu 및 Sat &amp; Sun을 사용하여 스파스 쿼리를 사용하고, 금요일은 <b>S2</b> 를 사용하여 지정된 기간 내에 더 큰 일괄 처리 작업을 관리하고, 한 달에 하루는 <b>P1 </b>을 사용하여 대규모 ETL 작업을 신속하게 수행합니다.

  <ul>
   <li>(기본 가격 / 30 * 25) = $4.16</li>
   <li>(S2 가격 / 30 * 4) = $26.7</li>
   <li>(P1 가격 / 30 * 1) = $31 <b>$61.86/월</b>"</li>
  </ul>

  많은 데이터베이스에 대한 워크로드 수명 주기 위의 예제와 마찬가지로 다양한 요구 사항이 있는 다양한 하위 워크로드가 포함됩니다. 예를 들면 다음과 같습니다.

  <ul>
   <li>데이터베이스의 초기 로드(예: SQL Database 이동 시)</li>
   <li>일반적인 사용(예: 정상 근무일 동안 앱을 사용하는 단일 부서의 사용자 활동)</li>
   <li>최대 사용량(예: 한 달에 한 번 전체 회사의 모든 직원에 대한 보고 처리)</li>
   <li>대규모 추출 변환 &amp; 로드(ETL 또는 Import/Export) 작업</li>
   <li>물리적 데이터베이스 유지 관리 작업(예: 인덱스 만들기)</li>
  </ul>

  워크로드를 다른 요구 사항으로 분류하는 경우 최대 부하에 필요한 성능 수준에서 항상 실행되지 않음으로써 청구서를 크게 줄일 수 있습니다.


  애플리케이션 코드는 새 <i>서비스 목표를</i> 지정하는 간단한 <a href="https://msdn.microsoft.com/en-US/library/azure/dn505718"><i>업데이트 데이터베이스 API</i></a> 호출을 통해 필요한 경우 성능 수준을 변경할 수 있습니다. 변경 자체는 비동기 작업이며 <a href="https://msdn.microsoft.com/en-US/library/azure/dn505708"><i>데이터베이스 가져오기 API</i></a> 를 사용하여 변경 상태를 모니터링할 수 있습니다. 데이터베이스는 온라인 상태가 되며 변경 내용 전체에서 사용할 수 있습니다.

  <h1>Web &amp; Business vs. Basic, Standard &amp; Premium</h1>

  일반적인 질문은 새 서비스 계층의 성능이 Web &amp; Business와 어떻게 비교되는지입니다. 이것은 간단한 방법으로 대답하기 어렵다. 문제는 웹 &amp; 비즈니스와 새 서비스 계층이 근본적으로 다르다는 것입니다. Web &amp; Business에서 서비스 모델은 사용된 스토리지의 양에만 기반하며 다른 하드웨어 리소스를 고려하지 않습니다. 시스템은 근본적으로 결함이 있는 데이터베이스 워크로드를 실행하는 데 사용되는 다른 리소스가 아닌 스토리지의 가용성을 보장하기 위해 최적화되어 있습니다. Web &amp; Business에서 리소스의 성능 수준<i> </i>및 가용성은<i> </i>동일한 컴퓨터에서 다른 고객의 워크로드와 같은 다양한 요인과 과잉 사용으로부터 자신을 보호하는 시스템에 따라 달라집니다. 이러한 리소스를 활용할 수 있는지 여부에 관계없이 도박이며, 새로운 계층으로 문제를 해결하지 않으면 시간이 지남에 따라 이 문제가 더욱 두드러질 것입니다.


  내가 처음에 말했듯이, 고객은 명확하게이 예측할 수없는 다양한 성능 경험이 그들이 원하는 것이 아니라고 우리에게 말했다. 새로운 서비스는 기본, 표준 및 Premium 계층화하여 여러 가격대에서 높은 수준의 예측 가능성을 제공하는 데 집중합니다. 즉, 시스템은 스토리지뿐만 아니라 데이터베이스 워크로드를 실행하는 데 필요한 다른 하드웨어 리소스도 제공하도록 최적화됩니다.


  이러한 서비스 계층이 근본적으로 다른 디자인 원칙에서 실행된다는 사실은 비교를 사과와 오렌지 중 하나로 만듭니다.


  Web &amp; Business 리소스 소비에 대한 인사이트를 얻기 위해 <i>sys.resource_stats</i> 사용되는 리소스의 백분율을 제공합니다(위에서 설명). Web &amp; Business에 대한 리소스 백분율 계산에 대한 원격 분석의 참조 지점은 현재 W/B 데이터베이스에 대한 일반적인 가격대이므로 <i>표준 S2</i> 의 1/2로 설정됩니다. 이는 원격 분석 참조 지점일 뿐이며 위에서 설명한 대로 정의되지 않은 웹 &amp; 비즈니스에서 사용할 수 있는 리소스의 양을 나타내는 것은 아닙니다. 그러나 데이터베이스에 필요한 성능 수준을 정확하게 이해하려면 새 서비스 계층 중 하나로 업그레이드하고 워크로드를 실행하고 <i>sys.resource_stats</i> 확인합니다. 기본 &amp; 표준 서비스 계층이 새 논리 서버에서만 사용할 수 있다는 현재 제한 사항은 미리 보기 과정에서 제거되므로 새 서비스 계층을 테스트하기 위해 웹 및 비즈니스 데이터베이스를 가져올 필요가 줄어듭니다.

  <h1>감사합니다!</h1>

  이 블로그 게시물이 새 서비스 계층의 성능에 대한 더 많은 인사이트를 제공했으면 합니다. 소개에서 설명한 대로 미리 보기 전체에서 피드백과 성능 목표의 품질을 평가하고 있으며 피드백을 배우고 수집할 때 성능 수준을 조정할 것입니다.


  다음은 몇 가지 추가 읽기입니다.

  <ul>
   <li><a href="https://msdn.microsoft.com/en-us/library/dn741336.aspx">Azure SQL Database 서비스 계층 및 성능 수준</a></li>
   <li><a href="https://msdn.microsoft.com/en-us/library/dn369873.aspx">Azure SQL 데이터베이스용 Basic, Standard 및 Premium 미리 보기</a></li>
   <li><a href="https://msdn.microsoft.com/en-us/library/dn741327.aspx">Azure SQL Database 벤치마크 개요</a></li>
  </ul>

  SQL Database 사용하고 미리 보기를 사용해 주셔서 감사합니다!


  /tobias &amp; SQL Database 팀
