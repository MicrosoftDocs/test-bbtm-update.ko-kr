### YamlMime:Yaml
ms.openlocfilehash: 77f03eaa4a3f28305808a65f97efd1700679f5a6
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139898524"
Slug: new-enhanced-dns-features-in-azure-firewall-now-generally-available
Title: 이제 일반 공급되는 Azure Firewall의 새로운 향상된 DNS 기능
Summary: 이제 Azure Firewall의 네트워크 규칙(비 HTTP/S 및 비 MSSQL 프로토콜의 경우)에서 사용자 지정 DNS, DNS 프록시 및 FQDN 필터링을 일반적으로 사용할 수 있습니다. 이 블로그에서는 Private Link에서 DNS 프록시를 사용하는 예제 사용 사례도 공유합니다.Azure Firewall은 클라우드 네이티브 FWaaS(Firewall as a Service) 제품으로, DevOps 방법을 사용하여 모든 트래픽 흐름을 중앙에서 제어하고 기록할 수 있습니다.
Content: >-
  <p><em>이 게시물은 Azure 네트워킹 기술 전문가인 Adam Stuart가 공동 저술했습니다.</em></p>


  <p>이제 Azure Firewall의 네트워크 규칙(비 HTTP/S 및 비 MSSQLprotocols&nbsp;)의 사용자 지정 DNS, DNS 프록시 및 FQDN 필터링을 일반 공급합니다. 이 블로그에서는 <a href="https://docs.microsoft.com/en-us/azure/private-link/private-link-overview" target="_blank">Private Link</a>에서 DNS 프록시를 사용하는 예제 사용 사례도 공유합니다.&nbsp;</p>


  <p>Azure Firewall은 클라우드 네이티브 FWaaS(Firewall as a Service) 제품으로, DevOps 방법을 사용하여 모든 트래픽 흐름을 중앙에서 제어하고 기록할 수 있습니다. 이 서비스는 애플리케이션, NAT 및 네트워크 수준 필터링을&nbsp; 모두 지원하며 알려진 악성 IP 주소 및 도메인을 필터링하기 위해 Microsoft Threat Intelligence 피드와 통합됩니다. Azure Firewall은 기본 제공 자동 크기 조정을 통해 고가용성입니다.</p>


  <h2>이제 사용자 지정 DNS 지원이 일반 공급됩니다.</h2>


  <p>2018년 9월에 출시된 이후 Azure Firewall은 서비스가 아웃바운드 종속성을 안정적으로 해결할 수 있도록 Azure DNS를 사용하도록 하드 코딩되었습니다. 사용자 지정 DNS를 사용하면 자체 DNS 서버를 사용하도록 Azure Firewall을 구성할 수 있으며, 방화벽 아웃바운드 종속성이 Azure DNS로 계속 확인되도록 할 수 있습니다. Azure Firewall 및 방화벽 정책 DNS 설정에서 단일 DNS 서버 또는 여러 서버를 구성할 수 있습니다.</p>


  <p>Azure Firewall은 <a href="https://docs.microsoft.com/en-us/azure/dns/private-dns-overview" target="_blank">Azure Private DNS</a>를 사용하여 이름을 확인할 수도 있습니다. Azure Firewall이 있는 Virtual Network는 Azure 프라이빗 영역에 <a href="https://docs.microsoft.com/en-us/azure/dns/private-dns-getstarted-portal#link-the-virtual-network" target="_blank">연결</a>되어야&nbsp; 합니다.</p>


  <h2>이제 DNS 프록시를 일반 공급</h2>


  <p>DNS 프록시를 사용하도록 설정하면 Azure Firewall에서 가상 네트워크에서 원하는 DNS 서버로 DNS 쿼리를 처리하고 전달할 수 있습니다. 이 기능은 중요하며 네트워크 규칙에서 신뢰할 수 있는 FQDN 필터링이 필요합니다. Azure Firewall 및 방화벽 정책 설정에서 DNS 프록시를 사용하도록 설정할 수 있습니다. DNS 프록시 로그에 대한 자세한 내용은 <a href="https://docs.microsoft.com/en-us/azure/firewall/logs-and-metrics" target="_blank">Azure Firewall 로그 및 메트릭 설명서를 참조하세요</a>.</p>


  <p>DNS 프록시 구성에는 다음 세 단계가 필요합니다.</p>


  <ol>
      <li>Azure Firewall DNS 설정에서 DNS 프록시를 사용합니다.</li>
      <li>필요에 따라 사용자 지정 DNS 서버를 구성하거나 제공된 기본값을 사용합니다.</li>
      <li>마지막으로 가상 네트워크 DNS 서버 설정에서 Azure Firewalls&rsquo; 개인 IP 주소를 사용자 지정 DNS 서버로 구성해야 합니다. 이렇게 하면 DNS 트래픽이 Azure Firewall로 전송됩니다.</li>
  </ol>


  <p>DNS 프록시는 TCP 포트 53에서 요청을 수신 대기하고 Azure DNS 또는 지정된 사용자 지정 DNS로 전달합니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/d8170918-450e-49df-b552-e2a1387f9225.png"><img alt="Custom DNS and DNS Proxy settings on Azure Firewall." border="0" height="439" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/d944b156-02e4-4e7b-94d3-94e85d72d8c7.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="Azure Firewall의 사용자 지정 DNS 및 DNS 프록시 설정" width="780"></a></p>


  <p><em>그림 1. Azure Firewall의 사용자 지정 DNS 및 DNS 프록시 설정입니다.</em></p>


  <h2>이제 네트워크 규칙의 FQDN 필터링을 일반 공급</h2>


  <p>이제 Azure Firewall 및 방화벽 정책의 DNS 확인에 따라 네트워크 규칙에서 FQDN(정규화된 도메인 이름)을 사용할 수 있습니다. 규칙 컬렉션에서 지정된 FQDN은 방화벽 DNS 설정에 따라 IP 주소로 변환됩니다. 이 기능을 사용하면 TCP/UDP 프로토콜(NTP, SSH, RDP 등 포함)에서 FQDN을 사용하여 아웃바운드 트래픽을 필터링할 수 있습니다. 이 기능은 DNS 확인을 기반으로 하므로 보호된 가상 머신 및 방화벽에 대해 이름 확인이 일관되도록 DNS 프록시를 사용하도록 설정하는 것이 좋습니다.</p>


  <p><em>&rsquo;<strong>애플리케이션 규칙</strong>에서 FQDN 필터링 간의 차이점은 네트워크 규칙을 역으로 표시<strong>하나요</strong>?&nbsp;</em></p>


  <p>HTTP/S 및 MSSQL에 대한 애플리케이션 규칙의 FQDN 필터링은 애플리케이션 수준 투명 프록시를 기반으로 합니다. 따라서 동일한 IP 주소로 확인되는 두 FQDN을 구별할 수 있습니다. 네트워크 규칙에서 FQDN 필터링의 경우는 그렇지 않으므로 가능하면 항상 애플리케이션 규칙을 사용하는 것이 좋습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/63afc3ee-26e1-4af7-9c96-75f6d91725a5.png"><img alt="FQDN filtering in network rules." border="0" height="64" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ae523b5c-6a42-46c1-a376-fbb9cd2e641b.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="네트워크 규칙의 FQDN 필터링" width="1024"></a></p>


  <p><em>그림 2. 네트워크 규칙의 FQDN 필터링</em></p>


  <h2>Azure Firewall을 DNS 프록시로 사용하여 온-프레미스에서 프라이빗 엔드포인트 액세스 사용</h2>


  <p><a href="https://docs.microsoft.com/en-us/azure/private-link/private-link-overview" target="_blank">Azure Private Link</a> 는 <a href="https://docs.microsoft.com/en-us/azure/private-link/private-endpoint-overview" target="_blank">프라이빗 엔드포인트</a>를 사용하여 프라이빗 연결을 통해 스토리지 계정, 앱 서비스 등을 포함한 Microsoft PaaS 서비스에 연결하는 기능을 제공합니다. 프라이빗 엔드포인트는 Azure Private Link에서 제공하는 PaaS 서비스에 개인적이고 안전하게 연결하는 네트워크 인터페이스입니다. 프라이빗 엔드포인트는 VNet(Virtual Network)의 개인 IP 주소를 사용하여&nbsp; 클라우드의 프라이빗 네트워크 내에 서비스를 효과적으로 가져옵니다. 이 접근 방식은&nbsp; PaaS 서비스의 공용 IP 주소에 대한 노출 및 접근성을 제거하여 추가적인 보안 이점을 제공합니다.</p>


  <p>Azure Private Link의 가장 큰 이점 중 하나는 개인 주소 하이브리드 연결(예: <em>Azure ExpressRoute 프라이빗 피어링</em> 또는 <em>사이트간 VPN</em>)을 통해 Microsoft PaaS 서비스를 사용할 수 있다는 것입니다. 그러나 이러한 이점은 프라이빗 엔드포인트에 매핑되는 DNS 레코드의 자동화된 수명 주기 관리를 활용하기 위해 <a href="https://docs.microsoft.com/en-us/azure/private-link/private-endpoint-dns#on-premises-workloads-using-a-dns-forwarder" target="_blank">온-프레미스에서 Azure 프라이빗 DNS로 DNS 요청을 전달하는 과제</a> 와 함께 제공됩니다.</p>


  <p>Private Link를&nbsp; 활용하는 각 AzurePaaS&nbsp; 서비스는 Azure 프라이빗 DNS 영역에 매핑되고 저장된 지정된&nbsp; FQDN입니다. Azure DNS 프라이빗 영역으로 전송된 요청은 Azure의 인사이드에서&nbsp; <a href="https://docs.microsoft.com/en-us/azure/virtual-network/what-is-ip-address-168-63-129-16" target="_blank">168.63.129.16that</a>&nbsp;&nbsp;의 플랫폼 주소로 이동합니다. 따라서 DNS 요청이 온-프레미스(Azure 외부)에서 시작되는 경우 AVirtual Network 내의&nbsp; 서비스를 통해 DNS 요청을 프록시해야 하는 요구 사항이 있습니다.</p>


  <p>이 일반 공급 공지와 함께 <strong>Azure FirewallDNS&nbsp; 프록시</strong> 는 <a href="https://docs.microsoft.com/en-us/azure/architecture/reference-architectures/hybrid-networking/hub-spoke" target="_blank">허브 및 스포크 모델에</a> 적용할 수 있는 이 DNS 전달 요구 사항을 충족하는 옵션입니다. 이렇게&nbsp; 하려면 <a href="https://docs.microsoft.com/en-us/azure/private-link/private-endpoint-dns#azure-services-dns-zone-configuration" target="_blank">필요한 영역 이름</a>에 대한 요청을Azure Firewall에 조건부로 전달하도록&nbsp; 온-프레미스 DNS 서버를 구성합니다. 프라이빗 DNS 영역이 Azure Firewall이 있는 Virtual Network에 연결되어 있는지 확인합니다. 조회에 기본 Azure DNS를 사용하도록 Azure Firewall을 구성하고 Azure Firewall DNS 설정에서 DNS 프록시를 사용하도록 설정합니다.&nbsp; DNS 프록시에 대한 자세한 내용은 <a href="https://docs.microsoft.com/en-us/azure/firewall/dns-settings" target="_blank">DNS 설정 설명서를 참조하세요</a>.</p>


  <h2>다음 단계</h2>


  <p>이 블로그 게시물에서 다루는 모든 항목에 대한 자세한 내용은 다음을 확인&nbsp;하세요.</p>


  <ul>
      <li><a href="https://docs.microsoft.com/en-us/azure/firewall/" target="_blank">Azure Firewall 설명서</a></li>
      <li><a href="https://docs.microsoft.com/en-us/azure/firewall/fqdn-filtering-network-rules" target="_blank">네트워크 규칙에서 FQDN 필터링 사용</a></li>
      <li><a href="https://docs.microsoft.com/en-us/azure/firewall/dns-settings" target="_blank">Azure Firewall DNS 설정</a></li>
      <li><a href="https://github.com/adstuart/azure-privatelink-dns-azurefirewall" target="_blank">Private Link를 사용하여 Azure Firewall을 DNS 전달자로 사용</a></li>
  </ul>


  <p>Azure 네트워크 보안 디지털 이벤트에 <a href="https://info.microsoft.com/ww-landing-Network-Security-2020.html?ocid=AID3025106_QSG_487434" target="_blank">지금 등록</a>하여 Azure Firewall에 대해 자세히 알아보고 제로 트러스트 접근 방식을 사용하여 네트워크를 보호하고 사이버 보안 공격으로부터 보호하는 방법을 알아봅니다.</p>
