### YamlMime:Yaml
ms.openlocfilehash: e7eb0868d386e9359bba0cdd6aef7b131662dedf
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139906995"
Slug: understanding-health-criteria-in-azure-monitor-for-vms
Title: VM용 Azure Monitor의 상태 조건 이해
Summary: VM(가상 머신)에 대한 Azure Monitor는 다양한 관점에서 VM을 보는 데 도움이 되는 다양한 VM 모니터링 기능을 제공합니다.
Content: "<p>VM(가상 머신용 Azure Monitor)은 다양한 관점에서 VM을 보는 데 도움이 되는 수많은 모니터링 기능을 제공합니다. 이러한 관점 중 몇 가지는 다음과 같습니다.</p>\n\n<ol>\n <li><strong>VM 및 해당 구성 요소의 상태입니다.</strong> 이렇게 하면 운영 체제, 핵심 구성 요소 및 DNS(Domain Name System), DHCP(동적 호스트 구성 프로토콜) 등과 같은 서비스의 문제를 모니터링, 진단 및 지역화할 수 있습니다. 또한 VM의 CPU, 메모리, 디스크 및 네트워크 어댑터와 관련된 성능 문제를 식별합니다.</li>\n <li><strong>성능 추세입니다.</strong> 이러한 추세는 시간 경과에 따른 CPU, 메모리, 디스크 및 네트워크 어댑터 성능 메트릭의 성능을 보여 줍니다.</li>\n <li><strong>지도 - 연결 토폴로지 및 메트릭.</strong> 이렇게 하면 VM에서 실행되는 프로세스와 VM 간의 상호 작용뿐만 아니라 중요한 이벤트 및 경고를 보여 주는 시각적 맵이 제공됩니다.</li>\n</ol>\n\n<p>VM용 Azure Monitor는 거의 실시간으로 VM의 상태 조건이라는 다양한 통조림 조건 집합을 평가하고 상태 조건이 위험/경고 상태로 전환되면 경고를 트리거합니다(경고는 기본적으로 켜져 있지만 동작을 변경할 수 있음). 예를 들어 CPU 사용률 상태 기준이 위험 상태인 경우 CPU 사용률이 너무 높다&rdquo;는 경고&ldquo;가 발생합니다. 포털의 경고 피벗에서 Azure Monitor의 다른 경고를 관리하는 것처럼 상태 경고를 관리할 수 있습니다.</p>\n\n<p>각 상태 조건에 대한 경고를 만드는 것에 대해 더 이상 걱정할 필요가 없습니다. 각 조건의 전체 목록은 설명서를 &quot; 참조<a href=\"https://docs.microsoft.com/en-us/azure/monitoring/monitoring-vminsights-health?toc=/azure/azure-monitor/toc.json\" target=\"_blank\">하세요. VM용 Azure Monitor(미리 보기)를 사용하여 Azure 가상 머신의 상태를 이해합니다.</a>&quot;</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/4b32f7ef-9301-4d2f-b80f-4054b7b4cc87.png\"><img alt=\"Available Megabytes of Memory\" border=\"0\" height=\"257\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/980a5359-8fc7-4a18-b407-90338ec453cb.png\" style=\"margin: 0px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;\" title=\"사용 가능한 메모리 메가바이트\" width=\"640\"></a></p>\n\n<p>상태 조건이 경고를 발생할지 여부를 이해하려면 VM 환경별 상태 조건 링크를 클릭하여 구성을 확인합니다.</p>\n\n<h2>API 활용</h2>\n\n<p>VM에 대한 상태 모니터링과 관련된 대부분의 작업에 Azure Portal을 사용할 수 있지만 API를 통해서만 액세스할 수 있는 특정 속성 및 구성이 있습니다. 또한 API를 사용하여 일부 작업을 자동화하는 것이 좋습니다. API를 둘러보고 특정 시나리오에 활용할 수 있는 방법을 알아봅니&rsquo;다.</p>\n\n<p>1. 특정 VM에서 적용 가능하거나 활성화된 상태 조건을 식별하고 다른 API 관련 작업에 필요한 ID를 얻으려면 아래 표시된 명령 프롬프트에서 ARM 클라이언트를 활용하는 다음 GET API 예제를 사용합니다.</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/b90cfc1e-f829-419b-8fb5-4492dff03039.png\"><img alt=\"GET API example leveraging ARM client on command\" border=\"0\" height=\"586\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ed3fd451-7947-457e-a2ea-269468f0c73e.png\" style=\"margin: 0px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;\" title=\"명령에서 ARM 클라이언트를 활용하는 GET API 예제\" width=\"1066\"></a></p>\n\n<pre>\n&quot;subscriptions/<strong>Subscription_Name</strong>/resourceGroups/<strong>Resource_Group_Name</strong>/providers/Microsoft.Compute/virtualMachines/<strong>VM_Name</strong>/providers/Microsoft.WorkloadMonitor/monitors?api-version=2018-08-31-preview&rdquo;</pre>\n\n<p>2. 상태 업데이트에는 <strong>빈도</strong> 및 <strong>조회</strong> 기간의 두 가지 추가 매개 변수가 적용됩니다. 빈도는 상태 기준이 실행되는 속도이며, 조회는 기준이 평가되는 기간입니다. 예를 들어 상태 기준이 CPU 사용률이 95%보다 크고 빈도가 5분이고 조회 기간이 15분인 경우를 평가합니다. 즉, CPU 사용률이 95%보다 큰지 여부는 5분마다 평가되지만 15분 동안 95%(3회 연속 평가 주기)로 유지되면 상태가 아직 중요하지 않은&rsquo; 경우 중요 상태로 업데이트됩니다.</p>\n\n<p>현재 빈도 및 조회 기간은 UI에 노출되지 않습니다. 그러나 API를 사용하여 이러한 값을 가져올 수 있습니다. 아래는 명령 프롬프트에서 ARM 클라이언트를 활용하는 예제입니다.</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ce2ba1f8-4177-49d2-963c-651a71532fe0.png\"><img alt=\"An example leveraging ARM client on command\" border=\"0\" height=\"484\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/af67fdbf-63b4-4e7d-9217-dd52d2e3fee3.png\" style=\"margin: 0px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;\" title=\"명령에서 ARM 클라이언트를 활용하는 예제\" width=\"1186\"></a></p>\n\n<pre>\n&quot;subscriptions/<strong>Subscription_Name</strong>/resourceGroups/Resource_Group_Name/providers/Microsoft.Compute/virtualMachines/VM_Name/providers/Microsoft.WorkloadMonitor/monitors/Monitor_ID?api-version=2018-08-31-preview&rdquo;</pre>\n\n<p><em>참고: 빈도 및 조회 기간 수정은&rsquo; 현재 사용할 수 없습니다. </em></p>\n\n<p>3. 상태 기준에 대한 경고를 사용하거나 사용하지 않도록 설정합니다. 예를 들어 상태 기준에서 경고를 사용하도록 설정하고 사용하지 않도록 설정하려는 경우 다음 식을 사용할 수 있습니다.</p>\n\n<pre>\narmclient patch \n\n&ldquo;subscriptions/<strong>Subscription_Name</strong>/resourceGroups/<strong>Resource_Group_Name</strong>/providers/Microsoft.Compute/virtualMachines/<strong>VM_Name</strong>/providers/Microsoft.WorkloadMonitor/monitors/Monitor_ID?api-version=2018-08-31-preview 1-preview &quot;{&#39;properties&#39;:{&#39;alertGeneration&#39;:&rsquo;Disabled&rsquo; }}&quot;</pre>\n\n<p>4. 상태 조건의 임계값을 업데이트합니다.</p>\n\n<pre>\narmclient patch\n\nsubscriptions/<strong>Subscription_Name</strong>/resourceGroups/<strong>Resource_Group_Name</strong>/providers/Microsoft.Compute/virtualMachines/<strong>VM_Name</strong>/providers/Microsoft.WorkloadMonitor/monitors/<strong>Monitor_ID</strong>?api-version=2018-08-31-preview 1-preview &quot;{&#39;properties&#39;:{&#39;Threshold&#39;:<strong>&rsquo;Desired_Value&rsquo;</strong> }}&quot;</pre>\n\n<p>원하는 편집을 수행한 후 지점 번호에 강조 표시된 GET API를 사용할 수 있습니다. 위의 2는 구성이 업데이트되었는지 여부를 이해합니다. 포털에서 유효성을 검사할 수도 있습니다.</p>\n\n<p>5. 작업 그룹을 VM&rsquo; <strong>상태</strong> 조건과 연결합니다.</p>\n\n<p><strong>file_name</strong>&rdquo; 파일을 &ldquo; 만들고 확장자를 .json&rdquo;으로 &ldquo;업데이트합니다.</p>\n\n<p>해당 내용은 다음과 같습니다.</p>\n\n<pre>\n{\n   properties: {\n     &quot;ActionGroupResourceIds&quot;: [\n       &quot;/subscriptions/a7f23fdb-e626-4f95-89aa-3a360a90861e/resourceGroups/default-activitylogalerts/providers/microsoft.insights/actionGroups/SampleAG2&quot;\n     ]\n   }\n}</pre>\n\n<p>다음 PUT API를 사용하여 작업 그룹을 VM에 연결합니다(VM용 Azure Monitor에서 트리거하는 상태 경고의 경우).</p>\n\n<pre>\narmclient PUT\nhttps://eastus2euap.management.azure.com/subscriptions/a7f23fdb-e626-4f95-89aa-3a360a90861e/resourceGroups/AzharRG/providers/Microsoft.Compute/virtualMachines/mdavm/providers/Microsoft.WorkloadMonitor/notificationSettings/default?api-version=2018-08-31-preview&quot;  @<strong>file_name</strong>.json (JSON Script)</pre>\n\n<p>설정이 올바르게 업데이트되었는지 확인하려면 다음 GET API를 사용합니다.</p>\n\n<pre>\narmclient GET\n\n&quot;subscriptions/<strong>Subscription_Name</strong>/resourceGroups/<strong>Resource_Group_Name</strong>/providers/Microsoft.Compute/virtualMachines/<strong>VM_Name</strong>/providers/Microsoft.WorkloadMonitor/notificationSettings?api-version=2018-08-31-preview&quot;</pre>\n\n<p>API 표면을 자세히 살펴보려면 <a href=\"https://apac01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fdocs.microsoft.com%2Fen-us%2Frest%2Fapi%2Fmonitor%2Fmicrosoft.workloadmonitor%2Fcomponents&amp;data=02%7C01%7C%7C65d0c096562c40bc271f08d676d13e19%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636827038382032496&amp;sdata=JhfrAqPZ7Bn4fJqM8jnIyZJ5LCSChE9BKAoHchrKI1g%3D&amp;reserved=0\" target=\"_blank\">GitHub</a> 게시된 swagger를 살펴봅니다.</p>"
