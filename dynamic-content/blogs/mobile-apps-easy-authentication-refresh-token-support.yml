### YamlMime:Yaml
ms.openlocfilehash: ec222b09abcdd546471827f17d184b78a7e0b02b
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139905354"
Slug: mobile-apps-easy-authentication-refresh-token-support
Title: App Service Mobile Apps에서 사용자 로그인 새로 고침
Summary: 인증 기능에 대한 새로 고침 토큰으로 구운 Azure Mobile Apps는 이제 앱 사용자를 로그인 상태로 유지하는 것이 매우 간단합니다.
Content: "<p>&nbsp;</p>\n\n<p>Azure App Service&#39;인증/권한 부여 기능을 사용하면 클라이언트 흐름 또는 서버 흐름을 사용하든 앱 인증을 매우 간단하게 사용할 수 있습니다. 그러나 이전에 토큰 기반 인증을&#39;경우 토큰 만료 및 새로 고침이 번거로울 수 있습니다. 인증 공급자에 따라 토큰 만료 범위는 분에서 월까지 다양할 수 있습니다. Facebook은 60일 만료되는 반면, Google, Azure AD 및 Azure Mobile Apps의 다른 일반적인 공급자는 1시간 만료됩니다. Azure <a href=\"https://shellmonger.com/2016/04/13/30-days-of-zumo-v2-azure-mobile-apps-day-7-refresh-tokens/\">Mobile Apps의 30일: 7일 - 새로 고침 토큰</a> 게시물에 자세히 설명된 것과 유사하게 앱 사용자 인증 및 클라이언트 환경을 보장하기 위해 코드에서 이러한 작업을 처리해야 했을 것입니다.</p>\n\n<p>이 토큰 새로 고침 환경을 간소화하기 위해 최근에 인증<a href=\"https://azure.microsoft.com/en-us/documentation/articles/app-service-authentication-overview/\">/권한 부여</a>&rsquo; 클라이언트 SDK에 <a href=\"https://tools.ietf.org/html/rfc6749#section-1.5\">인증 2.0s&rsquo; 새로 고침 토큰</a>을 구웠습니다. 인증&rsquo;을 위해 고유한 새로 고침 논리를 추가하는 대신 관리되는 <a href=\"https://www.nuget.org/packages/Microsoft.Azure.Mobile.Client\">Azure Mobile Client SDK 2.1.0</a>에서 기본 제공 토큰 새로 고침 기능을 사용하는 방법을 설명합니다. 앱 사용자를 로그인 상태로 유지하기 위한 이상 버전입니다.</p>\n\n<p>이 기능은 서버 관리 인증 흐름에만 사용할 수 있습니다. 또한 주말 동안 보안과 앱&#39;비활성 상태인 경우 Mobile Apps 인증 토큰이 72시간 이상 만료되지 않는 한 새로 고침 토큰을 얻을 수 있습니다(자세한 내용은 <a href=\"https://cgillum.tech/2016/03/07/app-service-token-store/\">Chris Gillum&#39;게시물</a> 참조).</p>\n\n<h4>ID 공급자와 함께 새로 고침 토큰을 사용하는 방법</h4>\n\n<p><a href=\"https://azure.microsoft.com/en-us/documentation/articles/app-service-mobile-how-to-configure-microsoft-authentication/\">Microsoft 계정</a>, <a href=\"https://azure.microsoft.com/en-us/documentation/articles/app-service-mobile-how-to-configure-google-authentication/\">Google</a> 또는 <a href=\"https://azure.microsoft.com/en-us/documentation/articles/app-service-mobile-how-to-configure-active-directory-authentication/\">Azure Active Directory</a> 대한 방법(<a href=\"https://azure.microsoft.com/en-us/documentation/articles/app-service-mobile-how-to-configure-facebook-authentication/\">Facebook</a> 및 <a href=\"https://azure.microsoft.com/en-us/documentation/articles/app-service-mobile-how-to-configure-twitter-authentication/\">Twitter</a>는 지원되지 않음)에 따라 모바일 앱으로 원하는 ID 공급자를 성공적으로 설정했음을 가정합니다.</p>\n\n<p><u>Microsoft 계정</u></p>\n\n<p>포털 &gt; <em>설정</em> 인증/권한 부여 &gt; Microsoft 계정에서 wl.offline_access &gt; 범위를 사용하도록 설정합니다.</p>\n\n<p><img alt=\"clip_image002\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/91a1392a-bb41-41e8-8825-20bdd7eef2c2.jpg\" style=\"border-image: none; width: 400px; height: 319px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;\" title=\"clip_image002\"></p>\n\n<p>그런 다음 다음 코드 조각은 서버 관리 인증 워크플로에서 사용자를 새로 고치는 데 도움이 됩니다.</p>\n\n<pre class=\"prettyprint\">\nMobileServiceUser user = await client.LoginAsync(MobileServiceAuthenticationProvider.MicrosoftAccount);          \n//...\nuser = await client.RefreshUser();\n</pre>\n\n<p><u>Google</u></p>\n\n<p>서버 관리 인증 워크플로에서 <em>MobileServiceClient.LoginAsync()</em>에서 추가 매개 변수<em>(access_type=오프라인</em>)를 전달합니다.</p>\n\n<pre class=\"prettyprint\">\nMobileServiceUser user = await client.LoginAsync(MobileServiceAuthenticationProvider.Google, \n\n                new Dictionary&lt;string, string&gt;() {{ &quot;access_type&quot;, &quot;offline&quot; }});\n//...\nuser = await client.RefreshUser();</pre>\n\n<p><u>AAD</u></p>\n\n<p>Azure Resource Explorer에서 AAD 클라이언트 암호를 구성한 후<s>(방법을 모르는&#39;경우 <a href=\"https://shellmonger.com/2016/04/13/30-days-of-zumo-v2-azure-mobile-apps-day-7-refresh-tokens/\">여기</a> Azure 리소스 탐색기 코드 조각 참조)</s> [업데이트 9/22: 이제 포털 &gt; 설정 인증/권한 부여 &gt; Azure Active Directory]에서 AAD &gt; 클라이언트 비밀을 구성할 수 <em>있습니다. 서버 관리 인증 흐름의 MobileServiceClient.LoginAsync()</em>.</p>\n\n<pre class=\"prettyprint\">\nMobileServiceUser user = await client.LoginAsync(MobileServiceAuthenticationProvider.WindowsAzureActiveDirectory, \n\n                new Dictionary&lt;string, string&gt;() {{ &quot;response_type&quot;, &quot;code id_token&quot; }});\n//...\nuser = await client.RefreshUser();\n</pre>\n\n<div>&nbsp;</div>\n\n<h4>새로 고침 오류 처리</h4>\n\n<p>RefreshUser는 다음 요구 사항이 <em>모두</em> 충족되는 경우에만 작동합니다.</p>\n\n<ol>\n <li>ID 공급자는 OAuth 2.0s&rsquo; 새로 고침 토큰을 지원합니다. Microsoft 계정, Google 및 Azure Active Directory 새로 고침 토큰을 지원하지만 Facebook과 Twitter는 지원하지 않습니다.</li>\n <li>새로 고침 토큰을 사용하는 데 필요한 권한/범위는 개발자가 부여합니다(예: Microsoft 계정의 <em>경우 wl.offline</em> 범위, Google 계정의 <em>경우 오프라인 access_type</em>, Azure Active Directory 계정에 대한 코드 <em>reponse_type</em>).</li>\n <li>액세스 토큰 또는 새로 고침 토큰은 개발자가 해지하지 않습니다.</li>\n <li><em>MobileServiceAuthenticationToken</em> 이 72시간 이상 만료되지 않았습니다.</li>\n</ol>\n\n<p>다음은 새로 고침 호출로 발생할 수 있는 몇 가지 오류입니다.</p>\n\n<table border=\"1\" bordercolor=\"#ccc\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n <tbody>\n  <tr>\n   <td valign=\"top\" width=\"253\">\n   <p><b>오류</b></p>\n   </td>\n   <td valign=\"top\" width=\"895\">\n   <p><b>적용 근거</b></p>\n   </td>\n   <td valign=\"top\" width=\"498\">\n   <p><b>어떻게 해야 할까요?</b></p>\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\" width=\"253\">\n   <p>400 잘못된 요청</p>\n   </td>\n   <td valign=\"top\" width=\"899\">\n   <ol>\n    <li>\n    <p align=\"left\">오프라인 권한/범위 부족</p>\n    </li>\n    <li>\n    <p align=\"left\">ID 공급자(즉, Facebook, Twitter)는 새로 고침 토큰을 지원하지 않습니다.</p>\n    </li>\n   </ol>\n   </td>\n   <td valign=\"top\" width=\"524\">\n   <p>사용자에게 다시 로그인하라는 메시지를 표시합니다.</p>\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\" width=\"257\">\n   <p>401 권한 없음</p>\n   </td>\n   <td valign=\"top\" width=\"895\">\n   <ol>\n    <li>\n    <p><em>MobileServiceAuthenticationToken</em> 이 잘못되었습니다.</p>\n    </li>\n    <li>\n    <p><em>MobileServiceAuthenticationToken</em> 이 72시간 이상 만료됨</p>\n    </li>\n   </ol>\n   </td>\n   <td valign=\"top\" width=\"495\">\n   <p>사용자에게 다시 로그인하라는 메시지를 표시합니다.</p>\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\" width=\"253\">\n   <p>403 사용할 수 없음</p>\n   </td>\n   <td valign=\"top\" width=\"895\">\n   <ol>\n    <li>\n    <p>액세스 토큰이 해지됨</p>\n    </li>\n    <li>\n    <p>새로 고침 토큰이 해지됨</p>\n    </li>\n    <li>\n    <p>사용자 권한이 취소됨</p>\n    </li>\n   </ol>\n   </td>\n   <td valign=\"top\" width=\"524\">\n   <p>사용자에게 다시 로그인하라는 메시지를 표시합니다.</p>\n   </td>\n  </tr>\n </tbody>\n</table>\n\n<p>&nbsp;</p>\n\n<p>그것을 시도하고 우리가 당신이 어떻게 생각하는지 알려주세요!</p>"
