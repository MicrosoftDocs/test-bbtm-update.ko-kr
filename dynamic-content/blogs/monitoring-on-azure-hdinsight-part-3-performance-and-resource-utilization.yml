### YamlMime:Yaml
ms.openlocfilehash: 1e1b54843f96d7d6eb4bff5f7d209aec83411c16
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139898542"
Slug: monitoring-on-azure-hdinsight-part-3-performance-and-resource-utilization
Title: 'Azure HDInsight 모니터링 3부: 성능 및 리소스 사용률'
Summary: CPU, 메모리 및 네트워크 사용량과 같은 메트릭을 탭하여 Azure HDInsight에서 성능 및 리소스 사용률을 모니터링하여 클러스터가 워크로드를 처리하는 방법과 작업을 완료할 충분한 리소스가 있는지 여부를 더 잘 이해하는 방법을 알아봅니다.
Content: >-
  <p><em style="border-bottom-color: currentColor; border-bottom-style: none; border-bottom-width: 0px; border-image-outset: 0; border-image-repeat: stretch; border-image-slice: 100%; border-image-source: none; border-image-width: 1; border-left-color: currentColor; border-left-style: none; border-left-width: 0px; border-right-color: currentColor; border-right-style: none; border-right-width: 0px; border-top-color: currentColor; border-top-style: none; border-top-width: 0px; color: rgb(67, 67, 67); font-family: inherit; font-size: 100%; font-style: italic; font-variant: normal; font-weight: inherit; letter-spacing: normal; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; orphans: 2; outline-color: invert; outline-style: none; outline-width: 0px; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; text-align: left; text-decoration: none; text-indent: 0px; text-transform: none; vertical-align: baseline; -webkit-text-stroke-width: 0px; white-space: normal; word-spacing: 0px;">Azure HDInsight의 모니터링에 대한 4부로 구성된 시리즈의 세 번째 블로그 게시물입니다. </em> <em style="border-bottom-color: currentColor; border-bottom-style: none; border-bottom-width: 0px; border-image-outset: 0; border-image-repeat: stretch; border-image-slice: 100%; border-image-source: none; border-image-width: 1; border-left-color: currentColor; border-left-style: none; border-left-width: 0px; border-right-color: currentColor; border-right-style: none; border-right-width: 0px; border-top-color: currentColor; border-top-style: none; border-top-width: 0px; color: rgb(67, 67, 67); font-family: inherit; font-size: 100%; font-style: italic; font-variant: normal; font-weight: inherit; letter-spacing: normal; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; orphans: 2; outline-color: invert; outline-style: none; outline-width: 0px; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; text-align: left; text-decoration: none; text-indent: 0px; text-transform: none; vertical-align: baseline; -webkit-text-stroke-width: 0px; white-space: normal; word-spacing: 0px;"><a href="https://azure.microsoft.com/en-in/blog/monitoring-on-hdinsight-part-1-an-overview/" target="_blank">1부</a>에서는 클러스터 상태 및 가용성, 리소스 사용률 및 성능, 작업 상태 및 로그의 세 가지 주요 모니터링 범주를 설명하는 개요입니다. </em> <em style="border-bottom-color: currentColor; border-bottom-style: none; border-bottom-width: 0px; border-image-outset: 0; border-image-repeat: stretch; border-image-slice: 100%; border-image-source: none; border-image-width: 1; border-left-color: currentColor; border-left-style: none; border-left-width: 0px; border-right-color: currentColor; border-right-style: none; border-right-width: 0px; border-top-color: currentColor; border-top-style: none; border-top-width: 0px; color: rgb(67, 67, 67); font-family: inherit; font-size: 100%; font-style: italic; font-variant: normal; font-weight: inherit; letter-spacing: normal; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; orphans: 2; outline-color: invert; outline-style: none; outline-width: 0px; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; text-align: left; text-decoration: none; text-indent: 0px; text-transform: none; vertical-align: baseline; -webkit-text-stroke-width: 0px; white-space: normal; word-spacing: 0px;"><a href="https://azure.microsoft.com/en-us/blog/monitoring-on-azure-hdinsight-part-2-cluster-health-and-availability/" target="_blank">2부</a>에서는 첫 번째 항목을 중심으로 클러스터 상태 및 가용성을 모니터링합니다. 이 블로그에서는 두 번째 항목, 성능 및 리소스 사용률에 대해 자세히</em> 설명합니다.</p>


  <hr>

  <p>성능 및 리소스 사용률 모니터링은 클러스터가 실행되는 방식에 대한 더 나은 인사이트를 얻는 기본적인 방법입니다. CPU, 메모리 및 네트워크 사용량과 같은 메트릭에 대한 탭을 유지하여 클러스터가 워크로드를 처리하는 방법과 작업을 완료하기에 충분한 리소스가 있는지 여부를 더 잘 이해할 수 있습니다. Azure HDInsight는 클러스터 리소스 사용률을 모니터링하는 데 사용할 수 있는 두 가지 도구인 Apache Ambari 및 Azure Monitor 로그와의 통합을 제공합니다. Apache Ambari는 모든 Azure HDInsight 클러스터에 포함되며 클러스터를 모니터링하고 구성 변경을 수행하는 데 사용할 수 있는 사용하기 쉬운 웹 UI를 제공합니다. Azure Monitor 로그는 HDInsight 클러스터를 비롯한 여러 리소스에서 Log Analytics 작업 영역으로 메트릭 및 로그를 수집합니다. Log Analytics 작업 영역은 사용자 지정 경고를 구성하는 데 사용할 수 있는 구조화된 쿼리 가능한 테이블로 메트릭 및 로그를 표시합니다.</p>


  <h2>Apache Ambari</h2>


  <h3>대시보드</h3>


  <p>Ambari 대시보드에는 클러스터를 한눈에 볼 수 있는 개요를 제공하도록 설계된 메트릭을 보여 주는 수많은 위젯이 포함되어 있습니다. 이러한 위젯은 클러스터 CPU, 메모리 및 네트워크 사용량과 같은 일반 사용 메트릭뿐만 아니라 Spark/Hadoop 클러스터에 대한 YARN ResourceManager 정보 및 Kafka 클러스터에 대한 브로커 정보와 같은 특정 클러스터 유형에 관련된 메트릭을 표시합니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/591d1972-eae4-4a7d-a001-7216bf374a26.png"><img alt="ambari_dashboard" border="0" height="932" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/42ba112f-cd68-435f-b1cd-9e963f7fb87e.png" style="border: 0px currentcolor; margin-right: auto; margin-left: auto; display: block; background-image: none;" title="ambari_dashboard" width="1724"></a></p>


  <p align="center"><em>모든 Azure HDInsight 클러스터에 포함된 Ambari 대시보드입니다.</em></p>


  <h3>호스트</h3>


  <p>또한 Ambari는 노드별로 사용률 메트릭을 볼 수 있는 호스트 탭을 제공합니다. 호스트 탭에는 클러스터의 모든 노드에 대해 눈에 띄는 통계가 표시됩니다. 노드 이름을 선택하면 호스트 메트릭에 대한 그래프를 보여 주는 해당 노드에 대한 자세한 보기가 열립니다.</p>


  <div class="row" style="display: flex;">

  <div class="left" style="float: left; width:50%; display: flex; align-items: center;"><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/557810c8-d1f7-43a4-93d1-378e5657f2c2.png"><img alt="hosts_view" border="0" height="480" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1d3b63e4-92fb-441a-b474-2879f31a9c9e.png" style="border: 0px currentcolor; margin-right: auto; margin-left: auto; display: block; background-image: none;" title="hosts_view" width="337"></a></div>


  <div class="right" style="float: left; width:50%; display: flex; align-items: center;"><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/be824da9-02ac-4529-b1be-5607b125cacf.png"><img alt="hosts_cpu" border="0" height="451" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7443877d-2292-448a-820a-08980554bc36.png" style="border: 0px currentcolor; margin-right: auto; margin-left: auto; display: block; background-image: none;" title="hosts_cpu" width="640"></a></div>

  </div>


  <p align="center"><em>Ambari 호스트 보기에는 클러스터의 개별 노드에 대한 자세한 사용률 정보가 표시됩니다.</em></p>


  <p>특정 사용률 호스트 메트릭으로 자세히 드릴다운하려면 그래프를 선택하여 해당 그래프에 표시된 메트릭의 분석 결과를 표시합니다.</p>


  <h3>경고</h3>


  <p>또한 Ambari는 특정 이벤트에 대한 알림을 제공할 수 있는 몇 가지 구성 가능한 경고를 제공합니다. 경고는 HDInsight 4.0의 Ambari 오른쪽 위 모서리에 활성 경고 알림 수가 포함된 빨간색 배지와 함께 벨 아이콘으로 표시됩니다.</p>


  <p>Ambari는 다음을 포함하여 성능을 모니터링하는 데 사용할 수 있는 여러 미리 정의된 경고를 제공합니다.</p>


  <table border="1" cellpadding="0" cellspacing="0">
      <tbody>
          <tr>
              <td style="width: 312px;">
              <p>경고 이름</p>
              </td>
              <td style="width: 312px;">
              <p>Description</p>
              </td>
          </tr>
          <tr>
              <td style="width: 312px;">
              <p>ResourceManager CPU 사용률</p>
              </td>
              <td style="width: 312px;">
              <p>ResourceManager의 CPU 사용률이 특정 경고 및 위험 임계값을 초과하는 경우 이 호스트 수준 경고가 트리거됩니다. SystemCPULoad 속성에 대한 ResourceManager JMX Servlet을 확인합니다.</p>
              </td>
          </tr>
          <tr>
              <td style="width: 312px;">
              <p>HBase 마스터 CPU 사용률</p>
              </td>
              <td style="width: 312px;">
              <p>HBase 마스터의 CPU 사용률이 특정 경고 및 위험 임계값을 초과하는 경우 이 호스트 수준 경고가 트리거됩니다. SystemCPULoad 속성에 대한 HBase 마스터 JMX Servlet을 확인합니다.</p>
              </td>
          </tr>
          <tr>
              <td style="width: 312px;">
              <p>호스트 디스크 사용량</p>
              </td>
              <td style="width: 312px;">
              <p>사용된 디스크 공간이 특정 임계값을 초과하는 경우 이 호스트 수준 경고가 트리거됩니다. 기본 임계값은 WARNING의 경우 50%, CRITICAL의 경우 80%입니다.</p>
              </td>
          </tr>
          <tr>
              <td style="width: 312px;">
              <p>기록 서버 CPU 사용률</p>
              </td>
              <td style="width: 312px;">
              <p>이 호스트 수준 경고는 기록 서버의 CPU 사용률이 구성된 위험 임계값을 초과하는 경우 트리거됩니다. 임계값은 백분율입니다.</p>
              </td>
          </tr>
      </tbody>
  </table>


  <p>각 경고에 대한 자세한 보기에는 경고에 대한 설명, 경고 또는 중요 경고를 트리거하는 특정 조건 또는 임계값, 조건에 대한 검사 간격이 표시됩니다. 개별 경고에 대해 임계값 및 검사 간격을 구성할 수 있습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/17817392-374c-4531-8c6c-5521a311f61e.png"><img alt="alert_details" border="0" height="686" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/acd50a87-e2ca-41f4-8ce4-4de2d1ebdc92.png" style="border: 0px currentcolor; margin-right: auto; margin-left: auto; display: block; background-image: none;" title="alert_details" width="1333"></a></p>


  <p align="left"><em>Ambari 상세 경고 보기는 경고에 대한 설명을 표시하며 경고가 실행될 수 있도록 검사 간격 및 임계값을 편집할 수 있습니다.</em></p>


  <p>필요에 따라 Ambari 경고에 대한 메일 알림을 구성할 수도 있습니다. Ambari 이메일 알림은 많은 HDInsight 클러스터를 관리할 때 경고를 모니터링하는 좋은 방법이 될 수 있습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/52f9eb05-6b97-4280-be75-b34522d820d6.png"><img alt="ambari_email" border="0" height="227" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/f420fbe4-dab8-4b64-ae82-d506c3d6b067.png" style="border: 0px currentcolor; margin-right: auto; margin-left: auto; display: block; background-image: none;" title="ambari_email" width="1353"></a></p>


  <p align="center"><em>Ambari 전자 메일 알림을 구성하는 것은 클러스터에 대한 경고를 알리는 유용한 방법이 될 수 있습니다.</em></p>


  <h2>Azure Monitor 로그</h2>


  <p>Azure Monitor 로그를 사용하면 HDInsight 클러스터와 같은 여러 리소스에서 생성된 데이터를 한 곳에서 수집 및 집계하여 통합 모니터링 환경을 구현할 수 있습니다. 필수 구성 요소로 수집된 데이터를 저장하려면 Log Analytics 작업 영역이 필요합니다. 아직 만들지 않은 경우 <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/learn/quick-create-workspace" target="_blank">Log Analytics 작업 영역을 만들기</a> 위한 지침을 따를 수 있습니다.</p>


  <p>그런 다음 <a href="https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-hadoop-oms-log-analytics-tutorial#enable-azure-monitor-logs-by-using-the-portal" target="_blank">Log Analytics에 로그 및 메트릭의 호스트를 보내도록 HDInsight 클러스터를 쉽게 구성할 수 있습니다</a>. Azure Monitor 로그 통합을 사용하도록 설정하면 <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/platform/data-sources-performance-counters#linux-performance-counters" target="_blank">노드에서 Linux 성능 카운터를 수집하고 Log Analytics 작업 영역으로 보내도록 Log</a> Analytics 작업 영역을 구성할 수 있습니다.</p>


  <h3>HDInsight 모니터링 솔루션</h3>


  <p>HDInsight는 클러스터 리소스 사용률을 모니터링하는 데 사용할 수 있는 <a href="https://docs.microsoft.com/azure/azure-monitor/insights/solutions">솔루션</a> 형태로 워크로드별 미리 만들어진 모니터링 대시보드를 제공합니다. <a href="https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-hadoop-oms-log-analytics-tutorial#install-hdinsight-cluster-management-solutions" target="_blank">모니터링 솔루션을 설치하는 방법을 알아봅니</a>다. 이러한 솔루션을 사용하면 여러 클러스터에서 CPU 시간, 사용 가능한 YARN 메모리 및 논리 디스크 쓰기와 같은 메트릭을 모니터링할 수 있습니다. 그래프를 선택하면 로그 보기에 표시된 그래프를 생성하는 데 사용되는 쿼리로 이동합니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6ad51991-59a5-4231-ad9b-337c24a7e5b8.png"><img alt="solution_perf" border="0" height="564" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/8bf4baa8-74e2-49e1-b2a3-512f9014393d.png" style="border: 0px currentcolor; margin-right: auto; margin-left: auto; display: block; background-image: none;" title="solution_perf" width="984"></a></p>


  <p align="left"><em>HDInsight 모니터링 솔루션은 다양한 사용률 메트릭을 모니터링할 수 있는 간단한 미리 만들어진 대시보드를 제공합니다.</em></p>


  <h3>로그 블레이드에서 메트릭 쿼리</h3>


  <p>Log Analytics 작업 영역의 로그 보기를 사용하여 메트릭 테이블을 직접 쿼리할 수도 있습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7306574e-1d28-4a64-8b4e-cc6a3cef1b0f.png"><img alt="logs_perf" border="0" height="819" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/fab1628c-80e6-477d-ad48-2a0622cfc2bb.png" style="border: 0px currentcolor; margin-right: auto; margin-left: auto; display: block; background-image: none;" title="logs_perf" width="1214"></a></p>


  <p align="center"><em>Log Analytics 작업 영역의 로그 블레이드를 사용하면 여러 클러스터에서 수집된 메트릭 및 로그를 쿼리할 수 있습니다.</em></p>


  <p>Log Analytics 작업 영역의 로그 블레이드에 있는 컴퓨터 성능 탭에는 다음과 같은 가용성과 관련된 여러 샘플 쿼리가 나열됩니다.</p>


  <table border="1" cellpadding="0" cellspacing="0">
      <tbody>
          <tr>
              <td style="width: 312px;">
              <p><strong>쿼리 이름</strong></p>
              </td>
              <td style="width: 312px;">
              <p><strong>설명</strong></p>
              </td>
          </tr>
          <tr>
              <td style="width: 312px;">
              <p>수집되는 데이터는 무엇인가요?</p>
              </td>
              <td style="width: 312px;">
              <p>수집된 성능 카운터 및 개체 유형 프로세스, 메모리, 프로세서를 나열합니다.</p>
              </td>
          </tr>
          <tr>
              <td style="width: 312px;">
              <p>메모리 및 CPU 사용량</p>
              </td>
              <td style="width: 312px;">
              <p>지난 1시간 동안 사용된 메모리 및 CPU를&#39; 모든 컴퓨터를 차트로 표시합니다.</p>
              </td>
          </tr>
          <tr>
              <td style="width: 312px;">
              <p>마지막 날의 CPU 사용량 추세</p>
              </td>
              <td style="width: 312px;">
              <p>모든 컴퓨터에서 CPU 사용량 패턴을 계산하고 백분위수로 차트를 작성합니다.</p>
              </td>
          </tr>
          <tr>
              <td style="width: 312px;">
              <p>디스크 공간이 가장 높은 상위 10대 컴퓨터</p>
              </td>
              <td style="width: 312px;">
              <p>사용 가능한 디스크 공간이 가장 높은 상위 10대 컴퓨터를 표시합니다.</p>
              </td>
          </tr>
      </tbody>
  </table>


  <h2>Azure Monitor 경고</h2>


  <p>메트릭 값 또는 쿼리 결과가 특정 조건을 충족할 때 트리거되는 <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/platform/alerts-metric" target="_blank">Azure Monitor 경고를</a> 설정할 수도 있습니다. 일부 임계값보다 크거나 작은 값 또는 쿼리에서 반환된 결과 수로 레코드를 반환하는 쿼리를 조건부로 설정할 수 있습니다. 예를 들어 CPU 사용량이 일정 기간 동안 정의된 임계값 이상으로 유지되는 경우 메일을 보내는 경고를 만들 수 있습니다.</p>


  <p>경고가 발생할 때 트리거하도록 선택할 수 있는 몇 가지 유형의 작업(예: 이메일, SMS, 푸시, 음성, Azure Function, LogicApp, 웹후크, ITSM 또는 Automation Runbook)이 있습니다. 단일 경고에 대해 여러 작업을 설정할 수 있습니다. <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/platform/action-groups#action-specific-information" target="_blank">Azure Portal에서 작업 그룹 만들기 및 관리</a> 설명서를 &ldquo; 방문하여 이러한 다양한 유형의 작업에 대한 자세한 정보를 확인하세요.&rdquo;</p>


  <p>마지막으로, 이름 외에 경고의 심각도를 지정할 수 있습니다. 심각도를 지정하는 기능은 여러 경고를 만들 때 사용할 수 있는 강력한 도구입니다. 예를 들어 단일 헤드 노드를 사용할 수 없게 되면 경고(Sev 1) 경고를 발생시키고, 두 헤드 노드가 모두 다운되는 드문 경우 위험(Sev 0) 경고를 발생시키는 또 다른 경고를 생성할 수 있습니다. 경고는 나중에 볼 때 심각도별로 그룹화할 수 있습니다.</p>


  <h2>다음 단계</h2>


  <p>Apache Ambari와 Azure Monitor 로그 통합 간에 Azure HDInsight는 모든 클러스터의 성능 및 리소스 사용률을 모니터링하기 위한 포괄적인 솔루션을 제공합니다. 자세한 내용은 <a href="https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-key-scenarios-to-monitor" target="_blank">클러스터 성능 모니터링</a> 설명서를 &ldquo; 참조하세요.&rdquo;</p>


  <p>이 시리즈의 다른 부분을 읽지 않은&rsquo; 경우 여기에서 확인할 수 있습니다.</p>


  <ul>
      <li><a href="https://azure.microsoft.com/blog/monitoring-on-hdinsight-part-1-an-overview/" target="_blank">Azure HDInsight 모니터링 1부: 개요</a></li>
      <li><a href="https://azure.microsoft.com/blog/monitoring-on-azure-hdinsight-part-2-cluster-health-and-availability/" target="_blank">Azure HDInsight 모니터링 2부: 클러스터 상태 및 가용성</a></li>
  </ul>


  <p><em>Azure HDInsight의 모니터링</em> 블로그 시리즈의 다음 부분을 계속 확인하세요.</p>
