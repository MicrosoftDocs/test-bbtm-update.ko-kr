### YamlMime:Yaml
ms.openlocfilehash: 45f55a0cf55e335fd2152f13fb458df1de28c0c0
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139898541"
Slug: monitoring-on-azure-hdinsight-part-4-workload-metrics-and-logs
Title: 'Azure HDInsight 4부 모니터링: 워크로드 메트릭 및 로그'
Summary: Azure HDInsight 클러스터에서 실행되는 워크로드를 모니터링하고 관련 로그를 확인하여 디버깅을 지원하는 방법을 알아봅니다.
Content: >-
  <p><em>Azure HDInsight의 모니터링에 대한 4부로 구성된 시리즈의 네 번째 블로그 게시물입니다. </em> <a href="https://azure.microsoft.com/en-in/blog/monitoring-on-hdinsight-part-1-an-overview/">Azure HDInsight 모니터링 1부: 개요</a>&nbsp; <em>에서는 클러스터 상태 및 가용성, 리소스 사용률 및 성능, 작업 상태 및 로그의 세 가지 주요 모니터링 범주를 설명합니다. </em> <a href="https://azure.microsoft.com/en-us/blog/monitoring-on-azure-hdinsight-part-2-cluster-health-and-availability/">2부</a><em>에서는 첫 번째 항목을 중심으로 클러스터 상태 및 가용성을 모니터링합니다. </em> <a href="https://azure.microsoft.com/blog/monitoring-on-azure-hdinsight-part-3-performance-and-resource-utilization/">3부</a><em>에서는 모니터링 성능 및 리소스 사용률에 대해 설명했습니다. 이 블로그에서는 이러한 항목의 세 번째 항목인 워크로드 메트릭 및 로그에 대해 자세히 설명합니다.</em></p>


  <hr>

  <p>Azure HDInsight 클러스터가 정상 상태이고 최적으로 수행되는 경우 정상적인 작업 중에는 클러스터에서 실행되는 워크로드를 모니터링하고 관련 로그를 확인하여 디버깅을 지원하는 데 집중할 수 있습니다. Azure HDInsight는 클러스터 워크로드를 모니터링하는 데 사용할 수 있는 두 가지 도구인 Apache Ambari 및 Azure Monitor 로그와의 통합을 제공합니다. Apache Ambari는 모든 Azure HDInsight 클러스터에 포함되며 클러스터를 모니터링하고 구성 변경을 수행하는 데 사용할 수 있는 사용하기 쉬운 웹 사용자 인터페이스를 제공합니다. Azure Monitor는 HDInsight 클러스터와 같은 여러 리소스에서 Azure Monitor Log Analytics 작업 영역으로 메트릭 및 로그를 수집합니다. Azure Monitor Log Analytics 작업 영역은 사용자 지정 경고를 구성하는 데 사용할 수 있는 구조화된 쿼리 가능한 테이블로 메트릭 및 로그를 제공합니다. Azure Monitor 로그는 특히 여러 클러스터가 있는 경우 워크로드를 모니터링하고 로그와 상호 작용할 수 있는 뛰어난 전반적인 환경을 제공합니다.</p>


  <h2>Azure Monitor 로그</h2>


  <p>Azure Monitor 로그를 사용하면 HDInsight 클러스터와 같은 여러 리소스에서 생성된 데이터를 한 곳에서 수집하고 집계하여 통합 모니터링 환경을 구현할 수 있습니다. 필수 구성 요소로 수집된 데이터를 저장하려면 Log Analytics 작업 영역이 필요합니다. 아직 만들지 않은 경우 <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/learn/quick-create-workspace" target="_blank">Azure Monitor Log Analytics 작업 영역을 만들기</a> 위한 다음 지침을 따를 수 있습니다. 그런 다음 <a href="https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-hadoop-oms-log-analytics-tutorial#enable-azure-monitor-logs-by-using-the-portal" target="_blank">, Azure Monitor Log Analytics에 여러 로그 및 메트릭을 보내도록 HDInsight 클러스터를 쉽게 구성할 수 있습니다</a>.</p>


  <h3>HDInsight 모니터링 솔루션</h3>


  <p>Azure HDInsight는 클러스터에서 실행되는 워크로드를 모니터링하는 데 사용할 수 있는 <a href="https://docs.microsoft.com/azure/azure-monitor/insights/solutions">솔루션</a> 의 형태로 미리 만들어진 모니터링 대시보드를 제공합니다. <a href="https://azuremarketplace.microsoft.com/en-us/marketplace/">Azure Marketplace</a>에서 사용할 수 있는 Apache Spark, Hadoop, Apache Kafka, LLAP(Live Long and Process), Apache HBase 및 Apache Storm에 대한 솔루션이 있습니다. <a href="https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-hadoop-oms-log-analytics-tutorial#install-hdinsight-cluster-management-solutions" target="_blank">모니터링 솔루션을 설치하는 방법을 알아보</a>려면 설명서를 참조하세요. 이러한 솔루션은 워크로드별 솔루션으로, 지정된 유형의 여러 클러스터에서 CPU(중앙 처리 단위) 시간, 사용 가능한 YARN 메모리 및 논리 디스크 쓰기와 같은&nbsp; 메트릭을 모니터링할 수 있습니다. 그래프를 선택하면 로그 보기에 표시된 그래프를 생성하는 데 사용되는 쿼리로 이동합니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3ebe8f35-be02-4d1c-919e-9c016f04092b.png"><img alt="An example of the job graph showing stages 0 through 3 for a spark job." border="0" height="545" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/698f4f9c-7cc5-466b-a175-8ba9af2c9f85.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="" width="1024"></a></p>


  <p align="center">&nbsp;</p>


  <p>HDInsight Spark 모니터링 솔루션은 단일 창에서 여러 클러스터에 대한 워크로드별 메트릭을 모니터링할 수 있는 간단한 미리 만들어진 대시보드를 제공합니다.</p>


  <p align="center"><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/b97e277c-19cb-4011-b88b-850e7246ee9e.png"><img alt="The pre-made dashboard for Kafka we offer as part of HDInsight for monitoring Kafka clusters." border="0" height="536" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/c365e33c-f425-41c5-a5b0-9aae5fc7ca0c.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="" width="1024"></a></p>


  <p>HDInsight Kafka 모니터링 솔루션을 사용하면 단일 창에서 모든 Kafka 클러스터를 모니터링할 수 있습니다.</p>


  <h3>로그 블레이드를 사용하여 쿼리</h3>


  <p>Log Analytics 작업 영역에서 로그 보기를 사용하여 메트릭 및 테이블을 직접 쿼리할 수도 있습니다.</p>


  <p>HDInsight 클러스터는 <em>log_resourcemanager_CL, log_spark_CL, log_kafkaserver_CL, log_jupyter_CL</em>,<em> log_regionserver_CL</em><em> 및</em><em></em> <em>log_hmaster_CL</em> 같은 여러 워크로드별 로그 테이블을 내보냅니다. <em></em></p>


  <p>메트릭 쪽에서 클러스터는 <em>metrics_sparkapps_CL, metrics_resourcemanager_queue_root_CL, metrics_kafka_CL</em> <em>및</em> <em>metrics_hmaster_CL</em> 포함한 여러 메트릭 테이블을 내보냅니다. 자세한 내용은 설명서인 <a href="https://docs.microsoft.com/azure/hdinsight/hdinsight-hadoop-oms-log-analytics-use-queries">Azure Monitor 로그를 쿼리하여 HDInsight 클러스터를 모니터링하세요</a>.</p>


  <p align="center"><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/b435c958-427b-480f-86b5-25e2bf3e884f.png"><img alt="The log blade in a Log Analytics workspace used to query metrics and logs tables." border="0" height="619" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/f8477e40-29d2-481d-9c3d-0620283b3eb2.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="" width="1024"></a></p>


  <p align="left">Log Analytics 작업 영역의 로그 블레이드를 사용하면 여러 클러스터에서 수집된 메트릭 및 로그를 쿼리할 수 있습니다.</p>


  <h3>Azure Monitor 경고</h3>


  <p>메트릭 값 또는 쿼리 결과가 특정 조건을 충족하는 경우 트리거되는 <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/platform/alerts-metric" target="_blank">Azure Monitor 경고를</a> 설정할 수도 있습니다. 특정 임계값보다 크거나 작은 값을 가진 레코드를 반환하거나 쿼리에서 반환된 결과 수에 대해 쿼리를 조건부로 설정할 수 있습니다. 예를 들어 Spark 작업이 실패하거나 Kafka 디스크 사용량이 90% 이상 가득 차면 전자 메일을 보내는 경고를 만들 수 있습니다.</p>


  <p>이메일, SMS, 푸시 알림, 음성, Azure 함수, Azure LogicApp, 웹후크, ITSM(IT 서비스 관리) 또는 자동화 Runbook과 같이 경고가 발생할 때 트리거하도록 선택할 수 있는 여러 가지 유형의 작업이 있습니다. 단일 경고에 대해 여러 작업을 설정하고, <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/platform/action-groups#action-specific-information" target="_blank"><em>Azure Portal에서 작업 그룹 만들기 및 관리</em></a> 설명서를 방문하여 이러한 다양한 유형의 작업에 대한 자세한 정보를 찾을 수 있습니다.</p>


  <p>마지막으로, 이름 외에 경고의 심각도를 지정할 수 있습니다. 심각도를 지정하는 기능은 여러 경고를 만들 때 사용할 수 있는 강력한 도구입니다. 예를 들어 단일 헤드 노드를 사용할 수 없게 되면 Sev 1 경고 경고를 발생시키는 경고를 만들고, 두 헤드 노드가 모두 다운되는 경우 Sev 0 중요 경고를 발생시키는 또 다른 경고를 만들 수 있습니다. 나중에 볼 때 심각도별로 경고를 그룹화할 수 있습니다.</p>


  <h2>Apache Ambari</h2>


  <p>Apache Ambari 대시보드는 클러스터에서 워크로드를 모니터링하기 위한 여러 보기에 대한 링크를 제공합니다.</p>


  <h3>ResourceManager 사용자 인터페이스</h3>


  <p>ResourceManager 사용자 인터페이스는 YARN 기반 클러스터에서 작업을 모니터링하는 여러 보기를 제공합니다. 여기서는 완료된 앱 또는 실행 앱의 개요와 리소스 사용량, 큐별 예약된 작업 보기, 작업 실행 기록 목록 및 각 상태 등 여러 보기를 볼 수 있습니다. 개별 애플리케이션 ID를 클릭하여 해당 작업에 대한 자세한 내용을 볼 수 있습니다.</p>


  <p align="center"><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/d1b195f2-ba32-4152-9531-2a363c6c6bd7.png"><img alt="The Applications tab in YARN UI, which shows a list of application execution history for a cluster." border="0" height="722" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ebae713d-7de3-4320-8435-f9c2279be148.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="" width="1024"></a></p>


  <h3>Spark 기록 서버</h3>


  <p>Apache <a href="https://docs.microsoft.com/azure/hdinsight/spark/apache-azure-spark-history-server#get-access-to-apache-spark-history-server">Spark 기록 서버</a>는 완료된 Spark 작업에 대한 자세한 정보를 표시하므로 쉽게 모니터링하고 <a href="https://docs.microsoft.com/azure/hdinsight/spark/apache-spark-job-debugging">디버깅할 수 있습니다</a>.&nbsp; 위쪽의 기존 탭(작업, 단계, 실행기 등)외에도 추가 디버깅에 도움이 되는 추가 <a href="https://docs.microsoft.com/azure/hdinsight/spark/apache-azure-spark-history-server#data-tab-in-spark-history-server"></a><a href="https://docs.microsoft.com/azure/hdinsight/spark/apache-azure-spark-history-server#data-tab-in-spark-history-server">data</a>, <a href="https://docs.microsoft.com/azure/hdinsight/spark/apache-azure-spark-history-server#graph-tab-in-apache-spark-history-server">graph</a> 및 <a href="https://docs.microsoft.com/azure/hdinsight/spark/apache-azure-spark-history-server#graph-tab-in-apache-spark-history-server"></a><a href="https://docs.microsoft.com/azure/hdinsight/spark/apache-azure-spark-history-server#diagnosis-tab-in-apache-spark-history-server"></a><a href="https://docs.microsoft.com/azure/hdinsight/spark/apache-azure-spark-history-server#diagnosis-tab-in-apache-spark-history-server">diagnostic</a> 탭을 찾을 수 있습니다.</p>


  <p align="center"><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/0abe8faf-caa1-4c6e-8b40-aeeecea4dfa4.png"><img alt="The pre-made dashboard for Spark we offer as part of HDInsight for monitoring Spark clusters." border="0" height="337" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/17c8e9d7-c7c9-4a67-881e-5c1130e86615.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="" width="1024"></a></p>


  <h3>클러스터 로그</h3>


  <p>YARN 로그 파일은 HDInsight 클러스터에서 사용할 수 있으며 Apache Ambari의 <a href="https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-log-management#yarn-resourcemanager-ui">ResourceManager</a> 로그 링크를 통해 액세스할 수 있습니다. 클러스터 로그에 대한 자세한 내용은 <a href="https://docs.microsoft.com/azure/hdinsight/hdinsight-log-management"><em>HDInsight 클러스터에 대한 로그 관리</em></a> 설명서를 참조하세요<em>.</em></p>


  <h2>다음 단계</h2>


  <p>이 시리즈의 다른 블로그를 읽지 않은&rsquo; 경우 아래에서 확인할 수 있습니다.</p>


  <ul>
   <li><a href="https://azure.microsoft.com/blog/monitoring-on-hdinsight-part-1-an-overview/" target="_blank">Azure HDInsight 모니터링 1부: 개요</a></li>
   <li><a href="https://azure.microsoft.com/blog/monitoring-on-azure-hdinsight-part-2-cluster-health-and-availability/" target="_blank">Azure HDInsight 모니터링 2부: 클러스터 상태 및 가용성</a></li>
   <li><a href="https://azure.microsoft.com/blog/monitoring-on-azure-hdinsight-part-3-performance-and-resource-utilization/">Azure HDInsight 3부 모니터링: 성능 및 리소스 사용률</a></li>
  </ul>


  <h2>Azure HDInsight 정보</h2>


  <p>Azure HDInsight는 고객이 Apache Hadoop, Spark, Kafka 등을 비롯한 인기 있는 오픈 소스 프레임워크를 쉽게 실행할 수 있도록 하는 오픈 소스 분석을 위한 쉽고 비용 효율적인 엔터프라이즈급 서비스입니다. 이 서비스는 36개 지역 및 Azure Government 및 국가별 클라우드에서 사용할 수 있습니다. Azure HDInsight는 다양한 분야에서 중요 업무용 애플리케이션을 지원하며 ETL(추출, 변환 및 로드), 스트리밍 및 대화형 쿼리를 비롯한 다양한 사용 사례를 지원합니다.</p>
