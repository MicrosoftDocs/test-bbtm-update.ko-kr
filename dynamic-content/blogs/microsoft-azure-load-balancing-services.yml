### YamlMime:Yaml
ms.openlocfilehash: a04726d80146982f05531f50e388284f77209f9f
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139908302"
Slug: microsoft-azure-load-balancing-services
Title: Microsoft Azure 부하 분산 서비스
Summary: Microsoft Azure Microsoft Azure 클라우드에서 호스트되는 IaaS(가상 머신) 및 클라우드 서비스(PaaS)에 대한 부하 분산 서비스를 제공합니다. 부하 분산을 사용하면 애플리케이션의 크기를 조정하고...
Content: >-
  Microsoft Azure Microsoft Azure 클라우드에서 호스트되는 IaaS(가상 머신) 및 클라우드 서비스(PaaS)에 대한 부하 분산 서비스를 제공합니다. 부하 분산을 통해 응용 프로그램을 확장하고 응용 프로그램 오류에 대한 복원력을 제공할 수 있습니다.


  부하 분산 서비스는 Microsoft Azure Portal 또는 애플리케이션의 <a href="https://msdn.microsoft.com/en-us/library/windowsazure/ee758711.aspx">서비스 모델을</a> 통해 서비스에 입력 엔드포인트를 지정하여 액세스할 수 있습니다. 하나 이상의 입력 엔드포인트가 있는 호스티드 서비스가 Microsoft Azure 배포되면 Microsoft Azure 플랫폼에서 제공하는 부하 분산 서비스를 자동으로 구성합니다. 서비스의 복원력/중복성을 활용하려면 동일한 엔드포인트를 제공하는 가상 머신이 두 대 이상 있어야 합니다.


  다음 다이어그램은 부하 분산 서비스를 사용하여 들어오는 트래픽(주소/포트 1.2.3.4:80)을 모두 포트 80에서 수신 대기하는 3개의 가상 머신으로 전송하는 Microsoft Azure 호스트되는 애플리케이션의 예입니다.


  <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/04/azureloadbalance.png"><img class="alignnone size-medium wp-image-139711" alt="azureloadbalance" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/azureloadbalance-636x311.png" width="636" height="311" /></a>


  &nbsp;


  Microsoft Azure 부하 분산 서비스의 주요 기능은 다음과 같습니다.

  <h4><strong>PaaS/IaaS 지원</strong></h4>

  Microsoft Azure 부하 분산 서비스는 모든 테넌트 유형(IaaS 또는 PaaS) 및 모든 OS 버전(Windows 또는 지원되는 Linux 기반 OS)에서 작동합니다.


  PaaS 테넌트는 <a href="https://msdn.microsoft.com/en-us/library/windowsazure/ee758711.aspx">서비스 모델을</a> 통해 구성됩니다. IaaS 테넌트는 관리 포털 또는 PowerShell을 통해 <a href="https://azure.microsoft.com/en-us/documentation/articles/virtual-machines-set-up-endpoints/">구성</a> 됩니다.

  <h4><strong>계층 4 Load Balancer, 해시 기반 배포</strong></h4>

  Microsoft Azure Load Balancer는 계층 4 유형 부하 분산 장치입니다. Microsoft Azure 부하 분산 장치는 지정된 입력 엔드포인트에서 수신된 트래픽에 대한 해시 함수를 계산하여 사용 가능한 서버 집합(가상 머신) 간에 부하를 분산합니다. 해시 함수는 동일한 연결(TCP 또는 UDP)의 모든 패킷이 동일한 서버에서 종료되도록 계산됩니다. Microsoft Azure Load Balancer는 5개의 튜플(원본 IP, 원본 포트, 대상 IP, 대상 포트, 프로토콜 유형)을 사용하여 트래픽을 사용 가능한 서버에 매핑하는 데 사용되는 해시를 계산합니다. 해시 함수가 선택되므로 서버에 연결이 임의로 분산됩니다. 그러나 트래픽 패턴에 따라 서로 다른 연결이 동일한 서버에 매핑되는 것이 가능합니다. (서버에 대한 연결 배포는 라운드 로빈이 <strong>아니며 </strong><strong>일부 문서</strong> 및 일부 블로그에서 실수로 언급된 것처럼 요청 큐가 없습니다.) 해시 함수의 기본 전제는 많은 다른 클라이언트에서 오는 요청을 많이 부여합니다, 당신은 서버에서 요청의 좋은 배포를 얻을 것이다.

  <h4><strong>여러 프로토콜 지원</strong></h4>

  Microsoft Azure 부하 분산 서비스는 TCP 및 UDP 프로토콜을 지원합니다. 고객은 PowerShell 또는 관리 포털을 통해 서비스 모델의 입력 엔드포인트 사양에서 프로토콜을 지정할 수 있습니다.

  <h4><strong>여러 엔드포인트 지원</strong></h4>

  호스트된 서비스는 여러 입력 엔드포인트를 지정할 수 있으며 부하 분산 서비스에서 자동으로 구성됩니다.


  현재 동일한 포트 AND 프로토콜을 사용하는 여러 엔드포인트는 지원되지 않습니다. 호스트된 서비스에서 현재 150으로 설정된 엔드포인트의 최대 수에 대한 제한도 있습니다.

  <h4><strong>내부 엔드포인트 지원</strong></h4>

  모든 서비스는 부하 분산 장치에 노출되지 않고 서비스 역할 간의 통신에 사용되는 최대 25개의 내부 엔드포인트를 지정할 수 있습니다.

  <h4><strong>직접 포트 엔드포인트 지원(인스턴스 입력 엔드포인트)</strong></h4>

  호스팅된 서비스는 지정된 엔드포인트가 부하 분산되지 않도록 지정하고 서비스를 호스트하는 가상 머신에 <a href="https://msdn.microsoft.com/en-us/library/windowsazure/hh180158.aspx">직접 액세스할</a> 수 있도록 지정할 수 있습니다. 이를 통해 애플리케이션은 각 요청 부하를 분산하지 않고도 클라이언트를 지정된 VM(인스턴스)으로 직접 리디렉션할 수 있도록 제어할 수 있습니다(결과적으로 잠재적으로 다른 인스턴스에 배치됨).

  <h4><strong>규모 확장/축소, 서비스 복구 및 업데이트 시 자동 재구성</strong></h4>

  부하 분산 서비스는 Microsoft Azure Compute Service와 함께 작동하여 입력 엔드포인트에 대해 지정된 서버 인스턴스 수가 증가하거나 축소되는 경우(웹/작업자 역할의 인스턴스 수가 증가하거나 동일한 부하 분산 그룹에 추가 영구 VM을 배치하기 때문에) 부하 분산 서비스가 증가되거나 감소된 인스턴스에 부하 분산되도록 자동으로 다시 구성합니다.


  또한 부하 분산 서비스는 Microsoft Azure 패브릭 컨트롤러 또는 고객의 서비스 업데이트에 의한 서비스 <a href="https://blogs.technet.com/b/markrussinovich/archive/2012/08/22/3515679.aspx">복구 작업에</a> 대응하여 투명하게 다시 구성합니다.

  <h4><strong>서비스 모니터링</strong></h4>

  부하 분산 서비스는 다양한 서버 인스턴스의 상태를 검색하고 비정상 서버 인스턴스를 순환에서 제외하는 기능을 제공합니다. 지원되는 프로브에는 게스트 에이전트 프로브(PaaS VM), HTTP 사용자 지정 프로브 및 TCP 사용자 지정 프로브의 세 가지 유형이 있습니다. <a href="/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx">게스트 에이전트</a>의 경우 부하 분산 서비스는 VM의 게스트 에이전트를 쿼리하여 서비스의 상태에 대해 알아봅니다. HTTP의 경우 부하 분산 서비스는 지정된 URL을 가져와 인스턴스의 상태를 확인합니다. TCP의 경우 정의된 프로브 포트에 대한 성공적인 TCP 세션 설정에 의존합니다.

  <h4><strong>원본 NAT(SNAT)</strong></h4>

  서비스에서 발생하는 모든 아웃바운드 트래픽은 들어오는 트래픽과 동일한 VIP 주소를 사용하는 SNAT(Source NATed)입니다. 향후 게시물에서 SNAT가 어떻게 작동하는지 자세히 살펴보겠습니다.

  <h4><strong>데이터 센터 내 트래픽 최적화</strong></h4>

  Microsoft Azure Load Balancer는 동일한 지역의 Microsoft Azure 데이터 센터 간의 트래픽을 최적화합니다. 따라서 VIP를 통해 통신하고 동일한 지역 내에 있는 Azure 테넌트 간의 트래픽은 TCP/IP 연결이 시작된 후 Microsoft Azure Load Balancer를 완전히 우회합니다.

  <h4><strong>VIP 교환</strong></h4>

  Microsoft Azure Load Balancer를 사용하면 두 테넌트 VIP를 교환할 수 있으므로 "스테이지"에 있는 테넌트가 "프로덕션"으로 이동하고 그 반대의 경우도 마찬가지입니다. VIP 교환 작업을 사용하면 새 버전의 서비스가 배포되는 동안 클라이언트가 동일한 VIP를 사용하여 서비스와 통신할 수 있습니다. 스테이징 환경에서 프로덕션 트래픽을 방해하지 않고 새 버전의 서비스를 배포하고 테스트할 수 있습니다. 새 버전이 필요한 테스트를 통과하면 기존 프로덕션 서비스와 교환하여 프로덕션으로 승격할 수 있습니다. "이전" 프로덕션에 대한 기존 연결은 변경되지 않은 상태로 계속됩니다. 새 연결은 "새" 프로덕션 환경으로 전달됩니다.

  <h4><strong>예: 부하 분산 서비스</strong></h4>

  다음으로, 부하 분산 서비스에서 제공하는 위의 대부분의 기능을 샘플 클라우드 서비스에서 사용할 수 있는 방법을 살펴보겠습니다. 모델링하려는 PaaS 테넌트는 아래 다이어그램에 나와 있습니다.


  <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/04/samplecloudservice.png"><img class="alignnone size-medium wp-image-139721" alt="Sample Cloud Service" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/samplecloudservice-636x305.png" width="636" height="305" /></a>


  &nbsp;


  테넌트에는 FE(프런트 엔드) 역할 2개와 BE(백 엔드) 역할이 하나 있습니다. FE 역할은 http, tcp 및 udp 프로토콜을 사용하여 4개의 부하 분산 엔드포인트를 노출합니다. 엔드포인트 중 하나는 부하 분산 장치에 대한 역할의 상태를 나타내는 데도 사용됩니다. BE 역할은 http, tcp 및 udp 프로토콜을 사용하여 세 개의 엔드포인트를 노출합니다. FE 및 BE 역할 모두 서비스의 해당 인스턴스에 하나의 직접 포트 엔드포인트를 노출합니다.


  위의 서비스는 Azure <a href="https://msdn.microsoft.com/en-us/library/windowsazure/ee758711.aspx">서비스 모델을</a> 사용하여 다음과 같이 표현됩니다(더 명확하게 하기 위해 일부 스키마 세부 사항이 제거됨).

  <div style="border: #000080 1px solid; color: #000; font-family: 'Courier New', Courier, Monospace; font-size: 10pt;">

  <div style="background-color: #ffffff; overflow: auto; padding: 2px 5px;">


  <span style="background: #ffffff; color: #0000ff;">&lt;</span><span style="background: #ffffff; color: #a31515;">ServiceDefinitionname </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">ProbeTenant</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">  &lt;</span><span style="background: #ffffff; color: #a31515;">LoadBalancerProbesLoadBalancerProbename</span><span style="background: #ffffff; color: #0000ff;">&gt;</span><span style="background: #ffffff; color: #a31515;"> </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span>

  <span style="background: #ffffff; color: #0000ff;">    &lt;</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">MyProbe</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">protocol</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">http</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">path</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">Probe.aspx</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">intervalInSeconds</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">5</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">timeoutInSeconds </span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">100</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;"> /&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">  &lt;/</span><span style="background: #ffffff; color: #a31515;">LoadBalancerProbesWorkerRolename</span><span style="background: #ffffff; color: #0000ff;">&gt;</span><span style="background: #ffffff; color: #a31515;"> </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span>

  <span style="background: #ffffff; color: #0000ff;">  &lt;</span>

  <span style="background: #ffffff; color: #0000ff;">  </span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">BERole</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">vmsize</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">Small</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">    &lt;</span> EndpointsInternalEndpointname<span style="background: #ffffff; color: #a31515;"> </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #a31515;"></span><span style="background: #ffffff; color: #0000ff;">&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">      &lt;</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">BE_InternalEP_Tcp</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">protocol</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #0000ff;">tcp</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;"> /&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">      &lt;</span><span style="background: #ffffff; color: #a31515;">InternalEndpointname </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">BE_InternalEP_Udp</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">protocol</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">udp</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;"> /&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">      &lt;</span><span style="background: #ffffff; color: #a31515;">InternalEndpointname </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">BE_InternalEP_Http</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">protocol</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">http</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">port</span> <span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">80</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;"> /&gt;</span>


  <span style="background: #ffffff; color: #0000ff;">      &lt;</span> <span style="background: #ffffff; color: #a31515;">InstanceInputEndpointname </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">InstanceEP_BE</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">protocol</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">tcp</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">localPort</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">80</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">          &lt;</span><span style="background: #ffffff; color: #a31515;">AllocatePublicPortFromFixedPortRangemin</span><span style="background: #ffffff; color: #0000ff;">&gt;</span><span style="background: #ffffff; color: #a31515;"> </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span>

  <span style="background: #ffffff; color: #0000ff;">              &lt;</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">10210</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">max</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #0000ff;">10220</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">  /&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">          &lt;/</span><span style="background: #ffffff; color: #a31515;">AllocatePublicPortFromInstanceInputEndpoint</span><span style="background: #ffffff; color: #0000ff;">&gt;</span><span style="background: #ffffff; color: #000000;"></span><span style="background: #ffffff; color: #a31515;"></span><span style="background: #ffffff; color: #a31515;"></span>

  <span style="background: #ffffff; color: #0000ff;">      &lt;/</span><span style="background: #ffffff; color: #000000;"></span><span style="background: #ffffff; color: #0000ff;"></span> EndpointsWorkerRoleWorkerRolename<span style="background: #ffffff; color: #a31515;"></span><span style="background: #ffffff; color: #0000ff;">&gt;</span><span style="background: #ffffff; color: #a31515;"> </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span>

  <span style="background: #ffffff; color: #0000ff;">   /&lt;</span><span style="background: #ffffff; color: #0000ff;">&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">  </span>

  <span style="background: #ffffff; color: #0000ff;">  &lt;/</span><span style="background: #ffffff; color: #0000ff;">&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">  </span>

  <span style="background: #ffffff; color: #0000ff;">  &lt;</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">FERole</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">vmsize</span><span style="background: #ffffff; color: #0000ff;">=</span>"Small"<span style="background: #ffffff; color: #0000ff;">&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">    &lt;</span><span style="background: #ffffff; color: #a31515;">EndpointsInputEndpointname</span><span style="background: #ffffff; color: #0000ff;">&gt;</span><span style="background: #ffffff; color: #a31515;"> </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span>

  <span style="background: #ffffff; color: #0000ff;">        &lt;</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">FE_External_Http</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">protocol</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">http</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">port</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">10000</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;"> /&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">        &lt;</span><span style="background: #ffffff; color: #a31515;">InputEndpointname </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">FE_External_Tcp</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">  </span><span style="background: #ffffff; color: #ff0000;">protocol</span> <span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">tcp</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">  </span><span style="background: #ffffff; color: #ff0000;">port</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">10001</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;"> /&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">        &lt;</span><span style="background: #ffffff; color: #a31515;">InputEndpointname </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">FE_External_Udp</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">  </span><span style="background: #ffffff; color: #ff0000;">protocol</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">udp</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #ff0000;">port</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">  </span><span style="background: #ffffff; color: #0000ff;">10002</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;"> /&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">      </span>

  <span style="background: #ffffff; color: #0000ff;">        &lt;</span><span style="background: #ffffff; color: #a31515;">InputEndpoint </span><span style="background: #ffffff; color: #ff0000;">name</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">HTTP_Probe</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">protocol</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">http</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">port</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">80</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">loadBalancerProbe</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">MyProbe</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;"> /&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">      </span>

  <span style="background: #ffffff; color: #0000ff;">        &lt;</span><span style="background: #ffffff; color: #a31515;">InstanceInputEndpointname </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">InstanceEP</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;"> protocol</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">tcp</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">localPort</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">80</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">           &lt;</span><span style="background: #ffffff; color: #a31515;">AllocatePublicPortFromFixedPortRangemin</span><span style="background: #ffffff; color: #0000ff;">&gt;</span><span style="background: #ffffff; color: #a31515;"> </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span>

  <span style="background: #ffffff; color: #0000ff;">              &lt;</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">10110</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">max</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">10120</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">  /&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">           &lt;/</span><span style="background: #ffffff; color: #a31515;">AllocatePublicPortFrom</span><span style="background: #ffffff; color: #0000ff;">&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">        &lt;/</span><span style="background: #ffffff; color: #a31515;"> InstanceInputEndpointInternalEndpointname</span><span style="background: #ffffff; color: #0000ff;">&gt;</span><span style="background: #ffffff; color: #a31515;"> </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span>


  <span style="background: #ffffff; color: #0000ff;">        &lt;</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">FE_InternalEP_Tcp</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">protocol</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">tcp</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;"> /&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">    &lt;/</span><span style="background: #ffffff; color: #a31515;">Endpoints</span><span style="background: #ffffff; color: #0000ff;">&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">  &lt;/</span><span style="background: #ffffff; color: #a31515;">WorkerRoleServiceDefinition</span><span style="background: #ffffff; color: #0000ff;">&gt;</span><span style="background: #ffffff; color: #a31515;"></span>

  <span style="background: #ffffff; color: #0000ff;">&lt;/</span><span style="background: #ffffff; color: #0000ff;">&gt;</span>


  </div>

  </div>

  서비스 모델을 분석하는 경우 먼저 부하 분산 장치가 서비스의 상태를 쿼리하는 데 사용해야 하는 상태 프로브를 정의합니다.

  <div style="border: #000080 1px solid; color: #000; font-family: 'Courier New', Courier, Monospace; font-size: 10pt;">

  <div style="background-color: #ffffff; overflow: auto; padding: 2px 5px;"><span style="background: #ffffff; color: #0000ff;">  &lt;</span><span style="background: #ffffff; color: #a31515;">LoadBalancerProbes</span><span style="background: #ffffff; color: #0000ff;">&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">    &lt;</span> <span style="background: #ffffff; color: #a31515;">LoadBalancerProbename </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">MyProbe</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">protocol</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">http</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">path</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">Probe.aspx</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">intervalInSeconds</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">5</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">timeoutInSeconds</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">100</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;"> /&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">  &lt;/</span><span style="background: #ffffff; color: #a31515;">LoadBalancerProbes</span><span style="background: #ffffff; color: #0000ff;">&gt;</span></div>

  </div>

  &nbsp;


  즉, URL 상대 경로 "Probe.aspx"를 사용하는 http 사용자 지정 프로브가 있습니다. 이 프로브는 나중에 완전히 지정되도록 엔드포인트에 연결됩니다.


  다음으로 FE 역할을 WorkerRole로 정의합니다. 다음과 같이 http, tcp 및 udp를 사용하는 여러 부하 분산 엔드포인트가 있습니다.

  <div style="border: #000080 1px solid; color: #000; font-family: 'Courier New', Courier, Monospace; font-size: 10pt;">

  <div style="background-color: #ffffff; overflow: auto; padding: 2px 5px;"><span style="background: #ffffff; color: #0000ff;">        &lt;</span><span style="background: #ffffff; color: #a31515;">InputEndpointname </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">FE_External_Http</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">protocol</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">http</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">port</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">10000</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;"> /&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">        &lt;</span><span style="background: #ffffff; color: #a31515;">InputEndpointname </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">FE_External_Tcp</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">  </span><span style="background: #ffffff; color: #ff0000;">protocol</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">tcp</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">  </span><span style="background: #ffffff; color: #ff0000;">port</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">10001</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #0000ff;"> /&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">        &lt;</span><span style="background: #ffffff; color: #a31515;">InputEndpointname </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">FE_External_Udp</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">  </span><span style="background: #ffffff; color: #ff0000;">protocol</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">udp</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #ff0000;">port</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">  </span><span style="background: #ffffff; color: #0000ff;">10002</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;"> /&gt;</span></div>

  </div>

  &nbsp;


  이러한 엔드포인트에 사용자 지정 프로브를 할당하지 않았으므로 위의 엔드포인트 상태는 VM의 게스트 에이전트에 의해 제어되며 <a href="https://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleenvironment.statuscheck.aspx">StatusCheck</a> 이벤트를 사용하여 서비스에서 변경할 수 있습니다.


  다음으로 포트 80에서 이전에 정의한 사용자 지정 프로브(MyProbe)를 사용하는 추가 http 엔드포인트를 정의합니다.

  <div style="border: #000080 1px solid; color: #000; font-family: 'Courier New', Courier, Monospace; font-size: 10pt;">

  <div style="background-color: #ffffff; overflow: auto; padding: 2px 5px;"><span style="background: #ffffff; color: #0000ff;">        &lt;</span><span style="background: #ffffff; color: #a31515;">InputEndpointname </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">HTTP_Probe</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">protocol</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">http</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">port</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">80</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">loadBalancerProbe</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">MyProbe</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;"> /&gt;</span></div>

  </div>

  &nbsp;


  부하 분산 장치는 엔드포인트의 정보와 프로브 정보를 결합하여 서비스 상태를 쿼리하는 데 사용할 url을 https://{VM}:80/Probe.aspx 형식으로 만듭니다. 서비스는 로그에서 동일한 IP가 주기적으로 액세스하고 있음을 알 수 있습니다. VM이 실행 중인 노드의 호스트에서 들어오는 상태 프로브 요청입니다.


  부하 분산 장치에서 서비스가 정상이라고 가정하려면 서비스가 HTTP 200 상태 코드로 응답해야 합니다. 다른 HTTP 상태 코드(예: 503)는 VM을 직접 순환에서 제외합니다.


  또한 프로브 정의는 프로브 빈도를 제어합니다. 위의 경우 부하 분산 장치는 15초마다 엔드포인트를 검색합니다. 30초(프로브 간격 2개)에 대해 긍정적인 답변을 받지 못하면 프로브가 다운된 것으로 간주되고 VM이 회전에서 제외됩니다. 마찬가지로, 서비스가 순환에서 제거되고 긍정적인 응답이 수신되면 서비스가 즉시 순환에 다시 배치됩니다. 서비스가 정상/비정상 간에 변동하는 경우 부하 분산 장치는 여러 프로브에 대해 정상 상태가 될 때까지 서비스의 다시 도입을 순환으로 연기하도록 결정할 수 있습니다.


  FE 서비스는 아래 지정된 포트의 FE 인스턴스에 직접 연결하는 각 인스턴스(인스턴스 입력 엔드포인트)에 대해 하나씩 직접 포트 집합을 노출합니다.

  <div style="border: #000080 1px solid; color: #000; font-family: 'Courier New', Courier, Monospace; font-size: 10pt;">

  <div style="background-color: #ffffff; overflow: auto; padding: 2px 5px;"><span style="background: #ffffff; color: #0000ff;">      &lt;</span><span style="background: #ffffff; color: #a31515;">InstanceInputEndpointname </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">InstanceEP</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">protocol</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">tcp</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">localPort</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">80</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">          &lt;</span><span style="background: #ffffff; color: #a31515;">AllocatePublicPortFromFixedPortRangemin</span><span style="background: #ffffff; color: #0000ff;">&gt;</span><span style="background: #ffffff; color: #a31515;"> </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span>

  <span style="background: #ffffff; color: #0000ff;">              &lt;</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">10110</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">max</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">10120</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">  /&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">          &lt;/</span><span style="background: #ffffff; color: #a31515;"> </span><span style="background: #ffffff; color: #a31515;">AllocatePublicPortFromInstanceInputEndpoint</span><span style="background: #ffffff; color: #0000ff;">&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">      &lt;/</span><span style="background: #ffffff; color: #0000ff;">&gt;</span></div>

  </div>

  &nbsp;


  위의 정의는 tcp 포트 10110, 10111, ... 각 FE 역할 VM 인스턴스의 포트 80으로 설정합니다. 이 기능은 여러 가지 방법으로 사용할 수 있습니다.


  a) 지정된 인스턴스에 직접 액세스하고 해당 인스턴스에 대해서만 작업을 수행합니다.


  b) 부하 분산된 엔드포인트를 통과한 후 사용자 앱을 특정 인스턴스로 리디렉션합니다. 지정된 인스턴스에 대한 "고정" 세션에 사용할 수 있습니다. 그러나 이로 인해 해당 인스턴스에 오버로드가 발생하고 중복성이 제거될 수 있습니다.


  마지막으로 FE 역할은 FE/BE 역할 간의 통신에 사용할 수 있는 내부 엔드포인트를 노출합니다.

  <div style="border: #000080 1px solid; color: #000; font-family: 'Courier New', Courier, Monospace; font-size: 10pt;">

  <div style="background-color: #ffffff; overflow: auto; padding: 2px 5px;"><span style="background: #ffffff; color: #0000ff;">        &lt;</span><span style="background: #ffffff; color: #a31515;">InternalEndpointname </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">FE_InternalEP_Tcp</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">protocol</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">tcp</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;"> /&gt;</span></div>

  </div>

  &nbsp;


  각 역할은 노출하는 엔드포인트와 RoleEnvironment 클래스를 사용하여 서로 역할이 노출하는 엔드포인트를 검색할 수 있습니다.


  BE 역할은 WorkerRole로도 모델링됩니다.


  BE 역할은 부하가 분산된 엔드포인트를 노출하지 않으며 http, tcp 및 udp를 사용하는 내부 엔드포인트만 노출합니다.

  <div style="border: #000080 1px solid; color: #000; font-family: 'Courier New', Courier, Monospace; font-size: 10pt;">

  <div style="background-color: #ffffff; overflow: auto; padding: 2px 5px;"><span style="background: #ffffff; color: #0000ff;">      &lt;</span><span style="background: #ffffff; color: #a31515;">InternalEndpointname </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">BE_InternalEP_Tcp</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">protocol</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">tcp</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;"> /&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">      &lt;</span><span style="background: #ffffff; color: #a31515;">InternalEndpointname </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">BE_InternalEP_Udp</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">protocol</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">udp</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;"> /&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">      &lt;</span><span style="background: #ffffff; color: #a31515;">InternalEndpointname </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">BE_InternalEP_Http</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;"> protocol</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">http</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">port</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">80</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;"> /&gt;</span></div>

  </div>

  &nbsp;


  또한 BE 역할은 BE 인스턴스에 직접 연결하는 인스턴스 입력 엔드포인트를 노출합니다.

  <div style="border: #000080 1px solid; color: #000; font-family: 'Courier New', Courier, Monospace; font-size: 10pt;">

  <div style="background-color: #ffffff; overflow: auto; padding: 2px 5px;"><span style="background: #ffffff; color: #0000ff;">      &lt;</span><span style="background: #ffffff; color: #a31515;">InstanceInputEndpointname </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">InstanceEP_BE</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">protocol</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">tcp</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">localPort</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">80</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">          &lt;</span><span style="background: #ffffff; color: #a31515;">AllocatePublicPortFromFixedPortRangemin</span><span style="background: #ffffff; color: #0000ff;">&gt;</span><span style="background: #ffffff; color: #a31515;"> </span><span style="background: #ffffff; color: #ff0000;"></span><span style="background: #ffffff; color: #0000ff;">=</span>

  <span style="background: #ffffff; color: #0000ff;">              &lt;</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">10210</span><span style="background: #ffffff; color: #000000;">" </span><span style="background: #ffffff; color: #ff0000;">max</span><span style="background: #ffffff; color: #0000ff;">=</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">10220</span><span style="background: #ffffff; color: #000000;">"</span><span style="background: #ffffff; color: #0000ff;">  /&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">          &lt;/</span><span style="background: #ffffff; color: #a31515;"> </span><span style="background: #ffffff; color: #a31515;">AllocatePublicPortFromInstanceInputEndpoint</span><span style="background: #ffffff; color: #0000ff;">&gt;</span>

  <span style="background: #ffffff; color: #0000ff;">      &lt;/</span><span style="background: #ffffff; color: #0000ff;">&gt;</span></div>

  </div>

  &nbsp;


  위의 정의는 tcp 포트 10210을 사용하여 연결합니다. ... 각 BE 역할 VM 인스턴스의 포트 80에


  위의 예제에서는 모든 부하 분산 기능을 함께 사용하여 서비스를 모델링하는 방법을 보여 주길 바랍니다.


  이후 게시물에서는 이 테넌트가 작동하는 것을 확인하고 코드 샘플을 제공합니다. 또한 자세한 내용은 다음을 설명합니다.


  a) SNAT 작동 방식


  b) 사용자 지정 프로브


  c) 가상 네트워킹


  또한 더 자세히 보려는 내용에 대한 요청을 보내주세요.


  Microsoft Azure 네트워킹 팀의 경우


  마리오스 지코스


  &nbsp;
