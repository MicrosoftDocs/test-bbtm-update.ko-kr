### YamlMime:Yaml
ms.openlocfilehash: d8ae9fc35b2d93ccb40eb4af3995e0f0dca4d138
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139911756"
Slug: lucene-query-language-in-azure-search
Title: Azure Search의 Lucene 쿼리 언어
Summary: 안녕하세요, 저는 검색 기능을 작업하는 Azure Search 팀의 엔지니어인 Nate입니다. 오늘 나는 우리의 서비스에서 흥미 진진한 새로운 검색 모드에 대한 블로그를 원한다.  검색의 컨텍스트에서 다른...
Content: >-
  <p>검색 컨텍스트에서 다양한 애플리케이션은 검색 실행 방법을 정확하게 제어해야 합니다. 대부분의 경우 관련성에 대한 별도의 선택적 컨트롤을 사용하여 간단한 키워드 검색을 원합니다. 이는&rsquo; Azure Search가 전통적으로 제공한 것이며, 사용자 입력을 받아서 검색 서비스에 직접 보내려는 경우 정말 잘 작동합니다. 그러나 앱이 검색되는 항목,&rsquo; 필드, 용어 수준 가중치 등을 정확하게 제어해야 하는 경우가 많았습니다. 이러한 고급 시나리오를 사용하기 위해 개발자가 세분화된 제어가 필요한 경우 전체 Lucene 쿼리 언어를 사용할 수 있는 새로운 검색 모드에 대한 지원을 도입하게 되어 기쁩니다.</p>


  <p>Lucene 쿼리 언어는 <a href="https://lucene.apache.org/core/">Apache Lucene</a>에서 개발되었습니다. 표현력과 유연성으로 검색 도메인에서 널리 채택되었습니다. 서비스에서 잘 알려진 쿼리 언어에 대한 지원이 추가되면서 이미 익숙한 구문을 사용하여 Azure Search에 대해 더 광범위한 질문 클래스를 작성할 수 있습니다. 또한 기존 Lucene 기반 온-프레미스 솔루션에서 Azure Search로 마이그레이션하는 고객의 부담을 덜어주기를 바랍니다.</p>


  <h1>검색 쿼리에서 Lucene 쿼리 구문을 사용하도록 설정하는 방법</h1>


  <p>Search 요청에서 queryType 매개 변수를 사용하여 두 검색 모드 간에 전환할 수 있습니다.</p>


  <ol>
      <li><strong>간단한</strong> 쿼리 언어 사용</li>
      <li><strong>전체</strong> Lucene 쿼리 언어에 대한 전체</li>
  </ol>


  <p>queryType 매개 변수는 기본적으로 단순 검색 모드로 설정되므로 새 기능을 사용하지 않도록 선택하는 경우 아무 작업도 수행할 필요가 없습니다. 매개 변수가 전체로 설정되면 Lucene 쿼리 파서로 검색 텍스트가 해석됩니다.</p>


  <p>Lucene 쿼리 언어의 전체 기능 및 구문 집합은 <a href="https://msdn.microsoft.com/library/mt589323.aspx">MSDN 페이지에서</a> 찾을 수 있습니다. 다음은 일부 기능이 Azure Search User Voice에서 인기 있는 고객 요청을 처리하는 방법에 대한 몇 가지 주요 사항입니다.</p>


  <h1>필드 범위 검색</h1>


  <p>단순 쿼리 언어를 사용하면 쿼리의 범위가 <a href="https://msdn.microsoft.com/library/azure/dn798927.aspx">searchFields</a> 매개 변수가 있는 특정 검색 가능 필드로 범위가 지정되지 않는 한 쿼리에 제공된 검색 용어는 항상 검색 가능한 모든 필드에서 검색됩니다. Lucene 쿼리 언어를 사용하면 검색 절 앞에 필드 이름을 배치하여 검색 범위를 특정 필드로 지정할 수 있습니다. 예를 들어 다음은 도시 필드 내에서만 Leavenworth라는 단어를 검색합니다.</p>


  <p>city:LeavenworthqueryType&amp;=full</p>


  <p>이 기능은 관련 없는 필드와 일치하는 항목이 검색 결과에 영향을 주거나 오염되지 않도록 용어 또는 구의 검색 공간을 제한하려는 경우에 특히 유용합니다. 검색 공간을 제한하여 응답의 성능과 품질을 높일 수 있는 경우가 많습니다. 필드가 있는 용어의 필드는 검색 가능으로 구성되어야 합니다.</p>


  <h1>용어 상승</h1>


  <p>경우에 따라 검색 쿼리의 용어는 중요도와 관련성이 서로 다릅니다. 예를 들어 호텔을 검색할 때 고객으로서 특정 측면이 더 중요할 수 있으며 검색 쿼리에 이를 반영하려고 합니다. 전체 Lucene 쿼리 언어를 사용하면 선택적으로 검색 쿼리의 다른 용어와 관련된 관련성을 제어하기 위해 검색 용어 또는 구에 승격 인수(양수)를 할당할 수 있습니다. 상승 값이 없는 용어에는 중립 부스트 값이 자동으로 1로 할당됩니다. 이 예제에서는 검색 쿼리의 다른 중립 용어보다 각각 3배, 두 배 더 중요하다는 것을 의미하는 단어 정리에 부스트 값 3과 자동 부스트 값 2를 제공합니다.</p>


  <p>search=quiet^2 clean^3 +hotels city:Leavenworthquerytype&amp;=full</p>


  <h1>점수 매기기 프로필의 용어 상승 및 필드 상승</h1>


  <p>Lucene 쿼리 언어의 상승이라는 용어는 <a href="https://msdn.microsoft.com/library/azure/dn798928.aspx">점수 매기기 프로필</a>에서 제공되는 필드 상승과 다르며 확장됩니다. 점수 매기기 프로필의 필드 가중치는 특정 필드의 일치 항목에만 적용되며 앱 디자이너에서만 구성할 수 있습니다. 반면 쿼리의 상승이라는 용어는 검색 가능한 모든 필드에 적용되며 최종 사용자가 사용할 수 있습니다. 두 가지 유형의 컨트롤은 서로 독립적으로 적용되며 검색 쿼리의 향상된 용어가 승격된 필드에서 일치하는 경우 결합됩니다.</p>


  <h1>정규식을 사용하여 검색</h1>


  <p>Lucene 쿼리 언어는 단일 용어 내에서 정규식을 지원합니다. 이렇게 하면 Azure Search User Voice: 접두사 및 접미사 쿼리에 대한 지원이 많이 요청된 시나리오가 가능합니다. regex 패턴으로 검색하려면 슬래시 /사이에 &quot;패턴을 배치해야 합니다.&quot; 패턴은 인덱스의 전체 어휘와 일치하므로 성능 및 정밀도에 대해 가능한 한 제한으로 regex 패턴을 유지하는 것이 좋습니다. 이 예제에서는 Leaven 문자로 시작하는 도시에서 호텔&rdquo;과 &ldquo;모텔&rdquo;을 찾&ldquo;습니다.</p>


  <p>search=/[hm]otel/ city:/Leaven.*/&amp;queryType=full</p>


  <h1>유사 항목 검색</h1>


  <p>Lucene 쿼리 언어는 <a href="https://en.wikipedia.org/wiki/Levenshtein_distance">Levenshtein 거리 알고리즘</a>에 따라 단일 용어에 대한 유사 항목 검색을 지원합니다. 유사 항목 검색을 사용하도록 설정하려면 일치 항목에 허용되는 최대 편집 거리를 지정하는 선택적 매개 변수(0에서 2 사이)를 사용하여 용어 끝에 타일 기호 &quot;~&quot; 를 배치합니다. 예를 들어 편집 거리가 1인 아래 검색 쿼리는 일치하는 조건을 충족하는 단어가 포함된 문서가 인덱스에 있는 경우 결과를 반환합니다.</p>


  <p>search=+hotel city:Levenworth~1queryType&amp;=full</p>


  <p>Lucene 쿼리 구문의 대부분의 기능은 범위 검색이 유일한 예외인 Azure Search에서 구현됩니다. OData $filter 식을 사용하여 구현할 수 있습니다.</p>


  <p>새 검색 모드는 현재 REST API를 통해서만 사용할 수 있습니다. .NET SDK에서 지원은 곧 제공될 예정이므로 계속 지켜봐 주시기 바랍니다.</p>


  <p>새로운 기능이 유용할 수 있기를 바라며 지원되는 새로운 구문을 사용하는 방법에 대해 알아보기를 기대합니다. Lucene 쿼리 언어에 대한 자세한 내용은 <a href="https://msdn.microsoft.com/library/mt589323.aspx">MSDN 설명서 페이지를</a> 참조하세요. 질문이 있는 경우 <a href="https://feedback.azure.com/forums/263029-azure-search">Azure Search User Voice</a>에 대한 피드백을 자유롭게 남겨주세요.</p>
