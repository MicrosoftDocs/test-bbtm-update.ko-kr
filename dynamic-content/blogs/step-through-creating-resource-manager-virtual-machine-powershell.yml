### YamlMime:Yaml
ms.openlocfilehash: 27a8a0c3329da53cba7a9ce97a7c14277981513d
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139900330"
Slug: step-through-creating-resource-manager-virtual-machine-powershell
Title: PowerShell을 사용하여 Resource Manager 기반 Azure Virtual Machine 만들기 단계
Summary: PowerShell을 사용하여 Resource Manager 기반 가상 머신을 만들고 미리 구성합니다.
Content: "<p>Azure 서비스 관리를 사용하면 네트워크 인터페이스 카드를 만들고 Azure에 저장된 디스크 파일의 이름을 지정하는 등 가상 머신 만들기와 관련된 많은 함수가 사용자를 대신하여 자동화됩니다. Azure Resource Manager를 사용하면 새 가상 머신을 빌드할 때 Resource Manager 기반 가상 머신의 수동 생성은 별도의 컴퓨팅, 네트워크 및 스토리지 구성 요소를 고려해야 합니다. 예를 들어 Azure Resource Manager 템플릿을 사용하여 Resource Manager 기반 가상 머신을 만들 때 템플릿에는 모든 컴퓨팅, 네트워크 및 스토리지 리소스를 함께 만들고 연결하는 지침이 포함되어 있습니다. Azure PowerShell 사용하여 Resource Manager 기반 가상 머신을 만들 때 필요한 리소스를 올바른 순서로 요청하는 Resource Manager 기반 PowerShell 명령 집합을 빌드해야 합니다. Resource <a href=\"https://azure.microsoft.com/documentation/articles/virtual-machines-ps-create-preconfigure-windows-resource-manager-vms/\">Manager를 사용하여 Windows 가상 머신을 새로 만들고 미리 구성하고 Azure PowerShell 문서에서는 Resource Manager</a> 기반 가상 머신에 대한 PowerShell 명령 집합을 빌드하는 프로세스를 설명합니다. 이 프로세스에는 다음 요소가 포함됩니다.</p>\n\n<ul>\n    <li>리소스 그룹(필수)</li>\n    <li>스토리지 계정(필수)</li>\n    <li>가상 네트워크(필수)</li>\n    <li>가용성 집합(선택 사항)</li>\n    <li>NIC(네트워크 인터페이스 카드) 및 공용 IP 주소(모두 필요)</li>\n    <li>DNS 도메인 이름 레이블(선택 사항)</li>\n    <li>추가 데이터 디스크(선택 사항)</li>\n    <li>Azure 가상 머신 이미지의 게시자, 제품 및 SKU(필수)</li>\n    <li>운영 체제 디스크 이름(필수)</li>\n</ul>\n\n<p>가상 머신에 대해 위의 요소를 사용하여 만든 결과 PowerShell 명령 집합은 다음과 같습니다.</p>\n\n<ul>\n    <li>기존 LOBServers 리소스 그룹에 있습니다.</li>\n    <li>Windows Server 2012 R2 Datacenter 이미지를 사용함</li>\n    <li>LOB07이라는 이름을 가지고 있으며 기존 WEB_AS 가용성 집합에 있습니다.</li>\n    <li>기존 AZDatacenter 가상 네트워크의 프런트 엔드 서브넷(서브넷 인덱스 0)에 공용 IP 주소가 있는 NIC</li>\n    <li>200GB의 추가 데이터 디스크가 있음</li>\n</ul>\n\n<p>참고: 이 블로그 게시물에는 Azure PowerShell 0.9.8 및 이전 버전에 대한 명령이 포함되어 있습니다. Azure PowerShell 1.0 미리 보기에서 이러한 명령을 사용하려면 <strong>Switch-AzureMode AzureResourceManager</strong> 명령을 제거하고 -Azure의 &quot;모든 인스턴스를 -AzureRM&quot;&quot;으로 &quot;변경합니다. 자세한 내용은 <a href=\"https://azure.microsoft.com/blog/azps-1-0-pre/\">Azure PowerShell 1.0 미리 보기를 참조하세요</a>.</p>\n\n<p>&nbsp;</p>\n\n<pre class=\"prettyprint\">\n# Switch to the Resource Manager mode   \nSwitch-AzureMode AzureResourceManager\n\n# Set values for existing resource group and storage account names\n$rgName=&quot;LOBServers&quot;\n$locName=&quot;West US&quot;\n$saName=&quot;contosoLOBServersSA&quot;\n\n# Set the existing virtual network and subnet index\n$vnetName=&quot;AZDatacenter&quot;\n$subnetIndex=0\n$vnet=Get-AzurevirtualNetwork -Name $vnetName -ResourceGroupName $rgName\n\n# Create the NIC\n$nicName=&quot;AzureInterface&quot;\n$domName=&quot;contoso-vm-lob07&quot;\n$pip=New-AzurePublicIpAddress -Name $nicName -ResourceGroupName $rgName -DomainNameLabel $domName -Location $locName -AllocationMethod Dynamic\n$nic=New-AzureNetworkInterface -Name $nicName -ResourceGroupName $rgName -Location $locName -SubnetId $vnet.Subnets[$subnetIndex].Id -PublicIpAddressId $pip.Id\n\n# Specify the name, size, and existing availability set\n$vmName=&quot;LOB07&quot;\n$vmSize=&quot;Standard_A3&quot;\n$avName=&quot;WEB_AS&quot;\n$avSet=Get-AzureAvailabilitySet &ndash;Name $avName &ndash;ResourceGroupName $rgName\n$vm=New-AzureVMConfig -VMName $vmName -VMSize $vmSize -AvailabilitySetId $avset.Id\n\n# Add a 200 GB additional data disk\n$diskSize=200\n$diskLabel=&quot;APPStorage&quot;\n$diskName=&quot;21050529-DISK02&quot;\n$storageAcc=Get-AzureStorageAccount -ResourceGroupName $rgName -Name $saName\n$vhdURI=$storageAcc.PrimaryEndpoints.Blob.ToString() + &quot;vhds/&quot; + $vmName + $diskName  + &quot;.vhd&quot;\nAdd-AzureVMDataDisk -VM $vm -Name $diskLabel -DiskSizeInGB $diskSize -VhdUri $vhdURI -CreateOption empty\n\n# Specify the image and local administrator account, and then add the NIC\n$pubName=&quot;MicrosoftWindowsServer&quot;\n$offerName=&quot;WindowsServer&quot;\n$skuName=&quot;2012-R2-Datacenter&quot;\n$cred=Get-Credential -Message &quot;Type the name and password of the local administrator account.&quot; \n$vm=Set-AzureVMOperatingSystem -VM $vm -Windows -ComputerName $vmName -Credential $cred -ProvisionVMAgent -EnableAutoUpdate\n$vm=Set-AzureVMSourceImage -VM $vm -PublisherName $pubName -Offer $offerName -Skus $skuName -Version &quot;latest&quot;\n$vm=Add-AzureVMNetworkInterface -VM $vm -Id $nic.Id\n\n# Specify the OS disk name and create the VM\n$diskName=&quot;OSDisk&quot;\n$storageAcc=Get-AzureStorageAccount -ResourceGroupName $rgName -Name $saName\n$osDiskUri=$storageAcc.PrimaryEndpoints.Blob.ToString() + &quot;vhds/&quot; + $vmName + $diskName  + &quot;.vhd&quot;\n$vm=Set-AzureVMOSDisk -VM $vm -Name $diskName -VhdUri $osDiskUri -CreateOption fromImage\nNew-AzureVM -ResourceGroupName $rgName -Location $locName -VM $vm\n</pre>\n\n<p>반복해서 만들려는 VM에 대한 명령 집합을 만든 후에는 PowerShell 스크립트 파일(*.ps1)로 저장할 수 있습니다. 즐겨보세요!</p>"
