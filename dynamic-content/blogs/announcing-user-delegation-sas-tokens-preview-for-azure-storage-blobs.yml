### YamlMime:Yaml
ms.openlocfilehash: 7a0d747e6dc99341b2a1bc163671b65ac74ab45d
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139906640"
Slug: announcing-user-delegation-sas-tokens-preview-for-azure-storage-blobs
Title: Azure Storage Blob에 대한 사용자 위임 SAS 토큰 미리 보기 발표
Summary: Azure Storage Azure Active Directory ID를 기반으로 미리 승인된 SAS 토큰(URL)에 대한 지원을 미리 봅니다.
Content: >-
  <p>클라우드 스토리지는 브라우저 및 모바일 애플리케이션의 콘텐츠 원본으로 사용되는 경우가 많습니다. 이는 일반적으로 서비스가 이 액세스를 프록시할 필요 없이 특정 콘텐츠에 직접 시간 제한 액세스를 제공하는 애플리케이션에서 발급한 사전 권한 URL을 사용하여 수행됩니다.</p>


  <p>Azure Storage SAS <a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-sas-overview?toc=%2fazure%2fstorage%2fblobs%2ftoc.json" target="_blank">토큰(공유 액세스 서명 토큰)을</a> 사용하여 이 패턴을 지원합니다. 이러한 토큰은 계정 관리자가 제어하는 스토리지 계정 액세스 키를 사용하여 권한 부여 문에 서명하여 스토리지 개체에 대한 시간 제한 액세스 권한을 부여합니다. 이 방법은 클라이언트에 필요한 제한된 액세스를 제공하지만, 특정 콘텐츠에 대한 읽기 액세스만 필요할 수 있는 전체 계정에 대한 모든 권한을 제공하기 때문에 이러한 토큰 발급 서비스에 대한 액세스를 과도하게 프로비전하는 경우가 있습니다.</p>


  <p>오늘 새 종류의 SAS 토큰, <strong>사용자 위임 SAS 토큰</strong>에 대한 미리 보기를 시작합니다. Azure Storage 대한 <a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-auth-aad?toc=%2fazure%2fstorage%2fblobs%2ftoc.json" target="_blank">Azure AD 및 Azure RBAC(역할 기반 액세스 제어)</a>의 최근 릴리스를 확장하여 권한이 낮은 사용자와 서비스는 이제 이 새로운 유형의 사전 권한 URL을 사용하여 클라이언트에 대한 액세스의 하위 집합을 위임할 수 있습니다. 클라이언트는 AD(Azure Active Directory) 계정에 연결된 사용자 위임 키를 검색한 다음 이를 사용하여 <strong>자체 액세스 권한의 하위 집합</strong>을 부여하는 SAS 토큰을 만듭니다.</p>


  <p>예를 들어 최종 사용자 콘텐츠에 대한 읽기 권한만 있는 애플리케이션 구성 요소를 구성하여 강력한 계정 액세스 키를 저장하고 사용하는 것과 관련된 위험 없이 클라이언트에 단기 읽기 전용 URL을 발급할 수 있습니다. Azure Storage 액세스 로그는 이 애플리케이션 구성 요소의 Azure AD 보안 주체와 연결된 이러한 SAS 토큰의 클라이언트 사용도 반영합니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/f6b2a3b5-21d1-464e-b17d-d2d29ba504b8.jpg"><img alt="An image showing the user delegation SAS flow" border="0" height="617" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/b12f271d-20df-47c3-8ff6-1e88edf9fc72.jpg" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="사용자 위임 SAS Flow" width="1024"></a></p>


  <p>이 미리 보기 중에 사용자 고유의 코드를 사용하여 사용자 위임 SAS 토큰을 생성하거나 Azure PowerShell 또는 Azure CLI를 사용할 수 있습니다. 먼저 SAS 토큰을 생성할 사용자 계정에 데이터에 액세스할 수 있는 RBAC 권한을 부여해야 합니다. <a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-auth-aad#assigning-rbac-roles-for-access-rights" target="_blank">여기 설명서에서</a> BLOB 데이터에 대한 RBAC 액세스 권한을 부여하는 방법에 대해 자세히 알아봅니다.</p>


  <h2>사용자 위임 SAS 토큰을 만드는 방법</h2>


  <p>이제 모든 사용자가 비프로덕션 사용을 위해 미리 보기 기능을 사용할 수 있습니다. 등록이 필요하지 않습니다.</p>


  <p>개발자의 경우 .NET 코드를 사용하여 사용자 위임 SAS 토큰을 생성하는 예제는 다음과 같습니다. 또한 Storage 및 통합<a href="https://github.com/Azure/azure-sdk-for-net/tree/master/sdk/identity/Azure.Identity" target="_blank">된 Azure.Identity</a> <a href="https://github.com/Azure/azure-sdk-for-net/tree/master/sdk/storage/Azure.Storage.Blobs" target="_blank">라이브러리를 위한</a> 새로운 .NET 클라이언트 라이브러리도 보여 드립니다.</p>


  <pre style="margin-left: 40px;">

  <code>client = new BlobServiceClient(accountUri, new DefaultAzureCredential());


  //define permission set to read blob, valid from now for a specified number of minutes

  BlobSasBuilder builder = new BlobSasBuilder()

  {
      ContainerName = containerName,
      BlobName = blobName,
      Permissions = &quot;r&quot;,
      Resource = &quot;b&quot;,
      StartTime = DateTimeOffset.UtcNow,
      ExpiryTime = DateTimeOffset.UtcNow.AddMinutes(tokenLifetime)
  };


  //refresh user-delegation key as necessary, valid for up to a maximum of 7 days

  if (currentUdk == null || currentUdk.SignedExpiry &lt;= builder.ExpiryTime)

  {
      currentUdk = client.GetUserDelegationKey(DateTimeOffset.UtcNow, DateTimeOffset.UtcNow.AddDays(7)).Value;
  }


  //generate a signed SAS token using the user-delegation key

  string sasToken = builder.ToSasQueryParameters(currentUdk, accountName).ToString();</code></pre>


  <p><a href="https://docs.microsoft.com/en-us/azure/storage/blobs/storage-blob-user-delegation-sas-create-dotnet" target="_blank">Azure Storage 설명서</a>에서 전체 작업 예제를 찾을 수 있습니다.</p>


  <p>사용자는 명령줄 도구 미리 보기를 사용하여 사용자 위임 SAS 토큰을 생성할 수도 있습니다. 다음은 Azure CLI를 사용하여 사용자&rsquo; 자격 증명을 기반으로 읽기 전용 SAS를 생성하는 예제입니다.</p>


  <pre style="margin-left: 40px;">

  <code>$ az login

  $ az storage blob generate-sas \

  &gt; --account-name myaccount \

  &gt; --container-name container \

  &gt; --name file.txt \

  &gt; --permissions r \

  &gt; --expiry 2019-08-30 \

  &gt; --auth-mode login \

  &gt; --as-user \

  &gt; --full-uri

  Argument &#39;--as-user&#39; is in preview. It may be changed/removed in a future release.


  https://myaccount.blob.core.windows.net/container/file.txt?se=2019-08-30&amp;sp=r&amp;sv=2018-11-09&amp;sr=b&amp;skoid=8c93ed4c-3e11-43f4-9307-3664c9c16554&amp;sktid=9341f370-b982-47de-b7c1-8dbe61328559&amp;skt=2019-08-28T22%3A57%3A38Z&amp;ske=2019-08-30T00%3A00%3A00Z&amp;sks=b&amp;skv=2018-11-09&amp;sig=7trGEakY86Uj5rXsH2ApiyCZfxFgNnh6NFy4wcnmfmQ%3D</code></pre>


  <p><a href="https://docs.microsoft.com/en-us/azure/storage/blobs/storage-blob-user-delegation-sas-create-powershell" target="_blank">Azure PowerShell</a> 및 <a href="https://docs.microsoft.com/en-us/azure/storage/blobs/storage-blob-user-delegation-sas-create-cli" target="_blank">Azure CLI</a>의 자세한 예제는 설명서를 참조하세요.</p>


  <p>Azure Blob에 대한 사용자 위임 SAS 토큰을 사용하면 권한이 낮은 ID에서 미리 승인된 URL을 발급할 수 있으며 모든 Azure 클라우드 및 위치에서 미리 보기로 사용할 수 있습니다. <a href="https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fdocs.microsoft.com%2Fen-us%2Frest%2Fapi%2Fstorageservices%2Fcreate-user-delegation-sas&amp;data=02%7C01%7Cv-jegodw%40microsoft.com%7C62e91a3df99743cc452b08d730b2cf8b%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637031416849669565&amp;sdata=m92cNFsBMuCqM4lnyQZHV5nkIxfdYl3frkiA7hsSwdw%3D&amp;reserved=0" target="_blank">설명서</a>에서 자세히 알아보고 시도해 보세요. 여러분의 의견을 <a href="mailto:AzureStorageFeedback@microsoft.com">AzureStorageFeedback@microsoft.com</a>듣고 싶습니다.</p>
