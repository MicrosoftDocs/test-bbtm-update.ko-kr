### YamlMime:Yaml
ms.openlocfilehash: 0aab7f1de081a598e25b9519a75f404fbbc4b2dc
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139899888"
Slug: azure-sql-database-geo-restore
Title: Azure SQL Database Geo-Restore
Summary: '이 게시물은 Azure SQL Database BCDR(비즈니스 연속성/재해 복구) 기능에 대한 시리즈를 계속 진행하며 지역 복원에 중점을 둡니다. 표준 지역 복제에 대한 이전 게시물에서 다양한 비즈니스 연속성 기능이 서비스 계층에 매핑되는 방법을 설명했습니다. '
Content: >-
  <strong>[2015/03/03에 업데이트됨]</strong>


  기본, 표준 및 Premium 데이터베이스 계층에 대한 ERT(예상 복구 시간) 및 RPO(복구 지점 목표)가 개선되었습니다.


  &nbsp;


  이 게시물은 Azure SQL Database BCDR(비즈니스 연속성/재해 복구) 기능에 대한 시리즈를 계속 진행하며 지역 복원에 중점을 둡니다. <a href="https://azure.microsoft.com/blog/2014/09/03/azure-sql-database-standard-geo-replication/">표준 지역 복제</a>에 대한 이전 게시물에서 다양한 비즈니스 연속성 기능이 서비스 계층에 매핑되는 방법을 설명했습니다. 아래 표는 빠른 새로 고침입니다.

  <table border="1" cellspacing="0" cellpadding="0">

  <tbody>

  <tr>

  <td valign="top" width="176">

  <p align="center"><b>BCDR 옵션</b></p>

  </td>

  <td valign="top" width="118">

  <p align="center"><b>기본 계층</b></p>

  </td>

  <td valign="top" width="114">

  <p align="center"><b>표준 계층</b></p>

  </td>

  <td valign="top" width="120">

  <p align="center"><b>프리미엄 계층</b></p>

  </td>

  </tr>

  <tr>

  <td valign="top" width="176">지정 시간 복원</td>

  <td valign="top" width="118">7일 이내의 모든 복원 지점</td>

  <td valign="top" width="114">14일 이내에 모든 복원 지점</td>

  <td valign="top" width="120">35일 이내의 모든 복원 지점</td>

  </tr>

  <tr>

  <td valign="top" width="176">지리적 복원</td>

  <td valign="top" width="118">ERT* &lt; 12시간 RPO† &lt; 1시간</td>

  <td valign="top" width="114">ERT* &lt; 12시간 RPO† &lt; 1시간</td>

  <td valign="top" width="120">ERT* &lt; 12시간 RPO† &lt; 1시간</td>

  </tr>

  <tr>

  <td valign="top" width="176">표준 지역에서 복제</td>

  <td valign="top" width="118">포함되지 않음</td>

  <td valign="top" width="114">ERT* &lt; 30s RPO† &lt; 5s</td>

  <td valign="top" width="120">ERT* &lt; 30s RPO† &lt; 5s</td>

  </tr>

  <tr>

  <td valign="top" width="176">활성 지리적 복제</td>

  <td valign="top" width="118">포함되지 않음</td>

  <td valign="top" width="114">포함되지 않음</td>

  <td valign="top" width="120">ERT* &lt; 30s RPO† &lt; 5s</td>

  </tr>

  </tbody>

  </table>

  * ERT(예상 복구 시간) - 복원/장애 조치(failover) 요청 후 데이터베이스가 완벽하게 작동할 것으로 예상되는 기간입니다.

  † RPO(복구 지점 목표) - 복구 후 응용 프로그램에서 손실될 수 있는 가장 최근의 데이터 변경 내용의 양(시간 간격)입니다.

  <h2>지역 복원이란?</h2>

  지역 복원을 통해 지역 중복 백업에서 데이터베이스를 복원하여 새 데이터베이스를 만들 수 있습니다. Azure 지역의 모든 서버에서 데이터베이스를 만들 수 있습니다. 지역 중복 백업을 해당 원본으로 사용하므로 가동 중단으로 인해 데이터베이스에 액세스할 수 없는 경우에도 데이터베이스를 복구하는 데 사용할 수 있습니다. 지역 복원은 추가 비용 없이 모든 서비스 계층에 대해 자동으로 사용하도록 설정됩니다.

  <h2>지역 복원 세부 정보</h2>

  지역 복원은 특정 시점 복원과 동일한 기술을 사용하며 한 가지 중요한 차이점이 있습니다. <a href="https://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/04/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx">RA-GRS</a>(지역 복제 Blob Storage)의 최신 일일 백업 복사본에서 데이터베이스를 복원합니다. 각 활성 데이터베이스의 경우 서비스는 매주 전체 백업, 매일 여러 개의 차등 백업 및 5분마다 저장되는 트랜잭션 로그를 포함한 백업 체인을 유지 관리합니다. 이러한 Blob는 주 지역에 대규모 실패 후에도 매일 백업을 사용할 수 있도록 지리적으로 복제됩니다. 그림 1에서는 이 프로세스를 보여 줍니다.


  <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/08/Geo-restore-Figure-1.png"><img style="padding-top: 0px;padding-left: 0px;padding-right: 0px;border-width: 0px" title="지역 복원(그림 1)" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Geo-restore-Figure-1_thumb.png" alt="Geo-restore (Figure 1)" width="1024" height="575" border="0" /></a>

  <p align="center">그림 1.스토리지 컨테이너에 복사된 주간 및 일별 백업의 지역 복제입니다.</p>

  지역에서 대규모 인시던트가 발생해 데이터베이스 애플리케이션을 사용할 수 없는 경우 지역 복원을 사용하여 가장 최근의 백업에서 다른 지역의 서버로 데이터베이스를 복원할 수 있습니다. 백업은 지역 복제되며 백업이 수행되고 다른 지역의 Azure Blob에 지역 복제되는 시점 사이에 지연이 있을 수 있습니다.대규모 인시던트에는 최대 1시간의 데이터 손실(예: 최대 1시간의 RPO)이 있을 수 있습니다. 그림 2는 복구 프로세스를 보여 줍니다.


  <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/08/Geo-restore-Figure-2.png"><img style="padding-top: 0px;padding-left: 0px;padding-right: 0px;border-width: 0px" title="지역 복원(그림 2)" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Geo-restore-Figure-2_thumb.png" alt="Geo-restore (Figure 2)" width="1024" height="575" border="0" /></a>

  <p align="center">그림 2.마지막 일별 백업에서 데이터베이스를 복원합니다.</p>


  <h2>지역 복원을 사용하는 방법</h2>

  영향을 받는 서버의 백업 탭을 사용하여 Azure 관리 포털에서 지역 복원을 호출할 수 있습니다. 이 탭은 해당 서버의 모든 데이터베이스에 대해 사용 가능한 모든 백업 목록을 제공하여 각 데이터베이스에 대한 마지막 백업 시간을 보여 줍니다. 복원을 위한 백업을 선택한 후에는 새 데이터베이스의 이름을 제공하고 모든 지역에 있을 수 있는 대상 서버를 지정할 수 있습니다. 확인되면 복원 요청은 대상 지역의 처리를 위해 큐에 배치됩니다. 그림 3-5에서는 이러한 단계를 보여 줍니다.


  <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/09/Geo-restore-capture-1.png"><img style="padding-top: 0px;padding-left: 0px;padding-right: 0px;border-width: 0px" title="지역 복원 캡처(1)" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Geo-restore-capture-1_thumb.png" alt="Geo-restore capture (1)" width="887" height="768" border="0" /></a>

  <p align="center">그림 3.복구하려는 데이터베이스가 포함된 성능이 저하된 서버를 선택합니다.</p>

  <p align="left"><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/09/Geo-restore-capture-3.png"><img style="padding-top: 0px;padding-left: 0px;padding-right: 0px;border-width: 0px" title="지역 복원 캡처(3)" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Geo-restore-capture-3_thumb.png" alt="Geo-restore capture (3)" width="887" height="768" border="0" /></a></p>

  <p align="center">그림 4.사용 가능한 백업 목록에서 복구할 데이터베이스를 선택합니다.</p>

  <p align="left"><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/09/Geo-restore-capture-4.png"><img style="padding-top: 0px;padding-left: 0px;padding-right: 0px;border-width: 0px" title="지역 복원 캡처(4)" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Geo-restore-capture-4_thumb.png" alt="Geo-restore capture (4)" width="887" height="768" border="0" /></a></p>

  <p align="center">그림 4.데이터베이스를 복원할 서버를 지정합니다.</p>

  <p align="left"><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/09/Geo-restore-capture-5.png"><img style="padding-top: 0px;padding-left: 0px;padding-right: 0px;border-width: 0px" title="지역 복원 캡처(5)" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Geo-restore-capture-5_thumb.png" alt="Geo-restore capture (5)" width="887" height="768" border="0" /></a></p>

  <p align="center">그림 5.복원 중인 데이터베이스의 상태 모니터링</p>

  <p align="left">표준 및 활성 지역 복제와 마찬가지로 REST API, PowerShell 및 Azure 관리 포털을 사용하여 지역 복원을 관리하고 호출할 수 있습니다. Azure 관리 포털은 소수의 데이터베이스를 임시로 지역 복원하는 데 적합합니다. REST API 또는 PowerShell을 사용하여 여러 데이터베이스의 복구를 스크립션하거나 사용자 지정 관리 스크립트 또는 애플리케이션과 통합할 수 있습니다. <a href="https://msdn.microsoft.com/en-us/library/azure/dn505719.aspx">Azure SQL Database REST API 및 Azure SQL Database</a> Recovery PowerShell API에 대해 자세히 확인할 수 있습니다.</p>

  실수로 복원 작업을 시작하고 취소하려는 경우 대상 마스터 데이터베이스에 연결하고 복원된 데이터베이스를 삭제하여 복원 작업을 수행할 수 있습니다. 데이터베이스 레코드는 복원 프로세스가 시작되는 즉시 표시됩니다. 따라서 복원이 완료되기를 기다리지 않고 삭제할 수 있습니다. 이렇게 하면 청구 영향을 방지할 수 있습니다.

  <h2>복구 시간에 영향을 주는 요인<del datetime="2014-09-06T00:08"></del></h2>

  복구 시간은 데이터베이스 크기 및 데이터베이스의 성능 수준, 대상 지역에서 처리되는 동시 복원 요청 수 등의 여러 요인에 의해 영향을 받습니다. 지역에서 중단이 장기화되면 다른 지역에서 처리되는 많은 수의 지역 복원 요청이 있을 수 있습니다. 필요한 경우 서비스는 복원 작업에서 사용하는 리소스를 제한하여 해당 지역의 기존 워크로드가 부정적인 영향을 받지 않도록 합니다. 많은 수의 요청이 있는 경우 해당 지역에 데이터베이스의 복구 시간이 늘어날 수 있습니다.


  지역 복원은 모든 서비스 계층에서 사용할 수 있지만 가장 긴 RPO 및 ERT(예측 복구 시간)를 사용하여 SQL Database 사용할 수 있는 DR 솔루션 중 가장 기본적인 솔루션입니다. 최대 크기가 2GB인 기본 데이터베이스의 경우 지역 복원은 ERT가 12시간인 합리적인 DR 솔루션을 제공합니다. 더 큰 표준 또는 Premium 데이터베이스의 경우 복구 시간이 상당히 짧거나 데이터 손실 가능성을 줄이려면 표준 또는 활성 지역 복제를 사용하는 것이 좋습니다. 두 지역 복제 복구 옵션 모두 지속적으로 복제된 보조 데이터베이스에 대한 장애 조치(failover)를 시작해야 하므로 RPO 및 ERT가 훨씬 낮습니다.

  <h2>DR 드릴</h2>

  프로덕션 데이터베이스가 재해로부터 적절하게 보호된다는 것을 보여 주는 것은 종종 규정 준수 요구 사항입니다. 지역 복원을 언제든지 사용할 수 있으므로 이 복구 옵션을 기반으로 하는 DR 프로시저가 효과적이라는 것을 스스로 만족시키기 위해 주기적인 DR 훈련을 수행할 수 있습니다.

  <h2>요약</h2>

  지역 복원, 표준 지역 복제 및 활성 지역 복제의 조합은 애플리케이션 및 비즈니스의 요구를 충족하는 비즈니스 연속성 솔루션을 구현하는 다양한 옵션을 제공합니다. 앞에서 설명한 비용 및 SLO 차이점 외에도 선택한 옵션은 사용하도록 설정된 비즈니스 연속성 시나리오를 정의합니다. 다음 표는 이러한 차이점을 요약하여 보여 줍니다.

  <table border="0" width="671" cellspacing="0" cellpadding="2">

  <tbody>

  <tr>

  <td valign="top" width="205"><strong>시나리오</strong></td>

  <td valign="top" width="161"><strong>지역 복원</strong></td>

  <td valign="top" width="156"><strong>표준 지역 복제</strong></td>

  <td valign="top" width="147"><strong>활성 지역 복제</strong></td>

  </tr>

  <tr>

  <td valign="top" width="205">지역 재해</td>

  <td valign="top" width="161">예</td>

  <td valign="top" width="156">예</td>

  <td valign="top" width="147">예</td>

  </tr>

  <tr>

  <td valign="top" width="205">DR 드릴</td>

  <td valign="top" width="161">예</td>

  <td valign="top" width="156">예</td>

  <td valign="top" width="147">예</td>

  </tr>

  <tr>

  <td valign="top" width="205">온라인 애플리케이션 업그레이드</td>

  <td valign="top" width="161">예</td>

  <td valign="top" width="156">예</td>

  <td valign="top" width="147">예</td>

  </tr>

  <tr>

  <td valign="top" width="205">온라인 애플리케이션 재배치</td>

  <td valign="top" width="161">예</td>

  <td valign="top" width="156">예</td>

  <td valign="top" width="147">예</td>

  </tr>

  <tr>

  <td valign="top" width="205">부하 분산 읽기</td>

  <td valign="top" width="161">예</td>

  <td valign="top" width="156">예</td>

  <td valign="top" width="147">예</td>

  </tr>

  </tbody>

  </table>

  <a><span style="color: #000000">지역 복원을 시도하여 BCDR 전략에 적합한 위치를 확인하는 것이 좋습니다. </span></a> <span style="color: #000000">언제나처럼 우리는 피드백을 면밀히 듣고 있으므로 의견을 알려주세요. </span>


  이 <a href="https://msdn.microsoft.com/en-us/library/azure/jj650016.aspx">문서에서</a> Azure SQL Database 백업 및 복원에 대해 자세히 확인할 수 있습니다.
