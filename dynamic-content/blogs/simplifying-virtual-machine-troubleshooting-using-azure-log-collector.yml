### YamlMime:Yaml
ms.openlocfilehash: 977062621d3d06fdce62e8cc027c206e4ef6ac0c
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139900621"
Slug: simplifying-virtual-machine-troubleshooting-using-azure-log-collector
Title: Azure 로그 수집기를 사용하여 Virtual Machine 문제 해결 간소화
Summary: 이 게시물은 Virtual Machine 및 Cloud Service 로그를 수집하기 위해 Azure 로그 수집기 확장을 사용하는 방법에 대한 정보를 제공합니다.
Content: >-
  <p>가상 머신 또는 클라우드 서비스 애플리케이션에서 문제가 발생하여 문제 해결을 위해 다른 역할/VM 인스턴스에서 로그를 수집해야 하는 시나리오를 실행했나요? 이러한 로그를 수집하기 위해 Virtual Machine에 연결할 수 없는 경우 어떻게 해야 할까요? 이러한&nbsp; 시나리오를 해결하기 위해 Azure 고객 지원 팀은 원격 Virtual Machine에 로그인하지 않고 <strong>도 Cloud Service 인스턴스</strong> 또는 <strong>Virtual Machines</strong> 에서 로그를 수집하고 업로드할 수 있는 Azure 로그 수집기 확장을 릴리스했습니다.&nbsp;&nbsp; 이러한 로그는 Azure 지원 팀 또는 문제를 해결하는 모든 사람과 공유할 수 있는 Azure Storage에 자동으로 업로드될 수 있습니다. VM 확장을 새로&#39;경우 설명서 사이트&nbsp; <a href="https://azure.microsoft.com/en-us/documentation/articles/virtual-machines-windows-extensions-features/">모음</a>을 방문하는 VM Extensionsby&nbsp;에 대한 개요를 확인할 수 있습니다.</p>


  <blockquote>참고: 현재 버전의 로그 수집기는 Windows VM만 대상으로 하며 Linux 지원은 곧 제공될 예정입니다.</blockquote>


  <h2>로그 수집기 확장이 필요한 이유는 무엇인가요?</h2>


  <p>Azure PaaS 또는 IaaS 플랫폼에 배포된 애플리케이션의 문제 해결을 위해 작업하는 경우 문제가 발생한 정확한 시간에 가상 머신에서 진단 데이터를 수집해야 합니다. 데이터는 사용자 고유의 서비스 또는 Azure VM 에이전트와 같은 Azure 구성 요소에서 생성될 수 있습니다. 올바른 데이터를 찾고 수집하려면 Azure 환경에 대한 심층적인 지식이 필요합니다.&nbsp; Azure 로그 수집기는 다음을 지원하여 이를 간소화합니다.</p>


  <ul>
      <li>사용자 지정을 지원하는 로그 컬렉션에 대한 간단한 명령줄 인터페이스입니다.</li>
      <li>원격 액세스 연결에 대한 종속성이 없으므로 원격 액세스가 활성화되지 않았거나 어떤 이유로든 작동이 중지되더라도 진단 데이터가 계속 수집됩니다.</li>
      <li>서비스 관리 REST API 또는 Azure PowerShell cmdlet을 사용하여 어디서나 확장을 사용하도록 설정할 수 있습니다.<b> </b></li>
      <li>클라우드 서비스에 많은 역할 인스턴스가 있는 경우 확장은 단일 명령 시퀀스를 사용하여 모든 가상 머신에서 로그 데이터를 가져오는 데 상당한 시간을 절약할 수 있습니다.</li>
      <li>VM에서 사용자 지정 위치를 지정하여 추가 데이터 파일을 수집할 수 있습니다.</li>
      <li>Virtual Machines와 Cloud Services 모두에서 작동합니다.</li>
  </ul>


  <h4>&nbsp;</h4>


  <h2>확장에서 수집하는 로그 파일은 무엇인가요?</h2>


  <p>Azure 로그 수집기에서 지원하는 컬렉션 모드는 다음과 같습니다.</p>


  <table border="0" cellpadding="2" cellspacing="0" style="height: 296px;" width="663">
      <tbody>
          <tr>
              <td valign="top" width="200"><strong>형식</strong></td>
              <td valign="top" width="527"><strong>수집된 로그</strong></td>
          </tr>
          <tr>
              <td valign="top" width="200">Azure 플랫폼 로그</td>
              <td valign="top" width="527">이 컬렉션 모드에는 Azure 게스트 에이전트 및 기타 Azure 구성 요소와 관련된 모든 로그가 포함됩니다.</td>
          </tr>
          <tr>
              <td valign="top" width="200">모든 로그</td>
              <td valign="top" width="527">
              <ul>
                  <li>Azure 플랫폼 로그</li>
                  <li>시스템 및 애플리케이션 이벤트 로그</li>
                  <li>HTTP 오류 로그</li>
                  <li>IIS 로그</li>
                  <li>설치 로그</li>
                  <li>및 기타 시스템 로그</li>
              </ul>
              </td>
          </tr>
          <tr>
              <td valign="top" width="200">추가 로그</td>
              <td valign="top" width="527">모든 사용자 지정 로그 폴더는 컬렉션의 대상으로 지정할 수 있습니다.</td>
          </tr>
      </tbody>
  </table>


  <p>이 확장 프로그램에서 수집할<a href="https://acom-sandbox.azurewebsites.net/en-us/documentation/articles/virtual-machines-windows-log-collector-extension/?rnd=1"> </a> 파일에 대한 설명은 <a href="https://azure.microsoft.com/en-us/documentation/articles/virtual-machines-windows-log-collector-extension/">VM 확장 설명서</a>에서 이러한 두 모드를 구성하는 방법에 대한 자세한 내용과 <a href="https://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx">여기에</a> 있는 블로그를 참조하세요.</p>


  <h2>Azure 로그 수집기 확장을 사용하는 방법</h2>


  <p>클라우드 서비스 문제 해결 또는 Azure Virtual Machine 내에서 실행되는 애플리케이션에 따라 <a href="https://azure.microsoft.com/en-us/documentation/articles/virtual-machines-windows-log-collector-extension/">설명서</a>에서는SetAzureServiceLogCollector.ps1및&nbsp; &lsquo;SetAzureVMLogCollector.ps1&nbsp; &rsquo; &rsquo;두&nbsp; &lsquo; 가지 샘플 PowerShell 스크립트를 제공하고, 이러한 스크립트를 복사하고 설명서 페이지의 지침에 따라 로컬로 실행합니다.&nbsp; 그 후 로그 수집은 아래와 같이 간단합니다. Azure VM에 대한 샘플 사용 사례입니다.</p>


  <pre class="prettyprint">

  #Specify your cloud service name

  $ServiceName = &#39;YourServiceName&#39;


  #Specify the instances on which extension will be installed and enabled.  Use wildcard * for all instances

  $VMName = &quot;YourVMName&quot;


  #Specify the additional data collection folders and settings

  $AdditionalDataList = @()


  #Specify the collection mode, &quot;Full&quot; or &quot;GA&quot;

  $mode = &quot;Full&quot;

  </pre>


  <pre class="prettyprint">

  $StorageAccountName = &#39;Your Azure Storage Account Name&#39;

  $StorageAccountKey = &#39;Your Storage Key&#39;

  </pre>


  <pre class="prettyprint">

  .\SetAzureServiceLogCollector.ps1 -ServiceName YourCloudServiceName  -Roles $roles  -Instances $instances &ndash;Mode $mode -StorageAccountName $StorageAccountName -StorageAccountKey $StorageAccountKey -AdditionDataLocationList $AdditionalDataList</pre>


  <p>마찬가지로 Azure Cloud Service에 대한 샘플 사용 사례는 다음과 같습니다.</p>


  <pre class="prettyprint">

  .\SetAzureServiceLogCollector.ps1 -ServiceName YourCloudServiceName  -Roles $roles  -Instances $instances &ndash;Mode $mode -StorageAccountName $StorageAccountName -StorageAccountKey $StorageAccountKey -AdditionDataLocationList $AdditionalDataList</pre>


  <p>참고: 이 두 스크립트는 <a href="https://azure.microsoft.com/en-us/documentation/articles/virtual-machines-windows-log-collector-extension/">설명서 페이지에서</a> 복사할 수 있습니다. 명령을 다시 반복하여 로그를 여러 번 수집합니다. 로그 및 VM 크기에 따라 로그를 스토리지 계정에 업로드하는 데&nbsp; 최대 몇 분 정도 걸릴 수 있습니다.</p>


  <h2>로그가 수집되면 어떻게 됩니까?</h2>


  <p>로그가 스토리지 계정에 업로드되면 <a href="https://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx">다음</a> 단계에 따라 문제 해결을 검사하거나 지원 인시던트가 있는 경우 Azure 지원 팀에 보낼 수 있습니다. 확장이 더 이상 필요하지 않은 경우 MSDN 설명서를 사용하여 확장을 제거할 수 있습니다. IaaS VM에 대한 샘플 코드는 다음과 같습니다. IaaS의 경우:</p>


  <pre class="prettyprint">

  Get-AzureVM -ServiceName $ServiceName -Name $VMName | Set-AzureVMExtension -Publisher Microsoft.WindowsAzure.Compute -ExtensionName &quot;AzureLogCollector&quot; -Version 1.0 -Uninstall | Update-AzureVM -Verbose</pre>


  <p>이 확장이 유용하기를 바랍니다! Linux 버전의 이&nbsp; 버전과 확장을 추가하기 위한&nbsp; 사용자 지정 cmdlet 지원을 계속 지켜보세요!</p>
