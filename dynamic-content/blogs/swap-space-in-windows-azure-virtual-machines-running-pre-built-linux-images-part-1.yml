### YamlMime:Yaml
ms.openlocfilehash: b0a3e9f417fab8f6d0209bec5c36205a23db396e
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139900211"
Slug: swap-space-in-windows-azure-virtual-machines-running-pre-built-linux-images-part-1
Title: 미리 빌드된 Linux 이미지를 실행하는 Windows Azure Virtual Machines의 SWAP 공간 - 1부
Summary: 이 문서는 Azure CAT 팀의 MSFT(Piyush Ranjan)에 의해 작성되었습니다.  Windows Azure에서 인프라 서비스(Virtual Machines 및 Virtual Network)의 최근 일반 공급으로,...
Content: '<p>이 문서는 Azure CAT 팀의 MSFT(Piyush Ranjan)에 의해 작성되었습니다.</p>  <p>Windows Azure에서 인프라 서비스(Virtual Machines 및 Virtual Network)의 최근 일반 공급으로 더 많은 엔터프라이즈 워크로드가 클라우드 경제, 규모 및 속도를 활용하기 위해 퍼블릭 클라우드로 이동하고 있습니다. Ive&rsquo;는 최근 클라우드의 빅 데이터와 같은 엔터프라이즈 워크로드에 참여했습니다. 다음은 여러분과 공유하고 싶은 몇 가지 팁과 모범 사례입니다.</p>  <p>이 프로젝트는 미리 빌드된 Linux 이미지를 사용하여 Windows Azure에 다중 노드 Hadoop 클러스터를 배포해야 했습니다. Windows Azure Image Gallery의 CentOS 6.3 이미지를 사용하여 중간 크기의 VM(가상 머신)을 프로비전하고 단일 노드 코어 Hadoop 배포를 진행했습니다. 약간 더 무거운 워크로드를 테스트하기 시작했을 때 VM이 종종 동결되거나 응답하지 않는다는 것을 제외하고는 모든 것이 잘 작동했습니다.</p>  <p>결국 2개의 CPU 코어와 3.5GB의 메모리가 있는 중간 크기의 VM &ndash; 의 리소스와 관련이 있다고 추측하는 것은 어렵지 않습니다. 그러나 전체 VM이 응답하지 않거나 연결 삭제를 시작할 것이라고는 예상하지 못했습니다. 이 문제를 친구 및 동료와 논의한 후 VM에 스왑(즉, Windows 페이지 파일이라고 함)이 전혀 구성되어 있지 않은 것으로 확인되었습니다. 따라서 메모리 압력이 증가하면 가상 메모리 시스템을 디스크로 교환할 수 없습니다.</p>  <p>Linux 셸 프롬프트에서 무료 명령을 실행&ldquo;하여 시스템이 메모리를 어떻게 수행하는지 확인할 수 있으며, 특히 cat /proc/swaps&rdquo;를 사용하여 &ldquo;스왑 공간 &ndash; 의 상태 및 사용량을 확인할 수&rdquo; 있습니다. 아래 스크린샷을 참조하세요.</p>  <p><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/5633.swap1.png" alt="" border="0"></p>  <p>Windows Azure Virtual Machines&ldquo;에서 프로비전된 Linux VM&rsquo;의 기본 사례와 마찬가지로 스왑 공간이 전혀 구성되지 않은 경우 cat /proc/swaps&rdquo;는 아무 것도 반환하지 않으며, 마찬가지로 &ldquo;무료&rdquo; 명령은 교환에 아무 작업도 표시하지 않습니다.</p>  <p>흥미로운 질문은 Linux 라이브러리 이미지(예: Windows Azure Image Gallery에서)를 사용하여 VM 프로비저닝을 자동으로 구성하지 않는&rsquo; 이유입니다. 여기서는 사용자가 스왑의 크기와 위치를 결정하고 프로비저닝을 게시해야 한다고 생각합니다. 그러나 프로세스가 충돌하거나 VM이 중지될 때까지 스왑이 구성되지 않고 VM을 계속 사용할 수 있습니다.</p>  <p>즉, 스왑 공간을 가져오는 것만 있으면 리소스 디스크에서 파일 기반 스왑을 구성하는 간단한 단계를 수행했습니다. Windows Azure의 중간 크기 가상 머신에는 /mnt/resource로 &ldquo;탑재된 135GB의 리소스&rdquo; 디스크가 함께 제공됩니다. 아래에는 VM에서 파일 기반 스왑 공간을 구성하는 단계의 연습이 있습니다.</p>  <ul>  <li>&ldquo;fallocate&rdquo; 명령을 사용하여 리소스 디스크에 적절한 크기의 스왑 파일(예: 5GB)을 할당합니다. 구문은 다음과 &ldquo;같습니다. fallocate -l 5g /mnt/resource/swap5g&rdquo; 여기서 &ldquo;swap5g&rdquo; 는 파일의 이름입니다.</li>  <li>루트 사용자만 스왑 파일에 대한 읽기/쓰기 권한을 없도록 chmod&rdquo; 명령을 사용하여 &ldquo;파일에 대한 권한을 변경합니다. 구문은 &ldquo;chmod 600 /mnt/resource/swap5g입니다.&rdquo;</li>  <li>&ldquo;mkswap&rdquo; 명령을 사용하여 파일을 스왑 영역으로 설정합니다. 구문은 &ldquo;mkswap /mnt/resource/swap5g입니다.&rdquo;</li>  <li>swapon&rdquo; 명령을 사용하여 스왑 파일을 사용하도록 &ldquo;설정합니다. 구문은 &ldquo;swapon /mnt/resource/swap5g입니다.&rdquo;</li>  <li>지금 스왑을 사용할 준비가 되었으며 &ldquo;cat /proc/swaps&rdquo; 명령은 이제 이를 확인해야 합니다. Azure에서 VM이 &ldquo;재활용되더라도 교환 설정이 유지되도록 /etc/fstab&rdquo; 파일에 항목을 추가합니다. 구문은 echo &ldquo;/mnt/resource/swap5g&nbsp;&nbsp; none&nbsp; swap&nbsp; sw&nbsp; 0 0&rdquo; &gt;&gt; /etc/fstab입니다.</li>  </ul>  <p>다음은 내 VM에서 실행된 위의 명령의 기록입니다.</p>  <p><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/8176.Screen-Shot-2013_2D00_07_2D00_29-at-11.04.10-AM.png" alt="" border="0"></p>  <p><strong>승인</strong>: 스왑 문제를 해결하고 해결하는 데 도움을 주신 동료 아미트 스리바스타바에게 감사드립니다.</p>'
