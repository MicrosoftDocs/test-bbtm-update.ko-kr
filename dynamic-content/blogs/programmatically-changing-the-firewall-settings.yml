### YamlMime:Yaml
ms.openlocfilehash: a082bfa41c686d1147038aaf9ac9244ec4faebb3
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139912678"
Slug: programmatically-changing-the-firewall-settings
Title: 프로그래밍 방식으로 방화벽 설정 변경
Summary: '[이 문서는 SQL Azure 팀에서 제공했습니다.] SQL Azure 두 가지 유형의 액세스 제어가 있습니다. SQL 인증 로그인 및 암호와 IP 주소로 액세스를 제한하는 서버 쪽 방화벽.'
Content: "<p>[이 문서는 SQL Azure 팀에서 제공했습니다.]</p><p>SQL Azure 두 가지 유형의 액세스 제어, 즉 SQL 인증 로그인 및 암호와 IP 주소로 액세스를 제한하는 서버 쪽 방화벽이 있습니다. 이 블로그 게시물에서는 방화벽 설정을 프로그래밍 방식으로 수정하는 방법을 설명합니다. 프로그래밍 방식으로 로그인을 만드는 방법에 대한 자세한 내용은 이 블로그 게시물을 참조하세요.</p>  <h2>방화벽</h2>  <p>SQL Azure SQL Azure 서버에 대한 <a href=\"https://msdn.microsoft.com/en-us/library/ee621782.aspx\">방화벽</a>을 유지 관리하므로 클라이언트 IP 주소 액세스 권한을 부여하지 않으면 누구나 서버에 연결할 수 없습니다. 이 작업을 수행하는 가장 일반적인 방법은 <a href=\"https://sql.azure.com/\">SQL Azure 포털</a>을 사용하는 것입니다. SQL Azure 사용한 경우 포털을 사용하여 방화벽 규칙을 만들었습니다. 클라이언트 IP 액세스 권한을 부여하기 전까지는 SQL Azure 연결할 수 없습니다. 다음은 포털의 스크린샷입니다.</p>  <p><a href=\"\"><img style=\"border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px\" title=\"clip_image001\" border=\"0\" alt=\"clip_image001\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/8867.clip_5F00_image001_5F00_thumb_5F00_5ED1BD79.png\" width=\"660\" height=\"338\"></a></p>  <h2>프로그래밍 방식으로 방화벽 규칙 변경</h2>  <p>SQL Azure SQL Azure 연결하여 master 데이터베이스에서 Transact-SQL 실행하여 방화벽 규칙을 변경할 수 있습니다. 시스템 확장 저장 프로시저인 <b>sp_set_firewall_rule</b> 사용하여 방화벽 규칙을 추가할 수 있습니다. 다음은 단일 IP 주소에 대한 방화벽 규칙을 만드는 Transact-SQL 예제입니다.</p>  <pre class=\"csharpcode\"><span class=\"kwrd\">exec</span> sp_set_firewall_rule N<span class=\"str\">'Wayne Berry'</span>,<span class=\"str\">'206.63.251.3'</span>,<span class=\"str\">'206.63.251.3'</span></pre>      <p>다음은 Microsoft 서비스 및 Windows Azure에 방화벽을 사용하도록 설정하는 예제입니다.</p>    <pre class=\"csharpcode\"><span class=\"kwrd\">exec</span> sp_set_firewall_rule N<span class=\"str\">'MicrosoftServices'</span>,<span class=\"str\">'0.0.0.0'</span>,<span class=\"str\">'0.0.0.0'</span></pre>      <p>모든 방화벽 규칙에는 고유한 이름이 있어야 하며 대/소문자를 구분하지 않습니다. <b>뷰 sys.firewall_rules</b> 호출하여 방화벽 규칙 목록을 가져올 수 있습니다. Transact-SQL 예는 다음과 같습니다.</p>    <pre class=\"csharpcode\"><span class=\"kwrd\">select</span> * <span class=\"kwrd\">from</span> sys.firewall_rules</pre>      <p>SQL Server Management Studio 표시된 SQL Azure 서버(위의 포털 스크린샷 참조)에서 실행된 이 명령의 출력은 다음과 같습니다.</p>    <p><a href=\"\"><img style=\"border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px\" title=\"clip_image002\" border=\"0\" alt=\"clip_image002\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6330.clip_5F00_image002_5F00_thumb_5F00_2088F308.png\" width=\"648\" height=\"109\"></a></p>    <p><b>sp_delete_firewall_rule </b>시스템 확장 저장 프로시저를 사용하여 방화벽 규칙을 삭제할 수도 있습니다.</p>    <pre class=\"csharpcode\"><span class=\"kwrd\">exec</span> sp_delete_firewall_rule N<span class=\"str\">'Wayne Berry'</span></pre>      <p>이러한 방화벽 확장 저장 프로시저에 대한 자세한 내용은 여기에서 확인할 수 <a href=\"https://msdn.microsoft.com/en-us/library/ee621782.aspx\">있습니다</a>.</p>    <h3>보안 고려사항</h3>    <p>마스터 데이터베이스에 연결된 동안 서버 수준 보안 주체 로그인만 SQL Azure 서버에 대한 방화벽 설정을 구성할 수 있습니다. SQL Azure 포털에 있는 관리자 로그인과 동일한 로그인입니다.</p>    <p>또 다른 점은 SQL Azure 연결하기 전에 방화벽 규칙이 하나 이상 있어야 한다는 것입니다. <b>sp_set_firewall_rule</b> 및 다른 확장 저장 프로시저를 실행하려면 해당 연결이 필요합니다.</p>    <h2>명령줄에서</h2>    <p>sqlcmd.exe 사용하여 Windows 명령줄에서 SQL Azure 대해 Transact-SQL 실행할 수 있습니다. sqlcmd.exe 사용하는 방법에 대한 자세한 내용은 이 블로그 게시물에서 확인할 수 있습니다. 명령줄에서 SQL Azure 대해 Transact-SQL 실행할 수 있으므로 명령줄의 SQL Azure 대해 위의 방화벽 명령을 실행할 수 있습니다. 명령줄을 사용하여 데이터베이스 만들기 스크립트(이 블로그 게시물 참조), 스키마 만들기 및 스키마 동기화와 함께 방화벽 규칙을 스크립팅할 수 있습니다.</p>    <h2>Windows Azure에서</h2>    <p>Windows Azure는 ADO.NET 사용하여 SQL Azure 대해 Transact-SQL 실행할 수 있습니다. 즉, Windows Azure에서 SQL Azure 방화벽 규칙을 프로그래밍 방식으로 추가할 수 있습니다. Windows Azure를 통해 이 작업을 수행하는 데 대한 좋은 점 중 하나는 azure를 Windows 호출자의 클라이언트 쪽 IP 주소를 \"알고 있다\"는 것입니다.</p>    <p>한 가지 방법은 Windows Azure 웹 역할에서 웹 페이지를 호출한 모든 사용자가 SQL Azure 방화벽 규칙에 IP 주소를 추가하여 SQL Azure 계정에 액세스할 수 있도록 하는 간단한 인터페이스를 만드는 것입니다. <b>선택한 인증 방법을 사용하여 Windows Azure에서 호출자가 인증되었는지 확인하려고 합니다. </b> 이 기술을 사용하면 PowerPivot 또는 WinForms 사용자가 웹 페이지에 요청을 수행하여 SQL Azure 직접 액세스 권한을 부여할 수 있습니다. 여기에서 PowerPivot 통해 SQL Azure 연결하는 방법에 대해 자세히 알아보고 여기에서 Winforms를 참조하세요.</p>    <p>다음은 시작하는 데 사용할 수 있는 몇 가지 예제 코드입니다.</p>    <pre class=\"csharpcode\">String clientIPAddress = Request.UserHostAddress;    <span class=\"kwrd\">using</span> (SqlConnection sqlConnection =       <span class=\"kwrd\">new</span> SqlConnection(ConfigurationManager.ConnectionStrings[&quot;SqlAzureMaster&quot;].ConnectionString))  {      sqlConnection.<span class=\"kwrd\">Open</span>();        <span class=\"kwrd\">using</span> (SqlCommand sqlCommand =          <span class=\"kwrd\">new</span> SqlCommand(&quot;sp_set_firewall_rule&quot;, sqlConnection))      {          sqlCommand.CommandType = System.<span class=\"kwrd\">Data</span>.CommandType.StoredProcedure;            sqlCommand.<span class=\"kwrd\">Parameters</span>.<span class=\"kwrd\">Add</span>(&quot;@name&quot;, SqlDbType.NVarChar).<span class=\"kwrd\">Value</span>               = clientIPAddress;          sqlCommand.<span class=\"kwrd\">Parameters</span>.<span class=\"kwrd\">Add</span>(&quot;@start_ip_address&quot;, SqlDbType.<span class=\"kwrd\">VarChar</span>).<span class=\"kwrd\">Value</span>               = clientIPAddress;          sqlCommand.<span class=\"kwrd\">Parameters</span>.<span class=\"kwrd\">Add</span>(&quot;@end_ip_address&quot;, SqlDbType.<span class=\"kwrd\">VarChar</span>).<span class=\"kwrd\">Value</span>               = clientIPAddress;              sqlCommand.ExecuteNonQuery();      }  }</pre>      <h2>요약</h2>    <p>질문, 우려 사항, 의견이 있나요? 아래에 게시하고 우리는 그들을 해결하기 위해 노력할 것입니다.</p>"
