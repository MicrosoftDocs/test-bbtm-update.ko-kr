### YamlMime:Yaml
ms.openlocfilehash: d8671136069aeb7952af1e6aab8b4a5bc24870e9
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139897444"
Slug: azure-traffic-manager-external-endpoints-and-weighted-round-robin-via-powershell
Title: PowerShell을 통해 외부 엔드포인트 및 가중 라운드 로빈 Azure Traffic Manager
Summary: Azure Traffic Manager 외부 엔드포인트 및 가중 부하 분산을 발표하고 Traffic Manager 서비스 관리를 위해 새 PowerShell cmdlet을 통해 이러한 기능을 관리하는 방법을 발표합니다.
Content: "TechEd North America에서는 Azure 외부 엔드포인트에 대한 Azure Traffic Manager 지원을 발표했습니다.라운드 로빈 부하 분산을 사용할 때 가중치에 대한 지원을 추가하여 향상된 기능을 발표하게 되어 기쁩니다.이러한 기능을 함께 사용하면 온-프레미스와 클라우드 간에 하이브리드 시나리오에서 트래픽을 분산하는 등 다양한 새로운 시나리오를 사용할 수 있습니다.\n\n이러한 기능은 이제 PowerShell cmdlet을 통해 지원되며, Traffic Manager 지원하도록 새로 확장됩니다.\n<h2>소개</h2>\nTraffic Manager 사용하면 동일한 데이터 센터에서 실행 중이든 전 세계의 다른 데이터 센터에서 실행되는지 여부에 관계없이 여러 서비스에서 들어오는 트래픽의 부하를 분산할 수 있습니다.Traffic Manager 사용하도록 설정된 주요 시나리오에는 최종 사용자를 가장 가까운 배포로 라우팅하여 애플리케이션 성능을 개선하고 서비스를 모니터링하고 서비스가 중단될 때 자동 장애 조치(failover)를 제공하여 고가용성을 사용하도록 설정하는 것이 포함됩니다.\n\n최근까지 Azure Cloud Services(IaaS 및 PaaS) 및 Azure Websites만 지원되었습니다.   <strong>이제 Azure 외부의 엔드포인트에 대한 Traffic Manager 지원을 사용하도록 설정했습니다.  또한 가중치를 지원하도록 라운드 로빈 부하 분산 방법을 개선하여 엔드포인트 간에 트래픽이 분산되는 방식을 보다 세세하게 제어할 수 있도록 했습니다.</strong>\n\n<strong>이러한 향상된 기능은 더 광범위한 애플리케이션에 Traffic Manager 이점을 제공하고 다양한 새로운 시나리오를 가능하게 합니다.</strong>\n\n예를 들어 외부 엔드포인트 지원은 이제 azure를 사용하여 기존 온-프레미스 또는 외부 호스팅 배포를 확장할 수 있는 Traffic Manager 의미합니다.이는 성능 향상을 위한 추가 지리적 위치, 활성-활성 또는 장애 조치(failover)의 중복성 증가 또는 지속적으로 또는 수요 급증을 처리하기 위한 '클라우드로 버스트'로 추가 용량을 위한 것일 수 있습니다.또한 외부 엔드포인트를 사용하면 Traffic Manager 프로필이 이전에는 불가능했던 별도의 Azure 구독의 서비스를 확장할 수 있습니다.\n\n가중 라운드 로빈을 사용하면 사용률을 최대화하기 위해 배포 전체의 부하를 조정하거나 'A/B 테스트' 체계의 일부로 적은 양의 트래픽을 별도의 배포로 전환하는 등의 추가적인 새로운 시나리오를 사용할 수 있습니다.외부 엔드포인트와 함께 사용하면 온-프레미스 애플리케이션을 클라우드로 원활하게 마이그레이션할 수 있습니다. 온-프레미스 애플리케이션으로 전달되는 트래픽의 100%로 시작한 다음, '다이얼을 켜서' 트래픽을 클라우드 기반 버전으로 점진적으로 마이그레이션할 수 있습니다.\n\n이러한 기능은 현재 <a href=\"https://msdn.microsoft.com/en-us/library/azure/hh758255.aspx\" target=\"_blank\">REST API</a> 및 새로운 Traffic Manager PowerShell cmdlet을 통해 사용할 수 있습니다.Azure 관리 포털을 통해 사용할 수 없습니다.이 블로그 게시물의 나머지 부분에서는 Traffic Manager 대한 새 PowerShell 지원을 사용하여 이러한 새로운 기능을 활용하는 방법을 보여줍니다.\n<h2>시작하기</h2>\nAzure PowerShell 시작하려면 Azure PowerShell <a href=\"https://azure.microsoft.com/en-us/documentation/articles/install-configure-powershell/\" target=\"_blank\">설치 및 구성하는 방법을</a> 참조하세요.버전 0.8.3 이상을 사용해야 합니다.\n<h3>기존 프로필 및 엔드포인트 보기</h3>\n'Get-AzureTrafficManagerProfile' cmdlet은 프로필 개체의 배열을 검색합니다. 그러면 다음을 볼 수 있습니다.\n<pre class=\"prettyprint\">PS C:\\&gt; $profiles = Get-AzureTrafficManagerProfile\nPS C:\\&gt; $profiles | Format-Table\nName                       DomainName                                    Status\n----                       ----------                                    ------\nMyProfile                  myprofile.trafficmanage...                   Enabled\nwebsites                   websites.trafficmanager...                   Enabled</pre>\n또는 '-Name' 매개 변수를 지정하여 단일 프로필만 검색할 수 있습니다. 각 프로필에는 프로필 이름, Traffic Manager 도메인, TTL 및 엔드포인트 모니터링 설정에 대한 필드가 포함되어 있습니다.\n<pre class=\"prettyprint\">PS C:\\&gt; $profile = Get-AzureTrafficManagerProfile -Name \"MyProfile\"\nPS C:\\&gt; $profile | Format-List\nTimeToLiveInSeconds : 30\nMonitorRelativePath : /\nMonitorPort         : 80\nMonitorProtocol     : Http\nLoadBalancingMethod : RoundRobin\nEndpoints           : {tm-demo-us.cloudapp.net, www.microsoft.com}\nMonitorStatus       : CheckingEndpoints\nName                : MyProfile\nDomainName          : myprofile.trafficmanager.net\nStatus              : Enabled</pre>\n엔드포인트의 배열도 있습니다. 엔드포인트 도메인 이름, 위치, 유형, 상태, 모니터링 상태 및 가중치가 차례로 포함됩니다.\n<pre class=\"prettyprint\">PS C:\\&gt; $profile.Endpoints | Format-\nDomainName    Location            Type    Status  MonitorStatus   Weight\n----------    --------            ----    ------  -------------   ------\ntm-demo-us...             CloudService   Enabled         Online        1\nwww.micros...                      Any   Enabled         Online        1</pre>\n<h3>프로필 만들기 및 엔드포인트 추가</h3>\n일반적인 패턴은 'Profile' 개체를 사용하여 Traffic Manager 프로필을 나타내는 것입니다.cmdlet을 사용하여 오프라인으로 이 프로필을 구성한 다음 준비가 되면 'Set-AzureTrafficManagerProfile' cmdlet을 사용하여 Azure에 로드합니다.(실제로 Azure 관리 API를 호출하는 유일한 cmdlet은 'New-AzureTrafficManagerProfile' 및 'Set-AzureTrafficManagerProfile'입니다.)\n\n다음 예제에서는 새 Traffic Manager 프로필을 만들고, 두 개의 엔드포인트를 추가하고, 결과를 Azure에 제출합니다.\n<pre class=\"prettyprint\">PS C:\\&gt; $profile = New-AzureTrafficManagerProfile -Name \"MyProfile\" -DomainName \"myprofile.trafficmanager.net\" -LoadBalancingMethod \"RoundRobin\" -Ttl 30 -MonitorProtocol \"Http\" -MonitorPort 80 -MonitorRelativePath \"/\"\nPS C:\\&gt; $profile = Add-AzureTrafficManagerEndpoint -TrafficManagerProfile $profile -DomainName \"myapp-eu.cloudapp.net\" -Status \"Enabled\" -Type \"CloudService\"\nPS C:\\&gt; $profile = Add-AzureTrafficManagerEndpoint -TrafficManagerProfile $profile -DomainName \"myapp-us.cloudapp.net\" -Status \"Enabled\" -Type \"CloudService\" \nPS C:\\&gt; Set-AzureTrafficManagerProfile –TrafficManagerProfile $profile</pre>\n이 블로그의 뒷부분에 있는 다른 예제와 마찬가지로 이러한 명령은 'piped'일 수도 있습니다.\n<pre class=\"prettyprint\">PS C:\\&gt; New-AzureTrafficManagerProfile -Name \"MyProfile\" -DomainName \"myprofile.trafficmanager.net\" -LoadBalancingMethod \"RoundRobin\" -Ttl 30 -MonitorProtocol \"Http\" -MonitorPort 80 -MonitorRelativePath \"/\" | Add-AzureTrafficManagerEndpoint -DomainName \"myapp-eu.cloudapp.net\" -Status \"Enabled\" -Type \"CloudService\" | Add-AzureTrafficManagerEndpoint -DomainName \"myapp-us.cloudapp.net\" -Status \"Enabled\" -Type \"CloudService\" | Set-AzureTrafficManagerProfile</pre>\n<h3>외부 엔드포인트</h3>\nAdd-AzureTrafficManagerEndpoint cmdlet을 사용하여 외부 엔드포인트(즉, Azure 외부의 엔드포인트)를 만들 수 있습니다.DomainName 매개 변수에서 엔드포인트의 도메인 이름을 지정하고 Type을 \"Any\"로 지정하기만 하면 됩니다.\n<pre class=\"prettyprint\">PS C:\\&gt; Add-AzureTrafficManagerEndpoint -TrafficManagerProfile $profile -DomainName \"www.microsoft.com\" -Status \"Enabled\" -Type \"Any\" | Set-AzureTrafficManagerProfile</pre>\n성능 부하 분산과 함께 외부 엔드포인트를 사용하는 경우 추가 'Location' 매개 변수가 필요합니다.그러면 azure에 외부 엔드포인트의 위치가 알려지므로 Traffic Manager 트래픽을 적절하게 지리적으로 라우팅할 수 있습니다.\n<pre class=\"prettyprint\">PS C:\\&gt; Add-AzureTrafficManagerEndpoint -TrafficManagerProfile $profile -DomainName \"www.microsoft.com\" -Status \"Enabled\" -Type \"Any\" -Location \"North Europe\" | Set-AzureTrafficManagerProfile</pre>\n사용 가능한 위치는 Get-AzureLocation cmdlet을 사용하여 찾을 수 있는 Azure의 글로벌 데이터 센터 네트워크를 반영합니다.\n<pre class=\"prettyprint\">PS C:\\&gt; $loc = Get-AzureLocation\nPS C:\\&gt; $loc.Name | Format-List\nEast Asia\nSoutheast Asia\nNorth Europe\nWest Europe\nEast US\nWest US\nJapan East\nJapan West\nBrazil South\nNorth Central US\nSouth Central US</pre>\n부하 분산 방법(예: 라운드 로빈)을 변경한 다음 성능으로 다시 전환하는 경우 Traffic Manager 이전에 구성된 엔드포인트 위치를 기억하지만 무시하므로 다시 지정할 필요가 없습니다.\n<h3>가중 엔드포인트</h3>\n가중치는 '라운드 로빈' 부하 분산 방법을 사용하는 Traffic Manager 정책에만 적용됩니다.모든 엔드포인트 유형에 사용할 수 있습니다.트래픽은 현재 활성 상태인 모든 정상 엔드포인트의 가중치에 비례하여 분산됩니다.\n\n아래 예제와 같이 'Weight' 매개 변수를 사용하여 1에서 1,000까지의 가중치를 지정할 수 있습니다.선택적 매개 변수입니다. 기본적으로 모든 엔드포인트의 가중치는 '1'입니다.\n<pre class=\"prettyprint\">PS C:\\&gt; Add-AzureTrafficManagerEndpoint -TrafficManagerProfile $profile -DomainName \"tm-demo-us.cloudapp.net\" -Status \"Enabled\" -Type \"CloudService\" -Weight 70 | Set-AzureTrafficManagerProfile</pre>\n외부 엔드포인트 위치와 마찬가지로 부하 분산 방법을 성능으로 변경한 다음 라운드 로빈으로 다시 전환하면 가중치가 기억되지만 무시됩니다.\n\nTraffic Manager DNS 수준에서 작동하며 DNS는 DNS 클라이언트와 조직 및 ISP에서 실행하는 로컬 DNS 확인자에 의해 모두 캐시됩니다.가중 트래픽 분산은 클라이언트 수가 많은 기존 인터넷 연결 애플리케이션에 가장 적합합니다. 이러한 경우 DNS 캐싱은 트래픽 분산에 영향을 주지 않습니다.그러나 적은 수의 클라이언트가 사용되거나 모든 클라이언트가 적은 수의 로컬 DNS 서버 뒤에 있는 경우 캐싱은 트래픽 배포를 왜곡할 수 있습니다.이러한 경우 트래픽은 애플리케이션 수준 HTTP 302 다시 전송을 사용하는 등 연결별로 분산되어야 합니다.\n<h2>기타 일반 작업</h2>\nTraffic Manager 프로필에 대한 다른 일반적인 작업의 예는 다음과 같습니다.\n<h3>엔드포인트 사용 및 사용 안 함</h3>\n엔드포인트를 사용하지 않도록 설정하여 회전에서 제거할 수 있습니다.이렇게 하면 이 엔드포인트에 대한 Traffic Manager 청구가 중지되지만 쉽게 다시 사용하도록 설정할 수 있도록 프로필에 유지됩니다.\n<pre class=\"prettyprint\">PS C:\\&gt; $profile = Get-AzureTrafficManagerProfile -Name \"MyProfile\" \nPS C:\\&gt; $profile.Endpoints[0].Status = \"Disabled\"\nPS C:\\&gt; Set-AzureTrafficManagerProfile –TrafficManagerProfile $profile</pre>\n<h3>Re-Ordering 엔드포인트</h3>\n엔드포인트 순서는 '장애 조치(failover)' 부하 분산 방법을 사용할 때 장애 조치(failover) 시퀀스를 결정합니다.이 예제에서는 엔드포인트 쌍을 다시 시퀀스하는 방법을 보여 줍니다.\n<pre class=\"prettyprint\">PS C:\\&gt; $profile = Get-AzureTrafficManagerProfile -Name \"MyProfile\" \nPS C:\\&gt; $profile.Endpoints[0],$profile.Endpoints[1] = $profile.Endpoints[1],$profile.Endpoints[0]\nPS C:\\&gt; Set-AzureTrafficManagerProfile –TrafficManagerProfile $profile</pre>\n<h3>엔드포인트 삭제</h3>\n엔드포인트를 삭제하려면 'Remove-AzureTrafficManagerEndpoint' cmdlet을 사용합니다.\n<pre class=\"prettyprint\">PS C:\\&gt; $profile = Get-AzureTrafficManagerProfile -Name \"MyProfile\" \nPS C:\\&gt; Remove-AzureTrafficManagerEndpoint -TrafficManagerProfile $profile -DomainName www.microsoft.com\nPS C:\\&gt; Set-AzureTrafficManagerProfile –TrafficManagerProfile $profile</pre>\n<h3>엔드포인트 모니터링 설정 업데이트</h3>\n이 예제에서는 전용 모니터링 페이지를 가리키도록 모니터링 경로를 수정합니다.\n<pre class=\"prettyprint\">PS C:\\&gt; $profile = Get-AzureTrafficManagerProfile -Name \"MyProfile\"\nPS C:\\&gt; $profile.MonitorRelativePath = \"/monitor.aspx\"\nPS C:\\&gt; Set-AzureTrafficManagerProfile –TrafficManagerProfile $profile</pre>\n<h3>프로필 사용 안 함</h3>\nTraffic Manager 프로필을 완전히 사용하지 않도록 설정할 수 있습니다.이렇게 하면 모든 엔드포인트에 대한 모든 트래픽이 중지되고 이 프로필에 대한 청구도 중지됩니다.이 작업은 전용 cmdlet을 사용하여 수행됩니다.\n<pre class=\"prettyprint\">PS C:\\&gt; Disable-AzureTrafficManagerProfile -Name \"MyProfile\" \nPS C:\\&gt; Enable-AzureTrafficManagerProfile -Name \"MyProfile\"</pre>\n<h3>프로필 삭제</h3>\n마지막으로, Traffic Manager 프로필을 모두 삭제할 수도 있습니다('포스' 플래그가 확인 프롬프트를 오버라이드함).\n<pre class=\"prettyprint\">PS C:\\&gt; Remove-AzureTrafficManagerProfile -Name \"MyProfile\" -Force</pre>\n<h2>FAQ</h2>\n<strong>Azure 관리 포털을 통해 외부 엔드포인트 또는 가중치를 사용할 수 있나요?</strong>\n\n이러한 기능은 현재 REST API 및 PowerShell cmdlet을 통해서만 구성할 수 있습니다.Azure 관리 포털을 통해 사용할 수 없습니다.\n\n그러나 Azure 관리 포털을 계속 사용하여 외부 엔드포인트 또는 가중치를 사용하여 프로필의 상태를 확인하고, 엔드포인트 사용 및 사용 안 함 또는 모니터링 설정 구성과 같은 해당 프로필의 다른 설정을 관리할 수도 있습니다.\n\n<strong>Azure 엔드포인트(Cloud Services 및 웹 사이트)를 동일한 Traffic Manager 프로필의 외부 엔드포인트와 혼합할 수 있나요?</strong>\n\n예.프로필 내에서 서로 다른 유형의 엔드포인트를 결합하는 방법에는 제한이 없습니다.\n\n<strong>외부 엔드포인트 및 가중치에 대한 청구 모델이 변경되어 있나요?</strong>\n\n외부 엔드포인트는 Azure 기반 엔드포인트보다 더 높은 비율로 청구됩니다.가중치 사용에 대한 요금은 없습니다.자세한 내용은 <a href=\"https://azure.microsoft.com/en-us/pricing/details/traffic-manager/\" target=\"_blank\">가격 책정 페이지를 참조하세요</a>.\n\n<strong>Azure Traffic Manager Azure SDK 또는 Xplat-CLI에서 지원되는가요?</strong>\n\nTraffic Manager 관리 라이브러리는 <a href=\"https://www.nuget.org/packages/Microsoft.WindowsAzure.Management.TrafficManager/0.10.2-preview\" target=\"_blank\">.NET SDK</a>에 포함됩니다.Java SDK 또는 Node.js SDK 또는 Xplat-CLI에서는 아직 지원되지 않습니다.\n\n<strong>Azure 서비스를 외부 엔드포인트로 설정할 수 있나요?</strong>\n\n예, 외부 엔드포인트를 사용하여 다른 Azure 서비스(웹 사이트 제외)를 참조할 수 있습니다.이러한 요금은 다른 Azure 기반 엔드포인트와 동일한 비율로 청구됩니다.그러나 Cloud Services 및 Websites와 달리 기본 서비스를 사용하지 않도록 설정하면 Traffic Manager 엔드포인트를 명시적으로 사용하지 않도록 설정하거나 삭제할 때까지 해당 Traffic Manager 엔드포인트에 대한 요금이 계속 청구됩니다.\n\n<strong>Azure Traffic Manager 대한 자세한 내용은 어디에서 확인할 수 있나요?</strong>\n\nAzure Portal에는 Traffic Manager 서비스 및 시나리오에 대한 <a href=\"https://azure.microsoft.com/en-us/documentation/services/traffic-manager/\" target=\"_blank\">개요</a>가 포함되어 있습니다.<a href=\"https://azure.microsoft.com/en-us/pricing/details/traffic-manager/\" target=\"_blank\">또한 가격 책정</a> 및 <a href=\"https://azure.microsoft.com/en-us/support/legal/sla/\" target=\"_blank\">SLA</a> 세부 정보도 포함합니다.\n<p align=\"left\">MSDN에는 Traffic Manager 부하 분산 방법 및 엔드포인트 모니터링 및 구성에 대한 설명을 포함하여 보다 자세한 개요가 포함되어 있습니다.</p>\nAZURE의 유료 지원 계획 외에도 <a href=\"https://social.msdn.microsoft.com/Forums/windowsazure/en-US/home?forum=windowsazureconnectivity\" target=\"_blank\">MSDN 포럼</a>을 사용하여 DNS 또는 Traffic Manager 관련된 Azure의 모든 측면에 대해 질문할 수 있습니다.기능 제안은 피드백 <a href=\"https://feedback.azure.com/forums/217313-networking-dns-traffic-manager-vpn-vnet/category/77466-domain-name-service-dns-traffic-manager\" target=\"_blank\">사이트에</a> 게시해야 하며, 여기서 기존 제안에 대해 투표할 수도 있습니다."
