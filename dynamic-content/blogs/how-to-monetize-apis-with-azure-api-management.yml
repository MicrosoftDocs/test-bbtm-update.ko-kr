### YamlMime:Yaml
ms.openlocfilehash: a5d453002e312dbc6f87b282f3b97faca5f02b18
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139912817"
Slug: how-to-monetize-apis-with-azure-api-management
Title: Azure API Management를 사용하여 API로 수익을 창출하는 방법
Summary: 이 문서에서는 Azure API Management에서 호스트되는 API의 수익 창출을 설정하는 단계를 설명합니다. 코드 샘플은 선택한 결제 공급자와의 통합을 설정하는 데 도움이 됩니다.
Content: >-
  <p><i>이 문서에서는 Azure API Management에서 호스트되는 API의 수익 창출을 설정하는 단계를 설명합니다. 코드 샘플은 선택한 결제 공급자와의 통합을 설정하는 데 도움이 됩니다.</i></p>


  <p>고객이 &ldquo;지속적으로 묻는 한 가지 질문은 API에 대한 청구를 설정하려면 어떻게 해야 하나요?&rdquo; API Management에는 <a href="https://msdn.microsoft.com/en-us/library/azure/dn776326.aspx">관리 API</a> &ndash; 를 통해 액세스할 수 있는 청구를 설정하는 데 필요한 모든 정보가 있으며, 사용자에게 사용할 <a href="https://en.wikipedia.org/wiki/List_of_online_payment_service_providers">결제 공급자</a> 를 선택할 수 있습니다. 그러나 좀 더 많은 지침을 원한다면 이 블로그 게시물이 도움이 될 것입니다.</p>


  <h2>API로 직접 수익을 창출하는 두 가지 방법</h2>


  <p>API를 직접 수익을 창출하는 가장 일반적인 두 가지 방법은 <b>구독 청구</b>입니다. 여기서 고객에게 API에 액세스하기 위해 월별 정액 요금을 청구합니다. 및 <b>요금제 청구</b>- 고객이 호출하는 API 호출 수에 따라 고객에게 요금을 청구합니다.</p>


  <p><b><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1acb2a88-8751-4403-95ca-91ddf28c450b.png"><img alt="clip_image002" border="0" height="456" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1e89d531-f4bf-41d4-9a7d-a519a06e7767.png" style="display: inline; background-image: none;" title="clip_image002" width="494"></a></b></p>


  <h2>구독 청구 모델:</h2>


  <p>구독 모델을 사용하면 고객은 고정 월별 요금을 지불하고 매월 특정 수의 API 호출을 수행할 수 있습니다. 예를 들어 고객은 매월 최대 10,000개의 API 호출에 액세스하기 위해 $100를 지불합니다. 0개의 API 호출 또는 10,000개의 API 호출을 하든, 고객은 매월 $100의 요금이 청구됩니다. 고객이 청구 기간 중 API를 구독하는 경우 구독이 활성화된 기간(일)에 대해 비례 배분 금액이 고객에게 청구됩니다.</p>


  <h2>요금제 청구 모델:</h2>


  <p>이름에서 알 수 있듯이 요금제 청구 모델을 사용하면 고객에게 각 API 호출에 대한 요금을 청구합니다. 고객은 원하는 만큼 전화를 걸 수 있으며 총 통화 수에 따라 요금이 청구됩니다. 고객이 통화당 $0.01로 7,000 API 호출을 하는 경우 월말의 청구서는 $70가 됩니다.</p>


  <p>요금제 청구 모델을 사용하면 한 달에 한 번 고객에게 요금을 청구할 수 있으며, 이 기간 동안 얼마나 많은 전화를 걸었는지&#39;알아야 합니다.</p>


  <h2>결제 청구 및 수집을 위한 결제 플랫폼 사용</h2>


  <p>Azure API Management는 실시간으로 API 사용량을 추적하므로 각 고객이 얼마나 많은 API 호출을 수행했는지 알 수 있습니다. 이 사용량 현황 데이터는 각 고객에게 요금을 청구하고 청구서를 보내 월별 결제를 수집하는 데 사용할 수 있습니다. 사용자에게 요금을 청구하려면 Stripe와 같은 타사 되풀이 청구 솔루션이 필요합니다(이 문서의 예제로 사용됨). Stripe는 여러 청구 모델, 통화 및 결제 방법을 지원하며 자체 API를 사용하면 API Management와 원활하게 통합할 수 있습니다. Azure API Management는 요구 사항을 가장 잘 충족하는 유료 <a href="https://en.wikipedia.org/wiki/List_of_online_payment_service_providers">공급자</a><a href="https://en.wikipedia.org/wiki/List_of_online_payment_service_providers">를 선택</a>해야 하는 특정 결제 서비스를 &ndash; 권장하지 않습니다.</p>


  <h2>API Management와 결제 플랫폼이 함께 작동하는 방식</h2>


  <p>이를 설정하려면 Azure API Management 및 Stripe를 통합해야 합니다. 둘 다 원활한 고객 환경을 만드는 데 사용할 수 있는 API가 있습니다. API Management API는 각 고객에 대한 API 사용량 및 구독 세부 정보를 노출합니다. Stripe API를 사용하면 구독의 각 제품에 대한 청구 세부 정보를 포함하는 각 고객에게 월별 청구서를 보낼 수 있습니다.</p>


  <h2>Azure API Management에서 제품 만들기</h2>


  <p>Azure API Management를 사용하여 API를 관리하려면 제품을 만든 다음 하나 이상의 API를 추가해야 합니다. 고객이 API를 구독하는 방식이기 때문에 제품 번들에 API를 추가합니다. 제품이 게시되면 개발자는 제품 번들을 구독하고 제품&#39;API 사용을 시작할 수 있습니다.</p>


  <h2>스트라이프 플랜에 API Management 제품 매핑</h2>


  <p>API 고객은 Azure API Management 고객 계정(개발자 계정이라고도 함)을 통해 Stripe 사용자 계정에 매핑됩니다. 여러 제품 구독을 포함할 수 있습니다. 따라서 기본 통합 작업은 API Managements&rsquo; API에서 월별 고객 사용량 세부 정보를 검색하고 이러한 세부 정보를 Stripe로 보내는 것입니다.</p>


  <p>API Managements&rsquo; 소유 API를 사용하면 활성 사용자 수를 결정하고, 각 사용자에 대한 구독을 나열하고, 각 활성 제품 구독에 대한 월별 사용량을 가져올 수 있습니다. 이 정보는 사용자 지정 코드에 의해 검색된 다음 Stripe API에 제출되어 고객 청구서를 만들고 이메일로 보냅니다.</p>


  <h2>각 API Management 제품에 대한 Stripe 계획 만들기</h2>


  <p>Stripe는 Azure API Management가 제품을 참조하는 것과 동일한 방식으로 플랜을 참조하므로 API Management에서 만드는 각 제품에 대한 스트라이프 계획을 만들어야 합니다. 각 Stripe 계획에는 고유한 ID가 있으며, 이 ID는 해당 API Management 제품에 매핑됩니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/e63274b4-a746-4294-8a13-052c7c986e32.png"><img alt="clip_image003" border="0" height="145" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/eeaf60a7-3e81-41d0-842c-e7653d52105e.png" style="display: inline; background-image: none;" title="clip_image003" width="304"></a></p>


  <p>월별 구독 제품 on API Management를 Stripe의 월간 구독 플랜에 연결하려면 Stripe 요금제의 가격과 청구 빈도를 설정합니다. 예를 들어 API Management&rsquo;에서 $100/month 구독 제품을 설명할 때 스트라이프 플랜을 만들고 $100의 가격과 1개월의 청구 빈도를 지정합니다.</p>


  <p>API Management의 요금제 청구 제품을 스트라이프&rsquo;의 요금제 청구 플랜에 연결하려면 월별 가격이 $0인 플랜을 만들고 사용량에 따라 월별 요금제에 요금을 추가합니다. 추가 요금의 양은 사용자 지정 코드에 의해 계산되고 API 요청으로 제출됩니다. 이러한 요금제 청구 수수료는 송장 항목이라고 하며 월마다 다를 수 있으므로 반복되지 않는 요금으로 간주됩니다.</p>


  <h2>고객 등록 및 제품 선택 사항 등록</h2>


  <p>고객이 등록하거나 새 제품을 추가할 때 사용자에게 캡처하거나 제공하려는 추가 정보(예: 신용 카드 정보, 결제 조건)가 있습니다. 그러면 결제 공급자에 등록할 수 있습니다.</p>


  <p>API Management에서 이 작업을 수행할 수 있는 방법은 <a href="https://azure.microsoft.com/en-us/documentation/articles/api-management-howto-setup-delegation/">로그인 위임을</a> 사용하는 것입니다. 고객이 API Management 제품 중 하나를 구독할 때마다 코드는 고유한 Stripe 계획 ID를 사용하여 추가 정보를 캡처하도록 리디렉션하여 Stripe API를 통해 구독을 만듭니다. API 호출에 플랜 ID를 포함하여 구독에 등록하는 동시에 새 Stripe 고객을 만들 수 있습니다. 이 단계는 약간 까다로울 수 있으므로 자세한 내용은 <a href="https://azure.microsoft.com/en-us/documentation/articles/api-management-howto-setup-delegation/">위임 문서를</a> 살펴보세요. 함께 제공되는 <a href="https://github.com/Azure/api-management-monetization">샘플 코드</a> 도 참조하세요.</p>


  <h2>Stripe에서 구독 취소</h2>


  <p>고객이 월간 구독을 취소하는 경우 Stripe에서도 구독을 취소해야 합니다. 이 작업은 Stripes&rsquo; API를 통해 수행할 수도 있습니다. 그 때부터 고객&#39;신용 카드는 다시 청구되지 않습니다.</p>


  <p>요금제 청구의 경우&rsquo; 아무 작업도 수행할 필요가 없습니다. 그러나 고객은 Stripe API를 통해 $0/month 구독을 취소하여 피할 수 있는 $0 송장을 계속 받게 됩니다.</p>


  <h2>월별 구독 제품 설정</h2>


  <p>구독 청구를 구현하는 기본 단계는 다음과 같습니다.</p>


  <ul>
      <li>API를 계층화된 제품(예: Bronze, Silver, Gold)에 패키지합니다. 다양한 API 호출 허용량 및/또는 다른 호출 요금을 제공합니다.</li>
      <li>제품에 <a href="https://azure.microsoft.com/en-us/documentation/articles/api-management-howto-product-with-rules/">적절한 할당량 및 속도 제한</a> 정책 적용</li>
      <li>해당 스트라이프 계획 만들기</li>
      <li>지정된 청구 기간 동안 API Management에 나열된 각 제품의 모든 구독자를 끌어오는 월별 청구 작업을 실행하는 코드를 작성합니다. 스트라이프 API에 사용량 세부 정보를 제출하여 청구서 및 청구서를 생성합니다.</li>
  </ul>


  <h2>월간 구독 사용자에 대한 청구서 계산</h2>


  <p>월간 구독 사용자에 대한 청구서를 계산하는 것은 API 호출 수를 알 필요가 없기&rsquo; 때문에 매우 쉽습니다. 대신 각 사용자에게 월별 정액 요금을 청구합니다. 실제로 고객 구독이 Stripe에 만들어지면&rsquo; 구독 가격을 저장하고 구독이 취소될 때까지 월별 구독자 청구를 처리합니다.</p>


  <p>특정 세부 정보는 함께 제공되는 <a href="https://github.com/Azure/api-management-monetization">샘플 코드를</a> 참조하세요.</p>


  <h2>요금제 청구 설정</h2>


  <p>요금 청구를 구현하는 방법:</p>


  <ul>
      <li>계층화된 제품에 API 패키지(예: Bronze, Silver, Gold)</li>
      <li>제품에 <a href="https://azure.microsoft.com/en-us/documentation/articles/api-management-howto-product-with-rules/">속도 제한</a> 정책 적용</li>
      <li>해당 스트라이프 계획 만들기</li>
      <li>지정된 청구 기간 동안 각 구독자에 대한 API Management에서 사용량 정보를 가져오는 월별 청구 작업을 실행하고 해당 정보를 Stripe에 피드하여 고객&rsquo; 청구서를 생성합니다.</li>
  </ul>


  <h2>요금제 사용자에 대한 청구서 계산</h2>


  <p>이를 계산하기 위해 사용자 지정 코드는 API Management를 쿼리하여 계량된 각 제품에 대한 고객&rsquo; API 사용량을 가져옵니다. 사용자 지정 코드는 이 수에 API 호출당 비용을 곱하여 이 제품의 총 요금을 계산합니다. 자세한 내용은 함께 제공되는 샘플 코드를 참조하세요.</p>


  <p>특정 세부 정보는 함께 제공되는 샘플 코드를 참조하세요.</p>


  <h2>참고</h2>


  <ul>
      <li><a href="https://azure.microsoft.com/en-us/documentation/articles/api-management-get-started/" target="_blank">Azure API Management 시작</a></li>
      <li><a href="https://docs.microsoft.com/azure/api-management/monetization-overview" target="_blank">Azure API Management의 수익 창출에 대해 자세히 알아보기</a></li>
      <li><a href="https://docs.microsoft.com/azure/api-management/monetization-support" target="_blank">Azure API Management에서 수익 창출을 지원하는 방법 이해</a></li>
      <li><a href="https://aka.ms/apim/monetization/sample" target="_blank">샘플 수익 창출 코드</a> 살펴보기</li>
  </ul>
