### YamlMime:Yaml
ms.openlocfilehash: f66e7ac385466732fab21fa9da7dafd21bed41c9
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139899303"
Slug: data-series-exploring-windows-azure-drives-disks-and-images
Title: '데이터 시리즈: Azure 드라이브, 디스크 및 이미지 Windows 탐색'
Summary: Windows Azure Virtual Machines의 미리 보기를 통해 Windows Azure Storage 저장된 두 가지 새로운 유형의 Blob이 있습니다. Windows Azure Virtual Machine Disks 및 Window Azure Virtual Machine Images....
Content: '<p><a href="https://www.windowsazure.com/en-us/home/scenarios/virtual-machines/">Windows Azure Virtual Machines</a>의 미리 보기를 통해 Windows Azure Storage 저장된 두 가지 새로운 유형의 Blob인 Windows Azure Virtual Machine Disks 및 Window Azure Virtual Machine Images가 있습니다. 물론 Windows Azure 드라이브의 기존 미리 보기도 있습니다. 이 게시물의 나머지 부분에는 스토리지, 디스크, 이미지 및 드라이브라고 합니다. 이 게시물에서는 드라이브, 디스크 및 이미지가 무엇이며 스토리지와 상호 작용하는 방법을 살펴봅니다.</p>  <h4>VHD(가상 하드 드라이브)</h4>  <p>드라이브, 디스크 및 이미지는 스토리지 계정 내에서 페이지 Blob으로 저장된 모든 <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/dd323654(v=vs.85).aspx"><b>VHD</b></a> 입니다. 실제로 몇 가지 약간 다른 <a href="https://go.microsoft.com/fwlink/?LinkId=137171"><b>VHD 형식</b></a>( 고정, 동적 및 차이점)이 있습니다. 현재 Windows Azure는 fixed&rsquo;라는 &lsquo;형식만 지원합니다. 이 형식은 디스크 오프셋 X가 Blob 오프셋 X에 저장되도록 파일 형식 내에서 논리 디스크를 선형으로 배치합니다. Blob의 끝에는 VHD의 속성을 설명하는 작은 바닥글이 있습니다. 페이지 Blob에 저장된 이 모든 항목은 표준 VHD 형식을 준수하므로 이 VHD를 사용하여 선택한 경우 온-프레미스 서버에 탑재할 수 있습니다. 고정 형식은 대부분의 디스크에서 사용되지 않는 공간 범위가 크기 때문에 공간이 낭비되는 경우가 많습니다. 그러나 고정&rsquo; VHD를 스파스 형식인 <a href="https://blogs.msdn.com/b/windowsazurestorage/archive/2010/04/11/using-windows-azure-page-blobs-and-how-to-efficiently-upload-and-download-page-blobs.aspx">페이지 Blob</a>으로 저장&lsquo;하므로 고정&rsquo; 디스크와 &lsquo;확장 가능한 디스크의 &lsquo;이점을 동시에 얻을 수&rsquo; 있습니다.</p>  <h4>Windows Azure Storage VHD 업로드</h4>  <p>스토리지 계정에 VHD를 업로드하여 PaaS 또는 IaaS에 사용할 수 있습니다. VHD를 스토리지에 업로드하는 경우 페이지 Blob이 스파스임을 이해하고 실제 데이터가 있는 VHD 부분만 업로드하는 도구를 사용하려고 합니다. 또한 동적 VHD가 있는 경우 업로드를 수행하는 동안 동적 VHD를 고정 VHD로 변환하는 도구를 사용하려고 합니다. CSUpload는 이러한 두 가지 작업을 모두 수행하며 <a href="https://azure.microsoft.com/en-us/develop/downloads/">Azure SDK Windows</a> 일부로 포함됩니다.</p>  <h4>지속성 및 내구성</h4>  <p>드라이브, 디스크 및 이미지는 모두 스토리지에 저장되므로 가상 머신을 다른 물리적 컴퓨터로 이동해야 하는 경우에도 데이터가 유지됩니다. 즉, 데이터는 <a href="https://blogs.msdn.com/b/windowsazurestorage/archive/2011/11/20/windows-azure-storage-a-highly-available-cloud-storage-service-with-strong-consistency.aspx">Windows Azure Storage 아키텍처에서 제공하는 내구성</a>을 활용합니다. 여기서 디스크/드라이브에 대한 버퍼링되지 않고 플러시된 모든 쓰기는 스토리지에서 3번 복제되어 애플리케이션에 다시 성공을 반환하기 전에 내구성을 갖습니다.</p>  <h4>드라이브(PaaS)</h4>  <p>드라이브는 PaaS 역할(작업자 역할, 웹 역할 및 VM 역할)에서 VHD를 탑재하고 드라이브 문자를 할당하는 데 사용됩니다. 이러한 드라이브를 사용하는 방법에 대한 자세한 내용은 다음과 같습니다. 드라이브는 VM 내에서 실행되는 커널 모드 드라이버로 구현되므로 VM의 드라이브 간 디스크 IO로 인해 Windows Azure Storage VM 간에 네트워크 IO가 페이지 Blob으로 이동하게 됩니다. 다음 다이어그램은 VM 내에서 실행되고 VM 가상 네트워크 어댑터를 통해&rsquo; 스토리지와 통신하는 드라이버를 보여 줍니다.</p>  <p><a href=""><img style="display: inline; background-image: none;" title="azuredrive" border="0" alt="azuredrive" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6443.azuredrive_5F00_thumb_5F00_0E86B5F0.jpg" width="554" height="327"></a></p>  <p>PaaS 역할은 역할당 최대 16개의 드라이브를 탑재할 수 있습니다.</p>  <h4>디스크(IaaS)</h4>  <p>Azure Virtual Machine에 Windows 만들 때 플랫폼은 하나 이상의 디스크를 운영 체제 디스크의 VM에 연결합니다. 또한 이 디스크는 스토리지에 페이지 Blob으로 저장된 VHD가 됩니다. VM의 디스크에 쓸 때 디스크 변경 내용이 스토리지 내의 페이지 Blob에 적용됩니다. <a href="https://www.windowsazure.com/en-us/manage/windows/how-to-guides/attach-a-disk/">또한 추가 디스크를 데이터 디스크</a>로 VM에 연결할 수 있으며, 이러한 디스크는 페이지 Blob으로 스토리지에 저장됩니다.</p>  <p>드라이브와 달리 디스크를 대신하여 스토리지와 통신하는 코드는 VM 내에 없으므로 디스크에 대한 IO를 수행하면 실제 노드에서 네트워크 작업이 발생하지만 VM에서 네트워크 작업이 발생하지 않습니다. 다음 다이어그램에서는 호스트 운영 체제에서 드라이버가 실행되는 방법과 VM이 디스크 인터페이스를 통해 드라이버와 통신한 다음, 호스트 네트워크 어댑터를 통해 스토리지로 통신하는 방법을 보여 줍니다.</p>  <p><a href=""><img style="display: inline; background-image: none;" title="azuredrive" border="0" alt="azuredrive" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/5873.azuredrive_5F00_thumb_5F00_5B4A7C86.jpg" width="557" height="329"></a></p>  <p>가상 머신이 탑재할 수 있는 디스크 수에는 제한이 있으며, 초대형 가상 머신의 경우 16개의 데이터 디스크에서 추가 작은 가상 머신의 경우 하나의 데이터 디스크에 이르기까지 다양합니다. 자세한 내용은 여기에서 확인할 수 <a href="https://msdn.microsoft.com/en-us/library/windowsazure/jj156003">있습니다</a>.</p>  <p><b>중요: </b> Windows Azure 플랫폼은 VM이 VHD를 사용하는 동안 기본 페이지 Blob, 컨테이너 또는 스토리지 계정을 실수로 삭제하지 않도록&rsquo; 스토리지 계정의 디스크를 고려하는 모든 페이지 Blob에 <a href="https://msdn.microsoft.com/en-us/library/windowsazure/ee691972.aspx">무한 임대</a>를 보유합니다. 기본 페이지 Blob, 내부 컨테이너 또는 스토리지 계정을 삭제하려면 다음과 같이 먼저 VM에서 디스크를 분리해야 합니다.</p>  <p><a href=""><img style="display: inline; background-image: none;" title="detatchdisk" border="0" alt="detatchdisk" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/4774.detatchdisk_5F00_thumb_5F00_41764657.jpg" width="570" height="54"></a></p>  <p>그런 다음 분리할 디스크를 선택한 다음 삭제합니다.</p>  <p><a href=""><img style="display: inline; background-image: none;" title="detachdiskfromvm" border="0" alt="detachdiskfromvm" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1145.detachdiskfromvm_5F00_thumb_5F00_04DE47BA.jpg" width="405" height="286"></a></p>  <p>그런 다음 포털에서 디스크를 제거해야 합니다.</p>  <p><a href=""><img style="display: inline; background-image: none;" title="vmdisks" border="0" alt="vmdisks" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1157.vmdisks_5F00_thumb_5F00_0405E1D0.jpg" width="561" height="99"></a></p>  <p>그런 다음 창 아래쪽에서 디스크&rsquo; 삭제를 선택할 &lsquo;수 있습니다.</p>  <p><a href=""><img style="display: inline; background-image: none;" title="deletedisk" border="0" alt="deletedisk" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1638.deletedisk_5F00_thumb_5F00_5135DB5B.jpg" width="305" height="69"></a></p>  <p><b>참고</b>: 디스크를 삭제할 때 스토리지 계정에서 디스크(VHD 페이지 Blob)를 삭제하지 않습니다. Azure Virtual Machines를 Windows 데 사용할 수 있는 이미지에서만 연결을 끊습니다. 위의 모든 작업을 완료한 후에는 Windows Azure Storage REST API 또는 스토리지 탐색기를 사용하여 스토리지 계정에서 디스크를 삭제할 수 있습니다.<b></b></p>  <h4>이미지(IaaS)</h4>  <p>Windows Azure uses the concept of an &ldquo;Image&rdquo; to describe a template VHD that can be used to create one or more Virtual Machines. Windows Azure 및 일부 파트너는 Virtual Machines를 만드는 데 사용할 수 있는 이미지를 제공합니다. 기존 Windows Azure Virtual Machine의 <a href="https://www.windowsazure.com/en-us/manage/windows/how-to-guides/capture-an-image/">이미지를 캡처하여</a> 이미지를 직접 만들거나 <a href="https://www.windowsazure.com/en-us/manage/windows/common-tasks/upload-a-vhd/">sysprepd&rsquo; 이미지를</a> 스토리지 계정에 업로드할 수도 있습니다. 이미지도 VHD 형식이지만 플랫폼은 이미지에 쓰지 않습니다. 대신 이미지에서 Virtual Machine을 만들 때 시스템은 스토리지 계정에 해당 이미지&rsquo; 페이지 Blob의 복사본을 만들고 해당 복사본은 Virtual Machine&rsquo; 운영 체제 디스크에 사용됩니다.</p>  <p><b>중요: </b>Windows Azure는 모든 페이지 Blob, Blob 컨테이너 및 스토리지 계정에서 이미지를 고려하는 스토리지 계정에 무한 임대를 보유합니다. 따라서 기본 페이지 Blob을 삭제하려면 Virtual Machines&rdquo; 섹션으로 이동하여 &ldquo;이미지를 클릭하여 &ldquo;포털에서 이미지를&rdquo; 삭제해야 합니다.</p>  <p><a href=""><img style="display: inline; background-image: none;" title="vmimages" border="0" alt="vmimages" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/0552.vmimages_5F00_thumb_5F00_09745274.jpg" width="553" height="144"></a></p>  <p>그런 다음, 이미지를 선택하고 화면 아래쪽에서 이미지&rdquo; 삭제를 누릅니&ldquo;다. 이렇게 하면 등록된 이미지 집합에서 VHD가 연결되지 않지만 스토리지 계정에서 페이지 Blob을 삭제하지는 않습니다. 이 시점에서 스토리지 계정에서 이미지를 삭제할 수 있습니다.</p>  <h4>임시 디스크</h4>  <p>임시 디스크라고 하는 모든 웹 역할, 작업자 역할, VM 역할 및 Windows Azure Virtual Machines에 다른 디스크가 있습니다. 스크래치 공간에 사용할 수 있는 노드의 실제 디스크입니다. 이 디스크의 데이터는 VM이 다른 물리적 컴퓨터로 이동될 때 손실되며, 업그레이드, 패치 및 Windows Azure에서 실행 중인 노드에 문제가 있음을 감지하는 동안 발생할 수 있습니다. 임시 디스크에 대해 제공되는 크기는 여기에 정의되어 <a href="https://msdn.microsoft.com/en-us/library/windowsazure/jj156003">있습니다</a>.</p>  <p>임시 디스크는 운영 체제&rsquo; 페이지 파일을 저장하는 데 이상적인 장소입니다.<b></b></p>  <p><b>중요:</b> 임시 디스크가 영구적이지 않습니다. 언제든지 손실하려는 데이터를 이 디스크에만 기록해야 합니다.</p>  <h3>결제</h3>  <p><a href="https://blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx">Windows Azure Storage 대역폭, 트랜잭션 및 Storage 용량</a>에 대한 요금입니다. 각 단위당 비용은 <a href="https://www.windowsazure.com/en-us/pricing/details/">여기에서</a> 확인할 수 있습니다.</p>  <h4>대역폭</h4>  <p>최상의 성능을 제공하며 대역폭 요금이 발생하지 않으므로 저장되는 스토리지 계정과 동일한 위치(예: 미국 동부) 내에서 드라이브를 탑재하는 것이 좋습니다. 디스크를 사용하는 경우 디스크가 저장된 동일한 위치 내에서 디스크를 사용해야 합니다.</p>  <h4>트랜잭션</h4>  <p>VM에 연결되면 드라이브와 디스크의 디스크 IO가 스토리지에서 충족됩니다(아래에 설명된 캐시 계층 중 하나가 먼저 요청을 충족할 수 없는 경우). 작은 디스크 IO는 IO당 하나의 Windows Azure Storage 트랜잭션을 발생합니다. 더 큰 디스크 IO는 더 작은 IO로 분할되므로 더 많은 트랜잭션 요금이 발생합니다. 이에 대한 분석은 다음과 같습니다.</p>  <ul>  <li>드라이브</li>  <ul>  <li>IO &lt; 2MB는 1개 트랜잭션이 됩니다.</li>  <li>IO &gt;= 2MB는 2MB 이하의 트랜잭션으로 나뉩니다.</li>  </ul>  <li>디스크</li>  <ul>  <li>IO &lt; 128KB는 1개 트랜잭션입니다.</li>  <li>IO &gt;= 128킬로바이트가 128KB 이하의 트랜잭션으로 나뉩니다.</li>  </ul>  </ul>  <p>또한 운영 체제는 작은 순차 IO(일반적으로 64킬로바이트 미만)에 대해 약간 미리 읽기를 수행하는 경우가 많으며, 이로 인해 애플리케이션에서 발급하는 IO 크기보다 드라이브/디스크에 대한 크기가 큰 IO가 발생할 수 있습니다. 프리페치된 데이터를 사용하는 경우 애플리케이션에서 발급한 IO 수보다 스토리지 계정에 대한 트랜잭션 수가 줄어들 수 있습니다.</p>  <h4>스토리지 용량</h4>  <p>Windows Azure Storage 페이지 Blob 및 VHD를 스파스 형식으로 저장하므로 VHD 수명 동안 실제로 기록된 VHD 내의 데이터에 대해서만 요금이 청구됩니다. 따라서 페이지 Blob 내에 큰 범위의 0을 저장하지 않기 때문에 빠른 형식&rsquo;을 사용하는 &lsquo;것이 좋습니다. VHD를 만들 때 아래를 지정하여 빠른 형식 옵션을 선택할 수 있습니다.</p>  <p><a href=""><img style="display: inline; background-image: none;" title="quickformat" border="0" alt="quickformat" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6332.quickformat_5F00_thumb_5F00_6FA01C44.jpg" width="556" height="425"></a></p>  <p>또한 VHD에서 사용하는 파일 시스템 내에서 파일을 삭제할 때 대부분의 운영 체제는 이러한 범위를 지우거나 0이 되지 않으므로 디스크/드라이브를 통해 삭제한 데이터에 대해 Blob 내에서 용량 요금을 지불할 수 있습니다.</p>  <h3>캐시, 캐시 및 기타 캐시</h3>  <p>드라이브와 디스크는 모두 디스크 캐싱 및 일부 제한된 메모리 내 캐싱을 지원합니다. 애플리케이션 라이브러리뿐만 아니라 운영 체제의 많은 계층도 메모리 내 캐싱을 수행합니다. 이 섹션에서는 애플리케이션 개발자로서 선택할 수 있는 캐싱 선택 사항 중 일부를 강조 표시합니다.</p>  <p>캐싱을 사용하여 성능을 개선하고 트랜잭션 비용을 줄일 수 있습니다. 다음 표에서는 디스크 및 드라이브에 사용할 수 있는 일부 캐시를 간략하게 설명합니다. 각각은 표 아래에 자세히 설명되어 있습니다.</p>  <table border="1" cellspacing="0" cellpadding="0">  <tbody>  <tr>  <td valign="top" width="115"></td>  <td valign="top" width="138">  <p>형식</p>  </td>  <td valign="top" width="181">  <p>목적</p>  </td>  <td valign="top" width="204">  <p>데이터 지속성</p>  </td>  </tr>  <tr>  <td valign="top" width="115">  <p>FileStream</p>  </td>  <td valign="top" width="138">  <p>메모리</p>  </td>  <td valign="top" width="181">  <p>순차 읽기 및 쓰기에 대한 성능을 향상시키고 IO를 줄입니다.</p>  </td>  <td valign="top" width="204">  <p>쓰기는 자동으로 유지되지 않습니다. 플러시를&rdquo; 호출&ldquo;하여 쓰기를 유지합니다.</p>  </td>  </tr>  <tr>  <td valign="top" width="115">  <p>운영 체제 캐싱</p>  </td>  <td valign="top" width="138">  <p>메모리</p>  </td>  <td valign="top" width="181">  <p>임의 및 순차적 읽기 및 쓰기에 대한 성능을 향상시키고 IO를 줄입니다.</p>  </td>  <td valign="top" width="204">  <p>쓰기는 자동으로 유지되지 않습니다. 파일 핸들을 통한&rdquo; 쓰기 또는 &ldquo;플러시를&rdquo; 사용하여 &ldquo;쓰기를 유지합니다.</p>  </td>  </tr>  <tr>  <td valign="top" width="115">  <p>Windows Azure 드라이브 캐시</p>  </td>  <td valign="top" width="138">  <p>메모리 및 디스크</p>  </td>  <td valign="top" width="181">  <p>스토리지에 대한 읽기 트랜잭션을 줄입니다. 워크로드에 따라 순차적 IO의 성능을 향상시킬 수 있습니다.</p>  </td>  <td valign="top" width="204">  <p>쓰기는 자동으로 유지됩니다. 파일 핸들을 통해&rdquo; 쓰기를 사용하거나 &ldquo;플러시를&rdquo; 사용하여 &ldquo;쓰기가 지속된다는 것을 알 수 있습니다.</p>  </td>  </tr>  <tr>  <td valign="top" width="115">  <p>Azure Virtual Machine Disk Caches Windows</p>  </td>  <td valign="top" width="138">  <p>메모리 및 디스크</p>  </td>  <td valign="top" width="181">  <p>스토리지에 대한 트랜잭션을 줄입니다. 워크로드에 따라 순차적 IO의 성능을 향상시킬 수 있습니다. 부팅 시간이 향상됩니다.</p>  </td>  <td valign="top" width="204">  <p>쓰기는 자동으로 유지됩니다. 파일 핸들을 통해&rdquo; 쓰기를 사용하거나 &ldquo;플러시를&rdquo; 사용하여 &ldquo;쓰기가 지속된다는 것을 알 수 있습니다.</p>  </td>  </tr>  <tr>  <td valign="top" width="115">  <p>디스크 또는 드라이브 캐시 없음</p>  </td>  <td valign="top" width="138">  <p>해당 없음</p>  </td>  <td valign="top" width="181">  <p>워크로드에 따라 임의 및 순차적 IO의 성능을 향상시킬 수 있습니다.</p>  </td>  <td valign="top" width="204">  <p>쓰기는 자동으로 유지됩니다. 파일 핸들을 통해&rdquo; 쓰기를 사용하거나 &ldquo;플러시를&rdquo; 사용하여 &ldquo;쓰기가 지속된다는 것을 알 수 있습니다.</p>  </td>  </tr>  </tbody>  </table>  <h4>FileStream(디스크와 드라이브 모두에 적용됨)</h4>  <p>.NET frameworks&rsquo; <a href="https://msdn.microsoft.com/en-us/library/y0bs3w9t">FileStream</a> 클래스는 디스크에 대한 IO를 줄이기 위해 메모리에 읽기 및 쓰기를 캐시합니다. 일부 FileStream 생성자는 캐시 크기를 사용하고 다른 생성자는 기본 8k 캐시 크기를 선택합니다. 최소 캐시 크기가 8바이트이므로 클래스에서 메모리 캐시를 사용하지 않도록 지정할 수 없습니다. <a href="https://msdn.microsoft.com/en-us/library/ee474552">FileStream.Flush(bool)</a> API를 호출하여 버퍼를 디스크에 강제로 쓸 수 있습니다.</p>  <h4>운영 체제 캐싱(디스크와 드라이브 모두에 적용됨)</h4>  <p>FILE_FLAG_WRITE_THROUGH 및<strong>/또는</strong> <strong>FILE_FLAG_NO_BUFFERING</strong> 사용하여 파일을 열 때 명시적으로 해제하지 않는 한 운영 체제 자체는 읽기 및 쓰기 모두에 대해 메모리 내 버퍼링을 수행합니다. 여기에서는 Windows의 메모리 내 캐싱 동작에 대해 자세히 <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx#caching_behavior">설명합니다.</a></p>  <h4>Azure 드라이브 캐시 Windows</h4>  <p>드라이브를 사용하면 노드&rsquo; 로컬 임시 디스크를 읽기 캐시로 사용할지 아니면 캐시를 전혀 사용할지 선택할 수 있습니다. 드라이브&rsquo; 캐시의 공간은 웹 역할 또는 작업자 역할&rsquo; 임시 디스크에서 할당됩니다. 이 캐시는 쓰기를 통해 수행되므로 쓰기는 항상 스토리지에 즉시 커밋됩니다. 로컬 디스크 또는 스토리지에서 읽기가 충족됩니다.</p>  <p>드라이브 로컬 캐시를 사용하면 읽기가 캐시에 도달&rsquo;하면 순차적 IO 읽기 &lsquo;성능이 향상될 수 있습니다. 다음과 같은 경우 순차적 읽기가 캐시에 적중합니다.</p>  <ol>  <li>이전에 데이터를 읽었습니다. 데이터는 처음 쓰기가 아니라 처음 읽을 때 캐시됩니다.</li>  <li>캐시는 모든 데이터를 저장할 수 있을 만큼 큽 수 있습니다.</li>  </ol>  <p>Blob에 대한 액세스는 종종 로컬 디스크보다 더 높은 임의 IO 속도를 제공할 수 있습니다. 그러나 이러한 임의 IO에는 스토리지 트랜잭션 비용이 발생합니다. 스토리지에 대한 트랜잭션 수를 줄이기 위해 임의 IO에 대해 로컬 디스크 캐시를 사용할 수도 있습니다. 최상의 결과를 위해 디스크에 대한 임의 쓰기가 8KB로 정렬되고 IO 크기가 8KB의 배수로 되어 있는지 확인합니다.</p>  <h4>Azure Virtual Machine Disk Caches Windows</h4>  <p>Virtual Machine을 배포할 때 OS 디스크에는 두 가지 호스트 캐싱 선택 항목이 있습니다.</p>  <ol>  <li>읽기/쓰기(기본값) &ndash; 쓰기 저장 캐시</li>  <li>읽기 - 캐시를 통해 쓰기</li>  </ol>  <p>가상 머신에서 데이터 디스크를 설정하면 다음 세 가지 호스트 캐싱 옵션이 제공됩니다.</p>  <ol>  <li>읽기/쓰기 &ndash; 저장 캐시</li>  <li>캐시를 통해 쓰기 읽기 &ndash;</li>  <li>없음(기본값)</li>  </ol>  <p>데이터 디스크 및 OS 디스크에 사용할 캐시 유형은 현재 포털을 통해 노출되지 않습니다. 호스트 캐싱 유형을 설정하려면 서비스 관리 API( <a href="https://msdn.microsoft.com/en-us/library/windowsazure/jj157199">데이터 디스크 추가</a> 또는 <a href="https://msdn.microsoft.com/en-us/library/windowsazure/jj157190">데이터 디스크 업데이트</a>) 또는 Powershell 명령(<a href="https://msdn.microsoft.com/en-us/library/windowsazure/jj152837">Add-AzureDataDisk</a> 또는 <a href="https://msdn.microsoft.com/en-us/library/windowsazure/jj152851">Set-AzureDataDisk</a>)을 사용해야 합니다.</p>  <p>읽기 캐시는 디스크와 호스트 OS의 메모리에 모두 저장됩니다. 쓰기 캐시는 호스트 OS의 메모리에 저장됩니다.</p>  <p>경고: 애플리케이션이 <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx">FILE_FLAG_WRITE_THROUGH</a> 사용하지 않는 경우 데이터가 실제 컴퓨터가 예기치 않게 충돌할 때 쓰기 대기 중인 호스트 OS 메모리에 있을 수 있으므로 쓰기 캐시로 인해 데이터가 손실될 수 있습니다.</p>  <p>읽기 캐시를 사용하면 읽기가 캐시에 도달할&rsquo; 때 순차적 IO 읽기 성능이 &lsquo;향상됩니다. 다음과 같은 경우 순차적 읽기가 캐시에 적중합니다.</p>  <ol>  <li>이전에 데이터를 읽었습니다.</li>  <li>캐시는 모든 데이터를 저장할 수 있을 만큼 큽 수 있습니다.</li>  </ol>  <p>디스크의 캐시&rsquo; 크기는 인스턴스 크기 및 탑재된 디스크 수에 따라 달라집니다. 캐싱은 최대 4개의 데이터 디스크에 대해서만 사용하도록 설정할 수 있습니다.</p>  <h4>Windows Azure 드라이브 및 VM 디스크에 대한 캐싱 없음</h4>  <p>Windows Azure Storage 캐싱에 사용되는 노드의 로컬 디스크보다 더 높은 임의 IO 속도를 제공할 수 있습니다. 애플리케이션에서 많은 임의 IO를 수행해야 하고 처리량이 중요한 경우 위의 캐시를 사용하지 않는 것이 좋습니다. 그러나 Windows Azure Storage IO는 트랜잭션 비용이 발생하지만 로컬 캐시에 대한 IO는 그렇지 않습니다.</p>  <p>Windows Azure 드라이브 캐시를 사용하지 않도록 설정하려면 Mount() API를 호출할 때 캐시 크기에 대해 0&rsquo;을 전달&lsquo;합니다.</p>  <p>Virtual Machine 데이터 디스크의 경우 기본 동작은 캐시를 사용하지 않는 것입니다. 데이터 디스크에서 캐시를 사용하도록 설정한 경우 <a href="https://msdn.microsoft.com/en-us/library/windowsazure/jj157190">데이터 디스크 업데이트</a> 서비스 관리 API 또는 <a href="https://msdn.microsoft.com/en-us/library/windowsazure/jj152851">Set-AzureDataDisk</a> powershell 명령을 사용하여 캐시를 사용하지 않도록 설정할 수 있습니다.</p>  <p>Virtual Machine 운영 체제 디스크의 경우 기본 동작은 캐시를 사용하는 것입니다. 애플리케이션에서 데이터 파일에 대해 많은 임의 IO를 수행하는 경우 캐싱이 꺼진 데이터 디스크로 해당 파일을 이동하는 것이 좋습니다.</p>  <p>  <p>앤드류 에드워즈와 브래드 칼더</p>'
