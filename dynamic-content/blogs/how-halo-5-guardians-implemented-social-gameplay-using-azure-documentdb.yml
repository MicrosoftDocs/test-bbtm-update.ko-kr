### YamlMime:Yaml
ms.openlocfilehash: b58ad62886fb4b522efee6730a3ba8d99ddd3981
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139901672"
Slug: how-halo-5-guardians-implemented-social-gameplay-using-azure-documentdb
Title: Halo 5가 Azure Cosmos DB를 사용하여 소셜 게임 플레이를 구현한 방법
Summary: 'Halo 5가 Halo: 스파르타 회사 커뮤니티에 Azure Cosmos DB를 사용하여 수백만 명의 새로운 게이머를 처리하는 방법에 대해 알아봅니다.'
Content: >-
  <p><em>소프트웨어 엔지니어인 Halo Bing Huan Chio와 공동 저술했습니다.</em></p>


  <div>&nbsp;</div>


  <div><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/halo-1980x1080.jpg" style="width: 720px; height: 405px; margin-right: auto; margin-left: auto; float: none; display: block;"></div>


  <p>6,500만 대 이상 판매된 <a href="https://www.halowaypoint.com/" target="_blank">Halo</a> 는 역대 가장 인기 있는 게임 프랜차이즈 중 하나입니다. Halo 개발 팀은 최신 게임인 <a href="https://www.xbox.com/games/halo-5-guardians/" target="_blank">Halo 5: Guardians</a> (2015년 10월 27일 출시)에서 소셜 멀티 플레이어 게임을 지원하기 위해 <a href="https://www.halowaypoint.com/spartan-companies" target="_blank">Halo: 스파르타 회사</a> 플랫폼을 구현했습니다. 데이터 계층의 확장성 요구를 처리하고 새로운 기능의 반복적인 신속한 개발을 지원하기 위해 <a href="https://azure.microsoft.com/services/documentdb/" target="_blank">Azure Cosmos DB</a>를 선택했습니다.</p>


  <p>Halo 5: 가디언은 <a href="https://www.xbox.com" target="_blank">Xbox</a>의 1인칭 슈팅 게임으로, 싱글 게임과 멀티 플레이어 게임을 모두 지원합니다. 멀티 플레이어 게임에서 인기 있는 기능은 경쟁적이고 잘 매치된 게임을 위해 그룹이나 <a href="https://en.wikipedia.org/wiki/Clan_(video_games)" target="_blank">회사를</a> 만들거나 친구와 함께 또는 같은 생각을 가진 다른 Halo 플레이어와 조인하는 기능입니다. 스파르타 회사는 Halo 내에서 쉽게 회사를 만들고, Twitter 및 Facebook과 같은 소셜 미디어를 통해 사용자가 만든 회사를&nbsp; 쉽게 통합&nbsp;하고, 배지와 통계를 추적하고, 회사 멤버십을 관리하기 <a href="https://www.gamespot.com/articles/halo-5s-clan-system-spartan-companies-launches-tod/1100-6431534/" target="_blank">위해 시작되었습니다. </a></p>


  <p><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/spartanCompanies.PNG" style="width: 720px; height: 301px; margin-right: auto; margin-left: auto; float: none; display: block;"></p>


  <h2>Azure Cosmos DB를 사용해야 하는 이유</h2>


  <p>Halo 개발 팀은 세 가지 주요 엔터티인 회사, 회사 멤버 자격 및 회사 초대를 저장했습니다. 각 회사는 회사 ID(내부 가이드), 표시 이름, 선택적 소셜 미디어 핸들(Twitter, Facebook, Twitch.TV 및 YouTube), 회사 상태, 모토, 수여된 배지(0대 다일 수 있음), 좋아하는 게임(다시 0대 다) 및 생성 시간을 추적해야 했습니다.</p>


  <p>회사 메타데이터에 대해 대규모로 여러 작업을 지원해야 했습니다.</p>


  <ul>
   <li>여러 특성(표시 이름, 소셜 미디어 핸들, 멤버 자격)을 통해 회사의 실시간 쿼리 및 검색</li>
   <li>게임 플레이 중 도전 과제 및 통계를 사용하여 회사 업데이트 및 <a href="https://www.halowaypoint.com" target="_blank">halowaypoint.com</a> 포털에서 사용자 지정</li>
   <li>특정 규칙에 따라 회사의 상태 업데이트(비활성에서 활성으로)</li>
  </ul>


  <p>각 회사 내에서 데이터베이스는 해당 특정 회사에 대한 초대 또는 조인 요청에 대해 효율적인 작업을 지원해야 했습니다.</p>


  <ul>
   <li>초대 만료 시간을 포함하여 회사에 참가/초대할 초대에 대한 데이터 저장</li>
   <li>보류 중에서 수락됨 또는 거부됨으로 초대 상태 업데이트</li>
   <li>초대 ID, 초대자 ID, 회사 ID 및 상태, 초대 유형 및 이러한 식별자의 조합에 대한 조회 수행</li>
  </ul>


  <p>Halo 개발 팀은 데이터 플랫폼에 대한 다양한 NoSQL 기술을 고려했지만, 궁극적으로 <a href="https://azure.microsoft.com/documentation/articles/documentdb-indexing">자동 인덱싱</a> 기능에서 제공하는 속도와 유연성으로 인해 <a href="https://azure.microsoft.com/services/documentdb/">Azure Cosmos DB</a>를 선택했습니다. Cosmos DB는 Halo: 스파르타 회사&rsquo; 서비스가 스키마 또는 보조 인덱스를 설정 및 유지 관리하지 않고도 쿼리를 지원할 수 있도록 허용했습니다.</p>


  <p>Halo 회사 멤버십 및 초대를 위한 분할 전략은 회사 ID에 해시 분할을 사용하여 <a href="https://azure.microsoft.com/blog/the-walking-dead-no-mans-land-game-soars-to-1-with-azure-documentdb/">다음 게임 워킹 데드: 노 맨&#39;랜드</a> 사례 연구에 설명된 유사한 디자인을 따랐습니다. Halo 팀은 또한 다음 디자인 패턴을 사용하여 Cosmos DB 컬렉션 내의 회사에 대한 비즈니스 규칙을 구현했습니다.</p>


  <ul>
   <li><strong>점 읽기&quot;에 대한 &quot;복합 ID 속성: </strong>Cosmos DB&quot;에서 ID 속성을 사용하는 지점 읽기&quot; 및 <a href="https://msdn.microsoft.com/en-us/library/azure/microsoft.azure.documents.client.documentclient.readdocumentasync.aspx">ReadDocumentAsync</a>는 <a href="https://azure.microsoft.com/blog/azure-documentdb-bids-fond-farewell-to-self-links/">ID 기반 라우팅</a> 릴리스와 함께 수행됩니다. 1ms 미만(네트워크 대기 시간 제외)에서 완료된 1KB 문서를 읽고 1개의 요청 단위(단위)만 사용하여 대량의 병렬 요청을 허용합니다. Halo 팀은 ID 조회의 성능 향상을 활용하기 위해 초대 문서에 대해 (InviteType, InviteID, InviterID)에서 연결된 복합 ID 속성을 구현했습니다.</li>
   <li><strong>비 ID 속성에 대한 고유성에 대한 트리거: </strong> Halo 팀은 회사 ID와 표시 이름을 모두 전역적으로 고유해야 했습니다. 이를 지원하기 위해 회사별 메타데이터(단일 컬렉션에 적합할 수 있음)를 저장하고 <a href="https://azure.microsoft.com/documentation/articles/documentdb-programming/#trigger">Cosmos DB 트리거</a>를 사용하여 고유성을 적용했습니다. Cosmos DB는 컬렉션 범위에 대한 트랜잭션을 지원하므로 회사 문서의 모든 쓰기는 사후 트리거를 사용하여 동일한 이름을 가진 다른 회사를 쿼리하고 업데이트가 발견되면 롤백합니다. 이렇게 하면 다른 이름을 선택하는 사용자에게 오류로 표시됩니다. Cosmos DB에서 사용할 수 있는 트랜잭션 지원을 테스트하려면 <a href="https://github.com/Azure/azure-documentdb-net/tree/master/samples/code-samples/ServerSideScripts">GitHub</a> 샘플을 실행하거나 <a href="https://azure.microsoft.com/documentation/articles/documentdb-programming/" target="_blank">설명서를</a> 읽을 수 있습니다.</li>
   <li><strong>네이티브가 아닌 JSON 형식을 나타냅니다. </strong> 회사 및 회사의 데이터 모델은 여러 위치에서 사용된 DateTimes를 초대합니다. 날짜에 대한 효율적인 스토리지, 필터링 및 정렬을 지원하기 위해 Halo 팀은 <a href="https://en.wikipedia.org/wiki/Unix_time">Unix 시간</a> 표현을 사용했습니다. Cosmos DB 내에 <a href="https://azure.microsoft.com/en-us/blog/working-with-dates-in-azure-documentdb-4/">DateTimes를 저장하는 다양한 방법</a> 및 관련 장단점에 대해 알아봅니다.</li>
  </ul>


  <h2>다음 단계</h2>


  <p>다음 바이러스 성 게임 또는 모바일 앱의 요구에 부응할 수 있는 백 엔드 데이터베이스를 찾는 경우&rsquo; <a href="https://azure.microsoft.com/pricing/free-trial/" target="_blank"><u>무료 평가판을 사용하여 DB를 Cosmos</u></a> 시도하거나 <a href="https://azure.microsoft.com/documentation/articles/documentdb-community/#contact-the-team" target="_blank"><u>Cosmos DB 엔지니어링 팀과 1:1 채팅</u></a>을 예약하십시오. 그리고 할로의 사본을 얻을 잊지&#39;마세요 <a href="https://www.halowaypoint.com/en-us/games/halo-5-guardians">5: 가디언과 </a>좋아하는 <a href="https://www.halowaypoint.com/spartan-companies">스파르타 회사에</a> 가입!</p>
