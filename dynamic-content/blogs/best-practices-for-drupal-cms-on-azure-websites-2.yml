### YamlMime:Yaml
ms.openlocfilehash: b410e2af9a90d1832d69371224085acff2bb4681
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139902208"
Slug: best-practices-for-drupal-cms-on-azure-websites-2
Title: Azure Websites의 Drupal CMS에 대한 모범 사례
Summary: Azure Websites("Websites")는 Drupal Websites를 호스트하는 데 유용한 플랫폼입니다.  이 블로그에서는 Azure Websites에서 Drupal CMS 사이트를 실행하기 위한 마이그레이션, 구성, 최적화 및 모범 사례를 안내합니다.
Content: >-
  <p>Drupal CMS는 PHP로 작성된 오픈 소스 콘텐츠 관리 시스템이며 MySQL을 사용합니다. Drupal은 개발자를 위한 세련된 프로그래밍 인터페이스를 제공하며, 기본 웹 사이트 및 설치에는 프로그래밍 기술이 필요하지 않습니다. Drupal을 사용하여 개인 블로그에서 엔터프라이즈 애플리케이션에 이르기까지 모든 것을 빌드할 수 있습니다. 정부 기관들 사이에서도 인기 있는 프레임워크입니다. 이 블로그 게시물의 주요 초점은 Azure Websites 플랫폼에서 Drupal CMS 웹 사이트를 실행하는 방법을 명확히 하는 것이며, 이 프로세스에서는 다음을 알아봅니다.</p>


  <ul>
   <li>기존 Drupal 사이트를 Azure Websites로 마이그레이션하는 방법</li>
   <li>미디어용 Azure Storage 모듈 콘텐츠를 설정하는 방법</li>
   <li>캐싱을 사용하여 개선하는 방법</li>
   <li>Drupal CMS에 대한 모범 사례 사용</li>
   <li>지역 간 크기 조정</li>
  </ul>


  <h2>기존 Drupal 사이트를 Azure Web Apps로 마이그레이션하는 방법</h2>


  <p>Drupal 웹 사이트를 AzureWeb&nbsp; Appis&nbsp;로 마이그레이션하는 작업은 매우 쉽습니다. 아래 단계를 수행하면 한 시간 안에 전체 Drupal 사이트를 이동할 수 있습니다.</p>


  <h3>Azure 웹 사이트 및 MySQL 데이터베이스 만들기</h3>


  <p>먼저 단계별 자습서를 통해 MySQL을 사용하여 새 웹 사이트를 만드는 방법을 알아봅니다. <a href="https://azure.microsoft.com/en-us/develop/php/tutorials/website-w-mysql-and-git/">PHP-MySQL Azure 웹 사이트를 만들고 Git을 사용하여 배포합니다.</a> 이 시나리오에서는 <strong>FREE MySQL 데이터베이스</strong>를 만듭니다. 개발 목적에는 좋지만 프로덕션 수준 사이트의 경우 공유 데이터베이스 클러스터에 대한 <a href="https://www.cleardb.com/store/azure">다양한 계획을</a> 제공하는 Azure Store에서 ClearDB 데이터베이스를 구매해야 합니다. 자세한 내용은 Azure Store의 ClearDB를 참조하세요. 공유 클러스터 계획이 요구 사항을 충족하지 않는 경우 전용 MySQL 데이터베이스 클러스터를 선택할 수 있습니다. 자세한 내용은 <a href="https://www.cleardb.com/pricing/missioncritical.view">ClearDB 중요 데이터베이스 계획을</a> 참조하세요. Git을 사용하여 Drupal 사이트를 게시하려는 경우 Git 리포지토리를 구성하는 방법을 설명하는 자습서의 단계를 따릅니다.</p>


  <p>나중에 해당 정보가 필요하므로 원격 MySQL 연결 정보 가져오기 섹션의 지침을 따라야 합니다. Drupal 사이트를 배포하기 위해 자습서의 나머지 부분을 무시할 수 있지만 Azure 웹 사이트(및 Git)를 처음으로 사용하는 경우 추가 읽기 정보를 찾을 수 있습니다. MySQL 데이터베이스를 사용하여 새 웹 사이트를 설정하면 이제 MySQL 데이터베이스 연결 정보와 (선택 사항) Git 리포지토리가 제공됩니다. 다음 단계는 Azure 웹 사이트의 MySQL에 데이터베이스를 복사하는 것입니다.</p>


  <h3>Azure Web Apps에서 MySQL에 데이터베이스 복사</h3>


  <p>데이터베이스를 Azure로 마이그레이션하는 방법에는 여러 가지가 있습니다. MySQL 데이터베이스에서 잘 작동하는 한 가지 방법은 [MySqlDump] 도구를 사용하는 것입니다. 다음 명령은 로컬 컴퓨터에서 Azure 웹 사이트로 복사하는 방법의 예를 제공합니다.</p>


  <pre>

  mysqldump -u local_username --password=local_password drupal | mysql -h remote_host -u remote_username --password=remote_password remote_db_name</pre>


  <p>물론 기존 Drupal 데이터베이스에 대한 사용자 이름과 암호를 제공해야 합니다. 또한 첫 번째 단계에서 만든 MySQL 데이터베이스의 호스트 이름, 사용자 이름, 암호 및 데이터베이스 이름을 제공해야 합니다. 이 정보는 이전에 수집한 연결 문자열 정보에서 사용할 수 있습니다. 연결 문자열은 다음 문자열과 유사한 형식이어야 합니다.</p>


  <pre>

  Database=remote_db_name;Data Source=remote_host;User Id=remote_username;Password=remote_password</pre>


  <p>데이터베이스 크기에 따라 복사 프로세스에 몇 분 정도 걸릴 수 있습니다. 이제 Drupal 데이터베이스가 Azure Websites에 있습니다. Drupal 코드를 배포하기 전에 새 데이터베이스에 연결할 수 있도록 수정해야 합니다.</p>


  <h3>settings.php에서 데이터베이스 연결 정보 수정</h3>


  <p>여기서는 새 데이터베이스 연결 정보가 다시 필요합니다. 텍스트 편집기에서 <strong>drupalsite&gt;/sites/default/setting.php 파일을 열고 $databases 배열의 &#39;데이터베이스&#39;, &#39;사용자 이름&#39;, &#39;암호&#39; 및 &#39;호스트&#39; 값을 새 데이터베이스에 대한 올바른 값으로 바꿉니다.&lt;</strong> <strong> </strong> 작업을 마치면 다음과 비슷한 내용이 있어야 합니다.</p>


  <pre>

  $databases = array (&#39;default&#39;=&gt;array (&#39;default&#39;=&gt;array (&#39;database&#39;=&gt;&#39;remote_db_name&#39;,&#39;username&#39;=&gt;&#39;remote_username&#39;,

  &#39;password&#39;=&gt;&#39;remote_password&#39;,&#39;host&#39;=&gt;&#39;remote_host&#39;,&#39;port&#39;=&gt;&#39;&#39;,

  &#39;driver&#39;=&gt;&#39;mysql&#39;,&#39;prefix&#39;=&gt;&#39;&#39;,),),);</pre>


  <p><strong>참고:</strong> <strong>settings.php</strong>에 <strong>$base_url</strong> 구성 매개 변수가 있는 경우 Drupal CMS가 <strong>$base_url</strong>에 대해 설정된 값에서 URL을 만들기 때문에 주석으로 처리합니다. azure 웹 사이트가 www.exmaple.com 같은 사용자 지정 도메인을 사용하도록 구성되면 <strong>$base_url</strong> 매개 변수를 사용할 수 있습니다. <strong>settings.php </strong>파일을 저장합니다. 이제 배포할 준비가 되었습니다.</p>


  <h3>Git 또는 FTP를 사용하여 Drupal 코드 배포</h3>


  <p>마지막 단계는 Git 또는 FTP를 사용하여 Azure 웹 사이트에 코드를 배포하는 것입니다.</p>


  <ul>
   <li>FTP를 사용하는 경우 웹 사이트&#39;대시보드에서 FTP 호스트 이름 및 사용자 이름을 가져옵니다. 그런 다음 FTP 클라이언트를 사용하여 Drupal 파일을 원격 <strong>사이트의 /site/wwwroot</strong> 폴더에 업로드합니다.</li>
   <li>Git을 사용하는 경우 이전 단계에서 Git 리포지토리를 설정해야 합니다. 로컬 컴퓨터에 Git을 설치해야 합니다. 그런 다음 리포지토리를 만든 후 제공된 지침을 따릅니다. Git 구성에 대한 이 <a href="https://azure.microsoft.com/en-us/documentation/articles/web-sites-php-mysql-deploy-use-git/">문서</a> 검토</li>
  </ul>


  <h2>Azure Storage 모듈을 설정하는 방법</h2>


  <p>Drupal이 설치되면 미디어 파일을 저장하기 위해 Windows Azure Blob Storage를 사용하는 Blob Storage 모듈을 사용하도록 설정하고 구성해야 합니다. 다음 지침을 사용하여 올바르게 구성합니다. <strong>관리 </strong>사용자로 로그인하고 모듈 탭을 클릭하고 Azure Storage 모듈을 사용하도록 설정합니다. 이 모듈이 없는 경우 Azure Blob Modulehere에서 <a href="https://www.drupal.org/project/azure_blob" title="모듈">을 설치합니다</a>. <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/05/image_thumb15.png"><img alt="image_thumb[15]" border="0" height="288" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image_thumb15_thumb.png" style="margin: 0px; border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="image_thumb[15]" width="1158"></a></p>


  <p><strong>구성</strong> 탭을 클릭한 다음 <strong>미디어 섹션에서</strong> <strong>Azure Storage</strong> 클릭합니다.</p>


  <p><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/05/image_thumb13.png"><img alt="image_thumb[13]" border="0" height="559" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image_thumb13_thumb.png" style="margin: 0px; border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="image_thumb[13]" width="585"></a></p>


  <p><strong>추가</strong> 단추를 클릭하여 Drupal 웹 사이트에서 사용할 새 Storage 계정을 추가합니다. 스토리지 계정의 이름, 기존 컨테이너의 이름(이 컨테이너는 공용이어야 합니다), Blob Storage URL, 기본 액세스 키와 같은 세부 정보를 제공합니다. 스토리지가 CDN 연결된 경우 <strong>사용자 지정 URL</strong>을 사용하고 여기에 CDN URL을 입력합니다. CDN 사용하지 않는 경우 이 값을 비워 둡니다.</p>


  <p><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/05/image_thumb11.png"><img alt="image_thumb[11]" border="0" height="559" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image_thumb11_thumb.png" style="margin: 0px; border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="image_thumb[11]" width="636"></a></p>


  <p><strong>다시 구성</strong> 탭을 클릭한 다음 <strong>미디어 섹션에서</strong> <strong>파일 시스템을</strong> 클릭합니다. <strong>Azure Blob Storage 저장된</strong> 라디오 단추 파일을 확인하고 <strong>구성 저장</strong> 단추를 클릭합니다.</p>


  <p><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/05/image_thumb9.png"><img alt="image_thumb[9]" border="0" height="559" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image_thumb9_thumb.png" style="margin: 0px; border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="image_thumb[9]" width="543"></a></p>


  <p>이제 <strong>구조체 콘텐츠 형식을&gt; 클릭합니다.</strong> 그런 다음 <strong>아티클</strong>&quot; 유형에 대한 &quot;<strong>관리자 필드를</strong> 클릭합니다. 필드 관리 대화 상자에서 새 문서를 만들 때 <strong>이미지 업로드 </strong>옵션을 표시할 이미지 <strong>레이블</strong>이 이미 추가되었는지 확인합니다<strong>. </strong> 이미지별 형식이 아닌 파일 업로드를 지원하려면 아래와 같이 파일 업로드 레이블(<strong>업로드 </strong>레이블)도 포함합니다. <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/05/image_thumb7.png"><img alt="image_thumb[7]" border="0" height="492" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image_thumb7_thumb.png" style="margin: 0px; border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="image_thumb[7]" width="1100"></a></p>


  <p>이제 이미지 편집을 클릭하고 Azure Storage 계정으로 <strong>업로드 대상</strong>을 선택합니다. 파일 업로드에 대한 다른 레이블이 있는 경우(필드 형식이 FILE인 경우) 동일한 작업을 수행하세요. <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/05/image_thumb6.png"><img alt="image_thumb[6]" border="0" height="614" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image_thumb6_thumb.png" style="margin: 0px; border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="image_thumb[6]" width="606"></a></p>


  <p>마찬가지로 이미지 또는 파일 업로드를 지원하는 콘텐츠 형식의 경우 위에서 설명한 것과 동일한 구성을 만듭니다.</p>


  <h2>캐싱을 사용하여 성능을 향상시키는 방법</h2>


  <p>대량의 사용자 트래픽(수십만~수백만 개의 페이지 보기 및 고유 방문자)을 수신하는 웹 사이트는 Memcached 또는 Redis Cache와 같은 분산 캐싱 서버를 사용하면 도움이 됩니다. 자세한 내용은 <a href="https://azure.microsoft.com/en-us/documentation/articles/web-sites-connect-to-redis-using-memcache-protocol/">memcache 프로토콜과 함께 Azure redis Cache를 사용하는 방법과</a> <a href="https://blogs.msdn.microsoft.com/azureossds/2015/05/14/connect-to-microsoft-azure-redis-cache-from-wordpress-site/">WordPress용 Redis Cache를 구성하는 방법을</a> 참조하세요. 캐싱을 위해 접근한 일반적인 방법은 콘텐츠 배달 네트워크(CDN) 및 백 엔드 캐시(Redis) 서비스가 혼합되어 있습니다.&nbsp; Drupal은 데이터베이스를 사용하여 캐시를 저장합니다. 콘텐츠가 수정되면 Drupal은 이 변경 내용을 감지하고 캐시가 만료되므로 콘텐츠 일관성을 유지합니다. Memcached/redis는 Drupal&#39;내부 캐싱 시스템을 대체합니다. 성능 향상을 위해 CDN 대신<a href="https://azure.microsoft.com/en-us/blog/using-varnish-as-front-end-cache-for-azure-web-apps/"> Varnish를 프런트 엔드 캐시로 </a>사용할 수도 있습니다.</p>


  <h2>Drupal CMS에 대한 모범 사례 사용</h2>


  <p>클라우드의 모든 웹 사이트에 대한 일반적인 방법은 다음과 입니다.</p>


  <ol>
   <li><strong>향후 계획:</strong> 인프라를 확장 또는 축소하거나 인프라를 수정하여 최신 요구 사항을 충족해야 할 때 프로젝트할 수 있도록 웹 사이트 및 사용자 트래픽 패턴의 성능 및 요구 사항을 추적해야 합니다.</li>
   <li><strong>사이트 백업:</strong> 웹 사이트와 데이터베이스를 모두 백업합니다. 백업 및 복원 절차를 테스트합니다.</li>
  </ol>


  <p>이제&#39;Drupal CMS에 집중하고 Azure 웹 사이트에서 Drupal CMS를 빌드하고 관리하기 위한 몇 가지 모범 사례를 알아보겠습니다.</p>


  <h3>보안 구성:</h3>


  <ol>
   <li>중요한 임시 파일 제거 파일을 편집할 때 .bak로 끝나는 파일과 같은 임시 백업 파일이 ~ 문자, <strong>settings.php.orig</strong> 로 끝날 수 있습니다. 이러한 파일은 URL 다시 쓰기 <strong> 규칙을 사용하여web.config</strong> 제한하지&#39;경우 브라우저에서 볼 수 있습니다. 이로 인해 공격자가 중요한 정보에 액세스할 수 있습니다. 웹 사이트에 있는 파일을 제거합니다. 이 문제는 web.config URL 다시 쓰기 규칙을 추가하여 이러한 파일에 대한 액세스를 거부하거나 이러한 파일을 찾고 자동으로 삭제하는 간단한 웹 작업을 사용하여 이를 자동화할 수 있습니다.</li>
   <li>loginDrupal에 SSL을 사용하도록 설정해도 사용자가 로그인할 때 SSL(Secure Sockets Layer)을 사용할 필요가 없습니다. 따라서 공격자가 웹 사이트에 대한 관리 액세스 권한을 쉽게 얻을 수 있습니다. drupal.org 보안 페이지 모듈을 설치하고 사용하도록 설정합니다. 이 모듈은 모든/사용자 URL이 SSL을 사용하여 제공되도록 할 수 있습니다.</li>
   <li>안전하지 않은 파일 uploadsFile을 허용하지 않으며 이미지 필드를 사용하면 사용자가 파일을 업로드할 수 있습니다. 악의적인 사용자는 시스템에 혼란을 줄 수 있는 파일을 업로드하여 웹 사이트를 제어하는 데 사용할 수 있습니다. 파일 및 이미지 업로드에 지원되는 파일 형식을 제한하고 .exe, .swf,.flv,.htm,.php,.vb,.vbs와 같은 모든 확장자를 제거합니다.</li>
   <li>보안 키트 모듈 사용: <a href="https://ftp.drupal.org/files/projects/seckit-7.x-1.9.zip">보안 키트 </a>모듈은 클릭재킹, CSRF(교차 사이트 요청 위조) 및 XSS(교차 사이트 스크립팅) 보호 등 웹 사이트에 유용한 보안 향상 기능을 제공합니다. 이 모듈은&#39;기본 구성을 권장하지만 웹 사이트에 이 모듈이 차단할 수 있는 몇 가지 특별한 요구 사항이 있는 경우 구성을 검토하고 원하는 대로 업데이트합니다. 자세한 내용은 <a href="https://drupal.org/project/seckit">Security Kit 모듈</a>을 참조하세요.</li>
   <li>일반적인 관리자 usernamesYour 관리자 사용자 이름(사용자 ID 1)은 일반적으로 사용되며 웹 사이트의 보안 취약성을 나타낼 수 있는 <strong>관리자, 관리자 및 루트 </strong>가 아니어야 합니다. 복잡하거나 고유한 사용자 이름을 사용하여 악용을 방지합니다.</li>
   <li>최종 사용자로부터 사이트 오류 숨기기. 오류 메시지는 웹 사이트 및 해당 서버에 대한 중요한 정보를 사이트 방문자에게 표시할 수 있습니다. 사용자의 오류 메시지를 표시하지 않도록 웹 사이트를 구성하려면 웹 사이트에서 /admin/config/development/logging에서 로깅 및 오류 페이지를 열고 오류 메시지에서 없음을 선택하여 섹션을 표시한 다음 구성 저장을 클릭합니다.</li>
   <li>웹 사이트에 대해 암호 정책 모듈을 사용하도록 설정Content 편집기에서 로그인 자격 증명에 간단한 암호를 사용할 수 있으며, 그러면 공격자가 악용할 수 있는 문을 열 수 있습니다. 여기서 취약성을 줄이려면 <a href="https://drupal.org/project/password_policy">암호 정책 모듈</a> 을 사용하도록 설정하여 엄격한 암호 정책을 적용합니다.</li>
  </ol>


  <h3>성능 구성</h3>


  <ol>
   <li>최소 캐시 수명이 5분 미만인 경우 사이트 응답성 및 성능을 높이기 위해 최소 캐시 수명은 Drupal이 해당 페이지를 지우지 못하게 하고 노드 후 캐시를 차단하거나 일정 기간 동안 변경 내용을 차단합니다. 최소 캐시 수명이 5분 미만으로 설정된 경우 서버는 최근에 변경된 콘텐츠를 사이트 방문자에게 제공하기 위해 더 열심히 노력해야 합니다. 최소 캐시 수명을 5분 이상으로 설정하려면 웹 사이트에서 /admin/config/development/performance에서 성능 페이지를 연 다음 최소 캐시 수명 드롭다운에서 새 값을 선택합니다. 캐시에서 기존 페이지를 사용할 수 있지만 적절한 시간 후에 변경된 콘텐츠를 사용할 수 있는 최소 캐시 수명을 가능한 한 높게 설정합니다.</li>
   <li>페이지 캐시 최대 사용 기간이 5분 미만인 경우 페이지 캐시 최대 사용 기간이 5분 미만으로 설정되면 서버에서 페이지를 자주 다시 생성해야 합니다. 이렇게 하면 사이트&#39;성능이 저하할 수 있습니다. 페이지 캐시 최대 기간을 5분 이상으로 설정하려면 웹 사이트에서 /admin/config/development/performance에서 성능 페이지를 연 다음 <strong>페이지 캐시 최대 사용 기간</strong> 드롭다운에서 새 값을 선택합니다.</li>
   <li>CSS 및 JS 스크립트 최적화와 함께 CSS/JS 최적화를 사용하지 않도록 설정하면 웹 사이트 방문자가 페이지 성능이 느려지고 서버 부하가 증가합니다. CSS 최적화를 사용하도록 설정하려면 웹 사이트에서 성능 페이지(/admin/config/development/performance)를 연 다음, CSS 파일 집계 및 압축을 선택합니다. JavaScript 최적화를 사용하도록 설정하려면 웹 사이트에서 성능 페이지(/admin/config/development/performance)를 열고 JavaScript 파일 집계를 선택합니다.</li>
   <li>페이지 압축 사용 페이지 압축을 사용하지 않도록 설정하면 웹 사이트 방문자가 페이지 로드 및 데이터 검색 시간이 길어집니다. 페이지를 캐시에 저장하기 전에 압축하면 MySQL 또는 Memcache 백 엔드에 대한 TCP/IP 오버헤드가 줄어듭니다.</li>
   <li>페이지 압축을 사용하도록 설정하려면 웹 사이트에서 성능 페이지(/admin/settings/performance)를 엽니다. 캐싱 섹션에서 익명 사용자의 캐시 페이지가 선택되어 있는지 확인합니다(&#39;사용하도록 설정되지 않은 경우 선택한 다음 구성 저장 클릭). 그런 다음 캐시된 페이지 압축을 선택합니다.</li>
  </ol>


  <h3>Azure 웹 사이트 구성</h3>


  <ol>
   <li>웹 서버 로깅을 사용하도록 설정하고 Storage 계정을 사용하여 로그를 저장합니다. 미디어 콘텐츠에 대해 설치한 것과 동일한 스토리지를 다시 사용할 수 있습니다. 자세한 내용은 <a href="https://azure.microsoft.com/en-us/documentation/articles/web-sites-enable-diagnostic-log/">Azure 웹 사이트 진단을 참조하세요</a>.</li>
   <li>트래픽 및 웹 사이트의 부하에 따라 웹 사이트를 동적으로 확장 또는 축소하는 자동 크기 조정을 설정합니다. 자세한 내용은 자동 크기 조정 구성을 참조하세요.</li>
   <li>서비스의 성능 및 SLA 지원을 향상하기 위해 웹 사이트를 실행하는 전용 VM 인스턴스를 제공하는 기본 또는 표준 모드를 사용합니다. 자세한 내용은 <a href="https://azure.microsoft.com/en-us/pricing/details/web-sites/">계층별 기능을 참조하세요</a>.</li>
   <li>최소 2개의 중간 또는 큰 인스턴스를 사용하도록 사이트를 구성합니다(인스턴스는 웹 사이트에 대해 추상화된 VM을 참조). 단일 인스턴스를 사용하는 경우 인스턴스가 잘못된 상태로 전환되면 사이트가 중단됩니다. 2개의 인스턴스를 사용하면 이 단일 실패 지점을 방지할 수 있습니다.</li>
   <li>부하 테스트 도구 Visual Studio 같은 도구를 사용하여 웹 사이트를 부하 테스트하여 사이트를 구성한 규모가 실제로 웹 사이트 트래픽을 처리하는지 확인합니다.</li>
   <li>조건에 따라 VM 인스턴스를 재활용하는 웹 사이트에 대해 자동 복구를 설정합니다. 자세한 내용은 <a href="https://azure.microsoft.com/blog/2014/02/06/auto-healing-windows-azure-web-sites/">웹 사이트를 자동으로 복구하는 방법을 참조하세요</a>.</li>
  </ol>


  <h3>코딩 사례</h3>


  <ol>
   <li>Drupal Core를 변경할 수 있는 경우 Drupal Core를 변경하면 웹 사이트에서 Drupal의 버전 업데이트를 관리하기가 더 어려워지고 웹 사이트가 증가함에 따라 유지 관리하기가 어려울 경우 Drupal Core를 변경하지 마세요.</li>
   <li>너무 많은 modulesDrupal을 사용하지 않으면 CMS의 기능 집합을 확장하는 모듈을 유연하게 추가할 수&#39;있지만 너무 많은 모듈이 사이트 성능에 영향을 주고 속도가 느려질 수 있습니다.</li>
   <li>Azure 웹 사이트에서 실행할 web.config 포함Azure 웹 사이트에서 IIS를 사용하므로 아래 구성으로 web.config 추가하여 파일에 대한 무단 액세스를 보호하고 깨끗한 URL을 관리합니다. &nbsp; <a href="https://groups.drupal.org/node/25421">여기에 </a>표시된 대로 Drupal 웹 사이트에 대한 샘플 web.config 사용합니다. 사용하도록 설정된 경우 사용자&#39;후속 요청을 특정 인스턴스에 고정하는 애플리케이션 요청 라우팅&nbsp; 쿠키를 사용하지 않도록 설정해야 합니다. 사용하지 않도록 설정하면 웹 사이트에서 플랫폼의 일반적인 부하 분산&nbsp; 동작을 사용할 수 있습니다. 자세한 내용은 ARR 쿠키 사용 안 함을 참조하세요. web.config 파일에서 이 작업을 수행하려면 <strong>system.webserver&gt; 아래에&lt;</strong> 다음 섹션을 추가합니다.</li>
  </ol>


  <pre>
    &lt;httpProtocol&gt;
        &lt;customHeaders&gt;
          &lt;add name=&quot;Arr-Disable-Session-Affinity&quot; value=&quot;True&quot; /&gt;
        &lt;/customHeaders&gt;
      &lt;/httpProtocol&gt;</pre>

  <h2>여러 지역에서 Drupal 크기 조정</h2>


  <p>여러 지역에 Drupal 웹 사이트를 호스팅하면 단일 웹 사이트가 하나의 데이터 센터에서 실행되는 경우 단일 실패 지점과 관련된 위험을 완화할 수 있습니다. 클라우드 솔루션에서 기억해야 할 중요한 점은 모든 구성 요소(웹 사이트, 데이터베이스, 캐시 등)가 실패하고 솔루션을 복원력 있게 만들 수 있다고 가정해야 한다는 것입니다. 이렇게 하면 인프라의 일부를 구성하는 서비스 중단으로 인해 발생하는 운영 비용이 줄어듭니다. 이 시나리오에서는 두 개 이상의 지역에서 Drupal 웹 사이트를 호스트해야 합니다. 즉, 미국 동부 및 미국 서부 지역을 선택합니다. 그림 참조 Drupal 웹 사이트에 대한 Active-Active(마스터 마스터) 웹 사이트 구성을 보여 줍니다.</p>


  <ol>
   <li>해당 MySQL 데이터베이스에 연결된 두 개의 Azure Websites</li>
   <li>두 MySQL 데이터베이스는 모두 데이터베이스 복제와 동기화됩니다.</li>
   <li>성능, 장애 조치(failover) 또는 라운드 로빈 메서드에 따라 최종 사용자 트래픽 부하를 분산하는 Azure Traffic Manager입니다.</li>
   <li>장애 조치(failover)를 사용하도록 설정된 관리되는 Memcached 서비스</li>
   <li>Azure CDN Azure Storage(지역 중복)</li>
  </ol>


  <p>이 아키텍처는 매우 간단하게 만들 수 있지만 애플리케이션에 특별한 요구 사항이 있는 경우 요구 사항에 맞게 위의 구성을 조정할 수 있습니다. 이 구성을 업데이트할 수 있습니다.</p>


  <ul>
   <li>Master-Slave 웹 사이트 구성 만들기</li>
   <li>하나의 마스터 및 다중 슬레이브 웹 사이트 구성 만들기</li>
   <li>웹 작업을 사용하여 사용자 지정 복제 프로세스 사용</li>
   <li>웹 작업을 사용하여 관리 프로세스 자동화</li>
  </ul>


  <h3>웹 사이트 크기 조정</h3>


  <p>Azure 웹 사이트에서 강화하려면 웹 호스팅 계획 모드를 더 높은 수준의 서비스로 변경하고 더 높은 수준의 서비스로 전환한 후 특정 설정을 구성하는 두 가지 관련 작업이 포함됩니다. 두 항목 모두 이 문서에서 다룹니다. 표준 모드와 같은 더 높은 서비스 계층은 Azure에서 리소스를 사용하는 방법을 결정할 때 더 큰 견고성과 유연성을 제공합니다. 자세한 내용은 <a href="https://azure.microsoft.com/en-us/documentation/articles/web-sites-scale/">Azure 웹 사이트의 크기를 조정하는 방법을</a> 참조하세요.</p>


  <h3>데이터베이스 크기 조정</h3>


  <p>애플리케이션은 Azure 웹 사이트와 데이터베이스인 두 구성 요소에 따라 달라집니다. 데이터베이스의 고가용성 및 재해 복구를 위해 데이터베이스 크기를 조정할 수 있도록 데이터베이스를 만드는 방법에 따라 다양한 옵션이 있습니다. 예를 들어 다음과 같은 두 가지 시나리오가 있습니다.</p>


  <ol>
   <li>Clear DB 서비스를 사용하는 경우 <a href="https://www.cleardb.com/developers/cdbr/introduction">ClearDB CDBR(고가용성 라우팅)을</a> 구성해야 합니다. Clear DB는 지역 쌍(예: 미국 동부 및 미국 서부)에서 데이터베이스 복제를 제공하지만 Azure Web Jobs를 사용하여 데이터베이스를 복제하기 위한 고유한 도구를 만들 수도 있습니다.</li>
   <li>Azure Virtual Machine에서 <a href="https://www.mysql.com/products/cluster/">MySQL 클러스터</a> 를 관리하는 모든 도구를 제공하는 MySQL 클러스터 CGE를 설정할 수도 있습니다. 이 경우 모든 MySQL 클러스터, 데이터베이스 복제 및 크기 조정 작업을 수동으로 관리합니다.</li>
  </ol>


  <h3>Redis 캐시 크기 조정</h3>


  <p>Azure Redis 캐시 크기 조정 기능은 현재 미리 보기로 제공됩니다. Azure Redis Cache에는 캐시 크기 및 기능을 선택할 때 유연성을 제공하는 다양한 캐시 제품이 있습니다. <a href="https://portal.azure.com/">Azure Portal</a>에서 <strong>가격 책정 계층 변경</strong> 블레이드를 사용하여 캐시 크기를 조정할 수 있습니다. 캐시 크기를 조정&nbsp; 하는 방법에 대해 자세히 알아보려면 <a href="https://azure.microsoft.com/en-us/documentation/articles/cache-how-to-scale/">여기</a>를 클릭하십시오.</p>


  <h3>사용자 트래픽을 라우팅하는 Traffic Manager 설정</h3>


  <p>Azure Traffic Manager를 사용하면 웹 사이트를 포함할 수 있는 지정된 엔드포인트에 대한 사용자 트래픽의 배포를 제어할 수 있습니다. Traffic Manager는 인터넷 리소스의 도메인 이름에 대한 DNS(Domain Name System) 쿼리에 지능형 정책 엔진을 적용하여 작동합니다. 클라우드 서비스나 웹 사이트는 동일한 데이터 센터 또는 전 세계의 여러 센터에서 실행될 수 있습니다. Traffic Manager 세 가지 방법을 제공합니다.</p>


  <ul>
   <li><strong>장애 조치(failover</strong>): 동일하거나 다른 Azure 데이터 센터에 엔드포인트가 있고(관리 포털의 지역이라고 함) 모든 트래픽에 기본 엔드포인트를 사용하지만 기본 또는 백업 엔드포인트를 사용할 수 없는 경우 백업을 제공하려는 경우 장애 조치( <em>failover</em> )를 선택합니다. 자세한 내용은 장애 조치(failover) 부하 분산 방법을 참조하세요.</li>
   <li><strong>라운드 로빈</strong>: 동일한 데이터 센터의 엔드포인트 집합 또는 다른 데이터 센터에 부하를 동일하게 분산하려는 경우 <em>라운드 로빈</em> 을 선택합니다. 자세한 내용은 라운드 로빈 부하 분산 방법을 참조하세요.</li>
   <li><strong>성능</strong>: 서로 다른 지리적 위치에 엔드포인트가 있고 클라이언트에 가장 낮은 대기 시간 측면에서 가장&quot; 가까운 엔드포인트를 사용하도록 &quot;요청하려는 경우 <em>성능을</em> 선택합니다. 자세한 내용은 성능 부하 분산 방법을 참조하세요.</li>
  </ul>


  <p>Azure 관리 포털에서 새 Azure Traffic Manager 서비스 엔드포인트 만들기<a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/05/image_thumb31.png"><img alt="image_thumb[31]" border="0" height="448" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image_thumb31_thumb.png" style="margin: 0px; border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="image_thumb[31]" width="1206"></a> 이제 Traffic Manager 엔드포인트의 대시보드에 액세스하고 ADD를 클릭하여 트래픽을 라우팅하려는 웹 사이트를 사용하도록 구성합니다. 이 <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/05/image_thumb33.png"><img alt="image_thumb[33]" border="0" height="605" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image_thumb33_thumb.png" style="margin: 0px; border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="image_thumb[33]" width="1204"></a> <strong>추가 </strong>대화 상자에서 <strong>서비스 유형을 웹 사이트 </strong>로 선택하고 사용자 트래픽을 라우팅할 웹 사이트를 선택합니다. <img alt="Add Website Endpoints" class="alignnone size-full wp-image-150211" height="617" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Capture.png" width="791"> 이제 두 엔드포인트가 모두 트래픽 관리자에 추가된 것을 볼 수 있습니다. Traffic Manager URL을 찾아보면 구성에 따라 트래픽이 라우팅되는 것을 볼 수 있습니다. &nbsp;</p>


  <h2>그것을 래핑!</h2>


  <p>Drupal 웹 사이트를 Azure Websites로 이동하는 데 관련된 기본 작업 및 문제를 다루었습니다. 위에서 설명한 솔루션은 Drupal 사이트가 작거나 큰지에 관계없이 Azure 웹 사이트 서비스에서 Drupal 웹 사이트의 마이그레이션 및 구성을 더 쉽게 만듭니다. 이제&#39;Azure 웹 사이트 플랫폼에서 Drupal 웹 사이트 빌드 및 크기 조정을 시작합니다.</p>
