### YamlMime:Yaml
ms.openlocfilehash: 9600fd57e1de27a2f9910bcf14973a563bc54f3a
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139899854"
Slug: control-azure-data-lake-costs-using-log-analytics-to-create-service-alerts
Title: Log Analytics를 사용하여 서비스 경고 만들기를 사용하여 Azure Data Lake 비용 제어
Summary: Azure Data Lake 고객은 Data Lake Store 및 Data Lake Analytics를 사용하여 방대한 양의 데이터를 저장하고 복잡한 분석을 실행합니다.
Content: >-
  <p>Azure Data Lake 고객은 Data Lake Store 및 Data Lake Analytics를 사용하여 방대한 양의 데이터를 저장하고 복잡한 분석을 실행합니다. 그러나 비용을 관리하고, 계정의 활동을 최신 상태로 유지하고, 사용 임계값이 특정 한도에 근접하는 경우를 사전에 파악하는 것은 어렵습니다. Log Analytics 및 Azure Data Lake를 사용하여 이러한 문제를 해결하고 비용이 증가하는 시기 또는 특정 활동이 발생하는 시기를 알 수 있습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/eaeb8328-7731-4020-8c74-f4e694bd0bef.png"><img alt="image" border="0" height="157" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/e30ef903-e843-458b-a56d-91b3a799d825.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="이미지" width="624"></a></p>


  <p>이 게시물에서는 Data Lake 계정과 함께 Log Analytics를 사용하여 Data Lake 활동 이벤트와 특정 사용 임계값에 도달한 시기를 알릴 수 있는 경고를 만드는 방법을 알아봅니다. 시작하기 쉽습니다!</p>


  <h2>1단계: Azure Data Lake 및 Log Analytics 커넥트</h2>


  <p>Data Lake 계정은 진단 로그를 생성하도록 구성할 수 있으며, 그 중 일부는 자동으로 생성됩니다(예: 현재 사용 보고와 같은 일반 Data Lake 작업 또는 작업이 완료될 때마다). 다른 파일은 요청에 따라 생성됩니다(예: 새 파일을 만들거나 열거나 작업이 제출될 때). Data Lake Analytics 및 Data Lake Store는 로그를 쿼리하고 쿼리 결과에 따라 경고를 만들 수 있는 Log Analytics 계정으로 이러한 진단 로그를 보내도록 구성할 수 있습니다.</p>


  <p>Log Analytics 계정에 진단 로그를 보내려면 <a href="https://blogs.msdn.microsoft.com/azuredatalake/2018/02/06/struggling-to-get-insights-for-your-azure-data-lake-store-azure-log-analytics-can-help/" target="_blank">Azure Data Lake Store에 대한 인사이트를 얻기 위해 어려움을 겪고 있는 블로그 게시물에 설명된 단계를 따르세요. Azure Log Analytics가 도움이 될 수 있습니다! </a></p>


  <h2>2단계: 특정 이벤트 또는 집계된 임계값을 식별할 수 있는 쿼리 만들기</h2>


  <p>Azure Data Lake 계정의 상태 또는 사용에 대한 구체적인 주요 질문은 일반적으로 사용량 또는 메트릭 로그를 구문 분석하는 쿼리로 답변할 수 있습니다. Log Analytics의 로그를 쿼리하려면 계정 홈(OMS 작업 영역)에서 로그 검색을 클릭합니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/b5d85adc-9338-409d-ba81-e4a34f73c1a3.png"><img alt="image" border="0" height="114" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6e33847d-cbe8-4519-b4d2-f807eef1d590.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="이미지" width="624"></a></p>


  <p>로그 검색 블레이드에서 <a href="https://docs.loganalytics.io/index" target="_blank">Log Analytics 쿼리 언어</a>를 사용하여 쿼리 입력을 시작할 수 있습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/e0bdfd63-cbdc-4c6c-a06c-39920ab52e7b.png"><img alt="image" border="0" height="329" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/a9cdc897-249d-4ea7-a500-bcc96a43487b.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="이미지" width="624"></a></p>


  <p>Log Analytics에서 경고를 구성하는 데 사용할 수 있는 두 가지 주요 쿼리 유형이 있습니다.</p>


  <ul>
   <li>개별 이벤트를 반환하는 쿼리에서 이러한 단일 이벤트는 행당 단일 항목(예: 파일이 열릴 때마다)을 표시합니다.</li>
   <li>단일 이벤트(예: 지난 5분 동안 열린 파일 10개) 또는 메트릭 값(예: 작업에 할당된 총 AU)을 집계하여 특정 기간의 값 또는 메트릭을 임계값으로 집계하는 쿼리입니다.</li>
  </ul>


  <p>다음은 몇 가지 샘플 쿼리, 처음 두 개의 반환 이벤트, 세 번째 집계 값은 다음과 같습니다.</p>


  <ul>
   <li>이 쿼리는 지정된 ADLS(Azure Data Lake Store) 계정에서 새 Data Lake Store 폴더를 만들 때마다 새 항목을 반환합니다.</li>
  </ul>


  <pre>

  AzureDiagnostics

  | where Category == &quot;Requests&quot;

  | where ResourceProvider == &quot;MICROSOFT.DATALAKESTORE&quot;

  | where Resource == &quot;[Your ADLS Account Name]&quot;

  | where OperationName == &quot;mkdirs&quot;</pre>


  <ul>
   <li>이 쿼리는 Log Analytics 작업 영역에 구성된 Data Lake Analytics 계정에서 작업이 실패할 때마다 새 항목을 반환합니다.</li>
  </ul>


  <pre>

  AzureDiagnostics

  | where ResourceProvider == &quot;MICROSOFT.DATALAKEANALYTICS&quot;

  | where OperationName == &quot;JobEnded&quot;

  | where ResultType == &quot;CompletedFailure&quot;</pre>


  <ul>
   <li>이 쿼리는 사용자 계정 및 24시간 간격으로 제출된 작업의 합계를 포함하여 24시간 간격으로 사용자가 제출한 작업 목록을 반환합니다.</li>
  </ul>


  <pre>

  AzureDiagnostics

  | where ResourceProvider == &quot;MICROSOFT.DATALAKEANALYTICS&quot;

  | where OperationName == &quot;SubmitJob&quot;

  | summarize AggregatedValue = count(identity_s) by bin(TimeGenerated, 24h), identity_s</pre>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/eebb0deb-f05b-4926-80fa-f1feaf505f74.png"><img alt="image" border="0" height="194" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/08f9f8e8-d68d-4eff-ab75-f6d8c840191b.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="이미지" width="624"></a></p>


  <p>이러한 쿼리는 경고를 구성할 때 다음 단계에서 사용됩니다.</p>


  <h2>3단계: 이벤트가 감지되거나 임계값에 도달했을 때 알림을 받을 경고를 만듭니다.</h2>


  <p>이전 단계에 표시된 쿼리와 같은 쿼리를 사용하여 이벤트가 캡처되거나 메트릭 임계값에 도달하면 Log Analytics를 사용하여 전자 메일, 문자 메시지 또는 웹후크를 통해 사용자에게 알리는 경고를 만들 수 있습니다. 새 경고를 만들기 위한 이 블로그 게시물을 확인하세요. <a href="https://blogs.msdn.microsoft.com/azuredatalake/2018/04/10/simple-trick-to-stay-on-top-of-your-azure-data-lake-create-alerts-using-log-analytics/" target="_blank">Azure Data Lake를 기반으로 하는 간단한 트릭: Log Analytics를 사용하여 경고 만들기</a></p>


  <p>경고는 약간 지연되며 <a href="https://docs.microsoft.com/en-us/azure/log-analytics/log-analytics-alerts" target="_blank">Log Analytics의 이해 경고</a>에서 지연 및 Log Analytics SLA에 대한 자세한 내용을 읽을 수 있습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/db8cad49-7829-48ed-b4bb-e792ad9d3d7e.png"><img alt="image" border="0" height="453" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/dc91f799-d401-4b67-9538-815e6a522def.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="이미지" width="435"></a></p>


  <h2>의견을 알려 주세요.</h2>


  <p>Log Analytics에서 경고를 설정하면 사용률이 증가함에 따라 사용량을 이해하고 비용을 관리하는 데 도움이 될 수 있습니다. 경고를 설정하는 프로세스를 통해 특정 요구 사항에 맞게 충분히 유연하게 조정할 수 있습니다. 특정 메트릭 또는 사용 활동을 찾고 있나요? 의견을 보내거나 <a href="https://aka.ms/adlfeedback" target="_blank">기능 요청 UserVoice</a>에서 알려주세요. <a href="https://blogs.msdn.microsoft.com/azuredatalake/2018/04/10/simple-trick-to-stay-on-top-of-your-azure-data-lake-create-alerts-using-log-analytics/" target="_blank">Azure Data Lake</a> 계정을 최대한 활용하는 방법에 대한 업데이트와 팁을 정기적으로 공유하는 Azure Data Lake 블로그를 확인하세요.</p>
