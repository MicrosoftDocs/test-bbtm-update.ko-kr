### YamlMime:Yaml
ms.openlocfilehash: 7b181cd37dc9f514be26d39ca8c9fe149877b1fb
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139912722"
Slug: new-metric-in-azure-stream-analytics-tracks-latency-of-your-streaming-pipeline
Title: Azure Stream Analytics의 새 메트릭은 스트리밍 파이프라인의 대기 시간을 추적합니다.
Summary: Azure Stream Analytics는 실시간 데이터 처리를 위한 완전 관리형 서비스입니다. Stream Analytics 작업은 Azure Event Hubs 또는 IoT Hub와 같은 입력 원본에서 데이터를 읽습니다. 간단한 ETL 및 보관에서 복잡한 이벤트 패턴 검색 및 기계 학습 점수 매기기에 이르기까지 다양한 작업을 수행할 수 있습니다.
Content: >-
  <p><a href="https://azure.microsoft.com/en-us/services/stream-analytics/">Azure Stream Analytics</a> 는 실시간 데이터 처리를 위한 완전 관리형 서비스입니다. Stream Analytics 작업은 Azure Event Hubs 또는 IoT Hub와 같은 입력 원본에서 데이터를 읽습니다. 간단한 ETL 및 보관에서 복잡한 이벤트 패턴 검색 및 기계 학습 점수 매기기에 이르기까지 다양한 작업을 수행할 수 있습니다. 작업은 24/7로 실행되며 Azure Stream Analytics는 99.9%의 가용성 SLA를 제공하지만 다양한 외부 문제는 스트리밍 파이프라인에 영향을 미칠 수 있으며 비즈니스에 상당한 영향을 미칠 수 있습니다. 이러한 이유로 작업을 사전에 모니터링하고, 근본 원인을 신속하게 식별하고, 가능한 문제를 완화하는 것이 중요합니다. 이 블로그에서는 새로 도입된 출력 워터마크 지연을 활용하여 중요 업무용 스트리밍 작업을 모니터링하는 방법을 설명합니다.</p>


  <h2>스트리밍 파이프라인에 영향을 주는 문제</h2>


  <p>스트리밍 파이프라인에서 발생할 수 있는 몇 가지 문제는 무엇인가요? 다음은 몇 가지 예입니다.</p>


  <ul>
   <li>데이터가 클라우드에 도달하지 못하게 하는 네트워크 문제로 인해 데이터가 도착을 중지하거나 도착합니다.</li>
   <li>들어오는 데이터의 볼륨이 크게 증가하고 Stream Analytics 작업이 증가를 관리하기 위해 적절하게 확장되지 않습니다.</li>
   <li>논리적 오류가 발생하여 오류가 발생하고 작업이 진행되지 않습니다.</li>
   <li>SQL 또는 Event Hubs와 같은 출력 대상은 제대로 크기가 조정되지 않으며 쓰기 작업을 제한합니다.</li>
  </ul>


  <p>Stream Analytics는 초당 입력 이벤트, 초당 출력 이벤트, 초당 지연 이벤트 수, 런타임 오류 수 등과 같은 조건을 검색하는 데 사용할 수 있는 대규모 메트릭 집합을 제공합니다. 기존 메트릭 목록 및 사용 방법에 대한 지침은 모니터링 설명서에서 찾을 수 있습니다.</p>


  <p>일부 스트리밍 작업에는 들어오는 데이터와 생성되는 출력의 복잡하고 예측할 수 없는 패턴이 있을 수 있으므로 초당 입력 및 출력 이벤트와 같은 기존 메트릭을 사용하여 이러한 작업을 모니터링하기 어려울 수 있습니다. 예를 들어 작업은 하루 중 특정 시간에만 데이터를 수신하고 일부 드문 조건이 발생할 때만 출력을 생성할 수 있습니다.</p>


  <p>이러한 이유로<strong> 출력 워터마크 지연</strong>이라는 새 메트릭을 도입했습니다. 이 메트릭은 작업의 입력 및 출력 패턴에 구애받지 않는 작업 상태의 신뢰할 수 있는 신호를 제공하기 위한 것입니다.</p>


  <h2>그렇다면 출력 워터마크 지연은 어떻게 작동하나요?</h2>


  <p>최신 스트림 처리 시스템은 애플리케이션 시간이라고도 하는 이벤트 시간과 도착 시간을 구분합니다.</p>


  <p>이벤트 시간은 이벤트 생산자가 생성한 시간이며 일반적으로 이벤트 데이터에 열 중 하나로 포함됩니다. 도착 시간은 이벤트 수집 계층에서 이벤트를 받은 시간입니다(예: 이벤트가 Event Hubs에 도달하는 경우).</p>


  <p>대부분의 애플리케이션은 이벤트 전송 및 처리와 관련된 가능한 지연을 제외하기 때문에 이벤트 시간을 사용하는 것을 선호합니다. In-Stream timestamp by 절을 사용하여 이벤트 시간으로 사용할 값을 지정할 수 있습니다.</p>


  <p>워터마크는 이벤트 시간 타임라인의 특정 타임스탬프를 나타냅니다. 이 타임스탬프는 임시 계산에서 진행률의 포인터 또는 표시기로 사용됩니다. 예를 들어 Stream Analytics가 출력에서 특정 워터마크 값을 보고하는 경우 이 타임스탬프 이전의 모든 이벤트가 이미 계산되었음을 보장합니다. 워터마크는 작업에서 생성된 데이터에 대한 생동선을 나타내는 지표로 사용할 수 있습니다. 현재 시간과 워터마크 사이의 지연 시간이 작으면 작업이 들어오는 데이터를 따라가며 쿼리에서 정시에 정의된 결과를 생성합니다.</p>


  <p>아래에서는 통과 쿼리의 간단한 예제를 사용하여 이 개념에 대한 그림을 보여 줍니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/fc1d83f7-8096-4d66-9959-eb380ca22877.png"><img alt="A New Metric" border="0" height="767" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/26b37b3f-dc88-4bfe-b1b6-a8428e9502d4.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="새 메트릭" width="1625"></a></p>


  <p>Stream Analytics는 Azure Portal에서 작업의 메트릭 보기에 워터마크 지연으로 표시되는 이 메트릭을 편리하게 표시합니다. 이 값은 작업에 있는 모든 출력의 모든 파티션에서 최대 워터마크 지연 시간을 나타냅니다.</p>


  <p><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/bf66f8d3-532f-45f1-88dd-0392865b4d36.png" style="margin-right: auto; margin-left: auto; float: none; display: block;"></p>


  <p>워터마크 지연이 예상 값을 초과하는 경우를 감지하도록 자동화된 경고를 설정하는 것이 좋습니다. 작업의 이벤트 순서 설정에 지정된 지연 도착 허용 시간보다 크려면 임계값을 선택하는 것이 좋습니다.</p>


  <p>다음 스크린샷은 Azure Portal의 경고 구성을 보여 줍니다. PowerShell 또는 REST API를 사용하여 경고를 프로그래밍 방식으로 구성할 수도 있습니다.</p>


  <p><img border="0" height="480" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ccaee0b5-c6e4-4720-b3c8-466728dfdad4.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" width="406"></p>
