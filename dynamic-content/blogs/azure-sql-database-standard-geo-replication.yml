### YamlMime:Yaml
ms.openlocfilehash: a46aa0416885a0bde3e461484c9c4efea2e88b65
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139898120"
Slug: azure-sql-database-standard-geo-replication
Title: Azure SQL Database Standard Geo-Replication
Summary: 이 게시물에서는 비즈니스 연속성 시나리오에 대한 대화를 계속하고 Azure SQL Database 새로 릴리스된 표준 Geo-Replication 기능에 대해 설명합니다.  세부 정보를 살펴보기 전에 미리 보기에서 사용할 수 있는 비즈니스 연속성 기능의 전체 범위를 요약하고 사용해야 하는 항목과 이유를 설명하는 것이 유용합니다.
Content: >-
  <strong>[2015/06/02에 업데이트됨]</strong>


  보조 데이터베이스에 대한 장애 조치(failover)를 완전히 제어할 수 있도록 개선되었습니다.


  &nbsp;


  이 게시물에서는 비즈니스 연속성 시나리오에 대한 대화를 계속하고 Azure SQL Database 새로 릴리스된 표준 Geo-Replication 기능에 대해 설명합니다. 표준 Geo-Replication 사용하면 기본 데이터베이스에서 미리 정의된 <a href="https://azure.microsoft.com/en-us/regions/">Azure 지역의</a> 보조 데이터베이스로 커밋된 트랜잭션을 비동기적으로 복제하도록 데이터베이스를 구성할 수 있습니다. 세부 정보를 살펴보기 전에 미리 보기에서 사용할 수 있는 비즈니스 연속성 기능의 전체 범위를 요약하고 <a href="https://azure.microsoft.com/blog/2014/04/24/azure-sql-database-introduces-new-service-tiers/">2014년 4월에 발표한</a> 새로운 서비스 계층의 컨텍스트에서 설명하는 것이 유용합니다. <a href="https://msdn.microsoft.com/en-us/library/azure/dn741340.aspx">이 문서에서</a> 서비스 계층의 특정 특성에 대한 세부 정보를 찾을 수 있습니다.

  <h2>비즈니스 연속성 모델</h2>

  <a href="https://azure.microsoft.com/blog/2014/07/12/spotlight-on-sql-database-active-geo-replication/">활성 지역 복제</a>에 대한 이전 게시물에서 Tobias는 이미 비즈니스 연속성 문제를 정의했습니다. 빠른 새로 고침으로 이 게시물을 최대한 활용하기 위해 숙지해야 하는 몇 가지 개념이 있습니다.

  <ul>
   <li>DR(재해 복구): 애플리케이션의 정상적인 비즈니스 기능을 복원하는 프로세스</li>
   <li>특정 시점 복원: 사용자 실수 또는 프로그래밍 오류로 인한 데이터 손상으로부터 복구하기 위해 과거 시점(백업 보존 기간 내)으로 데이터베이스를 복원하는 기능</li>
   <li>ERT(예상 복구 시간): 복원/장애 조치(failover) 요청 후 데이터베이스가 완벽하게 작동할 것으로 예상되는 기간입니다.</li>
   <li>RPO(복구 지점 목표): 복구 후 애플리케이션이 손실될 수 있는 가장 최근의 데이터 변경(시간 간격)의 양입니다.</li>
  </ul>

  다음 표에서는 서비스 계층에서 비즈니스 연속성 기능의 차이점을 보여 줍니다.

  <table border="1" cellspacing="0" cellpadding="0">

  <tbody>

  <tr>

  <td valign="top" width="176">

  <p align="center"><b>BCDR 옵션</b></p>

  </td>

  <td valign="top" width="118">

  <p align="center"><b>기본 계층</b></p>

  </td>

  <td valign="top" width="114">

  <p align="center"><b>표준 계층</b></p>

  </td>

  <td valign="top" width="120">

  <p align="center"><b>프리미엄 계층</b></p>

  </td>

  </tr>

  <tr>

  <td valign="top" width="176">지정 시간 복원</td>

  <td valign="top" width="118">7일 이내의 모든 복원 지점</td>

  <td valign="top" width="114">14일 이내에 모든 복원 지점</td>

  <td valign="top" width="120">35일 이내의 모든 복원 지점</td>

  </tr>

  <tr>

  <td valign="top" width="176">지리적 복원</td>

  <td valign="top" width="118">ERT &lt; 12h RPO &lt; 1h</td>

  <td valign="top" width="114">ERT &lt; 12h RPO &lt; 1h</td>

  <td valign="top" width="120">ERT &lt; 12h RPO &lt; 1h</td>

  </tr>

  <tr>

  <td valign="top" width="176">표준 지역에서 복제</td>

  <td valign="top" width="118">포함되지 않음</td>

  <td valign="top" width="114">ERT &lt; 30s RPO &lt; 5s</td>

  <td valign="top" width="120">ERT &lt; 30s RPO &lt; 5s</td>

  </tr>

  <tr>

  <td valign="top" width="176">활성 지리적 복제</td>

  <td valign="top" width="118">포함되지 않음</td>

  <td valign="top" width="114">포함되지 않음</td>

  <td valign="top" width="120">ERT &lt; 30s RPO &lt; 5s</td>

  </tr>

  </tbody>

  </table>

  BCDR(비즈니스 연속성/재해 복구) 모델을 정의하는 핵심 요소는 애플리케이션의 성능 프로필이 요구 사항을 충족하는 비즈니스 연속성 솔루션을 구동할 수 있다는 것입니다. 애플리케이션이 낮은 업데이트 속도로 낮은 양의 데이터를 처리하고 기본 계층이 적절한 성능 수준을 제공하는 경우 지역 복원은 복구 요구 사항을 충족해야 합니다. 애플리케이션이 더 많은 양의 데이터를 처리하고 표준 계층의 높은 성능 수준과 보다 적극적인 RPO가 필요한 경우 표준 지역 복제가 올바른 재해 복구 솔루션이 될 수 있습니다. 활성 지역 복제는 매우 많은 양의 읽기 및 쓰기를 처리하는 애플리케이션을 위해 설계되었으며 읽기 작업의 부하 분산을 통해 오류에 대한 복원력과 읽기 확장성을 높이기 위해 보조 복제본을 사용하려고 합니다.이러한 방식으로 SQL Database BCDR 모델은 기본에서 Premium 확장할 때 점점 더 강력한 비즈니스 연속성 기능을 제공합니다.

  <h2>표준 지역 복제는 활성 지역 복제와 어떻게 다른가요?</h2>

  사용자 환경 및 활성 지역 복제와 어떻게 다른지 자세히 살펴보겠습니다.


  우선 표준 지역 복제는 활성 지역 복제와 동일한 기술을 기반으로 하지만 지역 복제를 사용하여 지역별 오류로부터 애플리케이션을 보호하는 애플리케이션에 최적화되어 있습니다. 다음 목록에서는 표준 지역 복제가 활성 지역 복제와 어떻게 다른지 보여 줍니다.

  <ol>
   <li>Microsoft에서 정의한 "DR 쌍을 이루는" Azure 지역에서는 보조 데이터베이스를 하나만 만들 수 있습니다. DR 쌍의 목록은 <a href="https://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/11/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx">여기에서</a> 찾을 수 있습니다.</li>
   <li>보조 데이터베이스는 master 데이터베이스에 표시되지만 장애 조치(failover)가 완료될 때까지 직접 연결할 수 없습니다(오프라인 보조).</li>
   <li>보조 데이터베이스는 읽을 수 없으므로 할인된 요금으로 청구됩니다(오프라인).</li>
  </ol>

  따라서 활성 지역 복제를 사용하여 사용하도록 설정할 수 있는 일부 시나리오는 표준 지역 복제에서 불가능합니다. 다음 표에서는 이 델타를 요약합니다.

  <table border="1" width="671" cellspacing="0" cellpadding="2">

  <tbody>

  <tr>

  <td valign="top" width="230"><strong>시나리오</strong></td>

  <td valign="top" width="212"><strong>표준 지역 복제</strong></td>

  <td valign="top" width="227"><strong>활성 지역 복제</strong></td>

  </tr>

  <tr>

  <td valign="top" width="230">지역 재해</td>

  <td valign="top" width="212">예</td>

  <td valign="top" width="227">예</td>

  </tr>

  <tr>

  <td valign="top" width="230">DR 드릴</td>

  <td valign="top" width="212">예</td>

  <td valign="top" width="227">예</td>

  </tr>

  <tr>

  <td valign="top" width="230">온라인 애플리케이션 업그레이드</td>

  <td valign="top" width="212">예</td>

  <td valign="top" width="227">예</td>

  </tr>

  <tr>

  <td valign="top" width="230">온라인 애플리케이션 재배치</td>

  <td valign="top" width="212">예</td>

  <td valign="top" width="227">예</td>

  </tr>

  <tr>

  <td valign="top" width="230">부하 분산 읽기</td>

  <td valign="top" width="212">예</td>

  <td valign="top" width="227">예</td>

  </tr>

  </tbody>

  </table>

  그림 1은 표준 지역 복제의 일반적인 구성을 보여 줍니다.


  <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/08/Standard-Geo-Replication-Figure-1.png"><img style="padding-top: 0px; padding-left: 0px; padding-right: 0px; border-width: 0px;" title="표준 Geo-Replication(그림 1)" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Standard-Geo-Replication-Figure-1_thumb.png" alt="Standard Geo-Replication (Figure 1)" width="1024" height="577" border="0" /></a>

  <p align="center">그림 1.데이터베이스에는 DR 쌍을 이루는 지역에 오프라인 보조 데이터베이스가 하나 있을 수 있습니다.</p>


  <h2>Premium 데이터베이스에서 활성 지역 복제 대신 표준 지역 복제를 사용하는 이유는 무엇인가요?</h2>

  Premium 데이터베이스는 표준 지역 복제 또는 활성 지역 복제를 사용하여 보호할 수 있습니다. 그렇다면 더 강력한 활성 지역 복제를 통해 표준 지역 복제를 사용하도록 선택하는 경우는 언제인가요? 표준 지역 복제는 재해 복구 SLA를 달성하기 위해서만 지역 복제를 사용하는 애플리케이션용으로 설계되었습니다. 애플리케이션에 대량 읽기 지향 워크로드가 있고 빠른 재해 복구 활성 지역 복제 외에도 읽기 규모 부하 분산의 이점을 활용할 수 있는 경우 더 적합합니다.

  <h2 align="left">데이터베이스 장애 조치(failover)</h2>

  표준 지역 복제는 데이터 계층 지역 가동 중단에 대한 가동 중지 시간이 짧은 DR 솔루션을 제공하도록 특별히 설계되었습니다.


  지역에 확장된 가동 중단이 있는 경우 Microsoft는 포털에서 경고를 받게 되며 SQL Database 서버의 상태가 Degraded로 설정된 것을 볼 수 있습니다. 이 시점에서 애플리케이션은 장애 조치(failover)를 시작하거나 데이터 센터가 복구할 때까지 대기할 수 있습니다. 애플리케이션이 고가용성을 위해 최적화해야 하고 5초의 RPO를 허용할 수 있는 경우 경고를 받거나 데이터베이스 연결 오류를 감지하는 즉시 장애 조치(failover)해야 합니다. 애플리케이션이 데이터 손실에 민감한 경우 SQL Database 서비스가 복구되기를 기다리도록 선택할 수 있습니다. 이 경우 데이터 손실이 발생하지 않습니다. 데이터베이스 장애 조치(failover)를 시작하는 경우 새 주 데이터베이스에 연결하기 위해 애플리케이션을 적절하게 다시 구성해야 합니다.


  장애 조치(failover)를 완료한 후에는 새 주 데이터베이스도 최대한 빨리 보호되도록 해야 합니다. 주 지역 복구에는 시간이 걸릴 수 있으므로 서버가 Degraded에서 다시 온라인 상태로 변경될 때까지 기다려야 합니다. 이렇게 하면 새 주 데이터베이스에서 지역 복제를 시작하여 보호할 수 있습니다. 새 보조 데이터베이스의 시드가 완료될 때까지 새 주 복제본은 보호되지 않은 상태로 유지됩니다. 시드가 완료되면 DR 구성이 그림 2에 표시된 것과 같을 수 있습니다.


  <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2015/06/02/Standard-Geo-Replication-Figure-2.png"><img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="표준 Geo-Replication(그림 2)" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Standard-Geo-Replication-Figure-2_thumb.png" alt="Standard Geo-Replication (Figure 2)" width="1147" height="514" border="0" /></a>


  &nbsp;


  &nbsp;

  <p align="center">그림 2.애플리케이션은 장애 조치(failover) 후 새 보조 데이터베이스를 만들 수 있습니다.</p>


  <h2 align="left">재해 복구 훈련</h2>

  데이터베이스 장애 조치(failover)는 데이터와 연결되고 중단 프로세스이므로 애플리케이션의 준비 상태를 보장하기 위해 장애 조치 워크플로를 주기적으로 테스트해야 합니다. 이 프로세스를 DR 드릴이라고 합니다. 좋은 엔지니어링 관행일 뿐만 아니라 규정 준수 인증의 일부로 대부분의 업계 보안 표준에도 필요합니다. 언제든지 보조 데이터베이스에서 지역 복제를 중지하여 전체 DR 워크플로를 테스트할 수 있습니다. 종료 시점에 주 복제본이 활성 상태이면 주 데이터베이스에서 커밋되었지만 아직 보조 데이터베이스에 복제되지 않은 트랜잭션은 손실됩니다. 종료 후 보조 데이터베이스는 완전히 액세스할 수 있게 되고 애플리케이션은 이를 새 주 복제본으로 사용할 수 있습니다. 데이터가 손실될 가능성이 있고 훈련 중에 주 데이터베이스가 보호되지 않기 때문에 프로덕션 데이터베이스에서 DR 훈련을 수행하지 않는 것이 좋습니다. 대신 동일한 지역에 데이터베이스의 테스트 복사본을 만들고, 복사본의 보조 복제본을 만든 다음, 복사본과 보조 복제본을 사용하여 테스트 컨텍스트에서 애플리케이션의 장애 조치 워크플로를 확인하는 것이 좋습니다.

  <h2>관리 도구</h2>

  표준 지역 복제를 관리하려면 PowerShell cmdlet 및 REST API를 포함하여 활성 지역 복제와 동일한 API를 사용하거나 Azure 관리 포털을 사용할 수 있습니다. 표준 지역 복제를 사용하도록 설정하는 가장 쉬운 방법은 그림 3과 같이 Azure 관리 포털의 지역에서 복제 탭을 사용하는 것입니다.


  <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/08/Geo-replication-capture-2.png"><img style="padding-top: 0px; padding-left: 0px; padding-right: 0px; border-width: 0px;" title="지역에서 복제 캡처(2)" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Geo-replication-capture-2_thumb.png" alt="Geo-replication capture (2)" width="887" height="768" border="0" /></a>

  <p align="center">그림 3. Azure 관리 포털을 사용하여 오프라인 지역 보조 데이터베이스의 상태를 만들고 모니터링합니다.</p>

  언제든지 지역에서 복제를 옵트아웃할 수 있습니다. 이 작업을 수행하는 방법에는 두 가지가 있습니다. 주 데이터베이스 또는 보조 데이터베이스에서 지역 복제 관계를 종료할 수 있습니다. 첫 번째 메서드는 실수로 시작된 작업을 취소하는 방법으로 가장 유용합니다. 보조 데이터베이스 시드가 완료되기 전에 발급된 경우 보조 데이터베이스에 대한 요금이 청구되지 않습니다. 이후에 발급된 경우 중고 보조 데이터베이스를 별도로 삭제하고 추가 데이터베이스의 시간당 비례 배분 비용을 지불해야 합니다. 두 번째 방법은 지역 복제를 자동으로 종료하고, 보조 데이터베이스를 삭제하고, 한 단계로 청구를 중지합니다.

  <h2>요약</h2>

  표준 지역 복제는 적당한 업데이트 속도로 애플리케이션을 대상으로 하는 강력한 재해 복구 솔루션을 제공하며 지역 가동 중단 시 가동 중지 시간을 크게 줄이는 데 관심이 있습니다. 당신이 어떻게 생각하는지 알려주세요! 우리는 피드백을 면밀히 경청하고 있습니다. 이 <a href="https://msdn.microsoft.com/en-us/library/azure/dn758204.aspx">문서에서</a> 표준 지역 복제에 대해 자세히 읽을 수 있습니다.
