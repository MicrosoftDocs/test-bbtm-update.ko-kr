### YamlMime:Yaml
ms.openlocfilehash: a5e07cc38b479b7e785351521b3e937176817771
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139900522"
Slug: spotlight-on-sql-database-active-geo-replication
Title: 'SQL Database Active Geo-Replication 스포트라이트 '
Summary: 이는 비즈니스 연속성 및 재해 복구에 초점을 맞춘 짧은 일련의 게시물 중 첫 번째 게시물입니다.이 게시물에서는 일반적으로 비즈니스 연속성 시나리오를 살펴본 다음...
Content: >-
  이는 비즈니스 연속성 및 재해 복구에 초점을 맞춘 짧은 일련의 게시물 중 첫 번째 게시물입니다.이 게시물에서는 일반적으로 비즈니스 연속성 시나리오를 살펴본 다음 현재 SQL Database Premium 서비스 계층에서 사용할 수 있는 활성 지역 복제 사용을 집중적으로 살펴봅니다.그리고 활성 지역 복제에 대한 자세한 내용은 사샤 노소프와 스콧 클라인이 작동 방식과 실제 비즈니스 시나리오를 해결하는 데 도움이되는 방법을 탐구하는이 활기있고 유익한 <a href="https://channel9.msdn.com/Shows/Data-Exposed/SQL-Database-Active-Geo-Replication">채널 9 비디오를</a> 살펴보십시오.

  <h1>비즈니스 연속성 – 무엇이란?</h1>

  비즈니스 연속성은 특히 컴퓨팅 인프라가 중단된 상황에서 비즈니스가 계속 운영할 수 있도록 하는 메커니즘, 정책 및 절차를 의미합니다.


  데이터베이스 관점에서 다음 네 가지 주요 잠재적 중단 시나리오가 있습니다.

  <ol>
   <li>디스크 드라이브 오류와 같은 데이터베이스 노드에 영향을 주는 <b>로컬 하드웨어 또는 소프트웨어</b> 오류입니다.</li>
   <li><b>데이터 손상 또는 삭제</b> - 일반적으로 애플리케이션 버그 또는 사용자 오류로 인해 발생합니다.이러한 오류는 본질적으로 애플리케이션에 따라 다르며, 일반적으로 인프라에서 자동으로 검색하거나 완화할 수 없습니다.</li>
   <li>자연 재해로 인해 데이터 <b>센터 가동이 중단</b>될 수 있습니다.이 시나리오에는 대체 데이터 센터로의 애플리케이션 장애 조치가 포함된 일부 수준의 지리적 중복성이 필요합니다.</li>
   <li><b>업그레이드 또는 유지 관리 오류</b> – 애플리케이션이나 데이터베이스에 대한 계획된 업그레이드 또는 유지 관리 중에 발생하는 예기치 않은 문제로 인해 이전 데이터베이스 상태로 신속하게 롤백해야 할 수 있습니다.</li>
  </ol>

  <h1>Azure SQL Database 비즈니스 연속성을 사용하도록 설정하려면 어떻게 할까요?</h1>

  Azure SQL Database 처음부터 각 데이터베이스의 3개 이상의 복제본이 항상 유지 관리되는 시스템을 사용하여 강력한 고가용성 데이터베이스 서비스로 구축되었으며, 응답하기 전에 적어도 두 개의 복제본에 대한 업데이트가 커밋되었습니다.이 HA 시스템은 첫 번째 시나리오, 로컬 하드웨어 및 소프트웨어 오류를 해결합니다.


  현재 미리 보기로 제공되는 새로운 서비스 계층인 Basic, Standard 및 Premium 위의 나머지 세 가지 시나리오를 해결하는 기능을 사용하여 비즈니스 연속성을 한 단계 더 높입니다.


  <b>데이터 손상 또는 삭제</b> <b> </b> 기본, 표준 및 Premium 데이터베이스는 데이터베이스를 이전 상태로 복원할 수 있는 셀프 서비스 지정 시간 복원 기능을 지원합니다.이렇게 하면 데이터가 손상되거나 삭제되는 애플리케이션 또는 사용자 오류로부터 보호됩니다.전체 백업은 매주 수행되고 차등 백업은 매일 수행되며 트랜잭션 로그는 5분마다 백업됩니다.기본 데이터베이스의 경우 백업은 7일 동안 유지되고 표준의 경우 14일 동안 보존되고 35일 동안 Premium 유지됩니다.최근에 삭제된 데이터베이스를 포함한 데이터베이스를 보존 기간 중 언제든지 복원할 수 있습니다.


  <b>데이터 센터 가동 중단</b>. <b> </b> 또한 기본, 표준 및 Premium 데이터베이스 서비스 계층은 다른 지역의 다른 데이터 센터로 데이터베이스를 복구해야 할 수 있는 장기간의 데이터 센터 중단으로부터 보호됩니다.세 가지 지역 중복 솔루션이 제공됩니다.

  <ul>
   <li><i>지역 복원</i>* 기본, 표준 및 Premium 경우 마지막 일별 백업의 지역 중복 복사본으로 복구할 수 있습니다.[*곧 미리 보기 예정]</li>
   <li><i>표준 지역 복제</i>* 표준 및 Premium 데이터베이스의 경우 로컬 HA 시스템을 확장하여 쌍을 이루는 지역에서 추가 보조 복제본을 만들고 유지 관리합니다.이러한 보조는 오프라인 상태이며 데이터 센터 중단이 발생하지 않는 한 액세스할 수 없습니다. 이 시점에서 애플리케이션이 장애 조치(failover)될 수 있도록 온라인 상태가 됩니다.[*곧 미리 보기 예정]</li>
   <li>Premium 데이터베이스에 사용할 수 있는 <i>활성 지역 복제</i>는 데이터 손실 위험이 가장 적고 복구 시간이 가장 빠른 가장 풍부한 솔루션을 제공합니다.온라인 상태이고 항상 읽을 수 있는 최대 4개의 지역에서 복제된 보조 데이터베이스를 사용하여 표준 지역 복제를 확장하며, 부하 분산에 사용하거나 전 세계 어디서나 복제된 데이터에 짧은 대기 시간 액세스를 제공할 수 있습니다.활성 지역 복제는 현재 미리 보기로 제공됩니다.</li>
  </ul>

  <b>업그레이드 또는 유지 관리 오류입니다. </b>  활성 지역 복제를 사용하여 데이터베이스 또는 애플리케이션에 업데이트 또는 유지 관리를 적용하기 직전에 고정할 수 있는 데이터베이스의 연속 복제 복사본을 만들 수 있습니다.프로세스 도중 또는 이후에 오류가 감지되면 이 복사본으로 빠르게 대체하기 쉽습니다.


  또한 서로 다른 서비스 계층에서 다양한 솔루션을 사용할 수 있지만 서비스 계층 간에 데이터베이스를 쉽게 업그레이드하거나 다운그레이드할 수 있다는 점을 기억해야 합니다.예를 들어 표준 데이터베이스를 Premium 업그레이드하도록 선택하고 중요한 업그레이드를 적용하기 전에 활성 지역 복제를 사용할 수 있습니다.업그레이드가 완료되면 데이터베이스를 다시 다운그레이드하여 비용을 줄일 수 있습니다.

  <h1>활성 지역 복제 세부 정보</h1>

  이제 활성 지역 복제가 비즈니스 연속성 환경에서 적합한 위치를 확인할 수 있으므로 작동 방식과 사용 방법을 자세히 살펴보겠습니다.

  <!--?xml:namespace prefix = "o" ns = "urn:schemas-microsoft-com:office:office" /-->


  <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/07/Geo1.png"><img class="alignnone size-medium wp-image-161541" alt="Geo1" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Geo1-622x369.png" width="622" height="369" /></a>


  그림 1. Premium 데이터베이스는 동일하거나 다른 지역에 최대 4개의 읽을 수 있는 보조 데이터베이스를 가질 수 있습니다.


  활성 지역 복제 관계는 Azure 관리 포털, PowerShell 또는 REST API를 통해 만들고 관리할 수 있습니다.포털에서 주 또는 보조 데이터베이스에서 복제 관계를 관리할 수 있습니다.주 복제본에서 각 보조 데이터베이스의 복제 상태를 모니터링할 수 있습니다.


  <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/07/Geo2.png"><img class="alignnone size-medium wp-image-161551" alt="Geo2" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Geo2-566x369.png" width="566" height="369" /></a>


  그림 2. Azure 관리 포털을 사용하여 최대 4개의 지역 보조 데이터베이스의 상태를 만들고 모니터링합니다.


  각각 기본 데이터베이스와 이름이 같지만 다른 서버에 있는 최대 4개의 읽을 수 있는 보조 데이터베이스를 만들 수 있습니다.처음 만들 때 보조는 주 복제본의 현재 상태로 시드됩니다.각 보조 데이터베이스가 'catch'되면 주 복제본의 연속 복사본으로 유지 관리됩니다. 모든 데이터베이스와 마찬가지로 보조 데이터베이스도 일반 HA 시스템을 사용하여 로컬로 보호됩니다.


  로컬 HA 복제 모델과 달리 주 복제본에서 보조 복제본으로의 지역 복제는 비동기적입니다.주 데이터베이스에 적용된 트랜잭션이 복사되어 보조 데이터베이스에 적용되지만 이 문제가 발생할 때까지 기다리는 동안 주 트랜잭션이 차단되지 않습니다.변경 내용이 버퍼링되어 복제 시스템이 임시 연결 문제에 복원력이 있거나 먼 위치로 복제할 때 대기 시간이 짧아집니다.


  보조 데이터베이스에 적용되는 트랜잭션이 주 복제본에 병목 현상이 발생하지 않도록 하려면 보조 데이터베이스에 주 복제본과 동일하거나 더 높은 성능 수준을 부여해야 합니다.


  보조는 읽기 가능하므로 독립적인 읽기 전용 워크로드를 지원할 수 있습니다.이 기능은 여러 데이터베이스에서 복잡한 쿼리 워크로드의 부하를 분산하거나 전 세계 다른 지역의 애플리케이션에 대한 대기 시간 데이터 액세스를 줄이는 데 사용할 수 있습니다.


  <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/07/Geo3.png"><img class="alignnone size-medium wp-image-161561" alt="Geo3" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Geo3-636x346.png" width="636" height="346" /></a>


  그림 3. 데이터 센터 중단이 주 데이터베이스에 영향을 미치는 경우 복제 관계를 종료하고 애플리케이션이 보조 데이터베이스로 장애 조치(failover)될 수 있습니다.


  복제 관계는 수동으로 관리되므로 언제든지 관계를 종료할 수 있습니다.주 데이터베이스에서 종료하는 경우 즉시 종료하고 보류 중인 트랜잭션을 잃을지 또는 보류 중인 모든 트랜잭션을 적용한 후 종료할지를 선택할 수 있습니다.


  주 데이터베이스에 영향을 주는 데이터 센터 중단의 경우 장애 조치(failover)는 여전히 수동 작업이므로 이 작업이 완료된 경우와 시기를 완전히 제어할 수 있습니다.주 데이터베이스를 사용할 수 없으면 보조 데이터베이스에서 관계를 종료합니다.보조 데이터베이스에서 종료하는 작업은 항상 즉시 수행되며 주 복제본을 사용할 수 없게 된 시점에 복제되지 않은 트랜잭션이 손실됩니다.손실될 수 있는 데이터의 양에 따라 주 복제본이 실패한 시점의 활성 상태와 연결에서 트랜잭션 버퍼링이 발생한 경우의 양에 따라 달라집니다. 복제 관계를 종료하는 결정은 데이터 손실 가능성에 대한 우려와 애플리케이션을 다시 백업하려는 욕구의 균형을 유지해야 합니다.


  보조 데이터베이스에 대한 관계를 종료하면 일반 읽기-쓰기 데이터베이스가 됩니다.이 시점에서 데이터베이스에 대한 모든 권한이 있는 애플리케이션을 장애 조치(failover)할 수 있습니다.각 보조 데이터베이스는 주 데이터베이스와 이름이 같지만 다른 서버에서 업데이트된 연결 문자열로 애플리케이션을 다시 구성해야 합니다.


  장애 조치(failover) 프로세스를 관리한 후에는 새 프로덕션 데이터베이스에서만 이전에 사용했던 동일한 지역 복제 관계 패턴을 주 데이터베이스로 다시 구성하려고 합니다.이렇게 하면 애플리케이션 및 비즈니스 연속성 정책에 필요한 지역 중복성 및 부하 분산이 보장됩니다.


  <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/07/Geo4.png"><img class="alignnone size-medium wp-image-161531" alt="Geo4" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Geo4-636x364.png" width="636" height="364" /></a>


  그림 4.보조에 대한 원래 관계를 종료한 후 새 주 복제본을 보호하고 부하 분산 요구 사항을 지원하기 위해 새 지역 복제 관계를 만들어야 합니다.


  활성 지역 복제는 가장 위험한 계층 및 구성 요소와 지리적으로 분산될 수 있는 구성 요소에 대해 서로 다른 가정을 하는 다양한 애플리케이션 아키텍처 패턴에 통합될 수 있습니다.이 항목에 대한 자세한 내용은 이 <a href="https://msdn.microsoft.com/en-us/library/azure/dn741328.aspx">문서를</a> 참조하세요.

  <h1>요약</h1>

  활성 지역 복제는 데이터 센터 중단으로부터 데이터베이스를 보호하는 강력한 지역 중복 기능을 제공할 뿐만 아니라 다른 비즈니스 연속성 시나리오를 가능하게 합니다.활성 지역 복제는 현재 Premium 데이터베이스를 사용하여 미리 보기로 제공됩니다.


  <a href="https://msdn.microsoft.com/en-us/library/azure/dn741339.aspx">활성 지역 복제</a>를 포함하여 SQL Database <a href="https://msdn.microsoft.com/en-us/library/azure/hh852669.aspx">비즈니스 연속성에</a> 대해 자세히 알아보거나 채널 9에서 <a href="https://channel9.msdn.com/Shows/Data-Exposed/SQL-Database-Active-Geo-Replication">사샤와 스콧</a>이 활성 지역 복제를 통해 비즈니스를 보호하는 데 어떻게 도움이 되는지 알아보는 데 몇 분 정도 걸립니다.


  활성 지역 복제 또는 다른 비즈니스 연속성 기능을 사용할 수 있게 하려면 <a href="https://azure.microsoft.com/en-us/services/preview/">새 서비스 계층의 미리 보기에 등록해야 합니다</a>. 피드백을 면밀히 듣고 있으므로 사용해 보고 의견을 알려주세요.
