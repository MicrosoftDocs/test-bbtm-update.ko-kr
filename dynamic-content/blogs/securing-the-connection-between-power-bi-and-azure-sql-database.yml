### YamlMime:Yaml
ms.openlocfilehash: daae9d80ab1bc5bc32f56167117a4620a72214be
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139900824"
Slug: securing-the-connection-between-power-bi-and-azure-sql-database
Title: Power BI Azure SQL Database 간의 연결 보호
Summary: Power BI 서비스에서 안전한 방식으로 Azure SQL Database 연결하려면 어떻게 해야 할까요? 데이터베이스에 대한 액세스를 제한하는 가장 쉬운 방법은 "Azure 서비스에 대한 액세스 허용" 옵션을 선택하는 것입니다.
Content: >-
  <p>Power BI 서비스에서 안전한 방식으로 <a href="https://docs.microsoft.com/en-us/power-bi/power-bi-overview">Azure SQL Database</a> 연결하려면 어떻게 해야 할까요?<a href="https://docs.microsoft.com/en-gb/azure/sql-database/"></a> 데이터베이스에 대한 액세스를 제한하는 가장 쉬운 방법은 Azure Services&rdquo;에 대한 액세스 허용 옵션을 선택하는 &ldquo;것입니다(그림 1). Azure Portal의 데이터베이스 서버 옵션에서 찾을 수 있습니다. 이렇게 하면 Power BI 데이터베이스에 액세스할 수 있습니다. 그러나 가상 머신과 같이 Azure 내에 배포된 모든 구성 요소에도 데이터베이스가 표시됩니다. 많은 조직에서 보안 및 규정 준수 요구 사항에 충분하지 않습니다.</p>


  <p align="center"><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/44b10a1d-56eb-4ebc-a894-140999c6b8c2.png"><img alt="Figure1" border="0" height="808" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2cd162d8-3ceb-4a30-a30a-4606f807fe9c.png" style="margin: 0px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;" title="그림 1" width="1558"></a><br>

  <em>그림 1: Azure Portal에서 데이터베이스 액세스 설정</em></p>


  <p align="left">&nbsp; 다음은 조직 보안 목표를 달성하기 위해 고려할 수 있는 제안 목록입니다.</p>


  <p>시작하려면 <a href="https://docs.microsoft.com/en-us/azure/virtual-network/virtual-networks-overview">VNet</a> 서비스 엔드포인트를 사용하여 액세스를 더욱 안전하게 보호합니다. 이 <a href="https://azure.microsoft.com/en-us/blog/vnet-service-endpoints-for-azure-sql-database-now-generally-available/">기능은</a> 2018년 초에 도입되었습니다. 쉽게 구성할 수 있습니다. Azure Portal에서 새 가상 네트워크를 만들거나 기존 VNet을 편집하고 VNet에서 SQL 서비스 엔드포인트를 사용하도록 설정합니다(그림 2).</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/46a46cb5-a121-48c5-83fd-81aad9f58b8e.png"><img alt="Figure2" border="0" height="888" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/89cc3d85-e571-4dd3-ae71-7bf268b19ddc.png" style="margin: 0px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;" title="그림 2" width="2084"></a></p>


  <p align="center"><em>그림 2: 가상 네트워크에서 서비스 엔드포인트 만들기</em></p>


  <p>완료되면 다음 작업은 데이터베이스 서버에 가상 네트워크 규칙을 설정하는 것입니다. 이렇게 하면 해당 데이터베이스 서버의 모든 SQL 데이터베이스에 대한 액세스를 가상 네트워크 내의 서브넷으로 제한할 수 있습니다. 너무 제한적일 수 있으므로 액세스 권한을 가질 수 있는 특정 IP 주소를 추가할 수도 있습니다. 아래 예제(그림3)는 newVnetRule1이라는 vnet 규칙이 서브넷 내의 개체에 대한 액세스를 제한하고 IP 주소 80.90.100.110을 사용하여 컴퓨터에 외부 액세스가 부여되는 시나리오를 보여 줍니다. 후자는 <a href="https://powerbi.microsoft.com/en-us/desktop/">Power BI 데스크톱</a>을 사용하여 데이터베이스에 연결하는 온-프레미스 컴퓨터의 액세스를 허용해야 하는 경우에 유용합니다. 회사 IP 주소 범위에 대한 외부 액세스를 제한하기만 하면 됩니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/47571480-da4f-4805-8565-001f96bbff60.png"><img alt="Figure3" border="0" height="853" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/d437529d-294f-4a9f-acc2-ad2e3b3eba7b.png" style="margin: 0px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;" title="그림 3" width="2107"></a></p>


  <p align="center"><em>그림 3: 데이터베이스 서버에 가상 네트워크 규칙 및 클라이언트 IP 추가</em></p>


  <p>또한 데이터베이스 서버에 대한 액세스를 제한하여 Power BI 서비스가 데이터베이스에 연결되지 않도록 방지했습니다. 솔루션은 서브넷 내에 있는 가상 머신 <a href="https://powerbi.microsoft.com/en-us/gateway/">에 온-프레미스 데이터 게이트웨이</a> 를 설치하는 것입니다. 게이트웨이에 대한 서버 크기 조정에 대한 권장 사항은 <a href="https://docs.microsoft.com/en-us/power-bi/service-gateway-onprem">설명서를</a> 참조하세요. 이에 대한 두 가지 단계가 있습니다. 먼저 서브넷 내의 VM에 게이트웨이를 설치하고 구성합니다. 그런 다음 Power BI 포털을 사용하여 연결하려는 데이터베이스와 적용하려는 보안을 인식할 수 있도록 게이트웨이를 구성합니다. 이 <a href="https://docs.microsoft.com/en-us/power-bi/service-gateway-onprem">프로세스</a>의 좋은 쓰기가 있습니다. 게이트웨이는 TCP 또는 HTTPS를 통해 통신할 수 있습니다. 전자는 더 효율적이지만 나가는 트래픽에 대해 포트 443(기본값), 5671, 5672, 9350~9350이 필요한 반면 HTTPS는 포트 80만 필요합니다. TCP를 사용하려면 네트워킹 아래의 게이트웨이 구성 화면에서 Azure Service Bus 연결 모드가 올바르게 선택되었는지 확인합니다(그림 4). 참고: 게이트웨이는 인바운드 포트를 열 필요가 없습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2b22e191-3a47-4a52-988d-5675d5a8f8e6.png"><img alt="Figure4" border="0" height="516" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3da67df8-9599-4246-90bc-9e636b1bbeca.png" style="margin: 0px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;" title="그림 4" width="953"></a></p>


  <p align="center"><em>그림 4: TCP를 통해 연결하도록 온-프레미스 게이트웨이 설정</em></p>


  <p>현재 사용해야 하는 게이트웨이 커넥터의 경우 SQL Server 커넥터입니다. 기본 인증과 Windows 인증을 모두 지원합니다. 즉, 게이트웨이는 단일 사용자 이름과 암호를 사용하여 백 엔드 <u>SQL Server</u> 데이터베이스에 연결할 수 있을 뿐만 아니라 Windows 인증을 사용하여 데이터베이스에 직접 쿼리를 실행할 때 현재 사용자&rsquo; 자격 증명을 전달할 수도 있습니다. 이 솔루션은 Power BI 사용자가&rsquo; 데이터에 액세스하도록 SQL Server DBA에 의해 데이터 하위 집합으로 제한될 수 있는 솔루션을 제공합니다. 동일한 커넥터를 사용하여 Azure SQL Database 액세스합니다. 두 데이터베이스에 공통적인 유일한 인증 방법은 데이터베이스 인증입니다. 따라서 게이트웨이를 구성할 때 기본 인증으로 제한되므로 게이트웨이를 통해 사용자 자격 증명을 데이터베이스에 전달할 수 없습니다. 시간이 지남에 따라 변경 될 수 있지만이 문서를 작성 하는 시간에이 현재 제한입니다.</p>


  <p>게이트웨이를 통해 데이터베이스에 액세스하는 데 단일 실패 지점이 발생하지 않도록 하려면 클러스터에 여러 게이트웨이를 설치하여 복원력을 제공할 수도 있습니다. 두 번째 가상 머신을 만들고 두 번째 게이트웨이를 설치하기만 하면 됩니다. 설치하는 동안 <a href="https://docs.microsoft.com/en-us/power-bi/service-gateway-high-availability-clusters">게이트웨이를 클러스터</a>하는 옵션을 선택할 수 있습니다.</p>


  <p>마지막 단계는 돌아가서 가상 네트워크를 다음과 같이 변경하는 것입니다. 서브넷에 적용할 수 있는 네트워크 보안 그룹을 만듭니다. 해당 보안 그룹은 허용하려는 들어오는 포트의 리소스에 대한 액세스를 제한합니다. 네트워크에 SQL 데이터베이스만 있는 위의 시나리오에서는 위에 나열된 IP 포트로만 포트를 제한합니다. 가상 네트워크가 다른 리소스에서 공유되는 경우 추가 포트를 열어야 할 수 있습니다. 마지막으로 알아야 할 점은 다른 Azure 서비스에서 데이터베이스에 대한 액세스를 의도적으로 차단했다는 것입니다. 결과적으로 <a href="https://docs.microsoft.com/en-us/azure/sql-database/sql-database-vnet-service-endpoint-rule-overview#impact-of-removing-allow-all-azure-services">특정 Azure SQL Database 기능</a>의 사용을 제한할 것입니다.&nbsp;</p>


  <p>이제 모든 것이 설정되고 작동했으므로 게이트웨이의 성능을 모니터링하는 데 관심이 있을 수 있습니다. <a href="https://insightsquest.com/2016/08/08/monitor-on-premises-data-gateways/">Brett Powell의 백서</a>에는 사용 가능한 게이트웨이 성능 카운터와 추가 분석을 위해 로그 파일의 출력을 Power BI 보고서에 로드하는 방법에 대해 설명합니다.</p>
