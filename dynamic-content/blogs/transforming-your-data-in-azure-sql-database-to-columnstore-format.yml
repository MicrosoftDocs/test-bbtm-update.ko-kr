### YamlMime:Yaml
ms.openlocfilehash: 5e8e2f4d5b9589b56bc7e66b7692b6f75d916f29
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139906395"
Slug: transforming-your-data-in-azure-sql-database-to-columnstore-format
Title: Azure SQL Database 데이터를 columnstore 형식으로 변환
Summary: 클러스터형 COLUMNSTORE ONLINE INDEX 빌드라는 논리 서버와 Managed Instance 모두에서 Azure SQL Database 새로운 기능의 공개 미리 보기를 공개하게 되어 기쁩니다. 이 작업을 사용하면 행 저장소 형식으로 저장된 데이터를 columnstore 형식으로 마이그레이션하고 워크로드에서 가동 중지 시간을 최소화하면서 columnstore 데이터 구조를 유지할 수 있습니다.
Content: >-
  <p>클러스터<strong>형 COLUMNSTORE ONLINE INDEX</strong> 빌드라는 <a href="https://docs.microsoft.com/en-us/azure/sql-database/sql-database-logical-servers" target="_blank">논리 서버</a>와 <a href="https://docs.microsoft.com/en-us/azure/sql-database/sql-database-managed-instance-index" target="_blank">Managed Instance</a> 모두에서 Azure SQL Database 새로운 기능의 공개 미리 보기를 공개하게 되어 기쁩니다. 이 작업을 사용하면 행 저장소 형식으로 저장된 데이터를 columnstore 형식으로 마이그레이션하고 워크로드에서 가동 중지 시간을 최소화하면서 columnstore 데이터 구조를 유지할 수 있습니다.</p>


  <h2>columnstore 형식을 지정하는 이유는 무엇인가요?</h2>


  <p>Azure SQL Database 사용하면 데이터베이스의 데이터 구조 및 인덱스를 미세 조정하고 최적화하여 워크로드 및 데이터 크기에 따라 쿼리의 최상의 성능을 얻을 수 있습니다. Azure SQL Database 관계형 데이터는 다음 두 가지 형식으로 구성할 수 있습니다.</p>


  <ul>
   <li><strong>행 저장소 형식</strong>은 쿼리가 테이블의 개별 행 또는 행 집합에 액세스하는 OLTP 워크로드에 적합한 옵션입니다. 관계형 데이터베이스의 대부분의 데이터에 사용되는 범용 테이블 형식입니다.</li>
   <li>분석 쿼리 및 높은 데이터 압축(최대 100배)에 최적화된 <strong>Columnstore 형식</strong>입니다. 이 형식은 이 형식을 사용하여 효율적으로 압축할 수 있는 큰 데이터 집합과 테이블 열의 하위 집합을 사용하는 복잡한 계산이 있는 분석 쿼리에 적합합니다.</li>
  </ul>


  <p>경우에 따라 행 저장소 형식으로 구성된 기존 테이블이 테이블에서 실행되는 쿼리에 적합하지 않다는 것을 알 수 있습니다. 또한 경우에 따라 columnstore 테이블에 높은 압축을 적용하여 테이블 크기를 최소화할 수 있습니다. 이 경우 데이터를 열 저장소 형식으로 변환하여 데이터를 압축하고 분석 쿼리의 성능을 향상시켜야 합니다.</p>


  <h2>데이터를 columnstore 형식으로 변환</h2>


  <p>테이블에 CLUSTERED COLUMNSTORE INDEX를 만들어 기존 행 저장소 테이블을 열 저장소 형식으로 변환할 수 있습니다. 클러스터형 columnstore 인덱스는 테이블에서 원래 데이터 세트를 가져와 열별로 구성하고 효율적인 고압축 알고리즘을 적용하여 데이터 크기를 최소화합니다.</p>


  <p>테이블에 CLUSTERED COLUMNSTORE INDEX를 만들고 데이터를 columnstore 형식으로 변환하는 Transact-SQL 문은 다음 예제에 나와 있습니다.</p>


  <div>

  <p><code>CREATE CLUSTERED COLUMNSTORE INDEX cci ON Sales.Orders</code></p>

  </div>


  <p>테이블에 생성된 클러스터형 columnstore 인덱스는 테이블의 데이터를 다시 구성하고 압축이 높은 열로 행을 변환합니다.</p>


  <p>이 작업의 제한 사항은 행 저장소에서 columnstore 형식으로 변환할 테이블의 행을 업데이트하려는 모든 들어오는 트랜잭션이 변환이 완료될 때까지 차단되어야 한다는 것입니다. 이를 다음 그림에 표시된 <strong>오프라인 인덱스 빌드</strong> 라고 합니다.</p>


  <p><img alt="Azure SQL clustered columnstore index offline build" border="0" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/sql-cci-offline-build.png" style="border: 0px currentcolor; border-image: none; width: 800px; height: 336px; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="Azure SQL 클러스터형 columnstore 인덱스 오프라인 빌드"></p>


  <p>테이블이 행 저장소에서 열 저장소 형식으로 변환되는 동안 들어오는 모든 트랜잭션이 차단됩니다. 이 프로세스는 테이블이 변환되는 동안 워크로드에 약간의 가동 중지 시간이 발생할 수 있으므로 데이터를 columnstore 형식으로 변환할 시간을 선택해야 합니다.</p>


  <h2>columnstore 형식으로 온라인 전환</h2>


  <p>Azure SQL Database 최신 릴리스를 사용하면 <strong>온라인 버전의 columnstore 인덱스 빌드</strong>(현재 공개 미리 보기)를 사용하여 들어오는 트랜잭션을 차단하지 않고 행 저장소 테이블을 columnstore 형식으로 변환할 수 있습니다.</p>


  <p>다음 T-SQL 구문을 사용하여 행 저장소 테이블을 columnstore 형식으로 변환할 수 있습니다.</p>


  <div>

  <p><code>CREATE COLUMNSTORE INDEX cci ON Sales.Orders WITH ( ONLINE = ON )</code></p>

  </div>


  <p><strong>WITH(ONLINE = ON)</strong> 옵션을 사용하여 클러스터형 인덱스 작업을 만들면 들어오는 모든 트랜잭션이 수행되고 원래 데이터가 변환되는 동안 대상 columnstore 데이터 구조에 데이터 변경 내용이 지속적으로 포함됩니다.</p>


  <p><img alt="Online clustered columnstore index build in Azure SQL" border="0" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/online-build.png" style="border: 0px currentcolor; border-image: none; width: 800px; height: 349px; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="Azure SQL 온라인 클러스터형 columnstore 인덱스 빌드"></p>


  <p>온라인 클러스터형 columnstore 인덱스 빌드를 사용하면 데이터를 변환하는 동안 실행되는 쿼리에 대한 주요 차단 작업 없이 가동 중지 시간을 최소화하면서 데이터를 최적화하고 압축할 수 있습니다.</p>


  <p>행 저장소에서 columnstore 형식으로의 온라인 변환 외에도 클러스터형 columnstore 인덱스의 다음 온라인 기능은 Azure SQL Database 사용할 수 있습니다.</p>


  <ul>
   <li>기존 클러스터형 columnstore 인덱스는 온라인 모드에서 다시 작성할 수 있습니다. 즉, 이 인덱스 유지 관리 작업을 수행하는 동안 테이블을 사용하는 워크로드를 차단할 필요가 없습니다&rsquo;.</li>
   <li>columnstore 형식으로 구성된 테이블의 비클러스터형 인덱스는 워크로드를 차단하지 않고 온라인 옵션을 사용하여 다시 작성할 수 있습니다.</li>
  </ul>


  <p>ONLINE CLUSTERED COLUMNSTORE 인덱스 빌드 작업은 들어오는 워크로드에서 가동 중지 시간을 최소화하면서 클러스터형 columnstore 인덱스에 대한 데이터 변환 및 유지 관리 작업을 수행하는 데 도움이 됩니다. 이 기능은 논리 서버, 탄력적 풀 및 Managed Instance를 비롯한 모든 Azure SQL Database 버전에서 현재 미리 보기로 제공됩니다.</p>


  <p>자세한 내용은 <a href="https://docs.microsoft.com/en-us/sql/relational-databases/indexes/columnstore-indexes-overview" target="_blank">columnstore 인덱스 설명서 페이지를</a> 참조하세요.</p>
