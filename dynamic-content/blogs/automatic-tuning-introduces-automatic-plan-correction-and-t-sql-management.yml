### YamlMime:Yaml
ms.openlocfilehash: 43939c5449be90db79814f3435b500013aab72d1
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139901405"
Slug: automatic-tuning-introduces-automatic-plan-correction-and-t-sql-management
Title: 자동 조정은 자동 계획 수정 및 T-SQL 관리를 도입합니다.
Summary: Azure SQL Database 인공 지능을 기반으로 하는 업계 최초의 진정한 자동 튜닝 데이터베이스인 자동 튜닝은 이제 다음과 같은 새로운 기능을 전역적으로 도입하면서 더 많은 유연성과 기능을 제공하고 있습니다.
Content: "<p><a href=\"https://docs.microsoft.com/en-us/azure/sql-database/sql-database-automatic-tuning\">자동 튜닝</a>을 Azure SQL Database 업계&rsquo;는 먼저 인공 지능을 기반으로 데이터베이스를 진정으로 자동 조정하고 있으며, 이제 다음과 같은 새로운 기능을 전역적으로 도입하여 더 많은 유연성과 기능을 제공하고 있습니다.</p>\n\n<ul>\n <li>자동 플랜 수정</li>\n <li>T-SQL 통한 관리</li>\n <li>자동 튜닝 플래그로 만든 인덱스</li>\n</ul>\n\n<p>자동 조정은 기존 워크로드의 성능에 영향을 주지 않고 수십만 개의 데이터베이스를 원활하게 튜닝할 수 있습니다. 이 솔루션은 2016년부터 전 세계적으로 사용할 수 있으며 Azure에서 리소스 소비를 줄이면서 성능이 향상되고 안정적인 워크로드를 가능하게 하는 것으로 입증되었습니다.</p>\n\n<p><a href=\"https://azure.microsoft.com/en-us/blog/artificial-intelligence-tunes-azure-sql-databases/\">SQL Database 고객이 자동 튜닝을 사용하여 달성한 유용한 이점에 대해 알아보려면 여기를 클릭하세요.</a></p>\n\n<h2>자동 플랜 수정</h2>\n\n<p>자동 계획 수정, SQL Server 도입 된 기능 2017, 지금 튜닝 옵션으로 Azure SQL Database 그것의 방법을 만들고 있다 마지막 좋은 계획 강제. 이 결정은 Azure에서 실행되는 워크로드에 대한 전반적인 긍정적인 성능 향상을 보장하기 위해 수십만 개의 SQL Database에 대한 엄격한 테스트 후에 이루어졌습니다. 이 기능은 수백, 수천 개의 데이터베이스와 많은 워크로드를 관리하는 경우에 빛을 발합니다.</p>\n\n<p>자동 조정 기능은 SQL Database 워크로드를 지속적으로 모니터링하고 자동 계획 수정 옵션 Force Last Good Plan을 사용하면 더 나은 성능으로 마지막 계획을 적용하여 회귀된 쿼리 실행 계획을 자동으로 조정합니다. 시스템이 워크로드 성능을 자동으로 모니터링하므로 워크로드를 변경하는 경우 시스템이 동적으로 조정하여 성능이 가장 뛰어난 쿼리 실행 계획을 강제로 적용합니다.</p>\n\n<p>시스템은 각 튜닝 작업으로 인해 성능이 향상되는지 확인하기 위해 수행된 모든 튜닝 작업의 유효성을 자동으로 검사합니다. 튜닝 작업으로 인해 성능이 저하되는 경우 시스템은 자동으로 학습하고 이러한 튜닝 권장 사항을 즉시 되돌려 줍니다. 자동 튜닝으로 수행되는 튜닝 작업은 Azure Portal 및 T-SQL 쿼리를 통해 최근 튜닝 권장 사항 목록에서 사용자가 볼 수 있습니다.</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/azure/sql-database/sql-database-automatic-tuning-enable\">자동 튜닝을 구성하는 방법에 대한 자세한 내용을 보려면 여기를 클릭하십시오.</a></p>\n\n<h2>T-SQL 통해 자동 조정 관리</h2>\n\n<p>T-SQL 및 스크립팅 프로시저를 사용하여 데이터베이스를 관리하는 대규모 전문가 커뮤니티의 요구를 인식한 자동 튜닝 팀은 T-SQL 사용하여 현재 및 기록 튜닝 권장 사항을 활성화, 비활성화, 구성 및 볼 수 있는 새로운 기능을 개발했습니다. 이렇게 하면 사용자 지정 모니터링, 경고 및 보고 기능을 포함하여 자동 튜닝을 관리하는 사용자 지정 솔루션을 개발할 수 있습니다.</p>\n\n<p>향후 섹션에서 이 블로그 게시물은 제공되는 T-SQL 기능 중 일부를 사용하는 방법에 대한 몇 가지 예를 간략하게 설명합니다.</p>\n\n<h2>T-SQL 통해 현재 자동 조정 구성 보기</h2>\n\n<p>개별 서버에 구성된 자동 조정 옵션의 현재 상태를 보려면 SSMS 같은 도구를 사용하여 <a href=\"https://docs.microsoft.com/en-us/sql/ssms/download-sql-server-management-studio-ssms\">SQL Database</a> 연결하고 다음 쿼리를 실행하여 시스템 보기 sys.database_automatic_tuning_options 읽습니다.</p>\n\n<pre class=\"prettyprint\">\nSELECT * FROM sys.database_automatic_tuning_options </pre>\n\n<p>결과 출력은 다음 예제와 같이 자동 튜닝 옵션 시스템 보기의 값입니다.</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1a603d36-9438-4096-93cf-4b74b1b3b931.png\"><img alt=\"Article%2001\" border=\"0\" height=\"101\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2b6200bc-92cf-463d-b1be-6a58d381d80d.png\" style=\"border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;\" title=\"문서%2001\" width=\"733\"></a></p>\n\n<p>열 이름에는 다음 세 가지 자동 튜닝 옵션을 사용할 수 있음을 명확하게 확인할 수 있습니다.</p>\n\n<ul>\n <li>FORCE_LAST_GOOD_PLAN</li>\n <li>CREATE_INDEX 및</li>\n <li>DROP_INDEX.</li>\n</ul>\n\n<p>열 desired_state 개별 튜닝 옵션에 대한 설정을 나타내며 해당 설명은 열 desired_state_desc 사용할 수 있습니다. desired_state 가능한 값은 사용자 지정 설정의 경우 0 = OFF 및 1 = ON이고, 부모 서버 또는 Azure 플랫폼 기본값에서 설정을 상속하는 경우 2 = DEFAULT입니다.</p>\n\n<p>열 desired_state_desc 값은 개별 자동 튜닝 옵션이 ON, OFF 또는 DEFAULT로 상속되는지 여부를 나타냅니다(desired_state 열의 숫자 값에 해당). actual_state 열은 자동 튜닝 옵션이 실제로 데이터베이스에서 작동하는지 여부를 나타내며 값 1을 나타내고 값 0은 작동하지 않음을 나타냅니다.</p>\n\n<p>자동 조정 옵션 중 하나가 ON으로 설정되어 있을 수 있지만 워크로드 성능을 보호하는 데 필요하다고 판단되는 경우 시스템에서 자동 튜닝을 일시적으로 사용하지 않도록 설정할 수 있습니다. 또한 데이터베이스에서 쿼리 저장소를 사용하도록 설정하지 않았거나 읽기 전용 상태인 경우에도 자동 튜닝이 일시적으로 비활성화된 상태로 렌더링될 수 있습니다. 이 경우 현재 상태 보기는 시스템에서&rdquo; 사용 안 함을 나타내&ldquo;고 열 actual_state 값은 0이 됩니다.</p>\n\n<p>sys.database_automatic_tuning_options 시스템 보기의 마지막 부분은 열 이유를 나타내며, 각 개별 자동 튜닝 옵션이 Azure의 기본값, 부모 서버의 기본값 또는 사용자 지정 구성을 통해 구성된 경우 reason_desc. Azure 플랫폼 기본값을 상속하는 경우 열 이유는 값이 2이고 열 reason_desc 값이 AUTO_CONFIGURED. 부모 서버 기본값을 상속하는 경우 열 이유는 값이 1이고 열 reason_desc 값이 INHERITED_FROM_SERVER. 개별 자동 튜닝 옵션에 대한 사용자 지정 설정의 경우 열 이유와 reason_desc 모두 NULL 값을 갖습니다.</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/sql/relational-databases/system-catalog-views/sys-database-automatic-tuning-options-transact-sql\">시스템 보기 sys.database_automatic_tuning_options 자세한 구조를 보려면 여기를 클릭하십시오.</a></p>\n\n<h2>T-SQL 통해 자동 조정 사용</h2>\n\n<p>Azure 구성 기본값을 상속하는 단일 데이터베이스에서 자동 튜닝을 사용하도록 설정하려면 다음과 같은 쿼리를 실행합니다.</p>\n\n<pre class=\"prettyprint\">\nALTER DATABASE current SET AUTOMATIC_TUNING = AUTO /* possible values AUTO, INHERIT and CUSTOM */</pre>\n\n<p>자동 튜닝을 사용하도록 설정할 수 있는 값은 AUTO, INHERIT 및 CUSTOM입니다. 자동 튜닝 값을 AUTO로 설정하면 자동 튜닝에 대해 Azure 구성 기본값을 적용합니다. INHERIT 값을 사용하면 부모 서버에서 기본 구성이 상속됩니다. 부모 서버에서 자동 튜닝 구성을 사용자 지정하고 이러한 서버의 모든 데이터베이스가 이러한 사용자 지정 설정을 상속하려는 경우 특히 유용합니다.</p>\n\n<p>상속이 작동하려면 세 가지 개별 튜닝 옵션이 FORCE_LAST_GOOD_PLAN, CREATE_INDEX 및 DROP_INDEX DEFAULT로 설정해야 합니다. 이러한 개별 튜닝 옵션 중 하나 또는 여러 가지가 사용자 지정으로 구성될 수 있고 DEFAULT와 사용자 지정 강제 ON 또는 OFF 설정이 조합될 수 있기 때문입니다.</p>\n\n<p>CUSTOM 값을 사용하여 사용 가능한 각 자동 튜닝 옵션을 수동으로 사용자 지정해야 합니다.</p>\n\n<h2>T-SQL 통해 자동 조정 옵션 구성 사용자 지정</h2>\n\n<p>Azure 플랫폼 및 부모 서버 기본값에 관계없이 사용자 지정으로 구성할 수 있는 자동 튜닝의 사용 가능한 옵션은 FORCE_LAST_GOOD_PLAN, CREATE_INDEX 및 DROP_INDEXES. 이러한 옵션은 다음과 같은 쿼리를 실행하여 사용자 지정으로 구성할 수 있습니다.</p>\n\n<pre class=\"prettyprint\">\nALTER DATABASE current \nSET AUTOMATIC_TUNING (\nFORCE_LAST_GOOD_PLAN = [ON | OFF | DEFAULT], \nCREATE_INDEX = [ON | OFF | DEFAULT],\nDROP_INDEX = [ON | OFF | DEFAULT])\n)\n</pre>\n\n<p>사용 가능한 세 가지 옵션 중 하나를 설정할 수 있는 값은 ON, OFF 및 DEFAULT입니다. 개별 튜닝 옵션을 ON으로 설정하면 명시적으로 설정되도록 사용자 지정이 구성되고 OFF로 설정하면 명시적으로 해제되도록 사용자 지정이 구성됩니다. 개별 튜닝 옵션을 DEFAULT로 설정하면 위에서 설명한 대로 AUTO 또는 INHERIT로 설정된 AUTOMATIC_TUNING 설정에 따라 이러한 옵션이 Azure 플랫폼 또는 부모 서버에서 기본값을 상속합니다.</p>\n\n<p>Azure 기본값을 사용하는 경우 자동 튜닝 옵션의 현재 Azure 기본값은 FORCE_LAST_GOOD_PLAN 설정되고 CREATE_INDEX 켜야 하며 DROP_INDEX 옵션은 기본적으로 꺼져 있습니다. ON이 사용되지 않거나 중복된 사용자가 만든 인덱스를 삭제할 때 이 결정을 DROP_INDEX 옵션으로 결정했습니다. 이를 통해 사용자 정의 인덱스를 보호하고 사용자가 삭제 인덱스를 관리하기 위해 자동 조정을 수행할지 명시적으로 선택할 수 있도록 하는 것이 목표였습니다.</p>\n\n<p>DROP_INDEX 튜닝 옵션을 사용하려면 다음 쿼리를 실행하여 DROP_INDEX 옵션을 ON으로 설정하세요.</p>\n\n<pre class=\"prettyprint\">\nALTER DATABASE current SET AUTOMATIC_TUNING (DROP_INDEX = ON) /* Possible values DEFAULT, ON, OFF */</pre>\n\n<p>결과 출력은 desired_state 열에서 DROP_INDEX 옵션이 ON으로 설정되었음을 desired_state_desc 나타냅니다.</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/23c3a43a-3853-407e-a688-d00a8ab3b6d0.png\"><img alt=\"Article%2002\" border=\"0\" height=\"101\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2f9346d7-f2b6-428d-9175-80cadb50ca1b.png\" style=\"border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;\" title=\"문서%2002\" width=\"733\"></a></p>\n\n<p>T-SQL 통해 사용할 수 있는 자동 튜닝 구성 설정은 Azure Portal을 통해 사용할 수 있는 구성 옵션과 동일합니다. <a href=\"https://docs.microsoft.com/en-us/azure/sql-database/sql-database-automatic-tuning-enable\">자동 튜닝 사용을</a> 참조하세요.</p>\n\n<h2>T-SQL 통해 자동 튜닝을 사용자 지정에서 상속 기본값으로 되돌리기</h2>\n\n<p>기본 상속으로 되돌리려면 세 가지 자동 조정 옵션(FORCE_LAST_GOOD_PLAN, CREATE_INDEX 및 DROP_INDEX)을 수동으로 구성하기 위해 사용자 지정 설정으로 AUTOMATIC_TUNING 설정한 후에는 다음을 수행해야 합니다.</p>\n\n<ul>\n <li>AUTOMATIC_TUNING AUTO 또는 INHERIT로 다시 설정하고</li>\n <li>각 튜닝 옵션 FORCE_LAST_GOOD_PLAN 상속을 DEFAULT로 다시 설정해야 하는 CREATE_INDEX 및 DROP_INDEX.</li>\n</ul>\n\n<p>자동 튜닝은 항상 옵션을 사용자 지정하는 동안 사용자가 명시적으로 취한 결정을 존중하고 재정의하지 않기 때문입니다. 이 경우 먼저 Azure 또는 부모 서버에서 값을 상속하도록 기본 설정을 설정한 다음, 다음 쿼리를 실행하여 사용 가능한 세 가지 튜닝 옵션을 각각 DEFAULT로 설정해야 합니다.</p>\n\n<pre class=\"prettyprint\">\nALTER DATABASE current SET AUTOMATIC_TUNING = AUTO /* Possible values AUTO for Azure defaults and INHERIT for server defaults */\nALTER DATABASE current SET AUTOMATIC_TUNING (\nFORCE_LAST_GOOD_PLAN = DEFAULT,\nCREATE_INDEX = DEFAULT,\nDROP_INDEX = DEFAULT\n)</pre>\n\n<p>위의 쿼리를 실행한 결과는 다음 출력과 함께 Azure에서 기본값을 상속하도록 세 가지 자동 튜닝 옵션을 모두 설정합니다.</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/60502e83-5b9a-4747-9a47-b56472f69691.png\"><img alt=\"Article%2003\" border=\"0\" height=\"101\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6063eefc-4657-43ec-a3aa-2a4577365895.png\" style=\"border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;\" title=\"문서%2003\" width=\"733\"></a></p>\n\n<h2>T-SQL 통해 튜닝 권장 사항 및 기록 보기</h2>\n\n<p>최근 자동 조정 권장 사항의 기록을 보려면 다음 쿼리를 실행하여 시스템 보기 sys.dm_db_tuning_recommendations 이 정보를 검색할 수 있습니다.</p>\n\n<pre class=\"prettyprint\">\nSELECT * FROM sys.dm_db_tuning_recommendations </pre>\n\n<p>이 보기의 출력은 자동 튜닝의 현재 상태에 대한 자세한 정보를 제공합니다.</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/b4ca578b-9774-471a-8383-3b323f534fd7.png\"><img alt=\"Article%2004\" border=\"0\" height=\"223\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/dcb7b9cd-e1d9-403f-8136-0983e2f3231f.png\" style=\"border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;\" title=\"문서%2004\" width=\"1062\"></a></p>\n\n<p>이 보기에서 사용할 수 있는 일부 값을 강조 표시하기 위해 튜닝 권장 사항이 만들어진 이유와 형식으로 시작합니다. 열 형식은 권장 사항의 튜닝 유형을 나타냅니다. 열 이유는 특정 튜닝 권장 사항이 만들어진 이유를 나타냅니다.</p>\n\n<p>열 valid_since 및 last_refresh 튜닝 권장 사항이 만들어진 시간 범위와 시스템이 이러한 권장 사항을 워크로드 성능에 도움이 되는 것으로 간주할 때까지의 시간을 나타냅니다.</p>\n\n<p>열 상태는 인덱스 관리 및 쿼리 실행 계획과 관련된 다양한 정보를 사용하여 자동으로 적용된 권장 사항의 세부 정보가 포함된 JSON 문서를 제공합니다.</p>\n\n<p>튜닝 권장 사항을 자동으로 실행할 수 있는 경우 is_executable_action 열이 비트 값 1로 채워집니다. 열에서 비트 1로 플래그가 지정된 자동 튜닝 권장 사항은 필요한 경우 시스템에서 자동으로 되돌릴 수 있는 튜닝 권장 사항을 나타내지 is_revertable_action. execute_action_start_time 열은 튜닝 권장 사항이 적용된 경우 타임스탬프를 제공합니다.</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/sql/relational-databases/system-dynamic-management-views/sys-dm-db-tuning-recommendations-transact-sql\">시스템 보기 sys.dm_db_tuning_recommendations 자세한 구조를 보려면 여기를 클릭하십시오</a>.</p>\n\n<h2>시스템 생성 인덱스 열</h2>\n\n<p>자동 튜닝 팀은 또한 시스템 보기(sys.indexes)에 인덱스가 자동 튜닝에 의해 만들어졌는지 여부를 나타내는 비트가 포함된 새 열 auto_created 추가했습니다. 이제 데이터베이스에서 시스템 및 사용자가 만든 인덱스를 명확하게 구분할 수 있습니다.</p>\n\n<p>열 auto_created 0과 1의 비트 값을 허용하는 반면, 0은 사용자가 인덱스를 만들었으며 1은 자동 튜닝을 통해 인덱스가 생성되었음을 나타냅니다.</p>\n\n<p>이 플래그를 사용하면 고객은 사용자와 생성된 인덱스 자동 조정을 구분할 수 있습니다. 생성된 인덱스를 자동으로 튜닝하는 작업은 사용자가 만든 인덱스와 다르게 동작하기 때문입니다. 사용자가 삭제하려는 열에 대해 자동 튜닝 인덱스를 만들면 자동 튜닝 인덱스가 방해가 되지 않습니다. 그렇지 않은 경우 사용자 인덱스가 이 작업을 방지합니다.</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/sql/relational-databases/system-catalog-views/sys-indexes-transact-sql\">시스템 뷰 sys.indexes의 자세한 구조를 보려면 여기를 클릭하십시오</a>.</p>\n\n<h2>요약</h2>\n\n<p>새로운 기능의 도입 자동 계획 수정 마지막 좋은 계획 옵션, T-SQL 통해 자동 조정 옵션의 관리 및 인덱스가 자동으로 생성 된 경우 플래그를 제공, 우리는 가장 까다로운 사용자의 요구에 맞게 자동 조정 솔루션을 사용자 지정 하는 추가 유연성을 제공 했습니다.</p>\n\n<p>솔루션을 사용하는 방법과 요구 사항에 맞게 솔루션을 사용자 지정한 방법의 예를 알려주세요. 의견과 질문을 메모에 남겨 주세요.</p>"
