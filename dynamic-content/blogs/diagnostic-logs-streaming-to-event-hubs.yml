### YamlMime:Yaml
ms.openlocfilehash: f7e14b5ee5f3a07066a6fef93e3f9df8db3ec0ab
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139903315"
Slug: diagnostic-logs-streaming-to-event-hubs
Title: 이제 Azure 진단 로그를 Event Hubs로 스트리밍할 수 있습니다.
Summary: '오늘 Azure 진단 로그를 사용하는 개선되고 확장된 방법인 Event Hubs를 통한 스트리밍을 발표하게 되어 기쁩니다. '
Content: "<p>오늘 Azure 진단 로그를 사용하는 개선되고 확장된 방법인 Event Hubs를 통한 스트리밍을 발표하게 되어 기쁩니다. <strong>Azure 진단 로그</strong> 는 리소스에서 내보낸 로그이며 해당 리소스의 작업에 대한 인사이트를 제공합니다. 이러한 로그의 내용은 리소스 종류에 따라 다릅니다. 예를 들어 Windows 이벤트 시스템 로그는 VM에 대한 진단 로그의 한 범주이고 Blob, 테이블 및 큐 로그는 스토리지 계정에 대한 진단 로그의 범주입니다. 이는 구독의 리소스에서 수행된 작업에 대한 인사이트를 제공하는 <strong><a href=\"https://azure.microsoft.com/en-us/documentation/articles/resource-group-audit/\">감사 로그</a></strong>와 다릅니다. 이전에는 감사를 위해 이러한 로그만 Storage 계정에 저장할 수 있습니다. 이제 포털 또는 Azure PowerShell Cmdlet을 사용하여 Event Hubs에 스트리밍 진단 로그를 쉽게 설정할 수 있습니다.</p>\n\n<h2>진단 로그 및 Event Hubs로 무엇을 할 수 있나요?</h2>\n\n<p>진단 로그의 스트리밍 기능을 사용할 수 있는 몇 가지 방법은 다음과 같습니다.</p>\n\n<ul>\n <li><strong>타사 로깅 및 원격 분석 시스템으로</strong> &ndash; 로그 스트리밍 시간이 지남에 따라 Event Hubs 스트리밍은 진단 로그를 타사IEM 및 로그 분석 솔루션으로 파이프하는 메커니즘이 됩니다.</li>\n <li>Event Hubs, Stream Analytics 및 PowerBI<strong>를 &ldquo;사용하여 Power BI 핫 경로&rdquo; 데이터를 스트리밍하여 서비스 상태를 확인</strong>하면 진단 데이터를 Azure 서비스에서 거의 실시간으로 파악할 수 있습니다.&ndash; <a href=\"https://azure.microsoft.com/en-us/documentation/articles/stream-analytics-power-bi-dashboard/\">이 설명서 문서에서는 Event Hubs를 설정하고, Stream Analytics를 사용하여 데이터를 처리하고, 출력으로 Power BI 사용하는 방법에 대해 간략하게 설명합니다.</a> 진단 로그를 사용하여 이 설정을 위한 몇 가지 팁은 다음과 같습니다. <ul>\n  <li>진단 로그 범주에 대한 Event Hubs는 포털에서 옵션을 선택하거나 PowerShell을 통해 사용하도록 설정하면 자동으로 만들어지므로 인사이트로 시작하는 &ldquo;이름으로 Service Bus 네임스페이스에서 Event Hubs를 선택하려고 합니다.&rdquo;</li>\n  <li>다음은&rsquo; 모든 로그 데이터를 PowerBI 테이블로 구문 분석하는 데 사용할 수 있는 샘플 Stream Analytics 쿼리입니다. <pre class=\"prettyprint\">\nSELECT\n    records.ArrayValue.[Properties you want to track]\nINTO\n    [OutputSourceName &ndash; the PowerBI source]\nFROM\n    [InputSourceName] AS e\nCROSS APPLY GetArrayElements(e.records) AS records</pre>\n  </li>\n </ul>\n </li>\n <li><strong>사용자 지정 원격 분석 및 로깅 플랫폼</strong> &ndash; 빌드 이미 사용자 지정 빌드 원격 분석 플랫폼이 있거나 빌드에 대해 생각하고 있는 경우 Event Hubs의 확장성이 뛰어난 게시-구독 특성을 통해 진단 로그를 유연하게 수집할 수 있습니다. <a href=\"https://azure.microsoft.com/en-us/documentation/videos/build-2015-designing-and-sizing-a-global-scale-telemetry-platform-on-azure-event-Hubs/\">여기에서 글로벌 규모의 원격 분석 플랫폼에서 Event Hubs를 사용하는 방법에 대한 Dan Rosanovas&rsquo; 가이드를 참조하세요.</a></li>\n</ul>\n\n<h2>진단 로그 스트리밍을 사용하도록 설정하려면 어떻게 해야 하나요?</h2>\n\n<p>프로그래밍 방식으로 또는 포털을 통해 진단 로그 스트리밍을 사용하도록 설정할 수 있습니다. 어느 쪽이든 Service Bus 네임스페이스를 선택하면 사용하도록 설정한 각 로그 범주에 대한 네임스페이스에 Event Hubs가 만들어집니다. <strong>진단 로그 범주</strong>는 리소스가 수집할 수 있는 로그 유형입니다. 진단 블레이드 아래의 Azure Portal에서 특정 리소스에 대해 수집하려는 로그 범주&rsquo;를 선택할 수 있습니다.</p>\n\n<p><img alt=\"\" border=\"0\" height=\"442\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/316dd282-e7b7-41f7-95e6-1d252e56ce98.png\" style=\"border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px\" title=\"\" width=\"640\"></p>\n\n<h3>PowerShell Cmdlet을 통해</h3>\n\n<p>Azure PowerShell Cmdlet을 통해 스트리밍을 사용하도록 설정하려면 다음 매개 변수와 함께 Set-AzureRmDiagnosticSetting cmdlet을 사용할 수 있습니다.</p>\n\n<pre class=\"prettyprint\">\nSet-AzureRmDiagnosticSetting -ResourceId [your resource Id] -ServiceBusRuleId [your service bus rule id] -Enabled $true</pre>\n\n<p>Service Bus 규칙 ID는 {service bus 리소스 ID}/authorizationrules/{key name}형식의 문자열입니다.</p>\n\n<blockquote>\n<p>참고: 이 옵션은 다음 Azure PowerShell 업데이트에서 사용할 수 있습니다.</p>\n</blockquote>\n\n<h3>Azure CLI를 통해</h3>\n\n<p>Azure CLI를 통해 스트리밍을 사용하도록 설정하려면 다음과 같이 인사이트 진단 집합 명령을 사용할 수 있습니다.</p>\n\n<pre class=\"prettyprint\">\nazure insights diagnostic set --resourceId &lt;resourceId&gt; --serviceBusRuleId &lt;serviceBusRuleId&gt; --enabled true</pre>\n\n<blockquote>\n<p>참고: 이 옵션은 다음 Azure CLI 업데이트에서 사용할 수 있게 됩니다.</p>\n</blockquote>\n\n<p>PowerShell Cmdlet에 대해 설명한 대로 Service Bus 규칙 ID에 동일한 형식을 사용해야 합니다.</p>\n\n<h3>Azure Portal을 통해</h3>\n\n<p>Azure Portal을 통해 스트리밍을 사용하도록 설정하려면 리소스의 진단 설정으로 이동하고 Event Hubs로 내보내기를 선택합니다 &lsquo;.&rsquo;</p>\n\n<p><img alt=\"\" height=\"444\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/470e59a0-2cfa-4ff4-ba6f-4c9e3289c8a8.png\" style=\"display: inline\" title=\"\" width=\"640\"></p>\n\n<p>구성하려면 기존 Service Bus 네임스페이스를 선택합니다. 선택한 네임스페이스는 Event Hubs가 생성되거나(진단 로그를 처음 스트리밍하는 경우) (해당 로그 범주를 이 네임스페이스로 스트리밍하는 리소스가 이미 있는 경우) 스트리밍 메커니즘에 있는 권한을 정의하는 위치입니다. 현재 Event Hubs로 스트리밍하려면 <strong>관리</strong>, <strong>읽기</strong> 및 <strong>보내기</strong> 권한이 필요합니다. 클래식 포털의 Service Bus 네임스페이스에 대한 구성&rdquo; 탭에서 &ldquo;Service Bus 네임스페이스 공유 액세스 정책을 만들거나 수정할 수 있습니다. 이러한 진단 설정 중 하나를 업데이트하려면 클라이언트에 Service Bus 권한 부여 규칙에 대한 <strong>ListKey</strong> 권한이 있어야 합니다.</p>\n\n<h2>Event Hubs에서 로그 데이터를 사용하려면 어떻게 하나요?</h2>\n\n<p>다음은 Event Hubs의 샘플 출력 데이터입니다.</p>\n\n<pre class=\"prettyprint\">\n{\n    &quot;records&quot;: \n    [\n        {\n             &quot;time&quot;: &quot;2016-07-15T18:00:22.6235064Z&quot;,\n             &quot;workflowId&quot;: &quot;/SUBSCRIPTIONS/DF602C9C-7AA0-407D-A6FB-EB20C8BD1192/RESOURCEGROUPS/JOHNKEMTEST/PROVIDERS/MICROSOFT.LOGIC/WORKFLOWS/JOHNKEMTESTLA&quot;,\n             &quot;resourceId&quot;: &quot;/SUBSCRIPTIONS/DF602C9C-7AA0-407D-A6FB-EB20C8BD1192/RESOURCEGROUPS/JOHNKEMTEST/PROVIDERS/MICROSOFT.LOGIC/WORKFLOWS/JOHNKEMTESTLA/RUNS/08587330013509921957/ACTIONS/SEND_EMAIL&quot;,\n             &quot;category&quot;: &quot;WorkflowRuntime&quot;,\n             &quot;level&quot;: &quot;Error&quot;,\n             &quot;operationName&quot;: &quot;Microsoft.Logic/workflows/workflowActionCompleted&quot;,\n             &quot;properties&quot;: {\n                 &quot;$schema&quot;:&quot;2016-04-01-preview&quot;,\n                 &quot;startTime&quot;:&quot;2016-07-15T17:58:55.048482Z&quot;,\n                 &quot;endTime&quot;:&quot;2016-07-15T18:00:22.4109204Z&quot;,\n                 &quot;status&quot;:&quot;Failed&quot;,\n                 &quot;code&quot;:&quot;BadGateway&quot;,\n                 &quot;resource&quot;:{\n                     &quot;subscriptionId&quot;:\n                     &quot;df602c9c-7aa0-407d-a6fb-eb20c8bd1192&quot;,\n                     &quot;resourceGroupName&quot;:&quot;JohnKemTest&quot;,\n                     &quot;workflowId&quot;:&quot;243aac67fe904cf195d4a28297803785&quot;,\n                     &quot;workflowName&quot;:&quot;JohnKemTestLA&quot;,\n                     &quot;runId&quot;:&quot;08587330013509921957&quot;,\n                     &quot;location&quot;:&quot;westus&quot;,\n                     &quot;actionName&quot;:&quot;Send_email&quot;\n                },\n                &quot;correlation&quot;:{\n                    &quot;actionTrackingId&quot;:&quot;29a9862f-969b-4c70-90c4-dfbdc814e413&quot;,\n                    &quot;clientTrackingId&quot;:&quot;08587330013509921958&quot;\n                }\n            }\n        }\n        ,\n        {\n             &quot;time&quot;: &quot;2016-07-15T18:01:15.7532989Z&quot;,\n             &quot;workflowId&quot;: &quot;/SUBSCRIPTIONS/DF602C9C-7AA0-407D-A6FB-EB20C8BD1192/RESOURCEGROUPS/JOHNKEMTEST/PROVIDERS/MICROSOFT.LOGIC/WORKFLOWS/JOHNKEMTESTLA&quot;,\n             &quot;resourceId&quot;: &quot;/SUBSCRIPTIONS/DF602C9C-7AA0-407D-A6FB-EB20C8BD1192/RESOURCEGROUPS/JOHNKEMTEST/PROVIDERS/MICROSOFT.LOGIC/WORKFLOWS/JOHNKEMTESTLA/RUNS/08587330012106702630/ACTIONS/SEND_EMAIL&quot;,\n             &quot;category&quot;: &quot;WorkflowRuntime&quot;,\n             &quot;level&quot;: &quot;Information&quot;,\n             &quot;operationName&quot;: &quot;Microsoft.Logic/workflows/workflowActionStarted&quot;,\n             &quot;properties&quot;: {\n                 &quot;$schema&quot;:&quot;2016-04-01-preview&quot;,\n                 &quot;startTime&quot;:&quot;2016-07-15T18:01:15.5828115Z&quot;,\n                 &quot;status&quot;:&quot;Running&quot;,\n                 &quot;resource&quot;:{\n                     &quot;subscriptionId&quot;:&quot;df602c9c-7aa0-407d-a6fb-eb20c8bd1192&quot;,\n                     &quot;resourceGroupName&quot;:&quot;JohnKemTest&quot;,\n                     &quot;workflowId&quot;:&quot;243aac67fe904cf195d4a28297803785&quot;,\n                     &quot;workflowName&quot;:&quot;JohnKemTestLA&quot;,\n                     &quot;runId&quot;:&quot;08587330012106702630&quot;,\n                     &quot;location&quot;:&quot;westus&quot;,\n                     &quot;actionName&quot;:&quot;Send_email&quot;\n                },\n                &quot;correlation&quot;:{\n                    &quot;actionTrackingId&quot;:&quot;042fb72c-7bd4-439e-89eb-3cf4409d429e&quot;,\n                    &quot;clientTrackingId&quot;:&quot;08587330012106702632&quot;\n                }\n            }\n        }\n    ] \n}</pre>\n\n<table border=\"0\" cellpadding=\"2\" cellspacing=\"0\" width=\"400\">\n <tbody>\n  <tr>\n   <td valign=\"top\" width=\"200\"><strong>요소 이름</strong></td>\n   <td valign=\"top\" width=\"200\"><strong>설명</strong></td>\n  </tr>\n  <tr>\n   <td valign=\"top\" width=\"200\">레코드</td>\n   <td valign=\"top\" width=\"200\">이 페이로드에 있는 모든 로그 이벤트의 배열입니다.</td>\n  </tr>\n  <tr>\n   <td valign=\"top\" width=\"200\">time</td>\n   <td valign=\"top\" width=\"200\">이벤트가 발생한 시간입니다.</td>\n  </tr>\n  <tr>\n   <td valign=\"top\" width=\"200\">category</td>\n   <td valign=\"top\" width=\"200\">이 이벤트에 대한 로그 범주입니다.</td>\n  </tr>\n  <tr>\n   <td valign=\"top\" width=\"200\">resourceId</td>\n   <td valign=\"top\" width=\"200\">이 이벤트를 생성한 리소스의 리소스 ID입니다.</td>\n  </tr>\n  <tr>\n   <td valign=\"top\" width=\"200\">operationName</td>\n   <td valign=\"top\" width=\"200\">작업의 이름입니다.</td>\n  </tr>\n  <tr>\n   <td valign=\"top\" width=\"200\">수준</td>\n   <td valign=\"top\" width=\"200\">선택 사항입니다. 로그 이벤트 수준을 나타냅니다.</td>\n  </tr>\n  <tr>\n   <td valign=\"top\" width=\"200\">properties</td>\n   <td valign=\"top\" width=\"200\">이벤트의 속성입니다. 이벤트 세부 정보의 대부분은 이 JSON 개체에 있습니다.</td>\n  </tr>\n </tbody>\n</table>\n\n<p>진단 로그를 Event Hubs로 스트리밍하는 기능은 향후 몇 개월 동안 배포될 예정입니다. 지금 바로 다음 리소스를 시작할 수 있습니다.</p>\n\n<ul>\n <li>네트워크 보안 그룹</li>\n <li>소프트웨어 부하 분산 장치</li>\n <li>App Service Gateway</li>\n <li>Logic Apps</li>\n <li>Data Lake</li>\n <li>검색</li>\n <li>Key Vault</li>\n</ul>\n\n<p>오늘 사용해 보고 아래의 의견 섹션에서 피드백을 알려주세요!</p>"
