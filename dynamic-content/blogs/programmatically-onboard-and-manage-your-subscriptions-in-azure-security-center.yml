### YamlMime:Yaml
ms.openlocfilehash: 24437c79bbc5bf889fbc89565fe4e470b94643ae
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139898250"
Slug: programmatically-onboard-and-manage-your-subscriptions-in-azure-security-center
Title: Azure Security Center에서 프로그래밍 방식으로 구독 온보딩 및 관리
Summary: Azure Security Center 공식 PowerShell 모듈을 릴리스하면 Azure 워크로드 보안이 더욱 쉬워집니다. 많은 조직에서는 수동 작업이 사람의 오류가 발생하기 쉬며 중복 작업이 발생할 가능성이 있으므로 더 많은 작업을 자동화하려고 합니다.
Content: >-
  <p><em>이 게시물은 Azure Security Center의 선임 프로그램 관리자인 Tiander Turpijn이 공동 저술했습니다.</em>&nbsp;</p>


  <p>ASC(Azure Security Center) 공식 PowerShell 모듈을 릴리스하면 Azure 워크로드 보안이 더욱 쉬워집니다.</p>


  <p>많은 조직에서는 수동 작업이 사람의 오류가 발생하기 쉬며 중복 작업이 발생할 가능성이 있으므로 더 많은 작업을 자동화하려고 합니다. 자동화의 필요성은 특히 처음부터 보호해야 하는 수백, 수천 개의 리소스 &ndash; 가 있는 수십 개의 구독을 포함하는 대규모 배포에서 널리 사용됩니다.</p>


  <p>ASC는 DevOps 수명 주기의 보안 측면을 간소화하기 위해 최근 공식 PowerShell 모듈을 출시했습니다. 이를 통해 조직은 ASC에서 Azure 리소스의 온보딩 및 관리를 프로그래밍 방식으로 자동화하고 필요한 보안 제어를 추가할 수 있습니다.</p>


  <p>이 블로그는 PowerShell을 사용하여 ASC를 온보딩하는 데 중점을  두고 있습니다. 향후 블로그 게시물에서는 PowerShell을 사용하여 ASC에서 리소스 관리를 자동화하는 방법을 보여 줍니다.</p>


  <p>이 예제에서는 ID가 d07c0080-170c-4c24-861d-9c817742786c인 구독에서 Security Center를 사용하도록 설정하고 고급 위협 방지 및 검색 기능을 제공하는 Security Center의 표준 계층을 구현하여 높은 수준의 보호를 제공하는 권장 설정을 적용합니다.</p>


  <ol>
      <li>고급 위협 방지 및 검색 기능을 사용하도록 설정하려면 ASC를 표준으로 설정합니다. <a href="https://azure.microsoft.com/en-us/pricing/details/security-center/" target="_blank">ASC가</a> 제공하는 두 계층인 무료 및 표준에 대해 자세히 알아봅니다.</li>
      <li>Microsoft Monitoring Agent 구독과 연결된 VM에서 수집하는 데이터를 보낼 Log Analytics 작업 영역을 설정합니다. 이 경우 기존 사용자 정의 작업 영역(myWorkspace)입니다. <a href="https://docs.microsoft.com/en-us/azure/security-center/security-center-enable-data-collection#how-can-i-use-my-existing-log-analytics-workspace" target="_blank">ASC의 데이터 수집에</a> 대해 자세히 알아봅니다.</li>
      <li>Microsoft Monitoring Agent 배포하는 Security Centers&rsquo; 자동 에이전트 프로비저닝을 활성화합니다. <a href="https://docs.microsoft.com/en-us/azure/security-center/security-center-enable-data-collection#enable-automatic-provisioning-of-microsoft-monitoring-agent" target="_blank">자동 프로비저닝을 사용하도록 설정하는 방법에</a> 대해 자세히 알아봅니다.</li>
      <li>조직&rsquo; CISO를 ASC 경고 및 주목할 만한 이벤트에 대한 보안 연락처로 설정합니다. <a href="https://docs.microsoft.com/en-us/azure/security-center/security-center-provide-security-contact-details" target="_blank">ASC에서 보안 연락처 세부 정보를 제공하는</a> 방법에 대해 자세히 알아봅니다.</li>
      <li>Security Centers&rsquo; 기본 보안 정책을 할당합니다. <a href="https://docs.microsoft.com/en-us/azure/security-center/security-center-azure-policy" target="_blank">보안 정책에</a> 대해 자세히 알아봅니다.</li>
  </ol>


  <p><strong>필수 구성 요소</strong>: Security Center cmdlet을 실행하기 전에 이러한 단계를 수행하여 환경에 모든 필수 구성 요소 및 종속성이 설치되어 있는지 확인해야 합니다.</p>


  <ol>
      <li>관리자 권한으로 PowerShell 실행</li>
      <li>Set-ExecutionPolicy -ExecutionPolicy AllSigned</li>
      <li>Install-Module -Name Az.Security -Force</li>
  </ol>


  <p>a. Security Center 리소스 공급자에 구독 등록</p>


  <ol>

  </ol>


  <pre>

  Set-AzContext-Subscription &quot;d07c0080-170c-4c24-861d-9c817742786c&quot;

  Register-AzResourceProvider &ndash;ProviderNamespace &#39;Microsoft.Security&#39;</pre>


  <ul>

  </ul>


  <p>b. 구독의 적용 범위 수준(가격 책정 계층)을 설정합니다 <strong>(선택 사항입니다.) &rsquo;정의되지 않은 경우 가격 책정 계층은 무료입니다.)</strong></p>


  <ul>

  </ul>


  <pre>

  <strong></strong>Set-AzContext-Subscription &quot;d07c0080-170c-4c24-861d-9c817742786c&quot;

  Set-AzSecurityPricing -Name &quot;default&quot; -PricingTier &quot;Standard&quot;</pre>


  <ul>

  </ul>


  <p>c. 에이전트가 보고할 작업 영역을 구성합니다 <strong>(선택 사항). &rsquo;정의되지 않은 경우 기본 작업 영역이 사용됩니다.)</strong></p>


  <ul>

  </ul>


  <p><strong>필수 구성 요소: 구독&rsquo; VM이 보고할 Log Analytics 작업 영역을 만듭니다. 여러 구독을 정의하여 동일한 작업 영역에 보고할 수 있습니다.</strong></p>


  <pre>

  Set-AzSecurityWorkspaceSetting -Name &quot;default&quot; -Scope &quot;/subscriptions/d07c0080-170c-4c24-861d-9c817742786c&quot; -WorkspaceId &quot;/subscriptions/d07c0080-170c-4c24-861d-9c817742786c/resourceGroups/myRg/providers/Microsoft.OperationalInsights/workspaces/myWorkspace&quot;</pre>


  <ul style="margin-left: 40px;">

  </ul>


  <p>d. Azure VM에서 Microsoft Monitoring Agent 자동 프로비저닝 정의<strong>(선택 사항입니다.) 자동이 아닌 경우 에이전트를 수동으로 설치할 수 있습니다.)</strong></p>


  <ul style="margin-left: 40px;">

  </ul>


  <pre>

  Set-AzContext -Subscription &quot;d07c0080-170c-4c24-861d-9c817742786c&quot;

  Set-AzSecurityAutoProvisioningSetting -Name &quot;default&quot; -EnableAutoProvision</pre>


  <ul style="margin-left: 40px;">

  </ul>


  <p>e. 보안 연락처 세부 정보를 정의합니다(선택 사항).</p>


  <ul style="margin-left: 40px;">

  </ul>


  <p>이러한 연락처는 Security Center에서 생성한 경고 및 알림의 수신자로 사용되므로 등록한 구독에 대한 보안 연락처 세부 정보를 정의하는 것이 좋습니다.</p>


  <pre>

  Set-AzSecurityContact -Name &quot;default1&quot; -Email &quot;CISO@my-org.com&quot; -Phone &quot;2142754038&quot; -AlertsAdmin -NotifyOnAlert</pre>


  <ul style="margin-left: 40px;">

  </ul>


  <p>f. 기본 Security Center 정책 이니셔티브 할당</p>


  <ul style="margin-left: 40px;">

  </ul>


  <pre>

  Register-AzResourceProvider -ProviderNamespace &#39;Microsoft.PolicyInsights&#39;

  $Policy = Get-AzPolicySetDefinition -Name &#39; [Preview]: Enable Monitoring in Azure Security Center&#39;


  New-AzPolicyAssignment -Name &#39;ASC Default &lt;d07c0080-170c-4c24-861d-9c817742786c&gt;&#39; -DisplayName &#39;Security Center Default &lt;subscription ID&gt;&#39; -PolicySetDefinition $Policy &ndash;Scope &#39;subscriptions/d07c0080-170c-4c24-861d-9c817742786c&#39;</pre>


  <p>이제 자동화 스크립트와 함께 공식 PowerShell cmdlet을 사용하여 프로그래밍 방식으로 여러 구독/리소스를 반복하여 이러한 작업을 수동으로 수행하여 발생하는 오버헤드를 줄이고 수동 작업으로 인한 인적 오류의 잠재적 위험을 줄일 수 있습니다. 자세한 내용은 <a href="https://github.com/Microsoft/Azure-Security-Center/blob/master/quickstarts/ASC-Samples.ps1" target="_blank">ASC 샘플 스크립트</a>를 참조하세요.</p>


  <p>PowerShell을 사용하여 Security Center에 대한 온보딩을 자동화하는 방법에 대한 자세한 내용은 <a href="https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FAzure%2Fazure-powershell%2Fblob%2Fmaster%2Fsrc%2FResourceManager%2FSecurity%2FCommands.Security%2Fhelp%2FAz.Security.md&amp;data=02%7C01%7Cv-cabas%40microsoft.com%7C5c8bc9b99cce4c7b281808d666989b10%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636809202972311707&amp;sdata=%2BYns3lwgacF23VBD4je6reCOkynrgTVMQcLWTUwkA64%3D&amp;reserved=0" target="_blank">설명서를</a> 참조하세요.</p>
