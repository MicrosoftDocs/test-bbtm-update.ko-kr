### YamlMime:Yaml
ms.openlocfilehash: ffe422597acb718777a282a14b23e01e8c7ec603
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139907909"
Slug: azure-container-registry-mitigating-data-exfiltration-with-dedicated-data-endpoints
Title: 'Azure Container Registry: 전용 데이터 엔드포인트를 사용하여 데이터 반출 완화'
Summary: Azure Container Registry는 전용 데이터 엔드포인트를 발표하여 엄격한 범위의 클라이언트 방화벽 규칙을 특정 레지스트리로 사용하도록 설정하여 데이터 반출 문제를 최소화합니다.
Content: >-
  <p>Azure Container Registry는 전용 데이터 엔드포인트를 발표하여 엄격한 범위의 클라이언트 방화벽 규칙을 특정 레지스트리로 사용하도록 설정하여 데이터 반출 문제를 최소화합니다.</p>


  <p>레지스트리에서 콘텐츠를 끌어들이려면 다음 두 개의 엔드포인트가 포함됩니다.</p>


  <ul>
      <li>인증 및 콘텐츠 검색에 사용되는 <strong>로그인 URL</strong>이라고도 하는 <strong>레지스트리 엔드포인트</strong>입니다.<br>
  같은 <code>docker pull contoso.azurecr.io/hello-world</code> 명령은 요청된 아티팩트를 나타내는 계층을 인증하고 협상하는 REST 요청을 만듭니다.</li>
      <li><strong>데이터 엔드포인트는</strong> 콘텐츠 계층을 나타내는 Blob을 제공합니다.</li>
  </ul>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/f36b4173-bd7d-4a50-aaee-b6138608beee.png"><img alt="Registry with two endpoints" border="0" height="214" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/65527b4a-84d5-4864-92e5-78da3ecba512.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="" width="640"></a></p>


  <h2>레지스트리 관리 스토리지 계정</h2>


  <p>Azure Container Registry는 다중 테넌트 서비스로, 데이터 엔드포인트 스토리지 계정은 레지스트리 서비스에서 관리됩니다. 부하 분산, 논쟁의 여지가 있는 콘텐츠 분할, 더 높은 동시 콘텐츠 배달을 위한 여러 복사본, <a href="https://aka.ms/acr/geo-replicatin" target="_blank">지역 복제</a>를 사용한 다중 지역 지원 등 관리되는 스토리지에 대한 많은 이점이 있습니다.</p>


  <h2>Azure Private Link 가상 네트워크 지원</h2>


  <p>Azure Container Registry는 최근 <a href="https://aka.ms/acr/privatelink" target="_blank">Private Link 지원을</a> 발표하여 Azure Virtual Networks의 프라이빗 엔드포인트를 관리되는 레지스트리 서비스에 배치할 수 있도록 했습니다. 이 경우 레지스트리와 데이터 엔드포인트는 모두 개인 IP를 사용하여 가상 네트워크 내에서 액세스할 수 있습니다.</p>


  <p>그런 다음 퍼블릭 엔드포인트를 제거하여 관리되는 레지스트리 및 스토리지 계정을 보호하여 가상 네트워크 내에서 액세스할 수 있습니다.<br>

  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3f111584-1161-4e8d-9db3-739e10fcc1e7.png"><img alt="ACR with Private Link" border="0" height="288" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/33de79fd-7137-4f37-8a62-4261cd7f8dbc.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="" width="640"></a></p>


  <p>아쉽게도 가상 네트워크 연결은 항상 옵션이 아닙니다&rsquo;.</p>


  <h2>클라이언트 방화벽 규칙 및 데이터 반출 위험</h2>


  <p>온-프레미스 호스트, IoT 디바이스, 사용자 지정 빌드 에이전트에서 레지스트리에 연결하는 경우 또는 Private Link가 옵션이 아닐 수 있는 경우 클라이언트 방화벽 규칙을 적용하여 특정 리소스에 대한 액세스를 제한할 수 있습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/98f84c9b-7429-431f-a79e-ea87e1273601.png"><img alt="Client firewall rules, data exfiltration risk" border="0" height="214" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/55179d2f-38b2-4675-9d6b-9518deb6b4ab.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="" width="640"></a>&nbsp;<br>

  고객이 클라이언트 방화벽 구성을 잠그면서 모든 스토리지 계정에 대한 와일드카드가 있는 규칙을 만들어야 한다는 사실을 깨달았기 때문에 데이터 반출에 대한 우려가 제기되었습니다. 악의적인 행위자가 스토리지 계정에 쓸 수 있는 코드를 배포할 수 있습니다.</p>


  <p>데이터 반출 문제를 완화하기 위해 Azure Container Registry는 전용 데이터 엔드포인트를 사용할 수 있도록 합니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/81cc04ac-7b53-4255-881d-460aa8aa4d12.png"><img alt="Client firewall rules, data exfiltration exploit" border="0" height="303" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/d7a6b518-3270-429e-bdad-46716d44e5ed.png" style="border-image: none; display: inline; background-image: none;" title="" width="640"></a></p>


  <h2>전용 데이터 엔드포인트</h2>


  <p>전용 데이터 엔드포인트를 사용하도록 설정하면 레지스트리 도메인을 나타내는 정규화된 도메인 이름을 사용하여 Azure Container Registry 서비스에서 계층을 검색합니다. 모든 레지스트리가 지역 복제될 수 있으므로 지역 패턴이 사용됩니다.</p>


  <p><code>[registry].[region].data.azurecr.io.</code></p>


  <p>Contoso 예제의 경우 인근 복제본을 사용하여 로컬 지역을 지원하는 여러 지역 데이터 엔드포인트가 추가됩니다.</p>


  <p>전용 데이터 엔드포인트를 사용하면 잘못된 행위자가 다른 스토리지 계정에 쓸 수 없습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/30be32e5-cc0d-4425-a766-9e79b147cc26.png"><img alt="Dedicated data endpoints, data exfiltration risk mitigated" border="0" height="267" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1cd75a80-2553-4ee0-8573-f12240758069.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="" width="640"></a></p>


  <h2>전용 데이터 엔드포인트 사용</h2>


  <p><strong>참고</strong>: 전용 데이터 엔드포인트로 전환하면 기존 *.blob.core.windows.net 엔드포인트에 대한 방화벽 액세스를 구성한 클라이언트에 영향을 주어 끌어오기 오류가 발생합니다. 클라이언트가 일관된 액세스 권한을 갖도록 하려면 클라이언트 방화벽 규칙에 새 데이터 엔드포인트를 추가합니다. 완료되면 기존 레지스트리를 통해 <code>az cli</code>전용 데이터 엔드포인트를 사용하도록 설정할 수 있습니다.</p>


  <p><a href="https://docs.microsoft.com/cli/azure/install-azure-cli?view=azure-cli-latest" target="_blank">az cli</a> 버전 2.4.0 이상에서 <a href="https://docs.microsoft.com/cli/azure/acr?view=azure-cli-latest#az-acr-update" target="_blank">az acr update</a> 명령을 실행합니다.</p>


  <p><code>az acr update --name contoso --data-endpoint-enabled</code></p>


  <p>지역 복제 레지스트리에 대한 지역별 엔드포인트를 포함하여 데이터 엔드포인트를 보려면 az acr show-endpoints cli를 사용합니다.</p>


  <p><code>az acr show-endpoints --name contoso</code></p>


  <p>출력:</p>


  <pre>

  <code>{

  &nbsp; &quot;loginServer&quot;: &quot;contoso.azurecr.io&quot;,

  &nbsp; &quot;dataEndpoints&quot;: [

  &nbsp;&nbsp;&nbsp; {

  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;region&quot;: &quot;eastus&quot;,

  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;endpoint&quot;: &quot;contoso.eastus.data.azurecr.io&quot;,

  &nbsp;&nbsp;&nbsp; },

  &nbsp;&nbsp;&nbsp; {

  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;region&quot;: &quot;westus&quot;,

  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;endpoint&quot;: &quot;contoso.westus.data.azurecr.io&quot;,

  &nbsp;&nbsp;&nbsp; }

  &nbsp; ]

  }

  </code></pre>


  <h2>Azure Private Link를 사용하여 보안</h2>


  <p><a href="https://aka.ms/acr/privatelink" target="_blank">Azure Private Link</a> 는 프라이빗 IP를 사용하여 네트워크 트래픽이 Azure Virtual Network로 제한되므로 클라이언트와 레지스트리 간의 네트워크 액세스를 제어하는 가장 안전한 방법입니다. Private Link가 옵션이 아닌&rsquo; 경우 전용 데이터 엔드포인트는 각 클라이언트에서 액세스할 수 있는 리소스에 대한 안전한 지식을 제공할 수 있습니다.</p>


  <h2>가격 정보</h2>


  <p>전용 데이터 엔드포인트는 프리미엄 레지스트리의 기능입니다.</p>


  <p>전용 데이터 엔드포인트에 대한 자세한 내용은 <a href="https://aka.ms/acr/pricing" target="_blank">여기의 가격 책정 정보를 참조하세요</a>.</p>
