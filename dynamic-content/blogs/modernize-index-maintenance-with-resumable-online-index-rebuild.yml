### YamlMime:Yaml
ms.openlocfilehash: 1d0d89089321670e63b3c13299b9e39a77ff0c5d
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139898556"
Slug: modernize-index-maintenance-with-resumable-online-index-rebuild
Title: 다시 시작하는 온라인 인덱스 다시 빌드를 사용하여 인덱스 유지 관리 현대화
Summary: 아시다시피 인덱스는 데이터베이스 성능을 최적화하기 위한 가장 강력한 도구 중 하나입니다. 행을 삽입, 업데이트 및 삭제하면 인덱스가 더 조각화되고 덜 효과적입니다. 이 때문에 DBA는 정기적으로 인덱스 다시 작성 작업을 수행합니다.
Content: >-
  <p>아시다시피 인덱스는 데이터베이스 성능을 최적화하기 위한 가장 강력한 도구 중 하나입니다. 행을 삽입, 업데이트 및 삭제하면 인덱스가 더 조각화되고 덜 효과적입니다. 이 때문에 DBA는 정기적으로 인덱스 다시 작성 작업을 수행합니다.</p>


  <p>데이터베이스의 크기가 커짐에 따라 인덱스 다시 작성에는 매우 오랜 시간이 걸릴 수 있습니다. 애플리케이션을 항상 사용할 수 있고 성능이 뛰어난 비즈니스 요구 사항과 결합하면 문제가 될 수 있습니다. 사용량이 많은 워크로드가 있는 대규모 OLTP 환경에는 대용량 인덱스 다시 빌드 작업을 실행하기에는 너무 짧은 유지 관리 기간이 매우 짧은 경우가 많습니다.&nbsp;&nbsp;</p>


  <h3>제한된 유지 관리 기간에 다시 빌드 작업 맞추기</h3>


  <p>ROIR(다시 시작하는 온라인 인덱스 다시 빌드)을 사용하면 정의된 길이의 유지 관리 기간 동안에만 실행되도록 다시 빌드를 구성할 수 있습니다. 이전에는 인덱스 작업이 유지 관리 기간보다 오래 실행된 경우 DBA는 인덱스 작업을 중단하고 나중에 처음부터 다시 실행해야 했습니다. 인덱스 작업이 원하는 유지 관리 기간보다 정기적으로 오래 걸린 경우 이 작업을 수행할 방법이 없었습니다. ROIR을 사용하면 사용자는 유지 관리 기간에 따라 다시 빌드에 대한 최대 기간을 정의할 수 있습니다.</p>


  <pre class="prettyprint">

  ALTER INDEX [ix_CustomerIDs]

  ON [ContosoSales].[ConstosoTransactionData]

  REBUILD

  WITH (ONLINE = ON, RESUMABLE = ON, MAX_DURATION = 30 MINUTES);

  GO</pre>


  <h3>인덱스 다시 빌드를 일시 중지하여 우선 순위가 높은 다른 작업에 대한 리소스를 확보합니다.</h3>


  <p>경우에 따라 예기치 않은 높은 우선 순위 작업이 나타나고 더 많은 리소스가 필요할 수 있습니다. ROIR을 사용하면 언제든지 다시 빌드 작업을 일시 중지하여 우선 순위가 높은 다른 작업을 실행할 수 있습니다. 최대 기간을 정의하지 않은&rsquo; 경우 일시 중지 기능을 사용하여 유지 관리 기간의 끝에서 인덱스 작업을 일시 중지할 수도 있습니다.</p>


  <pre class="prettyprint">

  ALTER INDEX ix_CustomerIDs ON [ContosoSales].[ConstosoTransactionData] PAUSE

  </pre>


  <h3>실패 후 인덱스 다시 작성 다시 시작</h3>


  <p>데이터베이스 장애 조치(failover) 또는 디스크 공간 부족 등 여러 가지 이유로 인덱스 다시 작성 오류가 예기치 않게 발생할 수 있습니다. 몇 시간 동안 실행한 후 인덱스 작업이 실패할 경우 얼마나 많은 시간이 낭비될 수 있는지 생각해 보세요. ROIR을 사용하면 오류가 발생한 위치에서 인덱스 다시 작성을 다시 시작할 수 있습니다. 실패하면 인덱스가 일시 중지된 상태로 전환됩니다.&nbsp;</p>


  <pre class="prettyprint">

  ALTER INDEX ix_CustomerIDs ON [ContosoSales].[ConstosoTransactionData] RESUME</pre>


  <h3>큰 로그 공간을 사용하지 않고 큰 인덱스 다시 작성 수행</h3>


  <p>장기 실행 인덱스 작업은 다른 유지 관리 작업을 차단할 수 있습니다. ROIR을 사용하면 많은 양의 로그 공간을 사용하지 않고도 큰 인덱스 다시 작성을 수행할 수 있습니다. 로그 증가&nbsp; 및 로그 외부 오류를 ROIRminimize&nbsp;합니다.</p>


  <p>원래 인덱스와 새 인덱스 모두 디스크 공간이 필요하고 DML 작업 중에 업데이트해야 하므로 인덱스를 일시 중지된 상태로 유지하는 것은 성능에 영향을 줍니다. 또한 인덱스 중 하나가 일시 중지된 상태인 경우에도 테이블에서 스키마를 변경할 수 없습니다.</p>


  <div>마지막으로, 인덱스 다시 빌드의 현대화 유지 관리의 확장으로 데이터베이스 <a href="https://cloudblogs.microsoft.com/sqlserver/2018/05/08/database-scoped-default-online-options-is-in-preview-for-azure-sql-db/">범위 인덱스 기본 온라인 및 다시 시작하는 옵션</a>이라는 최근에 릴리스된 공개 미리 보기 기능을 참조하려고 합니다.</div>


  <div>&nbsp;</div>


  <div>이 기능을 사용하면 각 개별 문에 대해 이러한 옵션을 정의하는 대신 온라인으로 인덱스 다시 작성 및 다시 시작 가능한 작업에 대한 기본 동작을 설정할 수 있습니다.</div>


  <h3>ROIR에 대한 자세한 내용은 다음 문서를 검토하세요.</h3>


  <ul>
      <li><a href="https://msdn.microsoft.com/library/ms190981(SQL.130).aspx" target="_blank">온라인 인덱스 작업에 대한 지침</a></li>
      <li><a href="https://msdn.microsoft.com/library/ms188388(SQL.130).aspx" target="_blank">ALTER INDEX(Transact-SQL)</a></li>
      <li><a href="https://docs.microsoft.com/en-us/sql/relational-databases/system-catalog-views/sys-index-resumable-operations" target="_blank">sys.index_resumable_operations</a></li>
  </ul>


  <p>Azure 블로그를 모니터링하여 이 공간에서 제공되는 더 훌륭한 기능을 확인하세요!</p>
