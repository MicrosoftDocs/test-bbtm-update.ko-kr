### YamlMime:Yaml
ms.openlocfilehash: 285c698cedcbd3a3ee8c0f6f7b1292feecc78f5f
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139897576"
Slug: networking-to-and-within-the-azure-cloud-part-2
Title: Azure Cloud 간 네트워킹, 2부
Summary: 이 시리즈의 두 번째, 앞으로 진행하기 전에 첫 번째를 읽으십시오! 하이브리드 네트워킹은 좋은 일이지만 하이브리드 네트워킹을 정의하려면 어떻게 해야 할까요? 나를 위해, 의 맥락에서 ...
Content: >-
  <p><em>이것은 세 부분으로 구성된 시리즈의 두 번째 블로그 게시물입니다. 읽기를 시작하기 전에 <a href="https://azure.microsoft.com/en-us/blog/networking-to-and-within-the-azure-cloud/">Azure Cloud, 1부 내의</a> 첫 번째 게시 네트워킹을 읽는 것이 좋습니다. </em></p>


  <p>하이브리드 네트워킹은 좋은 일이지만, 문제는 하이브리드 네트워킹을 어떻게 정의합니까? 가상 네트워크, <a href="https://docs.microsoft.com/en-us/azure/expressroute/expressroute-howto-routing-portal-resource-manager#azure-private-peering">ExpressRoutes&rsquo; 프라이빗 피어링</a> 또는 <a href="https://docs.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal">VPN 연결</a>에 대한 연결 컨텍스트에서 프레미스 간 리소스를 하나 이상의 VNet( <a href="https://docs.microsoft.com/en-us/azure/virtual-network/">Virtual Network</a> )에 연결하는 기능입니다. 이 모든 것이 잘 작동하고 클라우드에 연결하는 방법을 알고 있지만 클라우드 <strong><u>내에서</u></strong> 어떻게 네트워크를 연결해야 할까요? 이 작업을 수행하는 데는 3가지 이상의 Azure 기본 제공 방법이 있습니다. 이 일련의 3개의 블로그 게시물에서 내 의도는 간략하게 설명하는 것입니다.</p>


  <ol>
   <li><a href="https://azure.microsoft.com/en-us/blog/networking-to-and-within-the-azure-cloud/" target="_blank">하이브리드 네트워킹 연결 옵션</a></li>
   <li><a href="https://azure.microsoft.com/en-us/blog/networking-to-and-within-the-azure-cloud-part-2/" target="_blank">클라우드 내 연결 옵션</a></li>
   <li><a href="https://azure.microsoft.com/en-us/blog/networking-to-and-within-the-azure-cloud-part-3/" target="_blank">이러한 모든 개념을 함께 배치</a></li>
  </ol>


  <h2>배경</h2>


  <p>클라우드&rsquo; 내에서 네트워킹에 대해 자세히 알아보기 전에, 일반적으로 둘 이상의 VNet을 가질 수 있는 이유 또는 <a href="https://docs.microsoft.com/en-us/azure/virtual-network/virtual-networks-overview" target="_blank">VNet이란 무엇인가</a>요?</p>


  <p>이 문서가 무엇인지 설명하는 훌륭한 <a href="https://docs.microsoft.com/en-us/azure/virtual-network/virtual-networks-overview" target="_blank">문서가</a> 있지만 이러한 방식으로 요약할 수 있습니다. 즉, 사용자 고유의 요구에 맞게 Azure 내에서 만드는 격리된 네트워크입니다. 예를 들어 온-프레미스에서 Azure로 가상 머신을 이동하기 시작할 때 필요합니다. IP 주소 공간을 선택합니다. 따라서 클라우드로 이동하기 <em>전에</em> IP 주소 지정을 계획하는 것이 중요합니다. Azure를 사용자 고유의 데이터 센터, <em>가상 데이터 센터의</em> 확장이라고 생각하므로 IP 주소 블록을 계획해야 할 수도 있습니다. 또는 둘 이상의 IP 주소 공간 블록(CIDR 블록이라고도 함) 또는 <a href="https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing" target="_blank">클래스 없는 도메인 간 라우팅</a>&hellip; 을&rsquo; 통해 네트워크 엔지니어를 위한 것일 수 있습니다.</p>


  <p>이제 VNet이 무엇인지 약간 더 잘 이해했으므로(<a href="https://docs.microsoft.com/en-us/azure/virtual-network/virtual-networks-overview" target="_blank">읽기</a> 및 환경도 도움이 됨) 여러 VNet이 있는 이유는 무엇인가요? 한 가지, 이러한 리소스가 독립적이어야 하는 여러 비즈니스 라인이 있기 때문일 수 있습니다. 이는 다른 사업부에 호출( <a href="https://account.windowsazure.com/Home/Index" target="_blank">여기에서</a> 만들 수 있는 다른 Azure 구독 사용) 또는 다른 가상 네트워크 및 관련 요소(네트워크 <a href="https://docs.microsoft.com/en-us/azure/virtual-network/virtual-networks-create-nsg-arm-pportal" target="_blank">보안 그룹</a>, <a href="https://docs.microsoft.com/en-us/azure/virtual-network/virtual-networks-udr-overview" target="_blank">사용자 정의 경로</a> 등)를 관리하는 다른 팀이 될 수 있기 때문일 수 있습니다.</p>


  <h2>Intra-Cloud 연결 옵션</h2>


  <p>가상 네트워크를&rsquo; 만들고 클라우드에 연결한 후에는 Azure 클라우드 <strong><em>내에서</em></strong> 통신할 기본 옵션은 무엇인가요? 즉, 이러한 비즈니스 라인이 데이터를 교환해야 하거나 가상 네트워크 간에 IP 연결을 사용하도록 설정해야 하는 경우 Azure에서 제공하는 네이티브 옵션 3가지가 있습니다.</p>


  <ol>
   <li>VPN을 통해 VNet에서 VNet<a href="https://docs.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-howto-vnet-vnet-resource-manager-portal" target="_blank">으로(VNet-VNet 연결</a>)</li>
   <li>ExpressRoute를 통해 VNet에서 VNet으로</li>
   <li>가상 네트워크 피어링(VNet 피어링) 및 <a href="https://docs.microsoft.com/en-us/azure/virtual-network/virtual-network-peering-overview" target="_blank">VNet 전송을 통해 VNet에서 VNet</a>으로 <a href="https://docs.microsoft.com/en-us/azure/virtual-network/virtual-networks-create-vnetpeering-arm-portal#service-chaining---transit-through-peered-vnet" target="_blank"></a></li>
  </ol>


  <p>여기서 내 의도는 이러한 메서드, 허용되는 방법 및 이러한 방법으로 달성할 수 있는 토폴로지의 종류를 비교하는 것입니다.</p>


  <h3>VPN을 통한 VNet-VNet</h3>


  <p>아래 그림에 표시된 것처럼 VPN을 통해 VNet-VNet을 사용하여 2개의 VNet이 함께 연결된 경우 라우팅 테이블은 두 가상 네트워크에 대해 다음과 같이 표시됩니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/527be1fe-e58d-4bf3-b89e-e06085c393ea.png"><img alt="1.VNet-VNet-VPN_thumb[6]" border="0" height="575" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/d1be75a9-7810-4038-8458-0b247a944eed.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;" title="1.VNet-VNet-VPN_thumb[6]" width="1298"></a></p>


  <p>이는 2개의 VNet에서 흥미롭지만 몇 가지 방법으로 증가할 수 있습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/5c66a122-4859-4ab4-a860-f3281a4f2762.png"><img alt="2.VNet-VNet-VPN-multi-VNet_thumb[2]" border="0" height="584" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/78d6a3bf-1d3d-434d-94f4-398991769b99.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;" title="2.VNet-VNet-VPN-다중 VNet_thumb[2]" width="1299"></a></p>


  <p>이 경우 VNet4 및 VNet5에 대한 경로 테이블은 VNet3에 도달하는 방법을 나타냅니다. 그러나 VNet4는 VNet5에 연결할 수 없습니다. 이 경우에도 이 작업을 수행할 수 있는 두 가지 방법이 있습니다.</p>


  <ol>
   <li>전체 메시 VNet-VNet</li>
   <li><a href="https://docs.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-bgp-resource-manager-ps#a-name-v2vbgpapart-3---establish-a-vnet-to-vnet-connection-with-bgp" target="_blank">BGP 사용 VPN 사용</a></li>
  </ol>


  <p>이러한 두 가지 방법을 통해 3개의 VNet은 모두 각 VNet에 도달하는 방법을 알고 있습니다. VPN Gateway의 제한이 준수되었다고 가정하면(최대 터널 수 등) 더 많은 <a href="https://docs.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-plan-design#planning" target="_blank">VNet</a> 으로 확장될 수 있습니다.</p>


  <h3>ExpressRoute를 통한 VNet-VNet</h3>


  <p>모든 사용자가 인식하지는 않지만 둘 이상의 <a href="https://docs.microsoft.com/en-us/azure/expressroute/expressroute-howto-linkvnet-portal-resource-manager" target="_blank">VNet을 동일한 ExpressRoute 회로에 연결할 때 VNet을 ExpressRoute 회로</a> 에 연결하는 것은 흥미로운 부작용이 있습니다. 예를 들어 동일한 ExpressRoute 회로에 2개의 VNet이 연결된 경우 경로 테이블은 다음과 같습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6657737c-70d3-4cd1-83cb-71c3c1950d82.png"><img alt="3.VNet-VNet-ER-2VNet_thumb[2]" border="0" height="523" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/f57be7a9-df2c-4c72-a309-0d477bd0eb95.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;" title="3.VNet-VNet-ER-2VNet_thumb[2]" width="1319"></a></p>


  <p>흥미롭게도 두 VNet은 Microsoft 백본을 벗어나<u>지 않고</u> MSEE(Microsoft Enterprise Edge) 라우터 외부로 나가지 않고도 서로 통신할 수 있습니다. 왜 그렇게 중요한가? 한 가지, VNet 간에 <em>추가 요금 </em>없이 통신할 수 있습니다. 즉, <a href="https://docs.microsoft.com/en-us/azure/expressroute/expressroute-faqs#expressroute-premium" target="_blank">ExpressRoute Premium 회로</a>인 경우 국가별 클라우드를 제외하고 동일한 <a href="https://docs.microsoft.com/en-us/azure/expressroute/expressroute-locations-providers#a-namepartnersaexpressroute-connectivity-providers" target="_blank">지정학적 지역</a> 내에 있거나 전역적으로 VNet 간에 통신할 수 있습니다. 즉, 전 세계 <a href="https://azure.microsoft.com/en-us/blog/how-microsoft-builds-its-fast-and-reliable-global-network/" target="_blank">Microsoft 백본</a>을 사용하여 여러 VNet을 함께 연결할 수 있습니다. 이러한 VNet을 동일한 ExpressRoute 회로에 연결할 수 있는 한 VNet 간 트래픽은 <em>무료</em>입니다. 아래 예제에서는 동일한 ExpressRoute 회로에 3개의 VNet이 연결됩니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/02c75c60-c2ef-413b-a8a5-bb5604cbb755.png"><img alt="4. VNet-VNet-VPN-ER-multi-VNet_thumb[2]" border="0" height="657" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/065a3d00-a119-42e0-ba2b-1daf413b9285.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;" title="4. VNet-VNet-VPN-ER-다중 VNet_thumb[2]" width="1317"></a></p>


  <p>또한 각 VNet&rsquo; 서브넷&rsquo; <a href="https://docs.microsoft.com/en-us/azure/virtual-network/virtual-network-routes-troubleshoot-portal#using-effective-routes-to-troubleshoot-vm-traffic-flow" target="_blank">유효 경로 테이블에</a> 표시되는 여러 경로 위의 그림에 표시됩니다(이 경우 라우팅이&rsquo; 예상대로 작동하지 않는&rsquo; 이유를 이해하는 것이 매우 유용합니다.).</p>


  <h3>Virtual Network 피어링을 사용하는 VNet-VNet</h3>


  <p>여러 VNet을 함께 연결하는 마지막 옵션은 하나의 Azure 지역 내에서 제한되는 <a href="https://docs.microsoft.com/en-us/azure/virtual-network/virtual-network-peering-overview" target="_blank">Virtual Network 피어링을</a> 사용하는 것입니다. 2개의 VNet 간에 이러한 피어링 정렬을 통해 VNet은 기본적으로 1개의 큰 가상 네트워크인 것처럼 작동하지만 NSG 및 경로 테이블과의 통신을 제어/제어할 수 있습니다. 이것이 무엇을 의미하는지에 대한 일러스트레이션은 아래를 참조하세요.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/be0fae34-8e99-4964-a3b9-6104667d6d63.png"><img alt="5.VNet-VNet-Peering-2-VNets_thumb[2]" border="0" height="400" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/f98ae2c2-b5ba-4295-8bae-5a6705e10b6a.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;" title="5.VNet-VNet-Peering-2-VNets_thumb[2]" width="1309"></a></p>


  <p>따라서 이를 다음 단계로 끌어올리면 다음과 같이 허브 및 스포크 토폴로지가 있는 토폴로지라고 상상할 수 있습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/09caed38-e9a4-4445-b906-2d4f4bad59b9.png"><img alt="6.VNet-VNet-Peering-Hub&amp;Spoke_thumb[2]" border="0" height="751" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7f1dc5eb-ba14-4ade-896d-6fa7fb2a709a.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;" title="6.VNet-VNet-Peering-Hub&amp; Spoke_thumb[2]" width="1090"></a></p>


  <p>피어링은 전이적이지 않으므로 HR VNet은 마케팅 VNet과 <u>직접</u> 통신할 수 없지만, HR, 마케팅 및 엔지니어링 세 가지 모두 도메인 컨트롤러, 모니터링 시스템, 방화벽 또는 기타 NVA(네트워크 가상 어플라이언스)와 같은 공유 리소스를 포함하는 허브 VNet과 통신할 수 있습니다. 스포크 VNet 내의 서브넷에 적용된 사용자 정의 경로와 중앙 집중식 허브 VNet에 배포된 NVA의 조합을 사용하면 피어된 모든 VNet 간의 통신을 달성하거나 실제로 필요한 VNet으로 통신을 제한할 수 있습니다.</p>


  <p>그러나 VPN의 경우와 마찬가지로 어떤 이유로 각 VNet이 서로 통신할 수 있어야 하는 경우 이와 유사한 토폴로지를 만들 수도 있습니다. 명확성을 위해 완전히 메시되지는 않지만(이 경우 HR VNet은 엔지니어링 VNet과 직접 통신할 수 없음) 다음과 같은 아이디어를 얻을 수 있습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7ae59b8f-eb8d-49c6-9206-2b16ed2b6d08.png"><img alt="7.VNet-VNet-Peering-Hub&amp;Spoke-Full-Mesh_thumb[2]" border="0" height="758" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/19c35168-e942-420a-be12-070170577522.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;" title="7.VNet-VNet-Peering-HubSpoke-full-Mesh_thumb&amp;[2]" width="1088"></a></p>


  <p>VNet 피어링을 사용하는 경우 공유할 수 있는 유용한 리소스 중 하나는 VPN 및 ExpressRoute 게이트웨이 모두 게이트웨이입니다. 다음과 같이 표시됩니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/fedb8d27-fec1-4ee3-abf5-f021d6521a6d.png"><img alt="8.VNet-VNet-Peering-VNet Transit_thumb[2]" border="0" height="358" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/905564d0-eb0e-41e0-9872-a4f67fa74f6d.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;" title="8.VNet-VNet-Peering-VNet Transit_thumb[2]" width="1087"></a></p>


  <p>이렇게 하면 모든 스포크 VNet에 ExpressRoute 또는 VPN Gateway를 배포할 필요가 없지만 보안 스탬프 및 게이트웨이 액세스를 허브 Vnet에 중앙 집중화할 수 있습니다.</p>


  <p>이 모든 개념을 함께 넣어 나올 때 다음 게시물을 확인하시기 바랍니다!</p>
