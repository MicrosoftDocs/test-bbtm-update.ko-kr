### YamlMime:Yaml
ms.openlocfilehash: 4d8f847ecd6875affb4af09a21f8fb4e1ab14a2e
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139907824"
Slug: disaster-recovery-for-sap-hana-systems-on-azure
Title: Azure의 SAP HANA Systems 재해 복구
Summary: Microsoft Azure 클라우드의 SAP 솔루션을 사용하여 엔터프라이즈 지원 혁신에 대한 신뢰할 수 있는 경로를 제공합니다. SAP와 같은 중요 업무용 애플리케이션은 고객의 SAP 환경을 실행하기 위한 하이퍼스케일, 민첩성 및 비용 절감을 제공하는 엔터프라이즈 검증된 플랫폼인 Azure에서 안정적으로 실행됩니다.
Content: >-
  <p>이 블로그에서는 SAP S/4HANA 환경을 사용하여 RPO(클래스 복구 지점 목표) 및 RTO(복구 시간 목표)에서 최상의 성과를 달성하기 위해 엔터프라이즈 고객을 위한 DR(재해 복구)을 설정하기 위한 디자인, 기술 및 권장 사항을 다룹니다. 이 게시물은 Cognizants&rsquo; SAP Cloud Practice의 글로벌 책임자인 <a href="https://www.linkedin.com/in/sivakumarvaradananjayan/" target="_blank">시바쿠마르 바라다난자얀(Sivakumar Varadananjayan</a>)이 공동 저술했습니다.</p>


  <p>Microsoft Azure 클라우드의 SAP 솔루션을 사용하여 엔터프라이즈 지원 혁신에 대한 신뢰할 수 있는 경로를 제공합니다. SAP와 같은 중요 업무용 애플리케이션은 고객&rsquo; SAP 환경을 실행하기 위한 하이퍼스케일, 민첩성 및 비용 절감을 제공하는 엔터프라이즈 검증된 플랫폼인 Azure에서 안정적으로 실행됩니다.</p>


  <p>시스템 가용성 및 재해 복구는 Azure에서 중요 업무용 SAP 애플리케이션을 실행하는 고객에게 매우 중요합니다.</p>


  <p>RTO 및 RPO는 예기치 않은 이벤트로 인해 비즈니스 연속성을 유지할 수 있는 적절한 재해 복구 계획을 개발하기 위해 조직에서 고려하는 두 가지 주요 메트릭입니다.&nbsp; 복구 지점 목표는 시간&rdquo; 측면에서 &ldquo;위험에 처한 데이터의 양을 참조하는 반면 복구 시간 목표는 재해가 발생한 후 시스템이 다운될 수 있는 시간 또는 최대 허용되는 시간을 나타냅니다.</p>


  <p>아래 다이어그램에서는 일반적인 BAU(비즈니스) 시나리오의 타임라인 보기에서 RPO 및 RTO를 볼 수 있습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/33f434cf-4d38-4484-aea1-a4d820a1aaec.png"><img alt="A timeline of RPO and RTO on a BAU secnario." border="0" height="79" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/8450add3-2b75-4e38-ae32-c08f8848fd82.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="BAU secnario의 RPO 및 RTO 타임라인입니다." width="1000"></a></p>


  <p>Orica는 광산, 채석장, 석유 및 가스 및 건설 시장에 상업용 폭발물과 혁신적인 발파 시스템을 제공하는 세계 최대&#39;업체입니다. 그들은 또한 금 추출을위한 시안화 나트륨의 선도적 인 공급 업체이며 광산 및 터널링에서 지상 지원 서비스의 전문 공급 업체입니다.</p>


  <p>Oricas&rsquo; 디지털 변환 과정의 일환으로 Cognizant는 신뢰할 수 있는 기술 고문 및 관리형 클라우드 플랫폼 공급자로 선정되어 sap S/4HANA 및 Microsoft Azure 다른 SAP 애플리케이션을 위한 고가용성, 확장성 있는 재해 방지 IT 플랫폼을 구축했습니다.</p>


  <p>이 블로그에서는 Cognizant가 SAP S/4HANA를 디지털 코어로 사용하는 디지털 변환 프로그램의 일환으로 Orica에 대한 재해 복구 솔루션을 구축하는 데 어떻게 어려움을 겪었는지 설명합니다. 이 블로그에는 지난 2년 동안 Cognizant 및 Orica의 Azure 아키텍처 디자인 고려 사항에 대한 SAP가 포함되어 있으며, 이로 인해 RTO가 4시간으로 감소했습니다. 이는 자동화와 함께 Azure에서 사용할 수 있는 최신 기술 기능을 배포하여 달성됩니다. RTO&rsquo;의 감소와 함께 SAP HANA 시스템 복제 및 Azure Site Recovery와 같은 데이터베이스 관련 기술을 사용하여 RPO를 5분 미만으로 줄입니다.</p>


  <h2>재해 복구 시스템에 대한 설계 원칙</h2>


  <ul>
      <li>SAP HANA &ndash; 용 SAP 인증 VM을 기반으로 하는 DR 지역 선택 DR 지역에서 SAP Certified VM 유형의 가용성을 확인하는 것이 중요합니다.</li>
      <li>RPO 및 RTO 값 &ndash; 비즈니스는 재해 복구를 위한 아키텍처 및 재해 복구를 구현하는 데 필요한 도구 및 자동화 요구 사항에 크게 영향을 미치는 RPO 및 RTO 값에 대한 명확한 기대치를 마련해야 합니다.</li>
      <li>DR, 유지 관리 및 DR 드릴 구현 비용 <ul style="margin-left: 40px;">
          <li>시스템의 &ndash; 중요도 DR 구현 비용과 비즈니스 요구 사항 간에 장차를 설정할 수 있습니다. 대부분의 중요 시스템은 최신 DR 아키텍처를 활용할 수 있지만 중형 및 덜 중요한 시스템은 더 높은 RPO/RTO 값을 사용할 수 있습니다.</li>
          <li>DR 인스턴스의 주문형 크기 조정에서는 DR 인스턴스 &ndash; 에 작은 크기의 VM을 사용하고 활성 DR 시나리오 중에 크기를 조정하는 것이 좋습니다. VM을 스케일 업스케일할 대기&rdquo; 시간이 없&ldquo;도록 DR 지역에서 필요한 VM 용량을 예약할 수도 있습니다. Microsoft는 미리 가상 머신을 예약하고 최대 80%를 절약할 수 있는 예약 인스턴스를 제공합니다. 필요한 RTO 값에 따라 더 작은 VM과 Azure RI를 실행하는 사이에 절충이 필요합니다. <em>&nbsp;Reserved Instance는 용량 요청에 대한 우선 순위를 제공하지만 DR 요청 시 용량을 완전히 사용할 수 있도록 보장하지는 않습니다&rsquo;. 비용 고려 사항과 비즈니스 연속성 목표에서 이 사항을 고려해 두는 것이 좋습니다.</em></li>
          <li>클라우드 인프라 비용에 대한 추가 고려 사항, 비중단적 DR 테스트를 위한 환경 설정 노력. 비중단적 DR 테스트는 실제 생산 시스템을 DR 시스템으로 장애 조치(failover)하지 않고 DR 테스트를 실행하여 비즈니스 가동 중지 시간을 방지하는 것을 의미합니다. 여기에는 DR 테스트 중에 완전히 격리된 vNet에 있는 임시 인프라를 설정하기 위한 추가 비용이 포함됩니다.&nbsp;</li>
          <li>Azure Site Recovery를 사용하여 복제하는 것이 권장되지 않는 NFS(클러스터형 네트워크 파일 시스템)와 같은 SAP 시스템 아키텍처의 특정 구성 요소는 SUSE 지역 클러스터 또는 NFS 계층 DR용 SIOS Data Keeper와 같은 라이선스 비용이 있는 추가 도구가 필요합니다.</li>
      </ul>
      </li>
      <li>Azure에서 지역 &ndash; 전체의 가상 머신을 복제하는 ASR(Azure Site Recovery)&rdquo;을 제공하는 &ldquo;반면, 이 기술은 데이터베이스의 일관성을 보장하기 위해 데이터베이스 계층에서 SAP HANA 시스템 복제(HSR)와 같은 데이터베이스 특정 메서드를 사용하는 동안 비 데이터베이스 구성 요소 또는 시스템 계층에서 사용됩니다.</li>
  </ul>


  <h2>SAP HANA 데이터베이스에서 실행되는 SAP 시스템의 재해 복구 아키텍처</h2>


  <p>매우 높은 수준에서 아래 다이어그램은 SAP HANA를 기반으로 하는 SAP 시스템의 아키텍처와 로컬 또는 지역 오류 발생 시 사용할 수 있는 시스템을 보여 줍니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/b4541c7d-0c90-4d88-ad99-186541b4d2b0.png"><img alt="An architecture diagram of SAP systems based on SAP HANA and which systems will be available in case of local or regional failures." border="0" height="654" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/4f0a13eb-c3fd-4b12-9a80-2021bc9baa73.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="SAP HANA를 기반으로 하는 SAP 시스템의 아키텍처 다이어그램 및 로컬 또는 지역 오류 발생 시 사용할 수 있는 시스템입니다." width="1000"></a></p>


  <p>아래 다이어그램에서는 재해 복구를 달성하는 데 사용되는 SAP HANA 시스템 구성 요소 및 해당 기술에 대한 다음 수준의 세부 정보를 제공합니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/c08c3702-90e1-48d2-83ce-e6e2176b73e0.png"><img alt="A more detailed diagram of SAP HANA systems components and corresponding technology used for achieving disaster recovery." border="0" height="529" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/0e3a682f-d1d0-4f85-b30e-9b07557c8777.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="재해 복구를 달성하는 데 사용되는 SAP HANA 시스템 구성 요소 및 해당 기술의 보다 자세한 다이어그램." width="1000"></a></p>


  <h2>데이터베이스 계층</h2>


  <p>데이터베이스 계층에서 SAP HANA 시스템 복제(HSR)와 같은 데이터베이스별 복제 방법이 사용됩니다. 데이터베이스별 복제 방법을 사용하면 다양한 복제 특정 매개 변수를 구성하여 RPO 값을 더 잘 제어할 수 있으며 DR 사이트에서 데이터베이스의 일관성을 제공합니다. 백업 및 복원과 같은 데이터베이스(DB) 계층에서 재해 복구를 달성하는 대체 방법을 사용할 수 있으며 복구 또는 스토리지 기본 복제를 사용할 수 있지만 RTO 값이 높아집니다.</p>


  <p>SAP HANA 데이터베이스의 RPO 값은 복제 방법론(고가용성의 경우 동기 또는 DR 복제의 경우 비동기), 백업 빈도, 백업 데이터 보존 정책, 저장점 및 복제 구성 매개 변수를 포함한 요인에 따라 달라집니다.</p>


  <p>SAP Solution Manager를 사용하여 복제 상태가 모니터링되므로 복제에 영향을 주는 경우 전자 메일 경고가 트리거됩니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/79ff0723-363d-407e-9f46-ef59e25c0dc4.png"><img alt="A diagram showing disaster recovery architecture at the HANA database level, HANA system replication (HSR) is used for local availability as well as disaster recovery." src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/e89deed8-6b7f-4287-aff3-0fe01bbff87d.png" style="border: 0px currentcolor; margin-right: auto; margin-left: auto; display: block; background-image: none; width: 1000px; height: 488px;" title="블로그 이미지"></a></p>


  <p>SAP HANA 2.0 SP 3, 수정 버전 33을 기준으로 다중 노드 복제를 사용할 수 있지만, 이 시나리오는 고가용성 클러스터와 함께 테스트되지 않습니다. 다중 대상 복제를 성공적으로 구현하면 DR 유지 관리 프로세스가 더 간단해지고 기본 사이트의 장애 조치 시나리오로 인해 수동 개입이 필요하지 않습니다.</p>


  <h2>애플리케이션 계층 &ndash; (A)SCS, APP, iSCSI</h2>


  <p>Azure Site Recovery는 (A)SCS, 애플리케이션 서버 및 Linux 클러스터 펜싱 에이전트(아래 설명된 NFS 계층 제외)와 같은 ISCSI와 같은 SAP 시스템 아키텍처의 비 데이터베이스 구성 요소 복제에 사용됩니다. Azure Site Recovery는 기본 사이트에서 VM(가상 머신)에서 실행되는 워크로드를 스토리지 계층의 보조 위치로 복제하며 VM이 실행 중 상태일 필요가 없으며 실제 재해 시나리오 또는 DR 훈련 중에 VM을 시작할 수 있습니다.</p>


  <p>Azure에서 Pacemaker 클러스터를 설정하는 두 가지 옵션이 있습니다. Azure API를 통해 실패한 노드를 다시 시작하는 펜싱 에이전트를 사용하거나 SBD(스토리지 기반 사망) 디바이스를 사용할 수 있습니다. SBD 디바이스에는 iSCSI 대상 서버 역할을 하고 SBD 디바이스를 제공하는 추가 가상 머신이 하나 이상 필요합니다. 그러나 이러한 iSCSI 대상 서버는 다른 Pacemaker 클러스터와 공유할 수 있습니다. SBD 디바이스를 사용할 경우의 이점은 더 빠른 장애 조치(failover) 시간입니다.</p>


  <p>아래 다이어그램에서는 애플리케이션 계층의 재해 복구에 대해 설명합니다. (A)SCS, 앱 서버 및 iSCSI 서버는 동일한 아키텍처를 사용하여 Azure Site Recovery를 사용하여 DR 지역 간에 데이터를 복제합니다.&nbsp;</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/91af9f32-e937-40c7-a777-994e7c9c7b24.png"><img alt="A diagram showing disaster recovery at the application layer, (A)SCS, App servers, and iSCSI servers use the same architecture to replicate the data across DR region using Azure Site Recovery." border="0" height="462" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/48dbfe84-a3c5-46a5-8a90-0f20f13a096a.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="애플리케이션 계층(A)SCS, 앱 서버 및 iSCSI 서버에서 재해 복구를 보여 주는 다이어그램은 동일한 아키텍처를 사용하여 Azure Site Recovery를 사용하여 DR 지역 간에 데이터를 복제합니다." width="1000"></a></p>


  <p>기본 사이트의 NFS 계층 &ndash; NFS 계층은 고가용성 복제를 위해 DRBD(분산 복제 블록 디바이스)가 있는 클러스터를 사용합니다. NFS 계층에서 DR을 구현하기 위한 여러 기술을 평가했습니다. DRBD 및 Site Recovery 구성은 호환되지 않으므로 SUSE 지역 클러스터, SIOS 데이터 키퍼 또는 간단한 VM 스냅샷 백업 및 복원과 같은 솔루션은 NFS 계층 DR을 달성하는 데 사용할 수 있습니다. DRBD는 디스크 복제를 사용하여 NFS 계층에서 고가용성을 사용하도록 설정하므로 Site Recovery 복제는 지원되지 않습니다. DRBD를 사용하는 경우 NFS 계층용 DR을 달성하는 비용 효율적인 솔루션은 VM 스냅샷 백업을 사용하여 간단한 백업/복원을 사용하는 것입니다.</p>


  <h2>DR 또는 DR 드릴을 호출하는 단계</h2>


  <p>Microsoft Azure Site Recovery 기술은 DR 지역에서 데이터를 더 빠르게 복제하는 데 도움이 됩니다. Site Recovery를 사용하거나 구성하지 않는 DR 구현에서는 약 5개의 시스템을 복구하는 데 24시간 이상이 걸리며 결국 RTO는 24시간 이상 발생합니다. 그러나 DB 계층에서 데이터베이스별 복제 방법을 사용하여 애플리케이션 계층에서 Site Recovery를 사용하는 경우 동일한 수의 시스템에 대해 RTO 값을 4시간 미만으로 줄일 수 있습니다. 아래 다이어그램에서는 4시간 RTO 값으로 재해 복구를 활성화하는 단계가 포함된 타임라인 보기를 설명합니다.</p>


  <p>DR 또는 DR 드릴을 호출하는 단계:</p>


  <ul>
      <li>새 IP 주소를 사용하기 위한 VM의 DNS 변경 내용</li>
      <li>ASR 복제 데이터에서 iSCSI &ndash; 단일 VM 가져오기</li>
      <li>데이터베이스 복구 및 필요한 용량으로 VM 크기 조정</li>
      <li>스냅샷 백업을 사용하여 NFS &ndash; 단일 VM 수동 프로비전</li>
      <li>ASR 복제 데이터에서 애플리케이션 계층 VM 빌드</li>
      <li>클러스터 변경 수행</li>
      <li>애플리케이션 가져오기</li>
      <li>애플리케이션 유효성 검사</li>
      <li>릴리스 시스템</li>
  </ul>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3ae27bdf-e53a-47bc-abfe-2df2a2802875.png"><img alt="A screenshot of an example DR drill plan." border="0" height="329" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/69f95d59-3f08-4660-a41d-77b47f97d6b4.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="예제 DR 드릴 계획의 스크린샷." width="1000"></a></p>


  <h2>무중단 DR 드릴에 대한 권장 사항</h2>


  <p>일부 기업은 DR 훈련 중에 가동 중지 시간을 감당할 수 없습니다. DR을 수행하기 위해 가동 중지 시간을 정렬할 수 없는 경우 비중단적 DR 훈련이 제안됩니다. 추가 DR VNet을 만들고, 네트워크에서 격리하고, 아래 단계를 사용하여 DR 드릴을 수행하여 비중단 DR 절차를 수행할 수 있습니다.</p>


  <p>필수 조건으로 격리된 VNet에서 SAP HANA 데이터베이스 서버를 빌드하고 SAP HANA 시스템 복제를 구성합니다.</p>


  <ol>
      <li>EXPRESS 경로 연결이 끊어짐에 따라 DR 지역으로의 Express 경로 회로 연결이 끊어짐에 따라 주 지역에서 시스템의 갑작스러운 사용 불가를 시뮬레이션합니다.</li>
      <li>필수 구성 요소로서 백업 도메인 컨트롤러는 빠른 경로 연결이 끊어질 때까지 주 도메인 컨트롤러와 함께 활성 및 복제 모드여야 합니다.</li>
      <li>DNS 서버는 격리된 DR VNet(비중단 DR 드릴용으로 만든 추가 DR VNet)으로 구성하고 빠른 경로 연결 끊김 시간까지 대기 모드로 유지되어야 합니다.</li>
      <li>DR 테스트를 위해 관리자 및 주요 사용자를 위한 지점 및 사이트별 VPN 터널 설정</li>
      <li>DR VNet이 전체 네트워크에서 격리되도록 NSG를 수동으로 업데이트합니다.</li>
      <li>DR 지역에서 DR 사용 프로시저를 사용하여 애플리케이션 가져오기</li>
      <li>테스트가 완료되면 NSG, Express 경로 및 DR 복제를 다시 구성합니다.</li>
  </ol>


  <p>DR 테스트 중에는 관련 인프라 및 SAP 주제 전문가의 참여를 적극 권장합니다.</p>


  <p>비중단 DR 프로시저는 비프로덕션 시스템에서 사전 유효성 검사 및 테스트에 매우 주의하여 실행해야 합니다. DR 지역의 데이터베이스 VM 용량은 데이터베이스 VM 크기를 조정하는 데 필요한 용량을 할당하기 위해 전체 용량 예약과 Microsofts&rsquo; 타임라인 간의 절충으로 결정되어야 합니다.</p>


  <h2>다음 단계</h2>


  <p>SAP용 최적의 Azure 인프라 설계에 대한 자세한 내용은 다음 리소스를 참조하세요.</p>


  <ul>
      <li>
      <p><a href="https://azure.microsoft.com/en-us/blog/sap-on-azure-architecture-designing-for-security/" target="_blank">Azure의 SAP - 보안을 위한 디자인</a></p>
      </li>
      <li>
      <p><a href="https://azure.microsoft.com/en-us/blog/sap-on-azure-architecture-designing-for-performance-and-scalability/" target="_blank">Azure의 SAP - 성능 및 확장성을 위한 디자인</a></p>
      </li>
      <li>
      <p><a href="https://azure.microsoft.com/en-us/blog/sap-on-azure-designing-for-availability-and-recoverability/" target="_blank">Azure의 SAP - 가용성 및 복구 가능성을 위한 디자인</a></p>
      </li>
      <li>
      <p><a href="https://azure.microsoft.com/en-us/blog/sap-on-azure-designing-for-efficiency-operations/" target="_blank">Azure의 SAP - 효율성 및 운영을 위한 디자인</a></p>
      </li>
  </ul>
