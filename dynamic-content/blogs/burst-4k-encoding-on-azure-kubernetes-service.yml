### YamlMime:Yaml
ms.openlocfilehash: a4c38f6700f83e88d71b08c6932c34db97294edf
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139907266"
Slug: burst-4k-encoding-on-azure-kubernetes-service
Title: Azure Kubernetes Service에서 버스트 4K 인코딩
Summary: 콘텐츠 만들기는 현재처럼 수요가 있는 적이 없습니다. 지난 몇 년 동안 전문 콘텐츠와 사용자 생성 콘텐츠가 모두 기하급수적으로 증가했습니다.
Content: >-
  <h2>Azure 및 Media Excel HERO 플랫폼을 사용하여 클라우드에서 인코딩을 버스트합니다.</h2>


  <p>콘텐츠 만들기는 현재처럼 수요가 있는 적이 없습니다. 지난 몇 년 동안 전문 콘텐츠와 사용자 생성 콘텐츠가 모두 기하급수적으로 증가했습니다. 따라서 미디어 인코딩 및 트랜스코딩 플랫폼에 많은 스트레스를 가합니다. 예정된 4K 및 심지어 8K를 혼합에 추가하면 이러한 변수로 크기를 조정할 수 있는 플랫폼이 필요합니다. Azure Cloud 컴퓨팅은 필요에 따라 확장할 수 있는 유연한 방법을 제공합니다. Microsoft는 온-프레미스, 하이브리드 또는 네이티브 클라우드 워크로드를 완벽하게 지원하는 다양한 도구와 제품을 제공합니다. <a href="https://azure.microsoft.com/en-us/overview/azure-stack/" target="_blank">Azure Stack</a> 은 컴퓨팅 요구 사항에 대한 하이브리드 시나리오를 지원하며 <a href="https://azure.microsoft.com/en-us/services/azure-arc/" target="_blank">Azure ARC</a> 는 하이브리드 설정을 관리하는 데 도움이 됩니다.</p>


  <h2>솔루션 찾기</h2>


  <p>일반적으로 4K/UHD 라이브 인코딩은 Azure와 같은 퍼블릭 클라우드에서 호스트할 수 없는 전용 하드웨어 인코더 단위에서 수행됩니다. 온-프레미스로 4K를 푸시해야 하는 온-프레미스에서 호스팅되는 전용 하드웨어 단위를 사용하면 인코더 단위 온-프레미스와 Azure 데이터 센터 간의 높은 대역폭 네트워크 연결이 필요합니다. 일반적으로 여러 지역으로 수집하여 인코더와 Azure Datacenter 간에 연결된 네트워크의 부하를 늘리는 것이&#39;.</p>


  <p>퍼블릭 클라우드에 4K 콘텐츠를 안정적으로 수집하려면 어떻게 해야 할까요?</p>


  <p>또는 클라우드의 콘텐츠를 인코딩할 수 있습니다. Azure에서 4K/UHD 라이브 인코딩을 실행할 수 있는 경우 충분한 대역폭과 안정성을 제공하는 Azure 내 네트워크 백본을 통해 출력을 Azure Media Services 수집할 수 있습니다.</p>


  <p>Azure 클라우드에서 4K/UHD 라이브 인코딩을 컨테이너화된 솔루션으로 안정적으로 실행하고 확장하려면 어떻게 해야 할까요? 아래에서&#39;살펴보겠습니다.&nbsp;</p>


  <h2>Azure Kubernetes Service</h2>


  <p><a href="https://azure.microsoft.com/en-us/services/kubernetes-service/" target="_blank">AKS(Azure Kubernetes Services)</a>를 통해 Microsoft는 고객에게 관리되는 Kubernetes 플랫폼을 제공합니다. 클러스터 노드의 네트워킹, 클러스터 마스터 및 OS 패치와 같은 모든 필요한 구성 부담으로 클러스터를 만드는 데 많은 시간을 할애하지 않고도 호스트된 Kubernetes 플랫폼입니다. 또한 미리 구성된 모니터링이 Azure Monitor 및 Log Analytics와 원활하게 통합됩니다. 물론 사용자 고유의 도구를 통합할 수 있는 유연성을 제공합니다. 또한 여전히 일반 바닐라 Kubernetes이므로 다른 표준 Kubernetes 플랫폼에서 실행했을 수 있는 기존 도구와 완전히 호환됩니다.</p>


  <h2>미디어 Excel 인코딩</h2>


  <p><a href="https://www.mediaexcel.com/" target="_blank">미디어 Excel</a> 물리적 어플라이언스 및 소프트웨어 기반 인코딩 솔루션을 제공하는 인코딩 및 코드 변환 공급업체입니다. 미디어 Excel 수년 동안 Microsoft와 파트너십을 맺고 Azure 미디어 고객 프로젝트에 참여해 왔습니다. 또한 fMP4에 <a href="https://docs.microsoft.com/en-us/azure/media-services/latest/recommended-on-premises-live-encoders#live-encoders-that-output-fragmented-mp4" target="_blank">대한 Azure Media Services 권장 및 테스트된 기여 인코더</a>로 나열됩니다. Media Excel 및 Microsoft에서 Media Excel 인코더의 SCTE-35 시간 제한 메타데이터를 Server-Side AD Insertion(SSAI) 워크플로를 지원하는 Azure Media Services Origin에 통합하는 작업도 있습니다.</p>


  <h2>네트워킹 과제</h2>


  <p>4K 및 8K와 같은 화질이 증가함에 따라 컴퓨팅 및 네트워킹에 대한 부담은 중요한 설계 과제가 됩니다. 최근 고객과의 계약에서는 고객 프레미스에서 Azure Datacenters 중 하나로 제한된 대역폭 용량이 필요한 4K 라이브 스트리밍 플랫폼을 설계해야 했습니다. 미디어 Excel 협력하여 AKS에서 확장 가능한 컨테이너화된 인코딩 플랫폼을 빌드했습니다. 클라우드 컴퓨팅을 활용하고 인코더와 Azure Media Services Packager 간의 네트워크 대기 시간을 최소화합니다. 동일한 원본의 4Kp60@20Mbps 최상위 비트 전송률이 있는 여러 비트 전송률이 클라우드에서 생성되고 추가 처리를 위해 Azure Media Services 플랫폼에 수집됩니다. 여기에는 동적 암호화 및 패키징이 포함됩니다. 이 설정을 사용하면 다음과 같은 이점이 있습니다.</p>


  <ul>
      <li>여러 AKS 노드로 즉시 확장</li>
      <li>고객과 Azure Datacenter 간의 네트워크 제약 조건 제거</li>
      <li>컨테이너에 대한 자동화된 워크플로 및 컨테이너 기술과의 손쉬운 분리</li>
      <li>배포할 고품질 생성 콘텐츠의 보안 수준 향상</li>
      <li>중복성이 높은 기능</li>
      <li>최적화된 미디어 워크로드에 다양한 유형의 노드 풀을 제공하는 유연성</li>
  </ul>


  <p>이 특정 테스트에서는 Azure 내 네트워크가 서유럽에서 실행되는 컨테이너화된 인코더 인스턴스에서 미국 동부 및 Honk Kong 데이터 센터 지역 모두에 <a href="https://azure.microsoft.com/en-us/global-infrastructure/global-network/" target="_blank">높은 대역폭, 대기 시간에 민감한 4K 패킷을 배송할 수</a> 있음을 입증했습니다. 이를 통해 고객은 추가 콘텐츠 컨디셔닝을 위해 원본을 더 가깝게 배치할 수 있습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/4e493aa8-a772-4b92-b75b-090cc6603dd0.png"><img alt="High-level Architecture of used Azure components for 4K encoding in the Azure cloud." border="0" height="516" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/269c55c6-561a-4a8d-b139-94c77409e400.png" style="border: 0px currentcolor; margin-right: auto; margin-left: auto; display: block; background-image: none;" title="아키텍처 Flow 다이어그램" width="980"></a></p>


  <p>워크플로:</p>


  <ol>
      <li>Azure Pipeline은 AKS 클러스터에 배포하도록 트리거됩니다. <a href="https://github.com/fvneerden/mexl-aks" target="_blank">YAML 파일(Github에서 찾을 수 있음)</a>에는 Azure Container Registry의 Media Excel Container에 대한 참조가 있습니다.</li>
      <li>AKS는 배포를 시작하고 Azure Container Registry에서 컨테이너를 가져옵니다.</li>
      <li>컨테이너 시작 중에 사용자 지정 PHP 스크립트가 로드되고 컨테이너가 HMS(Hero Management Service)에 추가됩니다. 그리고 올바른 디바이스 풀 및 작업에 배치됩니다.</li>
      <li>인코더는 원본을 로드하고(이 경우) 4K Livestream을 Azure Media Services 푸시합니다.</li>
      <li>패키지된 Livestream을 여러 형식으로 Media Services DRM(디지털 권한 관리)을 적용합니다.</li>
      <li>Azure Content Deliver Network는 라이브 스트림을 확장합니다.</li>
  </ol>


  <h2>Azure Container Instances를 통해 크기 조정</h2>


  <p>Azure Kubernetes Services를 사용하면 <a href="https://azure.microsoft.com/en-us/services/container-instances/" target="_blank">Azure Container Instances의 기능을</a> 기본으로 사용할 수 있습니다. Azure Container Instances는 미리 프로비전된 컴퓨팅 성능으로 즉시 확장할 수 있는 방법입니다. AKS에 Media Excel 인코딩 인스턴스를 배포할 때 이러한 인스턴스를 만들 위치를 지정할 수 있습니다. 이렇게 하면 낮은 비용의 낮은 우선 순위 인코딩 작업을 위해 저렴한 노드의 밀도 증가 또는 높은 처리량 높은 우선 순위 작업을 위한 더 비싼 노드와 같은 변수를 유연하게 사용할 수 있습니다. Azure Container Instances를 사용하면 프로비전 시간 없이 워크로드를 대기 컴퓨팅 성능으로 즉시 이동할 수 있습니다. 고객 수요와 플랫폼 요구의 향후 변화에 대한 완전한 유연성을 제공하는 컴퓨팅 시간에 대해서만 비용을 지불합니다. Media Excel&rsquo; 유연한 라이브/파일 기반 인코딩 역할을 사용하면 AKS 및 Azure Container Instances에서 제공하는 다양한 컴퓨팅 성능에서 워크로드를 쉽게 이동할 수 있습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/95bb16ae-08c5-422e-8b3f-088d6f526b5c.png"><img alt="Container Creating on Azure Kubernetes Services (AKS)" border="0" height="156" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/945c840d-49af-4411-9091-caf347f1aaef.png" style="border: 0px currentcolor; margin-right: auto; margin-left: auto; display: block; background-image: none;" title="kubectl 컨테이너 오케스트레이션" width="822"></a></p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/a994657d-97c6-4f8f-aed1-13a4cff12218.png"><img alt="Media Excel Hero Management System showing all Container Instances." border="0" height="376" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/942ffd8e-39e3-46a6-b977-d4e4fef7eacb.png" style="border: 0px currentcolor; margin-right: auto; margin-left: auto; display: block; background-image: none;" title="HMS 포털" width="980"></a></p>


  <h2>Azure DevOps 파이프라인을 사용하여 모두 통합</h2>


  <p>컨테이너화된 워크로드와 함께 제공되는 모든 일반적인 이점은 다음 경우에 적용됩니다. 이 특정 개념 증명을 위해 간편한 테스트 및 배포를 위해 <a href="https://azure.microsoft.com/en-us/services/devops/" target="_blank">Azure DevOps</a> 자동화된 배포 파이프라인을 만들었습니다. 배포 YAML 및 파이프라인 YAML을 사용하면 Media Excel 인코딩 컨테이너의 배포, 프로비전 및 크기 조정을 쉽게 자동화할 수 있습니다. DevOps 배포 작업을 AKS에 푸시하면 <a href="https://azure.microsoft.com/en-us/services/container-registry/" target="_blank">컨테이너 이미지가 Azure Container Registry</a>에서 가져옵니다. 컨테이너 이미지는 계층의 노드 쪽 캐싱을 대량으로 활용할 수 있지만 추가 컨테이너 끌어오기는 초 단위로 크게 향상됩니다. Media Excel 지원으로 Media Excel&#39;관리 포털에서 컨테이너를 추가하고 제거하는 YAML 파일 컨테이너 사전 및 사후 컨테이너 수명 주기 논리를 만들었습니다. 이렇게 하면 여러 노드 유형, 클러스터 및 지역에서 여러 인스턴스를 손쉽게 단일 창으로 관리할 수 있습니다.</p>


  <p>이 배포 파이프라인은 특정 다중 테넌트 고객 또는 특정 노드 유형에 대한 작업 우선 순위를 프로비전할 수 있는 완전한 유연성을 제공합니다. 이렇게 하면 최대 처리량을 위해 GPU 사용 노드에서 인코딩 작업을 프로비전하거나 우선 순위가 낮은 작업에 더 저렴한 제네릭 노드를 사용할 수 있습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/bed1ee76-c25e-40bd-8bd5-cce5f829254e.png"><img alt="Deployment Release Pipeline in Azure DevOps." border="0" height="406" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/625e8716-a569-4ab2-870f-a1f8e1344660.png" style="border: 0px currentcolor; margin-right: auto; margin-left: auto; display: block; background-image: none;" title="Azure DevOps 파이프라인" width="980"></a></p>


  <h2>Azure Media Services 및 Azure Content Delivery Network</h2>


  <p>마지막으로 4K 스트림을 <a href="https://azure.microsoft.com/en-us/services/media-services/" target="_blank">Azure Media Services</a> 푸시합니다. Azure Media Services는 브로드캐스트 품질의 비디오 스트리밍을 구현하고, 접근성과 배포를 향상시키며, 콘텐츠를 분석하는 등 여러 작업을 수행하는 솔루션을 빌드할 수 있게 하는 클라우드 기반 플랫폼입니다. 앱 개발자, 콜 센터, 정부 기관 또는 엔터테인먼트 회사가&#39;Media Services 오늘날 가장 인기 있는 모바일 장치 및 브라우저에서&rsquo; 대규모 대상에게 뛰어난 품질의 미디어 환경을 제공하는 앱을 만드는 데 도움이 됩니다.</p>


  <p>Azure Media Services Azure Content Delivery Network 원활하게 통합됩니다. Azure Content Delivery Network Microsoft의 Azure Content Delivery Network, Verizon의 Azure Content Delivery Network 및 Azure Content Delivery Network 선택할 수 있는 <a href="https://azure.microsoft.com/en-us/services/cdn/" target="_blank">진정한 다중 CDN 제공합니다</a>.  Akamai에서 간편한 프로비저닝 및 관리를 위해 단일 Azure Content Delivery Network API를 통해 이 모든 것을 수행합니다. 추가 혜택으로 Azure Media Services Origin과 CDN Edge 간의 모든 CDN 트래픽은 무료입니다.</p>


  <p>이 설정을 통해 Weve&rsquo;는 클라우드 인코딩이 여러 클러스터에서 실시간 4K 인코딩을 처리할 준비가 되었음을 보여 줍니다. AKS, Container Registry, Azure DevOps, Media Services 및 Azure Content Delivery Network 같은 Azure 서비스 덕분에 높은 처리량 시간에 민감한 제약 조건을 충족할 수 있는 아키텍처를 만드는 것이 얼마나 쉬운지 보여 줍니다.</p>
