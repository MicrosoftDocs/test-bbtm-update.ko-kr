### YamlMime:Yaml
ms.openlocfilehash: 1f24f7a80de41cfb2fac5ca6659cea1e79052acb
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139907127"
Slug: manage-azure-monitor-using-java
Title: Java를 사용하여 Azure Monitor 관리
Summary: Azure Monitor는 클라우드 및 온-프레미스 환경에서 원격 분석을 수집, 분석 및 작동하기 위한 엔드 투 엔드 모니터링 솔루션을 제공하여 애플리케이션의 가용성과 성능을 최대화합니다.
Content: "<p>Azure Monitor는 클라우드 및 온-프레미스 환경에서 원격 분석을 수집, 분석 및 작동하기 위한 엔드 투 엔드 모니터링 솔루션을 제공하여 애플리케이션의 가용성과 성능을 최대화합니다. 애플리케이션을 수행하는 방법과 애플리케이션 및 종속된 리소스에 영향을 주는 문제를 사전에 식별하는 방법을 파악할 수 있습니다. 오늘 Java용 Azure 관리 라이브러리 버전 1.16을 릴리스했습니다. 이제 Java용 Azure 관리 라이브러리를 사용하여 프로그래밍 방식으로 <a href=\"https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/monitoring-overview-metrics\" target=\"_blank\">Azure Monitor</a> 를 관리할 수 있습니다. 특히 다음을 수행할 수 있습니다.</p>\n\n<ul>\n    <li>진단 설정 관리</li>\n    <li>이벤트 허브, Storage 계정 또는 Log Analytics로 로그 및 메트릭 스트리밍</li>\n    <li>쿼리 메트릭</li>\n    <li>메트릭 경고 설정</li>\n    <li>쿼리 활동 로그</li>\n    <li>활동 로그 경고 설정</li>\n    <li>자동 크기 조정 설정</li>\n    <li>고급 분석 수행</li>\n</ul>\n\n<p>&rsquo;바로 시작할 준비가 되면 Java용 Azure 관리 라이브러리 <a href=\"https://github.com/azure/azure-libraries-for-java\" target=\"_blank\">GitHub 리포지토리</a>로 이동합니다.</p>\n\n<h2>시작</h2>\n\n<p>Maven POM 파일에 다음 종속성 조각을 추가하여 1.16 버전의 라이브러리를 사용합니다.</p>\n\n<pre>\n&lt;dependency&gt;\n     &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;\n     &lt;artifactId&gt;azure&lt;/artifactId&gt;\n     &lt;version&gt;1.16.0&lt;/version&gt;\n&lt;/dependency&gt;</pre>\n\n<h2>Event Hub를 통해 Azure 서비스 로그 및 메트릭 스트리밍</h2>\n\n<p><a href=\"https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs\" target=\"_blank\">Azure 진단 로그</a> &ndash; 관리되는 Azure 서비스 및 리소스 &ndash; 의 서비스 및 앱 로그는 Event Hub에 대한 이벤트 허브 및 <a href=\"https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/monitoring-stream-diagnostic-logs-to-event-hubs\" target=\"_blank\">스트리밍 서비스 로그 및 메트릭</a>을 만들어 Elastic Stack, Splunk 또는 Grafana와 같은 원하는 타사 로깅 및 원격 분석 시스템으로 거의 실시간으로 스트리밍할 수 있습니다.</p>\n\n<pre>\nDiagnosticSetting ds = azure.diagnosticSettings()\n     .define(&quot;DiaEventHub&quot;)\n     .withResource(docDb.id())\n     .withEventHub(eventHubAuthRule.id(), &quot;MyEventHub&quot;)\n     .withLog(&quot;DataPlaneRequests&quot;, 0)\n     .withLog(&quot;MongoRequests&quot;, 0)\n     .withMetric(&quot;AllMetrics&quot;, Period.minutes(5), 0)\n     .create();</pre>\n\n<p>전체 <a href=\"https://github.com/Azure-Samples/eventhub-java-manage-event-hub-events\" target=\"_blank\">샘플 코드를</a> 읽어 봅니다.</p>\n\n<h2>쿼리 메트릭</h2>\n\n<p>Azure 리소스에서 내보낸 <a href=\"https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/monitoring-overview-metrics\" target=\"_blank\">메트릭을</a> 통해 Azure Monitor를 사용하면 Azure 서비스 및 Azure에서 실행되는 애플리케이션의 성능 및 상태를 파악할 수 있습니다. Java 코드를 사용하여 Azure 리소스에 대한 메트릭을 쿼리할 수 있습니다. 예를 들면 다음과 같습니다.</p>\n\n<pre>\n// Get metric definitions for storage account\nfor (MetricDefinition metricDefinition : azure.metricDefinitions().listByResource(storageAccount.id())) {\n     // Find metric definition for Transactions\n        if (metricDefinition.name().localizedValue().equalsIgnoreCase(&quot;transactions&quot;)) {\n             // Query metric records\n             MetricCollection metricCollection = metricDefinition.defineQuery()\n                  .startingFrom(recordDateTime.minusDays(7))\n                  .endsBefore(recordDateTime)\n                  .withAggregation(&quot;Average&quot;)\n                  .withInterval(Period.minutes(5))\n                  .withOdataFilter\n                    (&quot;apiName eq &#39;PutBlob&#39; and responseType eq &#39;Success&#39; and geoType eq &#39;Primary&#39;&quot;)\n                  .execute();\n                   &hellip;</pre>\n\n<p>전체 <a href=\"https://github.com/Azure-Samples/monitor-java-query-metrics-activitylogs\" target=\"_blank\">샘플 코드를</a> 읽어 봅니다.</p>\n\n<h2>쿼리 활동 로그</h2>\n\n<p><a href=\"https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/monitoring-overview-activity-logs\" target=\"_blank\">Azure 활동 로그는 Azure</a> 에서 발생하는 구독 수준 이벤트에 대한 인사이트를 제공하는 구독 로그입니다. 이러한 이벤트에는 Azure Resource Manager 운영 데이터에서 서비스 상태 업데이트에 이르는 다양한 데이터가 포함됩니다. 활동 로그를 사용하여 구독의 리소스에 적용된 사용자, 시기 및 변경 내용을 확인할 수 있습니다.</p>\n\n<p>이전 예제와 동일한 기간 동안 활동 로그를 쿼리할 수 있습니다.</p>\n\n<pre>\n// Query activity logs\nPagedList&lt;EventData&gt; logs = azure.activityLogs().defineQuery()\n     .startingFrom(recordDateTime.minusDays(7))\n     .endsBefore(recordDateTime)\n     .withAllPropertiesInResponse()\n     .filterByResource(storageAccount.id())\n     .execute();\n \nfor (EventData event : logs) {\n     ...\n     System.out.println(&quot;\\tCaller: &quot; + event.caller());\n     System.out.println(&quot;\\tCorrelationId: &quot; + event.correlationId());\n     System.out.println(&quot;\\tSubscriptionId: &quot; + event.subscriptionId());\n}</pre>\n\n<p>전체 <a href=\"https://github.com/Azure-Samples/monitor-java-query-metrics-activitylogs\" target=\"_blank\">샘플 코드를</a> 읽어 봅니다.</p>\n\n<h2>메트릭 경고 설정</h2>\n\n<p><a href=\"https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/monitoring-action-groups\" target=\"_blank\">작업 그룹은</a> 사용자가 정의할 수 있는 알림 기본 설정의 컬렉션입니다. 전화 번호를 호출하거나, SMS 메시지를 보내고, 전자 메일을 보내고, 웹 후크를 호출하고, ITSM 도구로 데이터를 보내거나, Azure에서 논리 앱을 호출하거나, Azure 앱에 푸시 알림을 보내도록 알림을 구성할 수 있습니다.</p>\n\n<p>Java 코드를 사용하여 메트릭 경고 조건이 트리거될 때 알림을 받을 작업 그룹을 만들 수 있습니다.</p>\n\n<pre>\nActionGroup ag = azure.actionGroups().define(&quot;criticalPerformanceActionGroup&quot;)\n     .withExistingResourceGroup(rgName)\n     .defineReceiver(&quot;tierOne&quot;)\n         .withPushNotification(&quot;ops_on_duty@performancemonitoring.com&quot;)\n         .withEmail(&quot;ops_on_duty@performancemonitoring.com&quot;)\n         .withSms(&quot;1&quot;, &quot;4255655665&quot;)\n         .withVoice(&quot;1&quot;, &quot;2062066050&quot;)\n         .withWebhook(&quot;https://www.weeneedmorepower.performancemonitoring.com&quot;)\n     .attach()\n     .defineReceiver(&quot;tierTwo&quot;)\n          .withEmail(&quot;ceo@performancemonitoring.com&quot;)\n          .attach()\n     .create();</pre>\n\n<p>그런 다음, 알림을 트리거하기 위한 메트릭 경고를 만듭니다. 예를 들어 Azure App Service에서 웹앱의 성능에 중요한 변경 사항이 있을 때 알림을 트리거하는 메트릭 경고를 만들 수 있습니다.</p>\n\n<pre>\nMetricAlert ma = azure.alertRules().metricAlerts().define(&quot;Critical performance alert&quot;)\n     .withExistingResourceGroup(rgName)\n     .withTargetResource(servicePlan.id())\n     .withPeriod(Period.minutes(5))\n     .withFrequency(Period.minutes(1))\n     .withAlertDetails(3,\n          &quot;Single Resource with Multiple Criteria, Multiple Dimensions and Wildcard&quot;)\n     .withActionGroups(ag.id())\n     .defineAlertCriteria(&quot;Metric1&quot;)\n         .withMetricName(&quot;CPUPercentage&quot;, &quot;Microsoft.Web/serverfarms&quot;)\n         .withCondition(MetricAlertRuleCondition.GREATER_THAN,\n              MetricAlertRuleTimeAggregation.TOTAL, 80)\n         .withDimension(&quot;Instance&quot;, &quot;*&quot;)\n         .attach()\n    \n     .create();</pre>\n\n<p>전체 <a href=\"https://github.com/Azure-Samples/monitor-java-metric-alerts-on-critical-performance\" target=\"_blank\">샘플 코드를</a> 읽어 봅니다.</p>\n\n<h2>활동 로그 경고 설정</h2>\n\n<p>메트릭 경고와 마찬가지로 활동 로그 경고를 통해 구독에서 중요한 이벤트 또는 활동이 발생하는 경우 알림을 감사하고 받을 수 <a href=\"https://aka.ms/activitylogalertdoc\" target=\"_blank\">있습니다</a>. 활동 로그 경고를 만들고 알림을 받을 작업 그룹을 지정할 수 있습니다.</p>\n\n<p>예를 들어 Java 코드를 사용하여 잠재적인 보안 위반에 대한 활동 로그 경고를 설정하여 사용자에게 알림을 보낼 수 있습니다.</p>\n\n<pre>\nActivityLogAlert ala = azure.alertRules().activityLogAlerts().define(&quot;Potential security breach alert&quot;)\n     .withExistingResourceGroup(rgName)\n     .withTargetSubscription(azure.subscriptionId())\n     .withDescription(&quot;Security StorageAccounts ListAccountKeys trigger&quot;)\n     .withRuleEnabled()\n     .withActionGroups(ag.id())\n     // fire an alert when all conditions below are true\n     .withEqualsCondition(&quot;category&quot;, &quot;Security&quot;)\n     .withEqualsCondition(&quot;resourceId&quot;, storageAccount.id())\n     .withEqualsCondition(&quot;operationName&quot;, &quot;Microsoft.Storage/storageAccounts/listkeys/action&quot;)\n     .create();</pre>\n\n<p>전체 <a href=\"https://github.com/Azure-Samples/monitor-java-activitylog-alerts-on-security-breach-or-risk\" target=\"_blank\">샘플 코드를</a> 읽어 봅니다.</p>\n\n<h2>자동 크기 조정 설정</h2>\n\n<p><a href=\"https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/monitoring-overview-autoscale\" target=\"_blank\">자동 크기 조정</a> 을 사용하면 애플리케이션의 부하를 처리하기 위해 적절한 양의 리소스를 실행할 수 있습니다. 이를 통해 인스턴스를 추가하여 부하 증가를 처리하고 유휴 상태인 인스턴스를 제거하여 비용을 절감할 수 있습니다. define() 및 create() 메서드 체인을 사용하여 자동 스케일 아웃 및 스케일 인 규칙의 구성을 정의할 수 있습니다.</p>\n\n<p>예를 들어 Java 코드를 사용하여 App Service에서 웹앱에서 수신한 HTTP 요청 수와 같이 미리 정의된 조건에 따라 인스턴스를 확장하거나 확장하도록 자동 크기 조정을 설정할 수 있습니다.</p>\n\n<pre>\nAutoscaleSetting scaleSettings = azure.autoscaleSettings().define(autoscaleSettingsName)\n     .withRegion(Region.US_SOUTH_CENTRAL)\n     .withExistingResourceGroup(rgName)\n     .withTargetResource(webapp.appServicePlanId())\n     // define default profile\n     .defineAutoscaleProfile(&quot;Default profile&quot;)\n          .withFixedInstanceCount(1)\n          .attach()\n     // defining Monday to Friday profile\n     .defineAutoscaleProfile(&quot;Monday to Friday&quot;)\n          .withMetricBasedScale(1, 2, 1)\n          // create a scale-out rule\n          .defineScaleRule()\n               ...\n               .attach()\n          // create a scale-in rule\n          .defineScaleRule()\n               ...        \n               .attach()\n          // create schedule for auto scale\n          .withRecurrentSchedule(&quot;Pacific Standard Time&quot;, &quot;09:00&quot;,\n               DayOfWeek.MONDAY, DayOfWeek.TUESDAY, DayOfWeek.WEDNESDAY,\n               DayOfWeek.THURSDAY, DayOfWeek.FRIDAY)\n          .attach()\n          // define end time for the &quot;Monday to Friday&quot; profile specified above\n          ...\n     .create();</pre>\n\n<p>전체 <a href=\"https://github.com/Azure-Samples/monitor-java-autoscale-based-on-performance\" target=\"_blank\">샘플 코드를</a> 읽어 봅니다.</p>\n\n<h2>지금 Java를 사용하여 Azure Monitor 관리 시도</h2>\n\n<p>테스트하고, 관리되는 Azure 서비스 및 리소스에서 로그 및 메트릭을 스트리밍하고, 일부 경고를 설정하며, 일부 경고를 로드하고, 이러한 원격 분석 데이터가 성능 및 근본 원인 분석 문제 해결에 어떻게 도움이 되는지 직접 확인합니다. (아래 <a href=\"mailto:java@microsoft.com\" target=\"_blank\">의 전자 메일</a> 또는 의견을 통해) 의견을 알려주세요.</p>\n\n<p><a href=\"https://github.com/azure/azure-libraries-for-java\" target=\"_blank\">GitHub 리포지토리</a>에서 더 많은 샘플을 얻을 수 있습니다.</p>\n\n<h2>추가 리소스</h2>\n\n<ul>\n    <li><a href=\"https://docs.microsoft.com/en-us/java/azure/\" target=\"_blank\">Java 개발자를 위한 Azure</a></li>\n    <li><a href=\"https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/monitoring-activity-log-alerts-new-experience\" target=\"_blank\">Azure Monitor</a></li>\n    <li><a href=\"https://azure.microsoft.com/en-us/develop/java/\" target=\"_blank\">Azure의 Java</a></li>\n</ul>"
