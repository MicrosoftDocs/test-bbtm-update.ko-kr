### YamlMime:Yaml
ms.openlocfilehash: 26ac61d8c338aacb37370074304bcbd5de9d9ef9
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139911998"
Slug: blue-green-deployments-using-azure-traffic-manager
Title: Azure Traffic Manager 사용하여 배포 Blue-Green
Summary: Azure의 DNS 기반 부하 분산 솔루션인 Azure Traffic Manager 글로벌 사용자 기반을 Azure의 엔드포인트로 라우팅하는 등 다양한 사용 사례에 대해 고객이 사용합니다.
Content: >-
  <p><a href="https://azure.microsoft.com/en-us/services/traffic-manager/" target="_blank">azures</a>&rsquo; DNS 기반 부하 분산 솔루션인 Azure Traffic Manager 고객은 글로벌 사용자 기반을 Azure의 엔드포인트로 라우팅하여 가장 빠르고 짧은 대기 시간 환경을 제공하고 중요 업무용 워크로드에 원활한 자동 장애 조치(failover)를 제공하고 온-프레미스에서 클라우드로 마이그레이션하는 등 다양한 사용 사례에 사용됩니다. 고객이 Traffic Manager 활용하는 한 가지 주요 사용 사례는 Traffic Manager <a href="https://docs.microsoft.com/en-us/azure/traffic-manager/traffic-manager-routing-methods#a-name--weightedaweighted-traffic-routing-method" target="_blank">가중 라운드 로빈 라우팅 방법을</a> 사용하여&rsquo; Blue-Green 배포 프로세스를 구현하여 사용자에게 미치는 영향을 최소화하면서 소프트웨어 배포를 더 원활하게 만드는 것입니다. 이 블로그에서는 Traffic Manager 사용하여 Blue-Green 배포를 구현하는 방법을 보여 주지만, 자세히 알아보기 전에 Blue-Green 배포의 의미를 살펴보겠습니다.</p>


  <p>Blue-Green 배포는 배포 중인 새 버전의 문제로 인한 중단의 영향을 줄일 수 있는 소프트웨어 롤아웃 방법입니다. 이렇게 하려면 제한된 사용자 집합에 소프트웨어의 새 버전을 노출하고 모든 사용자가 새 버전을 사용할 때까지 해당 사용자 기반을 점진적으로 확장합니다. 새 버전에서 문제가 발생하는 경우(예: 웹 애플리케이션의 새 버전에서 손상된 인증 워크플로) 모든 사용자가 즉시*를 이전 버전으로 리디렉션할 수 있습니다.&nbsp;</p>


  <p>이를 위해 파란색과 녹색이라는 두 개의 일치하는 가상 환경을 실행합니다. 일반적으로 하나의 환경(파란색)만 모든 사용자 트래픽을 제공하고 다른 환경(녹색)은 존재하지 않거나 유휴 상태입니다. 녹색 환경에 프로덕션을 배포하는 동안 Traffic Manager 사용하여 점점 더 많은 사용자를 Blue에서 Green으로 점진적으로 보내는 동시에 라이브 트래픽으로 녹색 환경을 지속적으로 테스트할 수 있습니다.</p>


  <p>Azure에서 실행되는 워크로드의 경우 이전 코드가 있는 Blue 환경과 새 코드가 있는 녹색 환경을 별도의 <a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-overview" target="_blank">Azure Resource Manager 그룹에</a> 설정하는 것이 좋습니다. 엔드포인트가 외부인 경우 연속 통합 및 배포 도구를 사용하여 두 환경을 관리하고 배포할 수 있습니다. 환경이 준비되면 Azure Portal, PowerShell 또는 CLI를 사용하여 라우팅 방법으로 가중 라운드 로빈을 사용하여 <a href="https://docs.microsoft.com/en-us/azure/traffic-manager/traffic-manager-create-profile" target="_blank">Traffic Manager 프로필을 만들고</a> 이러한 환경에 해당하는 엔드포인트를 추가할 수 있습니다.</p>


  <p>이 예제에서는 가중치가 1,000인 첫 번째 엔드포인트 Blue.contoso.com, 두 번째 엔드포인트는 가중치가 1인 Green.contoso.com 설정합니다.&nbsp; 이렇게 하면 대부분의 트래픽이 Blue 환경으로 이동하고 최소 트래픽만 녹색 환경으로 라우팅됩니다. 녹색 환경으로의 트래픽을 완전히 중지하려면 green.contoso.com 엔드포인트를 사용하지 않도록 설정할 수 있습니다. Blue-Green 배포의 초기 상태입니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6975f5a8-10e5-489f-8f60-c7c2bfa11cb4.png"><img alt="Resource group" border="0" height="318" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/60653083-ebb6-4078-809c-2ebd10398f43.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="리소스 그룹" width="1177"></a></p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/79f72f5a-0135-48df-9f33-360b5337d745.png"><img alt="Blue environment" border="0" height="480" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/231f84e4-2c90-4d8f-b5b6-9f7a1ac48f48.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="파란색 환경" width="221"></a></p>


  <p align="center"><em>모든 트래픽이 Blue 환경으로 전송됩니다.</em></p>


  <p>이 시점에서 클라이언트 애플리케이션이 엔드포인트에 직접 연결하지 않고 만든 프로필의 DNS 이름을 사용하여 Traffic Manager 통과하도록 설정해야 합니다(이 DNS 이름은 trafficmanager.net 종료됨).</p>


  <p><strong>Pro 팁:</strong> <a href="https://azure.microsoft.com/en-us/services/dns/" target="_blank">Azure DNS</a>를 사용하여 사용자 지정 도메인 이름을 호스트한 다음 Traffic Manager DNS 이름을 가리킬 수 있습니다. 이렇게 하면 클라이언트 애플리케이션과 사용자가 기억하기 쉬운 이름을 사용하여 Traffic Manager 통해 서비스에 액세스할 수 있습니다. 이 작업을 수행하는 방법에 대한 자세한 내용은 <a href="https://docs.microsoft.com/en-us/azure/dns/dns-getstarted-portal" target="_blank">Azure DNS 설명서 페이지에서</a> 확인할 수 있습니다.</p>


  <p>출시하려는 최신 버전으로 녹색 환경을 업데이트한 후에는 제한된 수의 사용자가 해당 환경으로 전달되도록 녹색 환경의 가중치를 꾸준히 늘릴 수 있습니다. 그런 다음 <a href="https://azure.microsoft.com/en-us/services/monitor/" target="_blank">, Azure Monitor</a> 또는 <a href="https://azure.microsoft.com/en-us/services/network-watcher/" target="_blank">Azure Network Watcher</a>를 사용하여 해당 사용자의 환경을 모니터링하여 더 많은 사용자가 녹색 환경에 노출될 수 있는지 또는 사용자 전송을 중지해야 하는지 여부를 확인합니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/c3293630-d10e-46cd-ae80-a799afc172f1.png"><img alt="Blue-Green environment" border="0" height="480" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/024f5708-c0a5-4c37-aa92-d5eb860f92f0.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="Blue-Green 환경" width="224"></a></p>


  <p align="center"><em>트래픽의 일부가 녹색 환경으로 전송됩니다.</em></p>


  <p>영향을 측정하고 설정을 변경하는 이 프로세스는 연속 배포 파이프라인(예: <a href="https://azure.microsoft.com/en-us/solutions/architecture/immutable-infrastructure-cicd-using-jenkins-and-terraform-on-azure-virtual-architecture-overview/" target="_blank">Jenkins, Terraform 및 Azure Resource Manager 템플릿</a> 사용)을 사용하여 자동화할 수 있는 단계 함수입니다. 배포가 Azure Web Apps에서 실행되는 웹 애플리케이션인 경우 <a href="https://azure.microsoft.com/en-us/solutions/architecture/vsts-continuous-integration-and-continuous-deployment-for-azure-web-apps/" target="_blank">Visual Studio 사용하여 대부분의 Blue-Green</a> 배포를 실행할 수 있습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ce4baab4-08f5-4fae-b466-ab4166479347.png"><img alt="Process" border="0" height="572" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/09f32862-5572-49c0-b73f-6d283a322377.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="프로세스" width="1882"></a><br>

  &nbsp;<br>

  소프트웨어 배포가 완료되고 이제 모든 트래픽이 새 버전의 소프트웨어를 실행하는 녹색 환경으로 전달될 때까지 그린 환경에 지정된 가중치를 계속 오르내리거나 낮추면 됩니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/74514263-1ec1-41bb-9f72-0aedd5b13e08.png"><img alt="Green environment" border="0" height="480" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/eeb9c7f4-03c2-444b-81c4-e0da189bf388.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="녹색 환경" width="223"></a></p>


  <p align="center"><em>모든 트래픽이 녹색 환경으로 전송됩니다.</em></p>


  <p>Azure Traffic Manager Blue-Green 방법론을 사용하여 안전하게 배포하는 프로세스를 원활하고 세분화하며 빠른 작업*으로 만듭니다. 무엇보다도, 녹색 환경을 얼마나 빨리 또는 얼마나 느리게 진입할 것인지 결정할 때 여기에서 제어할 수 있습니다.</p>


  <p>&nbsp;</p>


  <p>*<em>프로필에 설정한 DNS 응답 TTL 값은 엔드포인트에 대한 트래픽을 늘리거나 줄일 수 있는 시에 영향을 줍니다. 자세한 내용은 </em><a href="https://docs.microsoft.com/en-us/azure/traffic-manager/traffic-manager-faqs" target="_blank"><em>Azure Traffic Manager FAQ</em></a>를 참조하세요<em>.</em></p>
