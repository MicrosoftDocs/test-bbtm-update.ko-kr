### YamlMime:Yaml
ms.openlocfilehash: 992b57567a4e1efd55afce2012005f735720cea6
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139901293"
Slug: customer-provided-keys-with-azure-storage-service-encryption
Title: Azure Storage 서비스 암호화를 사용하여 고객이 제공한 키
Summary: Azure Storage는 미사용 데이터를 암호화하는 몇 가지 옵션을 제공합니다. 클라이언트 쪽 암호화를 사용하면 Azure Storage 업로드하기 전에 데이터를 암호화할 수 있습니다.
Content: >-
  <p>Azure Storage는 미사용 데이터를 암호화하는 몇 가지 옵션을 제공합니다. <a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-client-side-encryption" target="_blank">클라이언트 쪽 암호화를</a> 사용하면 데이터를 Azure Storage 업로드하기 전에 암호화할 수 있습니다. Microsoft 관리형 키를 사용하거나 Azure Key Vault에서 고객 관리형 키를 사용하여 <a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-service-encryption" target="_blank">스토리지 서비스 암호화</a> 를 사용하여 Azure Storage에서 암호화 작업을 관리하도록 선택할 수도 있습니다. 현재는 모든 키 저장소에서 호스트되는 키를 사용하여 스토리지 계정에서 세분화된 암호화 설정을 지원하기 위해 스토리지 서비스 암호화의 향상된 기능을 제공합니다. CPK(고객 제공 키)를 사용하면 데이터 보안에 대한 회사, 계약 및 규정 준수 요구 사항을 충족하기 위해 Azure Key Vault 이외의 온-프레미스 또는 키 저장소에 키를 저장하고 관리할 수 있습니다.</p>


  <p>고객이 제공한 키를 사용하면 Blob API를 사용하여 스토리지 서비스에 읽기 또는 쓰기 작업의 일부로 암호화 키를 전달할 수 있습니다. 암호화 키는 개체 수준에서 정의되므로 스토리지 계정 내에서 여러 암호화 키를 가질 수 있습니다. 고객이 제공한 키를 사용하여 Blob을 만들 때 스토리지 서비스는 암호화 키의 SHA-256 해시를 Blob과 유지하여 향후 요청의 유효성을 검사합니다. 개체를 검색할 때 요청의 일부와 동일한 암호화 키를 제공해야 합니다. 예를 들어 CPK를 사용하여 Blob 배치를 사용하여 Blob을 만드는 경우 모든 후속 쓰기 작업은 동일한 암호화 키를 제공해야 합니다. 다른 키가 제공되거나 요청에 키가 제공되지 않으면 400 잘못된 요청으로 작업이 실패합니다. 암호화 키 자체가 요청에 제공되므로 키를 전송하려면 보안 연결을 설정해야 합니다. 프로세스는 다음과&rsquo; 같습니다.<br>

  &nbsp;</p>


  <p align="center"><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/71ad1300-7b49-4b0c-bf4b-ecdccffdedc3.png"><img alt="740 Blog" border="0" height="337" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/aae7d7fe-e286-497d-86bc-aeac8621fdab.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="740 블로그" width="1024"></a><br>

  <em>그림 1 고객이 제공한 키</em></p>


  <h2>시작</h2>


  <p>고객 제공 키는 요청에 x-ms-encryption-* 헤더를 추가하여 지원되는 Blob 작업에 사용할 수 있습니다.</p>


  <table border="1" cellpadding="1" cellspacing="0">
   <tbody>
    <tr>
     <td valign="top"><strong>요청 헤더</strong></td>
     <td valign="top"><strong>설명</strong></td>
    </tr>
    <tr>
     <td valign="top">x-ms-encryption-key</td>
     <td valign="top">필수 요소. Base 64로 인코딩된 AES-256 암호화 키 값입니다.</td>
    </tr>
    <tr>
     <td valign="top">x-ms-encryption-key-sha256</td>
     <td valign="top">필수 요소. 암호화 키에서 Base64로 인코딩된 SHA256입니다.</td>
    </tr>
    <tr>
     <td valign="top">x-ms-encryption-algorithm</td>
     <td valign="top">필수 요소. 지정된 키를 사용하여 데이터를 암호화할 때 사용할 알고리즘을 지정합니다. AES256이어야 합니다.</td>
    </tr>
   </tbody>
  </table>


  <h4>요청</h4>


  <p><code>PUT mycontainer/myblob.txt<br>

  x-ms-version: 2019-02-02<br>

  x-ms-encryption-key: MDEyMzQ1NjcwMTIzNDU2NzAxMjM0NTY3MDEyMzQ1Njc=<br>

  x-ms-encryption-key-sha256: 3QFFFpRA5+XANHqwwbT4yXDmrT/2JaLt/FKHjzhOdoE=<br>

  x-ms-encryption-algorithm: AES256<br>

  Content-Length: &lt;length&gt;<br>

  ...</code></p>


  <h2>키 관리</h2>


  <p>Azure Storage 고객이 제공한 암호화 키를 저장하거나 관리하지 않습니다. 키는 Blob 데이터를 암호화하거나 암호 해독하는 데 사용된 후&rsquo; 가능한 한 빨리 안전하게 삭제됩니다. 고객이 제공한 키가 스냅샷이 활성화된 Blob에서 사용되는 경우 각 스냅샷은 서로 다른 암호화 키로 프로비전될 수 있습니다. Blob 작업과 함께 올바른 키를 전달하려면 스냅샷 및 연결된 암호화 키를 추적해야 합니다. 개체와 연결된 키를 회전해야 하는 경우 개체를 다운로드하고 새 암호화 키를 사용하여 업로드할 수 있습니다.</p>


  <h2>다음 단계</h2>


  <p>이 기능은 현재 스토리지 계정에서 <a href="https://docs.microsoft.com/en-us/rest/api/storageservices/Versioning-for-the-Azure-Storage-Services?redirectedfrom=MSDN" target="_blank">Storage 서비스 REST API</a>(버전 2019-02-02)의 최신 릴리스와 함께 사용할 수 있습니다. .NET 클라이언트 라이브러리 및 Java 클라이언트 라이브러리를 사용할 수도 있습니다. 고객이 제공한 키에 대한 추가 요금은 없습니다.</p>


  <p>고객이 제공한 키에 대한 자세한 내용은 <a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-service-encryption" target="_blank">설명서 페이지를</a> 참조하세요. 추가 질문을 하거나 특정 시나리오에 대해 논의하려면 이메일을 보내거나 <a href="https://feedback.azure.com/forums/217298-storage" target="_blank">피드백 포럼</a>에 <a href="mailto:azurestoragefeedback@microsoft.com">azurestoragefeedback@microsoft.com</a> Azure Storage 대한 아이디어와 제안을 게시하세요.</p>
