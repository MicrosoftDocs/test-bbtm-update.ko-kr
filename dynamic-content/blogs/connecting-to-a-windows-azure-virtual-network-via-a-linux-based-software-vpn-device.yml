### YamlMime:Yaml
ms.openlocfilehash: 48f66debaca10b8265a3b6ef05523fd5e496b66e
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139913023"
Slug: connecting-to-a-windows-azure-virtual-network-via-a-linux-based-software-vpn-device
Title: Linux 기반 소프트웨어 VPN 디바이스를 통해 Windows Azure Virtual Network에 연결
Summary: 이 게시물에서는 Linux 기반 소프트웨어 VPN 디바이스를 사용하여 로컬 사무실 또는 사이트를 Windows Azure Virtual Network에 연결하는 방법을 보여줍니다.
Content: >-
  h2>Summa/h2> 이 pst will shw u hw t cnnect a lcal ffice site t a Windws Azue Vitual Netwk thugh the use f a sftwae VPN device A sftwae VPN 디바이스는 "개발 /테스트"wkflw whee를 빌드하는 pttpe mde에서 토팅 할 때 유용하며 Windws Azue Vitual Netwks 팀에서도 clud fast Indeed를 흉상하지 않으려는 경우 유용합니다.  Azue platfm이 cnstantl shifting eve da를 우리 아래에 있기 때문에 우리는 Pductin (TiP)에서 u wn cde를 테스트하는 autmated wa t에서 이러한 기술을 사용합니다.이 pst는 h를 shw 것입니다. w t cnfigue a hef=https://wwwpenswang/>OpenSwan/a> VPN n Linux t cnnect t a vitual netwk hsted in Windws Azue h2>Linux/h2> F Linux,  우리는 Windws Azue t cnnect t a Vitual Netwk hsting anthe Linux Vitual Machine t shw hw 내부에서 중지된 vitual Machine을 사용합니다.


  a hef=https://acmazuecmcdnnet/8C57D/blgmedia/blgmedia/214/5/14png>img stle=flat: nne; padding-tp: px; padding-left: px; padding-ight: px; bde-width: px; title=Ceate Vitual Machine UI alt=Ceate Vitual Machine UI sc=https://azuecmcdnazueedgenet/mediahandle/acmblg/media/Default/blg/14_thumbpng width=36 height=14 bde= />/a>


  주먹 단계는 앞으로 t g이고 OpenSwan VPN을 hst 것입니다 새로운 Vitual 머신을 중지이 경우 나는 exta 작은 ce와 Ubuntu 144 platfm 이미지를 사용하지만 f Linux 이미지를 사용할 수 있습니다 당신은 f cuse bing u wn 수 있습니다 VHD t table width=682 bde= cellspacing= cellpadding=2> tbd> t> td valign=tp width=2>a hef=https://acmazuecmcdnnet/8C57D/blgmedia/blgmedia/214/5/15png>img stle=padding-tp:  px; padding-left: px; padding-ight: px; bde-width: px; title=Azue Vitual Machine IP Addesses alt=Azue Vitual Machine IP Addesses sc=https://azuecmcdnazueedgenet/mediahandle/acmblg/media/Default/blg/15_thumbpng width=196 height=18 bde= />/a>/td> td valign=tp width=48> p align=justif>VM이 중단되면 후속 als, 즉 pts 5 및 45 (bth UDP) a hef=https://azuemicsftcm/en-us/dcumentatin/aticles/vitual-machines-set-up-endpints/>ae pened t/a> IPSec는 n이 Fm ptal UI에 따라 달라집니다.  thee ae tw inteesting atifacts t nte, thse f the public vitual IP (VIP) 및 intenal IP We can can use these ppeties t ceate a lcal site f a vitual netwk which we will cnnect t a new Vitual Netwk Once you nted these ppeties, g ahead 및 ceate a new lcal site unde the Netwks sectin f the ptal/p> /td> /t> /tbd> /table> Click n ptal의 Netwks 탭 다음 Lcal Netwks sectin t에서 lcal netwk pcess 추가를 시작합니다.


  &nbsp;


  a hef=https://acmazuecmcdnnet/8C57D/blgmedia/blgmedia/214/5/F17png>img stle=padding-tp: px; padding-left: px; padding-ight: px; bde: px; title=Vitual Netwks Lcal Netwks tab alt=Vitual Netwks Lcal Netwks tab sc=https://azuecmcdnazueedgenet/mediahandle/acmblg/media/Default/blg/F17_thumbpng width=353 height=81 bde= />/a>


  a hef=https://acmazuecmcdnnet/8C57D/blgmedia/blgmedia/214/5/f3png>img stle=flat: nne; padding-tp: px; padding-left: px; padding-ight: px; bde-width: px; title=Add Lcal Netwk UI Wizad alt=Add Lcal Netwk UI Wizad sc=https://azuecmcdnazueedgenet/mediahandle/acmblg/media/Default/blg/f3_thumbpng width=36 height=161 bde= />/a>


  VPN 디바이스 IP로 공용 IP 및 g를 미리 추가하고 lcal 사이트 Yu는 단일 /32 f lcal 사이트를 사용할 수 있으므로 lcal 사이트를 사용할 수 있습니다. scenai를 조금 ealistic로 만들지 않으려면 요금 T가 빅지 서브넷을 사용하지 않는다고 느끼고, 넓은 서브넷에서 이러한 IP를 깡패하는 것은 Vitual Machine Yu와 동일한 테넌트의 ae를 추가할 수 없다면 nt가 가능할 것입니다. sme exta netwk intefaces t u vitual machine t shw the use f the wide subnet Click the new buttn in the left cne and add a new lcal netwk


  &nbsp; p align=left>a hef=https://acmazuecmcdnnet/8C57D/blgmedia/blgmedia/214/5/f9png>img stle=padding-tp: px; padding-left: px; padding-ight: px; bde-width: px; title=Add Azue Lcal Netwk dialg alt=Add Azue Lcal Netwk dialg sc=https://azuecmcdnazueedgenet/mediahandle/acmblg/media/Default/blg/f9_thumbpng width=36 height=214 bde= />/a hef=> a hef=>img stle=padding-tp: px; padding-left: px; padding-ight: px; bde-width: px; title=Azue vitual netwk lcal site dialg alt=Azue vitual netwk lcal site dialg sc= width=36 height=82 bde= />/a>/p> In 이 경우 ptal이 이 서브넷에 255개의 IP를 가질 수 있음을 나타내는 /24 서브넷을 지정했습니다. hweve nl intenal IP addess f the VM hsting the "lcal site" will addessable as Azue's secuit mdel will nt allw packets t each the subnet Yu can hweve add multiple netwk intefaces t the VM with the VM with the the subnet t simulate me IP Once this 는 앞서 dne g이고 u cnfigue Vitual Netwk t cmmunicate bx를 확인 하 고 업데이트를 저장 하는 단지 중단 된 Lcal 사이트를 계속 Vitual Netwk를 중지


  &nbsp;


  a hef=>img stle=flat: nne; padding-tp: px; padding-left: px; padding-ight: px; bde-width: px; title=Azue vitual netwk ceate vitual netwk dialg alt=Azue vitual netwk ceate vitual netwk dialg sc= width=36 height=99 bde= />/a>


  a hef=>img stle=flat: nne; padding-tp: px; padding-left: px; padding-ight: px; bde-width: px; title=Enable Azue Vitual netwk cnnectin t the lcal netwk alt=Enable Azue Vitual netwk cnnectin t the lcal netwk sc= width=36 height=23 bde= />/a> table width=714 bde= cellspacing= cellpad tding=2> tbd> t> td valign=tp width=585> p align=justif>일단 이러한 단계가 g 앞으로 cmpleted되고 게이트와 ceatin이 복용하는 동안 ptal을 통해 정적 Ruting (IKEv1) Gatewa를 중단합니다. place (몇 분), 우리는 ight 설정으로 OpenSwan VPN seve를 cnfiguing pcess f를 시작할 수 있습니다 t windws Azue Vitual Netwk/p> /td> td valign=tp width=127>a hef=>img stle=padding-tp: px; padding-left: px; padding-ight: px; bde-width: px; title=Ceate a static uting (IKEv1) Gatewa alt=Ceate a static uting (IKEv1) Gatewa sc= width=98 height=118 bde= />/a>/td> /t> /tbd> /table> &nbsp;> h2>Linux VPN/h2> 주먹 단계는 PuTT 및 cnnect t u Linux Vitual Machine과 같은 secue 셸 클라이언트를 사용하지 않습니다. apt-get cmmand를 통한 dne(dist specific – s chse whateve is apppiate) belw:


  b>sud apt-get install penswan/b>


  X59 cets를 authenticatin methd로 사용하여 N을 선택하십시오. 설치가 성공적이면 lcal 경로가 ipsec이라는 pgam이 설치되어 있는 경우 IPSec 터널에서 shaed ke secets t secue를 사용합니다.


  b>ipsec/b>


  b>/us/sbin/ipsec/b>


  Yu는 OpenSwan fm suces t u wish를 설치할 수 있지만 모든 necessa 빌드 tls(nt n Azue platfm image b default)를 설치할 필요는 없습니다.


  VPN 자체를 cnfigue합니다. fllwing 파일을 편집할 필요가 없습니다.


  b>sud vi /etc/ipseccnf/b>


  Yu는 fllwing을 볼 수 있습니다: pe class=pettpint>cnfig setup ptstack=netke vitual_pivate=%v4:188124/24 e=ff
          # D nt set debug ptins t debug cnfiguatin issues!
          # plutdebug / klipsdebug = all, nne  a cmbatin fm belw:
          # aw cpt pasing emitting cntl klips pfke natt x59 dpd pivate
          # eg:
          # plutdebug=cntl pasing
          # Again: nl enable plutdebug  klipsdebug when asked b a develpe
          #
          # enable t get lgs pe-pee
          # plutpts=--pepeelg
          #
          # Enable ce dumps (might equie sstem changes, like ulimit -C)
          # This is equied f abtd t wk ppel
          # Nte: incect SElinux plicies might pevent plut witing the ce
          dumpdi=/va/un/plut/
          #
          # NAT-TRAVERSAL suppt, see READMENAT-Tavesal
          nat_tavesal=es
          # exclude netwks used n seve side b adding %v4:!abc/24
          # It seems that T-Mbile in the US and Rges/Fid in Canada ae
          plutstdelg=~/swanlg
          include /etc/ipsecd/*cnf/pe>
  cnfig t esemble abve 변경, nl 서브넷 ceated f lcal 사이트는 lcal 사이트 단계가 중단된 것과 일치하지 않도록 변경해야 합니다. 이 경우 188124/24


  lcal IPSec lgs를 표시하지 않으려면 plutdebug ptin을 분리합니다.


  Belw 이렇게 하면 f cnnectin 특정 설정을 변경할 필요가 없습니다. table width=158 bde= cellspacing= cellpadding=2> tbd> t> td valign=tp width=496> pe class=pettpint>cnn vpn authb=secet aut=stat tpe=tunnel left left =18812418 leftsubnet=188124/24 leftnexthp=%defaultute ight=137117136XXX ightsubnet=192168/2 ike=3des-sha1-mdp124,aes128-sha1-mdp124 esp=3des-sha1, aes128-sha1 pfs=n/pe> /td> td valign=tp width=56> p align=justif>ae available fm the Vitual Netwks UI in the ptal (sceen shts abve 참조) 주먹 ent, "ight"는 VIP f the Gatewa ceated이고, "ightsubnet"은 Vitual Netwk n ceatin Yu에서 사용되는 IP 공간을 epesents하는 동안 cpt 설정 hee t 및 툰 ff를 cpt cnfigue해야 합니다. cnfig 구문이 사용된 OpenSwan vesin n에 따라 헛된 페펙트 Fwading Secec(PFS) ptin Nte als, f 정확한 efeence un the cmmand:/p> p align=justif>b>man ipseccnf/b>/p> /td> /t> /tbd> /table> &nbsp;


  a hef=>img stle=padding-tp: px; padding-left: px; padding-ight: px; bde-width: px; title=The gatewa VIP t cnfigue the cnnectin t alt=The gatewa VIP t cnfigue the cnnectin t sc= width=237 height=76 bde= />/a>a hef=>img stle=flat: nne; padding-tp: px; padding-left: px; padding-ight: px; bde-width: px; title=The n-pemises netwk ange alt=The n-pemises netwk ange sc= width=36 height=92 bde= />/a> table width=152 bde= cellspacing= cellpadding=2> tbd> t> td valign=tp width=494>a hef=>img stle=padding-tp: px; padding-left: px; padding-ight: px; bde-width: px; title=The Vitual Netwk pe-shaed ke alt=The Vitual Netwk pe-shaed ke sc= width=36 height=14 bde= />/a>/td> td valign=tp width=556> p align=justif>마지막 단계는 PSK(Pe-shaed Ke) fm azue ptal 및 cnfigue this n the Linux VM Cp the PSK를 편집한 다음 fllwing 파일:/p> p align=justif>b>sud vi /etc/ipsecsecets/ b>/p> p align=justif>정확한 구문은 fllws: LcalIP GatewaVIP : PSK ''Shaed Ke'/p>


  pe class=pettpint>#include /etc/ipsecd/*secets 18812418 13711713623 : PSK XXXXXXXXXXXXXXXXXXXXXXXX/pe> /td> /t> /tbd> /table> &nbsp;


  일단 dne, un the span stle=backgund-cl: #ff;>span stle=backgund-cl: #ffffff;>fllwing/span>/span> cmmands t lad the PSK int the unning IPSec sevice, 그런 다음 stle=backgund-cl 범위: #4bacc6;>span stle=backgund-cl: #ffffff;>estat/span>/span> sevice befe span stle=backgund-cl: #cccccc;>span stle=backgund-cl:  #ffffff;>검사/범위>/span> 터널이 l> li>span stle=cl: #;>b>span stle=backgund-cl: #ff;>span stle=backgund-cl: #ffffff ;>sud ipsec secets/span>/span>/b> /span>/li> li>> span stle=backgund-cl: #ffffff;>span stle=cl: #;>b>span stle=cl:  #ffffff; backgund-cl: #4bacc6;>span stle=backgund-cl: #ffffff; cl: #;>sevice ipsec estat/span>/span>/b> /span>/span>/li> li>b>span stle=backgund-cl: #cccccc;>span stle=backgund-cl: #ffffff; cl: #;>sevice ipsec status/span>/span>/b>/li> /l> b>span stle=cl: #;>IPsec unning - plut pid: 63791/span>/b>


  b>span stle=cl: #;>plut pid 63791/span>/b>


  b>span stle=cl: #;>1개 터널 업/스팬>/b>


  b>span stle=cl: #;>sme eutes exist/span>/b>


  t u Gatewa 터널이 있으면 Azue Ptal UI 업데이트가 이 사실(UI의 geen 링크)을 자극하는 것을 볼 수 있으며, hef=https://azuemicsftcm/en-us/dcumentatin/aticles/vitual-netwks-add-vitual-machine/>u 는 vitual netwk/a> vitual machine int를 제거하고 netwk를 통해 t sme 테스트를 시작할 수 있습니다.


  이 예제 belw는 Vitual Netwk 및 shws netwk cnnectivit fm m lcal netwk 서브넷(188124/24) fm azue의 Vitual Netwk 내부에 있는 OpenSwan t Vitual Machine(1921684)을 hsting Machine(192168/2)으로 분리합니다.


  U는 Azue Ptal UI에서 사용할 때 데이터 tansfes in 및 ut f Vitual Netwk를 볼 수 있습니다.


  a hef=>img stle=padding-tp: px; padding-left: px; padding-ight: px; bde-width: px; title=The Azue Ptal UI f a cnnected VPN cnnectin alt=The Azue Ptal UI f a cnnected VPN cnnectin sc= width=36 height=123 bde= />/a>


  a hef=>img stle=padding-tp: px; padding-left: px; padding-ight: px; bde: px; title=Ping fm lcal netwk t Azue vitual netwk alt=Ping fm lcal netwk t Azue vitual netwk sc= width=36 height=22 bde= />/a>


  a hef=>img stle=padding-tp: px; padding-left: px; padding-ight: px; bde-width: px; title=Ping fm Azue vitual netwk t lcal netwk alt=Ping fm Azue vitual netwk t lcal netwk sc= width=36 height=227 bde= />/a>
