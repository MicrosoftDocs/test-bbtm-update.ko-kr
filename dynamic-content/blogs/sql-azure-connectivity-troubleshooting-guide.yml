### YamlMime:Yaml
ms.openlocfilehash: f06e2e3b2e6fb048bb16e3383883c8fa272e5e42
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139900484"
Slug: sql-azure-connectivity-troubleshooting-guide
Title: SQL Azure 연결 문제 해결 가이드
Summary: '[이 문서는 SQL Azure 팀에서 제공했습니다.] 이 게시물은 우리의 놀라운 지원 엔지니어 중 하나에 의해 함께 넣어, Abi Iyer, 일반적인 연결 오류 중 일부를 해결하는 데 도움이 ...'
Content: "<p>[이 문서는 SQL Azure 팀에서 제공했습니다.]</p><p>이 게시물은 아래에 나열된 대로 SQL Azure 연결하는 동안 표시되는 일반적인 연결 오류 메시지 중 일부를 해결하는 데 도움이 되는 놀라운 지원 엔지니어 인 Abi Iyer에 의해 함께 작성되었습니다.</p>  <ul>   <li>서버에서 결과를 받을 때 전송 수준 오류가 발생했습니다. (공급자: TCP 공급자, 오류: 0 - 기존 연결이 원격 호스트에 의해 강제로 닫혔습니다.) </li>    <li>System.Data.SqlClient.SqlException: Timeout expired.&#160; 작업이 완료되기 전에 시간 제한 기간이 경과했거나 서버가 응답하지 않습니다. 문이 종료되었습니다. </li>    <li>서버에 대한 연결을 구성하는 동안 오류가 발생했습니다. SQL Server 2005에 연결할 때 이 오류는 기본 설정에서 SQL Server 원격 연결을 허용하지 않기 때문에 발생할 수 있습니다. </li>    <li>오류: Microsoft SQL Native Client: 서버 연결 열기 지연으로 인해 로그인 프로세스를 완료할 수 없습니다. </li>    <li>연결된 당사자가 일정 기간 후에 제대로 응답하지 않았거나 연결된 호스트가 응답하지 않아 설정된 연결이 실패했기 때문에 연결 시도가 실패했습니다. </li> </ul>  <h3></h3>  <h2>섹션 1: Azure Firewall 설정 및 서비스 가용성 확인</h2>  <p>1.SQL Azure 포털에 로그인하고 프로젝트를 선택한 다음 방화벽 설정 탭으로 전환합니다. 연결할 IP 주소의 원격 연결을 허용하도록 SQL Azure 방화벽이 구성되어 있는지 확인합니다.</p>  <p><a href=\"\"><img style=\"border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px\" title=\"clip_image002\" border=\"0\" alt=\"clip_image002\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/clip_image002_thumb.jpg\" width=\"452\" height=\"247\"></a></p>  <p>컴퓨터가 인터넷에서 SQL Azure 서버에 연결하려고 하면 SQL Azure 방화벽은 전체 방화벽 설정 집합에 대해 요청의 원래 IP 주소를 확인합니다. 요청의 IP 주소가 지정된 범위 중 하나에 속하지 않으면 연결 시도가 차단되고 SQL Azure 서버에 도달하지 않습니다. 서비스가 아래와 유사한 특정 오류 메시지를 반환하기 때문에 SQL Azure 방화벽에 의한 차단은 일반적으로 자명합니다.</p>  <p>&#160;</p>  <blockquote>   <p><font face=\"Segoe UI\">C:\\&gt; SQLCMD –Uuserserver&lt;&gt;@&gt;&lt; -Ppassword&gt;&lt; -Sserver.database.windows.net&lt;&gt;</font></p> </blockquote>  <blockquote>   <p><font face=\"Segoe UI\">로그인에서 요청한 서버 'ljvt54v9zo'를 열 수 없습니다. IP 주소가 '131.107.0.111'인 클라이언트는 서버에 액세스할 수 없습니다. 액세스를 사용하려면 SQL Azure Portal을 사용하거나 master 데이터베이스에서 sp_set_firewall_rule 실행하여 이 IP 주소 또는 주소 범위에 대한 방화벽 규칙을 만듭니다. 이 변경 내용이 적용되려면 최대 5분이 걸릴 수 있습니다.</font></p> </blockquote>  <p><em>참조: SQL Azure 방화벽 -</em><a href=\"https://msdn.microsoft.com/en-us/library/ee621782.aspx\"><em>https://msdn.microsoft.com/en-us/library/ee621782.aspx</em></a></p>  <h3>&#160;</h3>  <p>2. 포털의 데이터베이스 탭에서 액세스하려는 데이터베이스를 선택하고 연결 테스트 단추를 클릭합니다. 그러면 연결할 때 사용할 사용자 이름 및 암호를 묻는 메시지가 표시됩니다.</p>  <h3></h3>  <blockquote>   <p>참고: Microsoft 서비스 방화벽을 사용하도록 설정하지 않은 경우 이를 사용하도록 설정하고 방화벽 설정이 적용될 때까지 최대 5분 정도 기다려야 합니다. 5분보다 빨리 오류가 발생하면 서비스를 사용할 수 있는지 여부에 대한 유효한 테스트가 아닙니다.</p> </blockquote>  <blockquote>   <p>a. 연결에 성공하면 백 엔드 SQL Azure 서비스를 사용할 수 있고 서버와 데이터베이스가 온라인 상태입니다. 섹션 2로 진행합니다.</p> </blockquote>  <blockquote>   <p>b. 연결이 실패하면 서버에 대해 나열된 위치를 확인하고 Azure 서비스 대시보드에서 이 위치에 대한 SQL Azure 서비스 상태를 확인합니다. 알려진 중단이 발생할 경우 추가 정보를 찾을 수 있습니다. 대시보드에 중단이 반영되지 않는 경우 1-800-642-7676으로 Microsoft에 전화하여 문제를 보고하고 도움을 받을 수 있습니다.</p> </blockquote>  <p><em>참조: Microsoft 고객 서비스 및 지원에 문의하는 방법 및 시기 - </em><a href=\"https://support.microsoft.com/kb/295539\"><em>https://support.microsoft.com/kb/295539</em></a></p>  <p>&#160;</p>  <h2>섹션 2: 가상 IP에 연결할 수 있는지 확인</h2>  <p>1. 명령 프롬프트 창을 열고 PING 명령을 사용하여 이름 확인이 논리 서버 이름을 IP 주소로 성공적으로 변환하는지 확인합니다. SQL Azure ping 요청에 응답하지 않으므로 아래에 표시된 \"요청 시간 초과\" 메시지가 필요합니다.</p>  <blockquote>   <p><font face=\"Segoe UI\">C:\\&gt;ping &lt;myserver.database.windows.net&gt;</font></p> </blockquote>  <h3></h3>  <blockquote>   <p><font face=\"Segoe UI\">32바이트 데이터로 [65.55.74.144]data.sn1-1.database.windows.net Ping:</font></p>    <p><font face=\"Segoe UI\">요청 시간이 초과되었습니다.</font></p>    <p><font face=\"Segoe UI\">요청 시간이 초과되었습니다.</font></p>    <p><font face=\"Segoe UI\">요청 시간이 초과되었습니다.</font></p>    <p><font face=\"Segoe UI\">요청 시간이 초과되었습니다.</font></p>    <p><font face=\"Segoe UI\">65.55.74.144에 대한 Ping 통계:</font></p>    <p><font face=\"Segoe UI\">패킷: Sent = 4, Received = 0, Lost = 4(100% loss)</font></p> </blockquote>  <h3></h3>  <h3></h3>  <p>a. 서버 이름이 IP 주소로 확인되면 값을 적어 두고 2단계를 진행합니다.</p>  <p>b. 이 단계가 실패하면 네트워크 관리자 또는 인터넷 서비스 공급자에게 이름 확인 문제를 해결하는 데 도움을 요청하세요. </p>  <p>&#160;</p>  <p>2. 명령 프롬프트 창에서 이전 단계에서 반환된 IP 주소를 사용하여 포트 1433으로 텔넷을 시도합니다. 그러면 포트 1433에 대한 트래픽을 차단하는 방화벽/라우터가 있는지 여부를 테스트합니다.</p>  <blockquote>   <p><font face=\"Segoe UI\">C:\\&gt;telnet 65.55.74.144 1433</font></p>    <p><font face=\"Segoe UI\">65.55.74.144에 연결 중...</font></p> </blockquote>  <p>a. 텔넷이 성공하면 창이 완전히 빈 화면으로 변경됩니다. 종료하고 다음 단계로 진행합니다.</p>  <p>b. 성공하지 못한 경우 출력을 캡처하고 4단계로 이동합니다.</p>  <p>&#160;</p>  <p><em>참조: 텔넷 문제 해결 가이드 - </em><a href=\"https://technet.microsoft.com/en-us/library/cc753360(WS.10).aspx\"><em>https://technet.microsoft.com/en-us/library/cc753360(WS.10).aspx</em></a></p>  <p>&#160;</p>  <p>3. 명령 프롬프트 창에서 텔넷을 시도하는 테스트를 IP 주소 대신 DNS 이름으로 반복합니다.</p>  <blockquote>   <p><font face=\"Segoe UI\">C:\\&gt;telnet &lt;myserver.database.windows.net&gt; 1433</font></p> </blockquote>  <p>참고: 텔넷이 기본 창 설치의 일부가 아닌 경우 Windows 구성 요소 추가/제거에서 사용하도록 설정할 수 있습니다.</p>  <p>&#160;</p>  <p>4. tracert 유틸리티를 사용하고 서버에 도달하는 동안 수행된 중간 단계를 보여 주는 출력을 캡처합니다. 이 정보는 문제를 해결하기 위해 네트워크 엔지니어가 필요한 경우에 유용합니다.</p>  <blockquote>   <p><font face=\"Segoe UI\">C:\\&gt;tracert 65.55.74.144</font></p>    <p><font face=\"Segoe UI\">최대 30홉 이상 65.55.74.144로 경로 추적</font></p>    <p><font face=\"Segoe UI\">1 2ms 1 ms 1 ms 192.168.0.1</font></p>    <p><font face=\"Segoe UI\">2 6ms 5ms 5ms 10.33.34.50</font></p>    <p><font face=\"Segoe UI\">3 5ms 4ms 5ms 4-1-753.DLLSTX-LCR-07.verizon-gni.net [130.81.107.26]</font></p>    <p><font face=\"Segoe UI\">4 8ms 5ms so-6-2-0-0.DFW01-BB-RTR1.verizon-gni.net [130.81.28.208]</font></p>    <p><font face=\"Segoe UI\">5 44ms 43ms 44ms so-11-0-0-0.LCC1-RES-BB-RTR1-RE1.verizon-gni.net [130.81.17.40]</font></p>    <p><font face=\"Segoe UI\">6 49ms 44ms 44ms so-6-0-0-0.ASH-PEER-RTR1-re1.verizon-gni.net [130.81.10.90]</font></p> </blockquote>  <p><em>참조: TRACERT를 사용하여 Windows TCP/IP 문제 해결 방법 -</em><a href=\"https://support.microsoft.com/kb/314868\"><em>https://support.microsoft.com/kb/314868</em></a></p>  <p>&#160;</p>  <h3></h3>  <h2>섹션 3: 가상 IP에 도달하지 않음:</h2>  <p>  <p>섹션 2에서 문제가 발생한 경우 VIP에 도달하지 않고 대신 클라이언트와 VIP 간에 차단됩니다. 아래 단계는 유용할 수 있지만 이 시점에서 ISP 또는 네트워크 엔지니어의 네트워크 조사가 필요합니다.</p>  <p>많은 방화벽 제품을 사용하면 개별 사용자 및 도메인 관리자가 특정 포트 및 대상 IP 주소에 대한 아웃바운드 액세스를 차단하거나 제한할 수 있습니다. 따라서 로컬 컴퓨터에 정의된 아웃바운드 규칙과 네트워크 경로에 있는 라우터 또는 프록시를 확인해야 합니다. 규칙은 포트 1433에서 대상 IP 주소 범위 65.55로 아웃바운드 액세스를 허용해야 합니다. *.*. 대부분의 방화벽은 DNS 이름의 사양도 허용하도록 허용합니다. 액세스를 차단할 수 있는 네트워크 제품은 다음과 같습니다.</p>  <p>&#160;</p>  <h3>1.로컬 컴퓨터에서 방화벽 Windows</h3>  <blockquote>   <p><em>질문과 대답 - </em><a href=\"https://msdn.microsoft.com/en-us/library/bb736261(VS.85).aspx\"><em>https://msdn.microsoft.com/en-us/library/bb736261(VS.85).aspx</em></a> <em> </em></p>    <p><em>고급 보안이 포함된 Windows 방화벽 시작 가이드 - </em><a href=\"https://technet.microsoft.com/en-us/library/cc748991(WS.10).aspx\"><em>https://technet.microsoft.com/en-us/library/cc748991(WS.10).aspx</em></a><em> </em></p> </blockquote>  <p>방화벽 규칙은 도메인 정책의 일부로 구성할 수도 있으므로 도메인 정책을 사용하여 연결을 차단할 수 있는 규칙이 있는지 확인하세요.</p> <b></b>  <p>&#160;</p>  <h3>2. 기타 방화벽 제품</h3>  <p>&#160;</p>  <h3>3. 프록시 및 라우터 및 네트워크의 다른 구성 요소: 프록시도 방화벽 역할을 할 수 있으므로 네트워크 관리자와 협력하여 포트 1433이 아웃바운드 액세스를 위해 열려 있는지 확인하세요.</h3>  <p>소프트웨어(Windows 방화벽 포함)와 하드웨어를 모두 확인해야 합니다.</p>  <p>올바른 방화벽 규칙을 적용하는 데 필요할 수 있으므로 외부 IP 주소를 확인하세요. 이 웹 사이트를 사용하여 IP 주소를 찾을 수 있습니다. <a href=\"\"></a></p>  <p>포털의 SQL Azure 방화벽 설정 탭 아래에 있는 AddFirewallRule 대화 상자에도 IP 주소가 나열됩니다. </p>  <p>&#160;</p>  <p>  <h3>4.가능하면 ISP에 직접 연결된 방화벽 외부의 컴퓨터에서 SQL Azure 연결해 보세요. </h3>  <p>섹션 1의 모든 단계를 반복하세요. 이 테스트는 네트워크 내부의 액세스를 차단할 수 있는 방화벽 및 기타 정책을 제거합니다. 이 테스트는 네트워크 내에서 또는 네트워크 외부에서 트래픽이 차단되는지 여부를 식별하는 데 도움이 됩니다. </p>  <p>&#160;</p>  <h3>5. Microsoft 네트워크 모니터 도구를 사용하여 네트워크 추적 생성 </h3>  <blockquote>   <p><em>참조: 네트워크 모니터를 사용하여 네트워크 트래픽을 캡처하는 방법 - </em><a href=\"https://support.microsoft.com/kb/148942\"><em>https://support.microsoft.com/kb/148942</em></a></p> </blockquote>  <p>TCP 포트 1433에서 대화를 표시하는 필터 TCP.port==1433을 추가하여 추적을 검토합니다. 서버에서 ACK가 다시 표시되지 않으면 네트워크 또는 인터넷을 통해 연결이 차단될 가능성이 높습니다.</p>  <p>연결에서 성공하지 못한 네트워크 조각:</p>  <p>&#160;</p>  <p><font face=\"Segoe UI\">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 11:12:27.007&#160;&#160;&#160;&#160;&#160; 25&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {TCP:7, IPv4:6}&#160;&#160; 111.11.11.111&#160;&#160;&#160; data.sn1-1.database.windows.net&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP:Flags=...... S., SrcPort=49411, DstPort=1433, PayloadLen=0, Seq=2375502765, Ack=0, Win=8192 ( 협상 배율 인수 0x8 ) = 8192</font></p>  <p><font face=\"Segoe UI\">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 11:12:30.007&#160;&#160;&#160;&#160;&#160; 26&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {TCP:7, IPv4:6}&#160;&#160; 111.11.11.111&#160;&#160;&#160; data.sn1-1.database.windows.net&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP:[<b>SynReTransmit #25</b>]Flags=...... S., SrcPort=49411, DstPort=1433, PayloadLen=0, Seq=2375502765, Ack=0, Win=8192 ( 협상 배율 인수 0x8 ) = 8192</font></p>  <p><font face=\"Segoe UI\">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 11:12:36.007&#160;&#160;&#160;&#160;&#160; 29&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {TCP:7, IPv4:6}&#160;&#160; 111.11.11.111&#160;&#160;&#160; data.sn1-1.database.windows.net&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP:[<b>SynReTransmit #25</b>]Flags=...... S., SrcPort=49411, DstPort=1433, PayloadLen=0, Seq=2375502765, Ack=0, Win=8192 ( 협상 배율 인수 0x8 ) = 8192</font></p>  <p><font face=\"Segoe UI\">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 11:12:48.014&#160;&#160;&#160;&#160;&#160; 40&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {TCP:12, IPv4:6} 111.11.11.111&#160;&#160;&#160; data.sn1-1.database.windows.net&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP:Flags=...... S., SrcPort=49412, DstPort=Microsoft-DS(445), PayloadLen=0, Seq=3206081271, Ack=0, Win=8192 (협상 배율 0x8 ) = 8192</font></p>  <p><font face=\"Segoe UI\">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 11:12:49.015&#160;&#160;&#160;&#160;&#160; 41&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {TCP:13, IPv4:6} 111.11.11.111&#160;&#160;&#160; data.sn1-1.database.windows.net&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP:Flags=...... S., SrcPort=49413, DstPort=Microsoft-DS(445), PayloadLen=0, Seq=1361088072, Ack=0, Win=8192 (협상 배율 0x8 ) = 8192</font></p>  <p><font face=\"Segoe UI\">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 11:12:49.019&#160;&#160;&#160;&#160;&#160; 42&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {IPv4:6} 111.11.11.111&#160;&#160;&#160; data.sn1-1.database.windows.net&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ICMP&#160;&#160;&#160;&#160; ICMP:Echo 요청 메시지, 111.11.11.111에서 65.55.74.144로</font></p>  <p><font face=\"Segoe UI\">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 11:12:50.769&#160;&#160;&#160;&#160;&#160; 45&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {IPv4:6} 111.11.11.111&#160;&#160;&#160; data.sn1-1.database.windows.net&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ICMP&#160;&#160;&#160;&#160; ICMP:Echo 요청 메시지, 111.11.11.111에서 65.55.74.144로</font></p>  <p><font face=\"Segoe UI\">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 11:12:51.014&#160;&#160;&#160;&#160;&#160; 46&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {TCP:12, IPv4:6} 111.11.11.111&#160;&#160;&#160; data.sn1-1.database.windows.net&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP:[SynReTransmit #40]Flags=...... S., SrcPort=49412, DstPort=Microsoft-DS(445), PayloadLen=0, Seq=3206081271, Ack=0, Win=8192 (협상 배율 0x8 ) = 8192</font></p>  <p><font face=\"Segoe UI\">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 11:12:52.015&#160;&#160;&#160;&#160;&#160; 47&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {TCP:13, IPv4:6} 111.11.11.111&#160;&#160;&#160; data.sn1-1.database.windows.net&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP:[SynReTransmit #41]Flags=...... S., SrcPort=49413, DstPort=Microsoft-DS(445), PayloadLen=0, Seq=1361088072, Ack=0, Win=8192 (협상 배율 0x8 ) = 8192</font></p>  <p><font face=\"Segoe UI\">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 11:12:52.771&#160;&#160;&#160;&#160;&#160; 48&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {TCP:14, IPv4:6} 111.11.11.111&#160;&#160;&#160; data.sn1-1.database.windows.net&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP:Flags=...... S., SrcPort=49414, DstPort=NETBIOS Session Service(139), PayloadLen=0, Seq=265110652, Ack=0, Win=8192 (협상 배율 0x8 ) = 8192</font></p>  <p><font face=\"Segoe UI\">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 11:12:55.771&#160;&#160;&#160;&#160;&#160; 49&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {TCP:14, IPv4:6} 111.11.11.111&#160;&#160;&#160; data.sn1-1.database.windows.net&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP:[SynReTransmit #48]Flags=...... S., SrcPort=49414, DstPort=NETBIOS Session Service(139), PayloadLen=0, Seq=265110652, Ack=0, Win=8192 (협상 배율 0x8 ) = 8192</font></p>  <p><font face=\"Segoe UI\">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 11:12:57.021&#160;&#160;&#160;&#160;&#160; 52&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {TCP:12, IPv4:6} 111.11.11.111&#160;&#160;&#160; data.sn1-1.database.windows.net&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP:[SynReTransmit #40]Flags=...... S., SrcPort=49412, DstPort=Microsoft-DS(445), PayloadLen=0, Seq=3206081271, Ack=0, Win=8192 (협상 배율 0x8 ) = 8192</font></p>  <p><font face=\"Segoe UI\">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 11:12:58.016&#160;&#160;&#160;&#160;&#160; 53&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {TCP:13, IPv4:6} 111.11.11.111&#160;&#160;&#160; data.sn1-1.database.windows.net&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP:[SynReTransmit #41]Flags=...... S., SrcPort=49413, DstPort=Microsoft-DS(445), PayloadLen=0, Seq=1361088072, Ack=0, Win=8192 (협상 배율 0x8 ) = 8192</font></p>  <p><font face=\"Segoe UI\">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 11:13:01.771&#160;&#160;&#160;&#160;&#160; 56&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {TCP:14, IPv4:6} 111.11.11.111&#160;&#160;&#160; data.sn1-1.database.windows.net&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP:[SynReTransmit #48]Flags=...... S., SrcPort=49414, DstPort=NETBIOS Session Service(139), PayloadLen=0, Seq=265110652, Ack=0, Win=8192 (협상 배율 0x8 ) = 8192</font></p>  <p>&#160;</p>  <p>여기서는 클라이언트가 SQL Azure 대한 연결을 설정하려고 하고 세 번 다시 전송하고 실패하는 것을 볼 수 있습니다. 이 추적은 연결이 VIP에 도달하지 못했음을 나타내므로 클라이언트의 네트워크 또는 인터넷을 통해 연결이 차단될 수 있습니다.</p>  <p>&#160;</p>  <p>성공적인 연결에서 추적 코드 조각:</p>  <p><font face=\"Segoe UI\">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 14:50:01.512&#160;&#160;&#160;&#160;&#160; 847&#160;&#160;&#160;&#160;&#160;&#160;&#160; SQLCMD.EXE&#160;&#160;&#160;&#160;&#160; {TCP:428, IPv4:427}&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 99.99.999.99&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 157.54.118.18&#160;&#160;&#160; TCP&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP:Flags=...... S., SrcPort=13415, DstPort=1433, PayloadLen=0, Seq=4009972475, Ack=0, Win=8192 (협상 배율 0x2 ) = 8192</font></p>  <p><font face=\"Segoe UI\">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 14:50:01.515&#160;&#160;&#160;&#160;&#160; 848&#160;&#160;&#160;&#160;&#160;&#160;&#160; SQLCMD.EXE&#160;&#160;&#160;&#160;&#160; {TCP:428, IPv4:427}&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 157.54.118.18&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 99.99.999.99&#160;&#160;&#160; TCP&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP:Flags=... A.. S., SrcPort=1433, DstPort=13415, PayloadLen=0, Seq=2117383693, Ack=4009972476, Win=8192(배율 인수 지원되지 않음) = 8192</font></p>  <p><font face=\"Segoe UI\">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 14:50:01.516&#160;&#160;&#160;&#160;&#160; 849&#160;&#160;&#160;&#160;&#160;&#160;&#160; SQLCMD.EXE&#160;&#160;&#160;&#160;&#160; {TCP:428, IPv4:427}&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 99.99.999.99&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 157.54.118.18&#160;&#160;&#160; TCP&#160;&#160;&#160;&#160;&#160;&#160;&#160; TCP:Flags=... A...., SrcPort=13415, DstPort=1433, PayloadLen=0, Seq=4009972476, Ack=2117383694, Win=17040(배율 인수 0x0) = 17040</font></p>  <p>&#160;</p>  <p>위의 코드 조각은 성공적인 3방향 핸드셰이크를 나타냅니다.</p>  <p>&#160;</p>  <h3>6. <b>SQL Azure DOS(서비스 거부) Guard</b>:</h3>  <p>SQL Azure 기술을 활용하여 서비스 거부 공격을 방지합니다. 잠재적인 DOS 공격으로 인해 서비스에서 연결을 다시 설정하는 경우 세 가지 방법으로 핸드셰이크가 설정된 다음 네트워크 추적에서 RESET를 볼 수 있습니다.</p>  <p>&#160;</p>  <h2>섹션 4: 리소스 액세스</h2>  <p>1. 다음 SQLCMD에서 전체 출력(스크린샷)을 제공합니다.</p>  <blockquote>   <p><font face=\"Segoe UI\">SQLCMD -S bd1mgcqz5f.database.windows.net -U &lt;userid@bd1mgcqz5f&gt; -P &lt;password&gt; -q &quot;select 1&quot;</font></p> </blockquote>  <p>2.SSMS 사용하는 커넥트</p>  <p>SQL Azure 사용할 수 있는 기능이 많이 있으므로 SQL Server 2008 R2를 사용하여 SQL Azure 연결하세요.</p>"
