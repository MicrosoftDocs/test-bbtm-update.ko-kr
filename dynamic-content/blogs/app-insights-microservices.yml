### YamlMime:Yaml
ms.openlocfilehash: f1b2f91e12b7563d6fc9dac44692db0ea5ef48af
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139901449"
Slug: app-insights-microservices
Title: 마이크로 서비스 및 컨테이너에 대한 애플리케이션 Insights 지원
Summary: 최근에 Azure Application Insights 사용하여 마이크로 서비스 및 컨테이너화된 애플리케이션을 훨씬 쉽게 모니터링할 수 있게 했습니다. 모든 구성 요소에 단일 애플리케이션 Insights 리소스를 사용할 수 있습니다...
Content: >-
  <p>Weve&rsquo;는 최근 <a href="https://azure.microsoft.com/services/application-insights/">Azure Application Insights</a> 사용하여 마이크로 서비스 및 컨테이너화된 애플리케이션을 훨씬 쉽게 모니터링할 수 있게 했습니다. 애플리케이션의 모든 구성 요소에 단일 애플리케이션 Insights 리소스를 사용할 수 있습니다. 서비스의 상태와 서비스 간의 관계는 단일 애플리케이션 맵에 표시됩니다. 자동 HTTP 상관 관계를 사용하여 여러 서비스를 통해 개별 작업을 추적할 수 있습니다. Docker 및 기타 컨테이너의 메트릭은 애플리케이션 원격 분석과 통합 및 상관 관계를 지정할 수 있습니다.</p>


  <h2>역할별 애플리케이션 Insights 데이터 분할</h2>


  <p>지금까지 애플리케이션 Insights 애플리케이션의 각 서버 구성 요소 또는 마이크로 서비스에 대해 하나의 애플리케이션 Insights 리소스 및 계측 키를 만드는 것으로 가정했습니다. 마이크로 서비스 애플리케이션을 사용하면 단일 애플리케이션을 다양한 서비스로 구성할 수 있으며 별도의 리소스를 만들고 유지 관리하는 데 시간이 많이 걸릴 수 있습니다. &rsquo;또한 결과 간의 상관 관계를 지정하는 것도 어렵습니다.</p>


  <p>이 문제를 해결하기 위해 애플리케이션 Insights 모든 원격 분석에 연결된 cloud_RoleName 속성으로 데이터를 분할하는 기능이 추가되었습니다. 이렇게 하면 모든 서버의 모든 데이터를 단일 애플리케이션 Insights 리소스로 보내고 cloud_RoleName 필터링하여 개별 마이크로 서비스에 대한 성능 및 상태 정보를 볼 수 있습니다. cloud_RoleName 속성은 SDK가 Azure App Service의 마이크로 서비스, 컨테이너 또는 앱 이름에 적합한 이름을 나타내도록 설정됩니다.</p>


  <p>오류, 성능 및 메트릭 탐색기 블레이드의 필터 메뉴에 새 클라우드 역할 이름 속성이 표시됩니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/d58050cc-5338-4555-935f-843949e6c98c.png"><img alt="RoleFilter" border="0" height="353" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/9aa61553-b407-49f7-9d04-81f9206733a8.png" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; border-top-width: 0px; margin-right: auto" title="RoleFilter" width="700"></a></p>


  <p>위의 예제에서는 프런트 엔드 웹 서비스에 대한 정보만 표시하도록 오류 블레이드를 필터링하여 CRM API 백 엔드에서 오류를 필터링했습니다.</p>


  <p>또한 Weve&rsquo;는 애플리케이션 맵이 cloud_RoleName 서버 노드를 분할할 수 있도록 하는 미리 보기 기능을 사용하도록 설정했습니다. 이 기능을 사용하도록 설정하려면 미리 보기 블레이드에서 <em><strong>다중 역할 애플리케이션 맵</strong></em>을 <strong>켜</strong><i></i>도록 설정합니다.</p>


  <p align="center"><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/885d2967-afee-43d7-bc4f-cada17893567.png"><img alt="EnablePreviews" border="0" height="385" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ea9409b7-69aa-4c8c-ae9c-2e476b607b6d.png" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" title="EnablePreviews" width="700"></a></p>


  <p>이 미리 보기를 사용하도록 설정하면 맵에 cloud_RoleName 필드에 설정된 각 고유 값에 대해 하나의 서버 노드가 표시됩니다.<a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/69bc1387-977e-4475-bed3-1903bc110fad.png"><img alt="MultipleRolesOnMap" border="0" height="289" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/4b9ff5b4-dad3-4232-97c1-7c002d4fce8a.png" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; border-top-width: 0px; margin-right: auto" title="MultipleRolesOnMap" width="700"></a></p>


  <p>&nbsp;</p>


  <p>서버 간의 호출은 HTTP 요청의 헤더에 전달된 상관 관계 ID를 사용하여 추적되며&rsquo;, 다음에 대해 설명합니다.</p>


  <h2>컨테이너에서 작동하는 자동 HTTP 상관 관계</h2>


  <p>최신 SDK인 <a href="https://www.nuget.org/packages/Microsoft.ApplicationInsights.Web/2.4.0-beta3">ASP.NET 2.4.0-beta3</a> 및 <a href="https://www.nuget.org/packages/Microsoft.ApplicationInsights.AspNetCore/2.1.0-beta3">ASP.NET Core 2.1.0-beta3</a>을 사용하면 헤더를 HTTP 요청 및 응답에 삽입하여 서비스 간의 호출을 자동으로 상호 연결합니다. 이전에는 이 기능을 사용하려면 계측 프로파일러를 설치하거나, App Services용 애플리케이션 Insights 사이트 확장을 사용하거나, 다른 Azure Compute 서비스에 대한 상태 모니터를 설치해야 했습니다. 이러한 확장은 Service Fabric 또는 Docker 컨테이너 환경에서 프로비전하기가 어렵습니다.</p>


  <p>이렇게 하면 애플리케이션 맵에서 모든 마이크로 서비스 및 컨테이너화된 애플리케이션을 볼 수 있습니다.</p>


  <p>단일 보기에서 서버 간 호출과 관련된 모든 원격 분석을 볼 수도 있습니다. 예를 들어 방문자 앱 샘플의 예외는 다음과 같습니다.</p>


  <p align="center"><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/4667c1ac-cce9-45a5-8825-83d05f57ca66.png"><img alt="ExceptionDetails" border="0" height="681" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/a12edd99-0060-456d-8ce6-3ce24430eaf4.png" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" title="ExceptionDetails" width="610"></a></p>


  <p>프론트 엔드 웹 서버와 백 엔드 API 간에 이 작업에 대해 상관 관계가 지정된 원격 분석 목록을 클릭합니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/52295015-6a75-417f-b92f-3e1b0850436b.png"><img alt="CorrelatedTracing" border="0" height="762" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/32e6d9f9-0ab0-4381-8c87-f959418f92dc.png" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; border-top-width: 0px; margin-right: auto" title="CorrelatedTracing" width="610"></a></p>


  <p>이 기능을 활용하려면 NuGet 사용할 수 있는 현재 시험판 버전의 Application Insights SDK를 설치합니다.</p>


  <h2>.NET Core 2.0, Service Fabric 및 Kubernetes에 대한 SDK 지원</h2>


  <p>위의 기능이 Service Fabric 및 Kubernetes에서 실행되는 .NET 애플리케이션에 대해 작동하도록 .NET SDK를 개선했습니다. 이제 ASP.NET Core 2.1 SDK는 자동 요청 및 종속성 추적 기능을 포함하여 .NET Core 1.1 및 .NET Core 2.0 미리 보기 1을 모두 지원합니다. 이렇게 하면 최신 버전의 .NET Core를 사용하여 전체 애플리케이션 Insights 환경을 얻을 수 있습니다.</p>


  <p>애플리케이션이 Service Fabric 실행되는 경우 <a href="https://github.com/Microsoft/ApplicationInsights-ServiceFabric">애플리케이션 Insights 대한 Service Fabric SDK를 </a> 사용할 수 있습니다. Service Fabric 신뢰할 수 있는 서비스에 대한 Microsoft.ApplicationInsights.ServiceFabric.Native NuGet 패키지와 게스트 실행 파일 및 Docker 컨테이너용 Microsoft.ApplicationInsights.ServiceFabric 패키지를 추가합니다.</p>


  <p>많은 Service Fabric 애플리케이션은 대규모 로깅을 위해 EventSource를 사용합니다. 이제 <a href="https://docs.microsoft.com/en-us/azure/application-insights/app-insights-asp-net-trace-logs#using-eventsource-events">Microsoft.ApplicationInsights.EventSourceListener 패키지를 추가하여 Application Insights EventSource 이벤트를 기록</a>할 수 있습니다.</p>


  <p>애플리케이션이 Kubernetes의 Docker에서 실행되는 경우 Microsoft.ApplicationInsights.Kubernetes 패키지를 앱에 추가하여 <a href="https://github.com/Microsoft/ApplicationInsights-Kubernetes">Kubernetes SDK</a> 를 사용할 수 있습니다.</p>


  <p>Visual Studio NuGet 패키지 관리자를 사용하여 이 섹션에 설명된 패키지를 추가합니다. &ldquo;이 섹션에서 언급한 패키지를 찾으려면 포함 미리 보기&rdquo; 옵션을 선택합니다.</p>


  <h2>Windows Docker 컨테이너에 대한 컨테이너 메트릭</h2>


  <p>&rsquo;컨테이너의 상태를 이해하고 실제 컴퓨터에서 컨테이너의 적절한 밀도를 달성할 수 있도록 개별 Docker 컨테이너에 대한 CPU, 메모리 및 기타 메트릭을 확인하는 것이 유용합니다. Windows 실행되는 Docker 컨테이너에서 메트릭 수집을 지원하여 Windows <a href="https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics">WAD(Azure Diagnostics Extension</a>)를 보강했습니다.</p>


  <p>WAD가 설치되면 <a href="https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics-schema-1dot3-and-later">진단 구성 파일을</a> 수정하여 Docker 통계를 수집하고 애플리케이션 Insights 보낼 수 있습니다.</p>


  <h2>오늘 사용해 보기</h2>


  <p>이러한 새로운 기능을 통해 마이크로 서비스 및 컨테이너화된 애플리케이션에서 애플리케이션 Insights 사용하여 뛰어난 경험을 할 수 있기를 바랍니다. <a href="https://docs.microsoft.com/en-us/azure/application-insights/app-insights-monitor-multi-role-apps">문서를 확인하고</a>, SDK를 사용해 보며, 이러한 새 환경에서 애플리케이션 Insights 더 잘 작동하도록 만드는 방법을 알려주세요.</p>


  <p>이 게시물에&rsquo; 나열된 기능 외에도, Weve는 최근에 애플리케이션에서 문제를 찾고 해결하는 데 도움이 되는 <a href="https://microsoft.sharepoint.com/teams/CPT/Shared Documents1/Azure Diagnostics/Blog Posts/Optimize%20your%20apps%20for%20your%20business%20with%20Azure%20Application%20Insights">애플리케이션 Insights 대한 다른 많은 개선 사항을 발표</a>했습니다.</p>


  <p>언제나처럼 <a href="https://visualstudio.uservoice.com/forums/357324-application-insights">애플리케이션 Insights UserVoice 페이지에서</a> 새로운 기능 또는 향상된 기능에 대한 아이디어를 공유하세요. 질문이 있으면 <a href="https://social.msdn.microsoft.com/Forums/vstudio/en-US/home?forum=ApplicationInsights">애플리케이션 Insights 포럼</a>을 방문하세요.</p>
