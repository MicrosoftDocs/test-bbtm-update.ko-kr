### YamlMime:Yaml
ms.openlocfilehash: 78911ad637045aca2208add25bf193f43cf7cfe1
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139897199"
Slug: real-time-machine-learning-on-globally-distributed-data-with-apache-spark-and-documentdb
Title: Apache Spark 및 DocumentDB를 사용하여 전역적으로 분산된 데이터에 대한 실시간 기계 학습
Summary: 산호세에서 Strata + Hadoop 세계 2017 컨퍼런스에서, 우리는 DocumentDB 커넥터에 Spark를 발표했다. 실시간 데이터 과학, 기계 학습 및 전역으로 탐색할 수 있습니다...
Content: >-
  <p><strong>2017년 5월 10일 현재</strong></p>


  <p><strong>Azure Cosmos DB는 전역적으로 분산된 Microsofts&rsquo; 다중 모델 데이터베이스입니다. Azure Cosmos DB는 처음부터 글로벌 배포 및 수평적 확장을 핵심으로 구축되었습니다. 사용자가 어디에 있든 데이터를 투명하게 스케일링하고 복제하여 여러 Azure 지역에 턴키 글로벌 배포를 제공합니다. 전 세계적으로 처리량 및 스토리지를 탄력적으로 확장하고 필요한 처리량 및 스토리지에 대해서만 비용을 지불합니다. Azure Cosmos DB는 전 세계 어디서나 99번째 백분위수의 한 자리 밀리초 대기 시간을 보장하고, 성능을 미세 조정하기 위해 잘 정의된 여러 일관성 모델을 제공하며, 업계 최고의 SLA(서비스 수준 계약)가 지원하는 멀티 호밍 기능&mdash;으로 고가용성을 보장합니다.&nbsp;</strong></p>


  <p><strong>Azure Cosmos DB는 스키마에 구애받지 않습니다. 스키마 및 인덱스 관리를 처리할 필요 없이 모든 데이터를 자동으로 인덱싱합니다. &rsquo;또한 기본적으로 문서, 키-값, 그래프 및 열 패밀리 데이터 모델을 지원하는 다중 모델입니다. Azure Cosmos DB를 사용하면 DocumentDB SQL(문서), MongoDB(문서), Azure Table Storage(키-값) 및 Gremlin(그래프)이 모두 기본적으로 지원되므로 원하는 API를 사용하여 데이터에 액세스할 수 있습니다.</strong></p>


  <hr>

  <p>산호세에서 Strata + Hadoop 세계 2017 컨퍼런스에서, 우리는 <a href="https://aka.ms/spark-documentdb">DocumentDB 커넥터에 Spark를</a> 발표했다. Azure DocumentDB에서 전 세계적으로 분산된 데이터를 실시간으로 데이터 과학, 기계 학습 및 탐색할 수 있습니다. Apache Spark를 Azure DocumentDB에 연결하면 빠르게 변화하는 데이터 과학 문제를 해결하는 고객의&rsquo; 기능이 가속화되며, DocumentDB를 사용하여 데이터를 빠르게 지속하고 쿼리할 수 있습니다. Spark to DocumentDB 커넥터는 네이티브 DocumentDB 관리형 인덱스를 효율적으로 활용하고 <a href="https://github.com/Azure/azure-documentdb-spark/wiki">IoT, 데이터 과학 및 분석 시나리오</a>에 이르기까지 빠르게 변화하는 글로벌 분산 데이터에 대한 분석, 푸시다운 조건자 필터링을 수행할 때 업데이트 가능한 열을 사용하도록 설정합니다. Spark-DocumentDB 커넥터는 <a href="https://github.com/Azure/azure-documentdb-java">Azure DocumentDB Java SDK</a>를 사용합니다. 오늘 <a href="https://aka.ms/spark-documentdb">시작해</a> <a href="https://github.com/Azure/azure-documentdb-spark">GitHub</a> Spark 커넥터를 다운로드할 수 있습니다.</p>


  <h2>DocumentDB가 무엇인가요?</h2>


  <p>Azure DocumentDB는 개발자가 행성 규모 애플리케이션을 빌드할 수 있도록 설계된 글로벌 분산 데이터베이스 서비스입니다. DocumentDB를 사용하면 지리적 영역의 개수에 관계없이 처리량과 스토리지 모두를 탄력적으로 확장할 수 있습니다. 이 서비스는 P99의 짧은 대기 시간, 99.99%의 고가용성, 예측 가능한 처리량 및 <a href="https://docs.microsoft.com/en-us/azure/documentdb/documentdb-consistency-levels">여러 잘 정의된 일관성 모델을</a> 제공하며 모두 포괄적인 SLA를 통해 지원됩니다. <a href="https://www.vldb.org/pvldb/vol8/p1668-shukla.pdf">스키마에 구애받지 않는 쓰기 최적화된 데이터베이스 엔진</a> 덕분에 DocumentDB는 수집하는 모든 데이터를 기본적으로 자동 인덱싱하고 <a href="https://docs.microsoft.com/en-us/azure/documentdb/documentdb-sql-query">SQL</a>, <a href="https://docs.microsoft.com/en-us/azure/documentdb/documentdb-protocol-mongodb">MongoDB</a> 및 <a href="https://docs.microsoft.com/en-us/azure/documentdb/documentdb-programming#javascript-language-integrated-query-api">JavaScript 언어 통합 쿼리</a>를 규모에 관계 없이 처리할 수 있습니다. 클라우드 서비스인 DocumentDB는 다중 테넌트 및 전역 배포를 사용하여 처음부터 세심하게 설계되었습니다.<br>

  이러한 고유한 이점 때문에 DocumentDB는 웹, 모바일, 개인 설정, 게임, IoT 및 원활한 규모 및 글로벌 복제가 필요한 기타 여러 애플리케이션에 대한 분석 워크로드뿐만 아니라 운영에 매우 적합합니다.</p>


  <h2>기계 학습 및 데이터 과학에 DocumentDB를 사용하면 어떤 이점이 있나요?</h2>


  <p>DocumentDB는 스키마가 없습니다. DocumentDB는 데이터베이스 엔진 내에 직접 JSON 데이터 모델을 커밋하므로 명시적 스키마나 보조 인덱스 생성을 요구하지 않고 JSON 문서의 자동 인덱싱을 제공합니다. DocumentDB는 친숙한 SQL 언어를 사용하여 JSON 문서 쿼리를 지원합니다. DocumentDB 쿼리는 JavaScript&#39;형식 시스템, 식 평가 및 함수 호출에 루팅됩니다. 따라서 관계형 프로젝션, JSON 문서 간 계층적 탐색, 자체 조인, 공간 쿼리 및 JavaScript로 완전히 작성된 UDF(사용자 정의 함수) 호출에 대한 자연스러운 프로그래밍 모델을 제공합니다. 이제 집계를 포함하도록 SQL 문법을 확장하여 이러한 기능 외에도 전역적으로 분산된 aggs를 사용하도록 설정했습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/f52a7b7a-855c-4c89-bb1f-7cff2d5a92c9.png"><img alt="Apache Spark" border="0" height="214" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/44b11fb4-3155-4b2a-895c-9eba313e9cbe.png" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" title="Apache Spark" width="597"></a></p>


  <p align="center"><em>그림 1: DocumentDB용 Spark 커넥터를 사용하면 Spark 작업자 노드와 DocumentDB 데이터 파티션 간에 데이터가 병렬 처리됩니다. </em></p>


  <h2>분산 집계 및 고급 분석</h2>


  <p>Azure DocumentDB와 함께 <a href="https://azure.microsoft.com/en-us/blog/planet-scale-aggregates-with-azure-documentdb/">Planet Scale Aggregates</a>에 설명된 대로 Azure DocumentDB에 집계(SUM, MIN, MAX, COUNT, SUM 및 GROUP BY, DISTINCT 등에서 작업)가 있지만 Apache Spark를 DocumentDB에 연결하면 Apache Spark를 활용하여 훨씬 더 다양한 분산 집계를 쉽고 빠르게 수행할 수 있습니다. 예를 들어 다음은 Spark SQL 통해 Apache Spark&#39;PERCENTILE_APPROX 함수를 사용하여 분산 MEDIAN 계산을 계산하는 스크린샷입니다.</p>


  <pre>

  select destination, percentile_approx(delay, 0.5) as median_delay

  from df

  where delay &lt; 0

  group by destination

  order by percentile_approx(delay, 0.5)</pre>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6c35825c-ba72-4570-831c-bc9b4839c348.png"><img alt="Figure 2" border="0" height="244" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/871de0ae-ccbc-4321-bbe8-d09441cdd292.png" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" title="그림 2" width="468"></a></p>


  <p align="center"><em>그림 2: Azure HDInsight의 Spark에서 Jupyter Notebook 서비스를 통해 위의 분산 중앙값 계산에 대한 영역 시각화입니다. </em></p>


  <h2>푸시다운 조건자 필터링</h2>


  <p>다음 애니메이션 GIF에서 설명한 것처럼 Apache Spark의 쿼리는 조건자를 Azure DocumentDB로 푸시다운하고 DocumentDB가 기본적으로 모든 특성을 인덱싱하는 것을 활용합니다. 또한 데이터가 있는 곳 가까이에 계산을 푸시하여 현장 처리를 수행하고 이동해야 하는 데이터의 양을 줄일 수 있습니다. 이로 인해 분석 쿼리에 대한 성능 속도가 크게 향상됩니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/70e50ce0-d235-4244-9b8a-2f7faa6d9c70.gif"><img alt="Figure 3" border="0" height="262" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/51e64ae2-3c84-4abb-a403-5eaba74144fc.gif" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" title="그림 3" width="466"></a></p>


  <p>예를 들어 시애틀(SEA)에서 출발하는 항공편만 요청하려는 경우 Spark-DocumentDB 커넥터는 다음을 수행합니다.</p>


  <ul>
   <li>Azure DocumentDB에 쿼리를 보냅니다.</li>
   <li>Azure DocumentDB 내의 모든 특성이 자동으로 인덱싱되므로 시애틀과 관련된 플라이트만 Spark 작업자 노드로 신속하게 반환됩니다.</li>
  </ul>


  <p>이렇게 하면 분석, 데이터 과학 또는 ML 작업을 수행할 때 필요한 데이터만 전송합니다.</p>


  <h2>빠른 IoT 시나리오 사용</h2>


  <p>Azure DocumentDB는 처리량이 높고 대기 시간이 짧은 IoT 환경을 위해 설계되었습니다. 아래 애니메이션 GIF는 플라이트 시나리오를 나타냅니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7f743c1f-e8c1-4fef-a069-967488a69724.gif"><img alt="Figure 4" border="0" height="255" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/65219540-d72e-463a-a236-cf789d2afe1b.gif" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" title="그림 4" width="453"></a></p>


  <p>함께 다음을 수행할 수 있습니다.</p>


  <ul>
   <li>동시 경고(예: 날씨, 비행 정보, 글로벌 안전 경고 등)의 높은 처리량을 처리합니다.</li>
   <li>변경 피드 사용을 포함하여 디바이스 알림, RESTful 서비스 등에 대해 이 정보를 다운스트림으로 보냅니다(예: 휴대폰에서 임박한 비행 지연 경고).</li>
   <li>동시에 데이터에 대해 ML 모델을 빌드할 때 최신 정보를 이해할 수도 있습니다.</li>
  </ul>


  <h2>업데이트 가능한 열</h2>


  <p>이전에 언급된 타오르는 빠른 IoT 시나리오와 관련하여&#39;업데이트 가능한 열을 자세히 살펴보겠습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/f766d97d-baf1-493f-836e-4833b534e016.gif"><img alt="Figure 5" border="0" height="250" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6a8041ab-7ffd-4a47-92b6-73832981bf48.gif" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" title="그림 5" width="444"></a></p>


  <p>새로운 정보가 들어오면(예: 비행 지연이 5분에서 30분으로 변경됨) 이 최신 정보를 반영하도록 기계 학습(ML) 모델을 신속하게 다시 실행할 수 있어야 합니다. 예를 들어 모든 다운스트림 플라이트에 대해 30분이 미치는 영향을 예측할 수 있습니다. 이 이벤트는 <a href="https://docs.microsoft.com/en-us/azure/documentdb/documentdb-change-feed">Azure DocumentDB 변경 피드</a>를 통해 신속하게 시작하여 ML 모델을 새로 고칠 수 있습니다.</p>


  <h2>다음 단계</h2>


  <p>이 블로그 게시물&rsquo;에서는 DocumentDB 커넥터에 대한 새로운 Spark를 살펴보았습니다. DocumentDB를 사용하는 Spark를 사용하면 빅 데이터에 대한 임시 대화형 쿼리뿐만 아니라 고급 분석, 데이터 과학, 기계 학습 및 인공 지능을 모두 사용할 수 있습니다. DocumentDB는 전 세계의 다양한 원본에서 증분 방식으로 수집되는 데이터를 캡처하는 데 사용할 수 있습니다. 여기에는 소셜 분석, 시계열, 게임 또는 애플리케이션 원격 분석, 소매 카탈로그, 최신 추세 및 카운터, 감사 로그 시스템이 포함됩니다. 그런 다음, Spark를 사용하여 DocumentDB에서 들어오는 데이터를 기반으로 대규모로 고급 분석 및 AI 알고리즘을 실행할 수 있습니다.</p>


  <p>회사 및 개발자는 온라인 쇼핑 권장 사항, 실시간 통신 애플리케이션에 대한 스팸 분류자, 개인 설정에 대한 예측 분석 및 결제를 수락하거나 거부하기 위해 즉각적인 결정을 내려야 하는 모바일 애플리케이션에 대한 사기 감지 모델에서 이 시나리오를 사용할 수 있습니다. 마지막으로, 사물 인터넷 시나리오도 여기에 적합하며, 데이터가 사람 대신 컴퓨터의 동작을 나타낸다는 명백한 차이점이 있습니다.</p>


  <p>쿼리 실행을 시작하려면 <a href="https://portal.azure.com/#create/Microsoft.DocumentDB">Azure Portal에서 새 DocumentDB 계정을 만들고 Azure-DocumentDB-Spark</a> <a href="https://github.com/Azure/azure-documentdb-spark">GitHub</a> 리포지토리에서 프로젝트로 작업합니다. 전체 지침은 <a href="https://aka.ms/docdbsparkdoc">Azure DocumentDB에 Apache Spark 연결 </a>문서에서 확인할 수 있습니다.</p>


  <p>Twitter <a href="https://twitter.com/DocumentDB">@DocumentDB</a> 에서 팔로우하여 최신 DocumentDB 뉴스 및 기능을 최신 상태로 유지하거나 <a href="https://stackoverflow.com/questions/tagged/azure-documentdb">Stack Overflow의 개발자 포럼에</a> 문의하세요.</p>
