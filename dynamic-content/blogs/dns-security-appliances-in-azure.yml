### YamlMime:Yaml
ms.openlocfilehash: f6c0b99c6b30f70e2f16106150a6f8069593f19d
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139898630"
Slug: dns-security-appliances-in-azure
Title: Azure의 DNS 보안 어플라이언스
Summary: 이 문서에서는 DNS 기반 위협에 대한 개요를 제공하고 네트워크를 보호하는 몇 가지 방법을 설명합니다.
Content: >-
  <h2>개요</h2>


  <p>맬웨어 및 봇넷(예: ZeroAccess, Conficker 및 Storm)은 전파하고 통신할 수 있어야 합니다. DNS, IRC 및 피어 투 피어 네트워크를 비롯한 여러 통신 기술을 사용합니다. 일반적으로 DNS 프로토콜은 사용자에게 친숙한 도메인 이름을 컴퓨터 친화적인 IP 주소로 확인합니다. 그러나 대부분의 조직에서 DNS 쿼리를 필터링하지 않는다는 사실은 비밀 통신 채널로 사용할 수 있음을 의미합니다. 손상된 시스템을 떠나는 데이터는 DNS 쿼리에서 인코딩할 수 있으며, 의심을 일으키지 않고 DNS 응답의 맬웨어로 명령을 다시 보낼 수 있습니다.</p>


  <p>이 문서에서는 이 위협에 대한 개요를 제공하고 네트워크를 보호하는 몇 가지 방법을 설명합니다.</p>


  <h2>DNS 작동 방식</h2>


  <p>DNS는 고도로 분산된 시스템입니다. 즉, 단일 서버 또는 조직에서 모든 DNS 쿼리에 대한 답변을 제공하지 않습니다. .com&rdquo; DNS 서버는 &ldquo;microsoft.com&rdquo; 대한 &ldquo;DNS 데이터가 있는 Microsoft 서버를 알고 있지만 DNS 레코드 자체는 없습니다. 이러한 신뢰할 수 있는 DNS 서버는 자체 도메인에 대한 데이터만 저장하고 특정 DNS 레코드를 찾으려면 여러 신뢰할 수 있는 DNS 서버를 통과해야 할 수 있습니다.</p>


  <p>애플리케이션이 DNS 레코드를 조회해야 하는 경우 쿼리가 로컬 재귀 확인자로 전송됩니다. 이 서버는 신뢰할 수 있는 DNS 서버의 계층 구조를 탐색하여 필요한 DNS 레코드를 찾습니다. 이 프로세스를 재귀적 해결이라고 하며, 일반적으로 인프라 내 또는 이 경우 Azure 인프라 내에서 해결자의 집합에 의해 처리됩니다. 재귀 확인자의 IP 주소는 운영 체제(네트워크 관리자)에서 정적으로 구성되거나 DHCP와 같은 시스템을 통해 동적으로 구성됩니다. Azure는 DHCP를 사용합니다.</p>


  <p>&nbsp;</p>


  <p><img alt="" border="0" height="314" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2ac7eae6-2565-484c-aa8d-0dd0bf0e784d.png" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" title="" width="640"></p>


  <p>대부분의 경우 재귀 확인자는 확인 중인 쿼리를 필터링하지 않습니다. 네트워크 관리자가 외부 리소스에 대한 http 연결을 열도록 허용하지 않을 수 있지만 관리자가 임의 DNS 요청을 확인할 수 있습니다. 물론 DNS 쿼리가 수행할 수 있는 피해는 무엇인가요?</p>


  <h2>DNS 기반 위협</h2>


  <p>DNS 시스템은 도메인 이름을 IP 주소에 매핑하지 않습니다&rsquo;. 다양한 DNS 레코드 유형이 있습니다. 예를 들어 MX 레코드는 도메인의 메일 서버를 찾는 데 사용되며 TXT 레코드는 임의의 텍스트를 저장할 수 있습니다. TXT 레코드와 같은 레코드를 사용하면 맬웨어가 명령 또는 페이로드와 같은 데이터를 더 쉽게 검색할 수 있습니다.</p>


  <p>잘못된 행위자가 맬웨어 내에서 DNS 쿼리를 사용하여 명령 및 제어 서버에 연결할 수 있습니다. 맬웨어는 DNS 쿼리를 수행하고 이 대상이 흥미롭고 키 로거를 설치하는 것과 같은 지침 집합으로 &ldquo;응답을 해석합니다&rdquo;. DNS 쿼리를 사용하여 맬웨어 업데이트 및 추가 모듈을 다운로드할 수도 있습니다. 차단하기 어렵게 만들기 위해 맬웨어는 종종 DGA( <a href="https://en.wikipedia.org/wiki/Domain_generation_algorithm">도메인 생성 알고리즘</a> )를 사용하여 매일 많은 수의 새 도메인을 생성합니다. 통신 채널을 열어 두려면 공격자가 소수의 도메인만 등록하면 되지만 통신을 차단하려면 사법 당국이 거의 모든 도메인을 차단해야 합니다. 이것은 악당을 위해 갑판을 쌓습니다.</p>


  <p>좋아, 그래서&rsquo; 인바운드 통신. 감염된 서버에서 데이터를 내보내는 것은 어떨까요? DNS 프로토콜을 사용하면 도메인 이름을 최대 253자까지 사용할 수 있으며 something.mydomain.com&rdquo;&gt; 대한 &ldquo;&lt;쿼리는 mydomain.com&rdquo; DNS &ldquo;서버에 배치됩니다. 감염된 호스트(예: &ldquo;the_password_for_joeblogs_gmail_com_is_letMeIn.mydomain.com&rdquo;)에서 DNS 쿼리를 만들고 사용자 지정 DNS 서버 소프트웨어를 사용하여 다른 쪽 끝에 메시지를 해석하여 데이터를 내보낼 수 있습니다. 이 메서드는 DNS 인프라를 통해 TCP 트래픽을 터널하는 TCP-over-TCP와 혼동하지 않는 TCP-over-DNS 프로토콜로 일반화되었습니다.</p>


  <p>&rsquo;이러한 통신 채널을 사용하기 전에 맬웨어가 서버를 감염시켜야 한다는 점에 유의해야 합니다. 따라서 DNS 필터링은 주로 다른 기술이 초기 감염을 예방하지 못한 경우에 대한 계층화된 방어 메커니즘&ndash; 완화입니다. 데스크톱 환경에서 DNS 필터링은 메일 또는 웹 사이트의 악의적인 링크가 감염 프로세스를 시작하는 것을 방지하는 데 도움이 될 수 있습니다.</p>


  <h2>모범 사례</h2>


  <p>좋은 보안을 대체할 수 없으며 좋은 보안은 항상 계층화된 접근 방식을 사용합니다. 주요 초점은 맬웨어 감염 및 전파를 방지하는 것입니다. 추가 계층은 DNS 트래픽을 모니터링 및/또는 필터링하여 감염된 컴퓨터에서 맬웨어의 통신을 감지 및/또는 차단하는 것입니다. 균형 잡힌 방어 전략은 다음을 고려해야 합니다.</p>


  <ul>
   <li>서버를 패치된 <a href="https://azure.microsoft.com/documentation/articles/azure-security-best-practices-software-updates-iaas/">상태로 최신 상태로</a> 유지합니다.</li>
   <li>진정으로 필요한 <a href="https://azure.microsoft.com/documentation/articles/virtual-network-ip-addresses-overview-arm/">엔드포인트</a> 만 노출합니다.</li>
   <li><a href="https://azure.microsoft.com/documentation/articles/virtual-networks-nsg/">네트워크 ACL(네트워크 보안 그룹</a>)을 사용하여 네트워크 내에서 통신을 제한합니다(예: 신뢰할 수 있는 재귀 확인자 이외의 서버에 대한 DNS 트래픽(포트 53) 차단).</li>
   <li>방화벽(DNS, 애플리케이션 및 IP)을 사용하여 악성 트래픽을 검색 및 필터링하고 <a href="https://azure.microsoft.com/marketplace/partners/threatstopinc/threatstop-dns-firewallthreatstop-dns-firewall/">Azure Marketplace</a>에서 사용할 수 있는 타사 어플라이언스를 확인합니다.</li>
   <li>중요하고 위험한 워크로드를 분리합니다(예: 데이터베이스 서버에서 웹 서핑을 하지 마세요&rsquo;).</li>
   <li>서버에서 바이러스 백신/맬웨어 방지를 실행합니다(예: <a href="https://azure.microsoft.com/documentation/articles/azure-security-antimalware/">Azure용 맬웨어 방지</a>).</li>
   <li>DNS 트래픽에서 맬웨어 활동을 검사하는 스마트 DNS 확인자(DNS 방화벽)를 실행합니다. 사용 가능한 타사 <a href="https://azure.microsoft.com/marketplace/?term=DNS+firewall">DNS 방화벽</a>은 Azure Marketplace를 참조하세요.</li>
  </ul>


  <p>Azure 인프라는 핵심 보안 기능 집합을 제공하지만 Azure는 타사 보안 제품의 대규모 에코시스템을 구축하고 있습니다. &rsquo;<a href="https://azure.microsoft.com/marketplace/?term=Security">Azure Marketplace</a>(예: <a href="https://azure.microsoft.com/marketplace/?term=Firewall">방화벽</a>, <a href="https://azure.microsoft.com/marketplace/?term=waf">waf</a>, <a href="https://azure.microsoft.com/marketplace/?term=antivirus">바이러스 백신</a>, <a href="https://azure.microsoft.com/marketplace/?term=DNS+firewall">DNS 방화벽</a>)를 통해 사용할 수 있으며 몇 번의 클릭만으로 배포할 수 있습니다. 많은 사람들이 무료 평가판을 제공하며, 그 후에는 공급자를 통해 직접 또는 Azure 구독을 통해 매시간 청구할 수 있습니다.</p>


  <p>기업이 인프라에 DNS 방화벽을 배포하고&rsquo; 타사 DNS 방화벽을 Azure Marketplace에 추가하기 시작하는 추세가 증가하고 있습니다. 이러한 서버는 DNS 쿼리에서 맬웨어 활동 및 경고의 징후를 검사하거나 트래픽을 차단하는 특수 DNS 서버입니다. 예를 들어 CC&amp;(명령 및 제어) 서버에 대한 쿼리는 쿼리되는 도메인 또는 DNS 서버의 IP 주소로 식별할 수 있습니다. DNS 방화벽은 가상 네트워크 내에서 DNS 서버로 배포되며 종종 위협 인텔리전스 피드를 사용하여 변화하는 위협 환경을 최신 상태로 유지합니다. 따라서 가상 네트워크는 다음과 같이 표시됩니다.</p>


  <p>&nbsp;</p>


  <p><img alt="" border="0" height="314" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/54a7e0d7-207d-42d8-9e99-d858521fb3f2.png" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" title="" width="640"></p>
