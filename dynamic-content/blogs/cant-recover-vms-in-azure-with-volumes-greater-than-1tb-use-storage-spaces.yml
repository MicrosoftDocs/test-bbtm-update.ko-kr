### YamlMime:Yaml
ms.openlocfilehash: d4647b9cca7d59a0626eb274450991594f00dad3
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139907243"
Slug: cant-recover-vms-in-azure-with-volumes-greater-than-1tb-use-storage-spaces
Title: 볼륨이 1TB보다 큰 Azure에서 VM을 복구할 수 없나요? 저장소 공간 사용하세요!
Summary: ASR(Azure Site Recovery)은 모든 사용자가 Azure 애플리케이션을 보호하고 오케스트레이션된 복구 및 상태 모니터링을 사용하도록 설정하는 데 간단합니다. Windows 서버에서 저장소 공간 활용하여 더 큰 디스크를 구성하고 Azure에서 이러한 대량 워크로드를 복구하는 방법을 알아봅니다.
Content: >-
  보조 데이터 센터를 빌드하고 유지 관리하는 비용은 재해 복구의 주요 장애물 중 하나입니다. ASR(<a href="https://aka.ms/asr1tbblog_asrdoc">Azure Site Recovery</a>)은 모든 사용자가 Azure 애플리케이션을 보호하고 오케스트레이션된 복구 및 상태 모니터링을 사용하도록 설정하는 데 간단합니다.


  현재 Azure에서 지원되는 워크로드 구성을 보호할 수 있습니다. Azure의 디스크 크기 제한은 1TB이므로 일반적인 워크로드의 요구 사항으로 충분해야 하지만 더 큰 볼륨 크기가 필요한 워크로드가 있습니다. 이 블로그에서는 Windows 서버에서 <a href="https://aka.ms/asr1tbblog_ssref">저장소 공간</a> 활용하여 더 큰 디스크를 구성하고 Azure에서 이러한 VM을 복구하는 방법을 설명합니다. 저장소 공간 사용하는 또 다른 이점은 저장소 공간 조각된 가상 디스크에 대한 더 나은 스토리지 IOP를 얻을 수 있다는 것입니다.


  Azure가 VHD 크기가 1TB보다 큰 가상 머신을 기본적으로 지원하기 시작할 때까지 1TB보다 큰 디스크에 대한 지원이 필요하거나 저장소 공간 사용하여 여러 Azure 디스크에 걸쳐 볼륨을 만들어 우수한 IOP 성능을 활용하려는 고객이 이 솔루션을 사용할 수 있습니다.


  저장소 공간 스토리지 풀의 사용 가능한 용량에서 가상 디스크를 만들어 여러 디스크를 스토리지 풀로 그룹화할 수 있습니다. 자세한 내용은 <a href="https://aka.ms/asr1tbblog_ssreq">저장소 공간 개요</a> 섹션 설명서의 요구 사항을 참조하세요.


  아래 예제에서는 단일 디스크 이름 <em>f1.vhdx</em>에서 3TB 볼륨으로 가상 머신 '<em>SalesVM1</em>'을 보호해야 하는 고객을 보여 줍니다.  <a href="https://aka.ms/asr1tbblog_azurevmsize">Azure용 Virtual Machine 및 클라우드 서비스 크기</a>는 데이터 디스크에 대해 최대 1TB의 제한이 있습니다. 따라서 먼저 저장소 공간 사용하여 온-프레미스에서 3개의 1TB 디스크에 걸쳐 있는 단일 3TB 볼륨을 만들어야 합니다. Azure 표준 스토리지 계정은 <a href="https://aka.ms/asr1tbblog_storagelimit">디스크당 500IOP로 제한</a>되지만 애플리케이션은 디스크에 대해 1500IOP를 요구합니다. 또한 저장소 공간 성능 목표를 달성하는 데 도움이 되는 방법도 확인합니다.

  <ol>
      <li>각각 1TB를 사용하여 세 개의 새 VHDX(예: <em>ssdiskvhdx, ssdisk2.vhdx 및 ssdisk3.vhdx</em>)를 만듭니다.</li>
      <li>세 개의 디스크를 가상 머신 '<em>SalesVM1'에</em> 연결합니다.</li>
      <li>가상 머신에 로그인하고 아래 단계에 따라 <a href="https://aka.ms/asr1tbblog_ssdeploy">저장소 공간 볼륨을 설정합니다</a>.
  <ul>
      <li>새로 추가된 디스크를 온라인 상태로 설정합니다.</li>
      <li>스토리지 풀을 생성합니다.</li>
      <li>스토리지 풀에서 3TB 가상 디스크를 만듭니다.</li>
      <li>단일 볼륨으로 초기화합니다.</li>
  </ul>

  </li>
      <li>기존 볼륨( <em>vhdx</em> 기반)에서 가상 디스크의 새 볼륨으로 데이터를 복사합니다. 복사 기간 동안 이전 볼륨에서 작동하는 모든 애플리케이션을 중지하는 것이 좋습니다. 데이터를 복사해야 하는 기존 디스크가 있는 경우 이 단계가 필요합니다. <a href="https://aka.ms/asr1tbblog_robocopy">Robocopy</a>와 같은 명령줄 도구를 사용하여 데이터를 복사할 수 있습니다.</li>
      <li>복사본이 완료되기를 기다린 다음 기존 3TB 볼륨에 대한 드라이브 문자를 변경하고 새로 만든 볼륨에 동일하게 할당하고 애플리케이션을 시작합니다.</li>
      <li><a href="https://aka.ms/asr1tbblog_preservedrive">다시 부팅 시 드라이브 문자가 유지되도록</a> 하려면 SAN 정책을 OnlineAll로 설정합니다.</li>
      <li>Hyper-V 관리자 콘솔에서 이전 3TB <em>vhdx</em>(가상 하드 디스크)를 분리합니다.</li>
      <li>이제 모든 디스크가 1TB 한도 미만이므로 <a href="https://aka.ms/asr1tbblog_asrdoc">Azure Site Recovery</a>를 사용하여 가상 머신을 Azure로 보호할 수 있습니다.</li>
      <li>가상 머신을 Azure로 테스트 장애 조치(failover)하고 애플리케이션을 테스트합니다.</li>
  </ol>

  저장소 공간 사용하기 전에 고려해야 할 몇 가지 주요 고려 사항은 다음과 같습니다.

  <blockquote>

  <ul>
      <li>저장소 공간 VSS 기반 애플리케이션 일치 스냅샷을 지원하지 않습니다.
  <ul>
      <li>ASR Hyper-V/VMM 사이트 보호 시나리오는 저장소 공간 사용하는 VM에 대한 크래시 일치 스냅샷만 허용합니다.</li>
      <li>System Center DPM은 저장소 공간 사용한 크래시 일치 VM 백업만 허용합니다. 앱 일치 백업의 경우 게스트 내 DPM 백업을 활용할 수 있습니다.</li>
  </ul>

  </li>
      <li><a href="https://aka.ms/asr1tbblog_vmwaredoc">VMware/물리적 컴퓨터 보호</a> 시나리오는 저장소 공간 사용하는 VM을 지원하지 않습니다.</li>
      <li>볼륨 ID를 사용하는 솔루션은 데이터가 새 볼륨으로 마이그레이션됨에 따라 영향을 받을 수 있습니다. 예를 들어 기존 게스트 내 System Center DPM 볼륨 백업이 있는 경우 새 볼륨을 다시 보호해야 합니다.</li>
  </ul>

  </blockquote>

  ASR에서 보려는 피드백이나 기능이 있는 경우 <a href="https://aka.ms/asr1tbblog_feedback">Azure Site Recovery 피드백 포럼</a>을 사용하여 보내주세요.


  추가 정보는 <a href="https://aka.ms/asr1tbblog_forum">MSDN의 Azure Site Recovery 포럼을</a> 방문하여 다른 고객과 소통하세요. 자세한 내용은 <a href="https://aka.ms/asr1tbblog_asrdoc">Azure Site Recovery 설명서를 확인하세요</a>.


  <a href="https://aka.ms/asr1tbblog_asrdoc">Azure Site Recovery</a>를 시작하는 것은 쉽습니다. <a href="https://aka.ms/asr1tbblog_freetrial">무료 Microsoft Azure 평가판에 등록하기만</a> 하면 됩니다.
