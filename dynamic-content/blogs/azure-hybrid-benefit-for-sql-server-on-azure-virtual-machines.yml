### YamlMime:Yaml
ms.openlocfilehash: 33bdfeabef9fcec9ca8fe9a350d826a31c19f484
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139898160"
Slug: azure-hybrid-benefit-for-sql-server-on-azure-virtual-machines
Title: Azure Virtual Machines의 SQL Server 대한 Azure 하이브리드 혜택
Summary: SQL Server 대한 AHB(Azure 하이브리드 혜택)를 사용하면 온-프레미스 SQL Server 라이선스를 사용하여 Azure Virtual Machines에서 SQL Server 실행할 수 있습니다.
Content: >-
  <p><em>이 게시물은 Azure PowerShell 예제를 최근에 게시된 </em><a href="https://docs.microsoft.com/en-us/cli/azure/sql/vm?view=azure-cli-latest" target="_blank">Azure SQL VM CLI</a>로 대체하여 업데이트되었습니다.</p>


  <p>SQL Server 대한 AHB(<a href="https://azure.microsoft.com/en-us/pricing/hybrid-benefit/" target="_blank">Azure 하이브리드 혜택</a>)를 사용하면 온-프레미스 라이선스를 사용하여 <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-server-iaas-overview" target="_blank">Azure Virtual Machines에서 SQL Server</a> 실행할 수 있습니다. Software Assurance가 있는 경우 새 SQL VM을 배포할 때 AHB를 사용하거나 PAYG(종량제) 라이선스를 사용하여 기존 SQL VM에 대해 SQL Server AHB를 활성화할 수 있습니다. 새 SQL VM을 배포할 때 <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-server-pricing-guidance#bring-your-own-license-byol" target="_blank">Azure Marketplace의 BYOL(Bring Your Own License) SQL 이미지를</a> 사용하여 SQL Server AHB를 구현해야 합니다. 그러나 PAYG 라이선스가 있는 SQL VM이 이미 있는 경우 AHB를 활성화하려면 현재 BYOL SQL 이미지를 사용하여 VM을 다시 배포해야 합니다.</p>


  <p>현재는 SQL <a href="https://azure.microsoft.com/en-us/blog/sql-server-on-azure-virtual-machine-resource-provider/" target="_blank">VM 리소스 공급자</a>를 사용하여 Azure VM에서 SQL Server AHB를 활성화하는 새롭고 간단한 방법을 공개하고 있습니다. SQL VM 리소스 공급자는 새로운 Azure 리소스 공급자인 <strong>Microsoft입니다. Azure Resource Manager를</strong> 통해 배포 및 관리할 수 있는 리소스로 Azure VM에 대한 SQL Server 구성을 제공하는 SqlVirtualMachine입니다. 이 새로운 인프라는 라이선스 유형과 같은 SQL Server 설정의 동적 업데이트를 포함하여 Azure VM에서 SQL Server 위한 백 엔드 관리 서비스를 제공합니다. 기존 PAYG SQL VM에 대한 SQL Server AHB를 활성화하려면 Microsoft를 만들기만 하면 합니다<strong>. VM</strong>&#39;리소스 ID를 제공하고 <strong>SqlServerLicenseType</strong>을 <strong>AHUB</strong>로 &ldquo; 설정하여 기존 VM에 대한 SqlVirtualMachine/SqlVirtualMachine 형식 리소스입니다.&rdquo;</p>


  <p>우선 Microsoft에 구독을 등록해야 합니다 <strong>. </strong> 다음 Azure CLI 명령을 실행하거나 Azure Portal을 통해 등록하여 <strong>SqlVirtualMachine 형식 리소스를 만들어 SqlVirtualMachine</strong> 공급자를 만듭니다.</p>


  <pre>

  // Register subscription with SQL VM RP


  az provider register --namespace Microsoft.SqlVirtualMachine --subscription &lt;subscription name&gt;</pre>


  <p>그런 다음, MSI 패키지를 다운로드하여 <a href="https://docs.microsoft.com/en-us/cli/azure/sql/vm?view=azure-cli-latest" target="_blank">Azure SQL VM CLI</a>에 액세스하여 Azure <a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli-windows?view=azure-cli-latest" target="_blank">CLI를 설치하거나 업데이트</a>합니다.</p>


  <p>다음은 기존 PAYG <a href="https://docs.microsoft.com/en-us/cli/azure/sql/vm?view=azure-cli-latest#az-sql-vm-create" target="_blank">SQL VM</a>에 대한 AHB를 활성화하는 Azure SQL VM 만들기 CLI 명령입니다.</p>


  <pre>

  // Create an AHUB SqlVm

  az sql vm create -n &lt;VM Name&gt; -g &lt;Resource Group Name&gt; -l &lt;Location&gt; --license-type AHUB

  EX: az sql vm create -n sqlvm -g myresourcegroup -l eastus --license-type AHUB</pre>


  <p><strong>SqlVirtualMachine</strong> 리소스를 만드는 동안 <strong>SqlServerLicenseType</strong> 속성을 설정하지 않은 경우 <strong>SqlServerLicenseType</strong>은 기본적으로 <strong>PAYG</strong>&rdquo;로 &ldquo; 설정됩니다. 다음 <a href="https://docs.microsoft.com/en-us/cli/azure/sql/vm?view=azure-cli-latest#az-sql-vm-update" target="_blank">Azure SQL VM 업데이트 CLI</a> 명령을 사용하여 Software Assurance가 있는 경우 언제든지 <strong>SqlServerLicenseType</strong> 속성을 AHUB&rdquo;로 &ldquo;업데이트하여 SQL Server AHB를 활성화할 수 있습니다.</p>


  <pre>

  // Update SqlVirtualMachine SqlServerLicenseType property

  az sql vm update -n &lt;VM Name&gt; -g &lt;Resource Group Name&gt; --license-type AHUB

  EX: az sql vm update -n sqlvm -g myresourcegroup --license-type AHUB</pre>


  <p>최근에 Azure Portal을 통해 SQL VM을 만들었거나 Azure Portal을 통해 기존 SQL VM에 대한 SQL 구성을 업데이트한 경우 SQL VM이 이미 SQL VM RP에 등록되어 있습니다. 이 경우 Azure SQL VM 업데이트 CLI 명령만 실행하여 라이선스 유형을 PAYG에서 AHUB로 업데이트해야 합니다. <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-server-pricing-guidance#byol" target="_blank">Azure Marketplace의 PAYG SQL Server 이미지</a>에서 원래 VM을 만든 경우 라이선스 유형을 AHUB로 업데이트하고 언제든지 제한 없이 PAYG로 다시 업데이트할 수 있습니다. 원래 VM이 PAYG SQL Server 이미지에서 만들어지지 않았지만 SQL SERVER BYOL SQL Server 이미지에서 자체 설치 또는 배포된 경우 라이선스 유형을 PAYG로 변환할 수 없습니다.</p>


  <h2>가동 중지 시간 없음</h2>


  <p>새 <strong>SqlVirtualMachine</strong> 리소스는 기존 VM 리소스에 연결됩니다. 이는 기존 VM 리소스에 영향을 주지 않습니다. <strong>SqlVirtualMachine</strong> 리소스는 SQL IaaS 확장 속성에서 읽어 SQL Server 설정에 대한 메타데이터를 관리합니다. VM이 삭제되면 연결된 <strong>SqlVirtualMachine</strong> 리소스에 알린 다음 비동기적으로 삭제됩니다. <strong>VM 리소스를 유지하여 SqlVirtualMachine</strong> 리소스를 독립적으로 삭제할 수 있습니다. 그러나 SQL Server 라이선스 변경 내용은 이 경우 원래 상태로 대체합니다.</p>


  <h2>VM 다시 시작 없음</h2>


  <p>PAYG SQL VM에 대한 SQL Server AHB를 활성화해도 VM이 다시 시작되지 않으며 기존 리소스에 영향을 주지 않습니다. VM 리소스에 대한 청구서를 정의하는 SQL Server 라이선스 유형을 나타내는 메타데이터만 업데이트합니다.</p>


  <h2>추가 비용이 없습니다.</h2>


  <p><strong>SqlVirtualMachine</strong> 리소스는 자동화된 백업, 패치, Azure Key Vault 통합 및 스토리지 구성 및 새 &ldquo;<strong>SqlServerLicenseType</strong>을 포함하여 현재 사용 가능한 모든 기존 SQL Server 구성을 관리합니다.&rdquo; 추가 리소스 및 향상된 관리 효율성은 추가 비용이 없습니다.</p>


  <h2>즉시 적용</h2>


  <p>Azure 리소스에 대한 청구는 각 리소스의 초당 비용을 1시간의 사용된 초와 곱하여 생성됩니다. SQL Server 라이선스 비용은 SQL Server 라이선스 유형이 <strong>AHUB</strong>로 &ldquo; 업데이트된 직후 VM 리소스 청구서에서 제거됩니다.&rdquo; 일일 Azure 청구서의 변경 내용을 확인할 수 있습니다. SQL Server AHB를 비활성화하려면 SQL Server 라이선스 유형을 <strong>PAYG</strong>로 설정하여 동일한 업데이트 명령을 실행하기만 하면됩니다. 새 명령이 실행된 직후에 초당 SQL Server 라이선스 비용이 VM 청구서에 추가됩니다.</p>


  <h2>모든 구독 유형에 대한 하나의 솔루션</h2>


  <p>Software Assurance를 사용하는 고객은 구독 유형에 관계없이 SQL Server AHB 권한을 가집니다. BYOL SQL 이미지를 기반으로 Azure VM에서 SQL Server AHB를 활성화하기 위한 이전 솔루션은 EA 고객에게만 제공되었지만 위에서 설명한 새로운 솔루션은 Software Assurance를 사용하는 모든 구독에 적용할 수 있습니다.</p>


  <p>새 <strong>Microsoft를 사용하여. SqlVirtualMachine</strong> 리소스 공급자는 Azure VM에서 SQL 서버 구성을 동적으로 관리할 수 있습니다. 유연한 SQL Server 라이선스 유형 구성은 SQL VM 리소스 공급자와 함께 제공하는 첫 번째 기능이며 SQL VM에 대한 즉각적이고 상당한 비용 절감을 가능하게 합니다.</p>
