### YamlMime:Yaml
ms.openlocfilehash: 0b5f10f7fd02e41e698a181a2a8cbceceacb7575
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139901722"
Slug: confirming-dynamic-ip-address-restrictions-in-windows-azure-web-sites
Title: Windows Azure 웹 사이트에서 동적 IP 주소 제한 구성
Summary: 최근 Windows Azure 웹 사이트를 업그레이드하여 IIS8에 대한 동적 IP 제한 모듈을 사용하도록 설정했습니다.이제 개발자는 동적 IP 제한 기능(또는 DIPR을 간단히 사용)을 사용하도록 설정하고 구성할 수 있습니다...
Content: >-
  최근 Windows Azure 웹 사이트를 업그레이드하여 IIS8에 대한 동적 IP 제한 모듈을 사용하도록 설정했습니다.이제 개발자는 웹 사이트에 대해 동적 IP 제한 기능(또는 DIPR)을 사용하도록 설정하고 구성할 수 있습니다.


  IIS8 기능에 대한 개요는 다음과 같습니다.


  <a href="https://www.iis.net/learn/get-started/whats-new-in-iis-8/iis-80-dynamic-ip-address-restrictions" target="_blank">https://www.iis.net/learn/get-started/whats-new-in-iis-8/iis-80-dynamic-ip-address-restrictions</a>


  DIPR 기능은 개발자를 위한 두 가지 주요 보호를 제공합니다.

  <ul>
   <li>동시 요청 수에 따라 IP 주소 차단</li>
   <li>일정 기간 동안 요청 수에 따라 IP 주소 차단</li>
  </ul>

  개발자는 차단된 요청에 다시 전송된 실패 HTTP 상태 코드 유형과 같은 DIPR 동작을 추가로 구성할 수 있습니다.


  Azure 웹 사이트에서 개발자는 웹 사이트의 루트 폴더에 있는 web.config 파일에 추가된 구성 섹션을 사용하여 DIPR을 구성합니다.


  동시 요청 수(즉, 현재 진행 중인 활성 요청)에 따라 연결을 차단하려는 경우 웹 사이트의 web.config 파일에 다음 구성 코드 조각을 추가합니다.


  <a href="" target="_blank"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/4111.Screen-Shot-2013_2D00_08_2D00_27-at-11.30.04-AM.png" border="0" /></a>


  <em>denyByConcurrentRequests</em> 요소에서 <em>사용 가능한</em> 특성을 <strong>true</strong>로 설정하면 IIS는 최대 동시 요청 수가 <em>maxConcurrentRequests</em> 특성에 설정된 값(위의 예제에서 10으로 설정)을 초과하면 IP 주소에서 요청을 자동으로 차단하기 시작합니다.


  또는 특정 기간 내에 수행된 총 요청 수에 따라 연결을 차단하려는 경우 다음 구성 조각을 사용할 수 있습니다.


  <a href="" target="_blank"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/5488.Screen-Shot-2013_2D00_08_2D00_27-at-11.35.38-AM.png" border="0" /></a>


  위의 예제에서 <em>denyByRequestRate</em> 요소에서 <em>enabled</em> 특성을 <strong>true</strong>로 설정하면 <em>requestIntervalInMilliseconds</em>로 정의된 기간 내에 관찰된 총 요청 수(2,000ms로 설정)가 IP 주소의 요청을 차단하도록 IIS에 지시합니다. 예제에서) <em>maxRequests</em> 특성에 설정된 값을 초과합니다(예제에서는 10으로 설정).따라서 2초 이내에 10개 이상의 요청을 하는 클라이언트가 차단됩니다.


  마지막으로 개발자는 두 차단 메커니즘을 동시에 사용하도록 선택할 수도 있습니다.아래 코드 조각은 DIPR에 10개 이상의 동시 요청이 있거나 5초 내에 총 요청이 20개 이상인 클라이언트를 차단하도록 지시합니다.


  <a href="" target="_blank"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7317.Screen-Shot-2013_2D00_08_2D00_27-at-11.36.21-AM.png" border="0" /></a>


  DIPR이 IP 주소를 차단한 후에는 현재 기간이 끝날 때까지 주소가 차단된 상태로 유지되며, 그 후에는 IP 주소가 다시 한 번 웹 사이트에 요청을 할 수 있습니다.예를 들어 <em>requestIntervalInMilliseconds </em>가 5000(5초)으로 설정되고 IP 주소가 2초 표시에서 차단되는 경우 주소는 현재 시간 창에 남은 시간인 3초 동안 차단된 상태로 유지됩니다.


  개발자는 <em>dynamicIpSecurity </em>요소 자체에서 <em>denyAction</em> 특성을 구성하여 클라이언트가 차단될 때 반환되는 오류를 사용자 지정할 수 있습니다. <em>denyAction</em>에 허용되는 값은 다음과 같습니다.

  <ul>
   <li>AbortRequest(HTTP 상태 코드 0 반환)</li>
   <li>권한 없음(HTTP 상태 코드 401 반환)</li>
   <li>사용할 수 없음(HTTP 상태 코드 403을 반환합니다).기본 설정입니다.</li>
   <li>NotFound(HTTP 상태 코드 404 반환)</li>
  </ul>

  예를 들어 기본값(사용할 수 없음 403) 대신 404 상태 코드를 보내려는 경우 다음 구성을 사용할 수 있습니다.


  <a href="" target="_blank"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6765.Screen-Shot-2013_2D00_08_2D00_27-at-11.36.58-AM.png" border="0" /></a>


  한 가지 질문은 AZURE 웹 사이트에서 실행할 때 DIPR에서 볼 수 있는 IP 주소입니다.Windows Azure에서 실행한다는 것은 웹 애플리케이션이 다양한 부하 분산 장치 뒤에 있다는 것을 의미합니다.이는 웹 사이트에 표시되는 클라이언트 IP 주소가 인터넷에서 실제 클라이언트가 아닌 업스트림 부하 분산 장치의 주소임을 의미할 수 있습니다.그러나 Azure 웹 사이트는 사용자를 대신하여 필요한 번역을 자동으로 처리하고 DIPR 모듈에서 "본" 클라이언트 IP 주소가 HTTP 요청을 만드는 인터넷 클라이언트의 실제 IP 주소인지 확인합니다.
