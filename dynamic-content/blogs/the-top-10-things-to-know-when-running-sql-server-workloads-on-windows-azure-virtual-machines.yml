### YamlMime:Yaml
ms.openlocfilehash: 30cf5314d605585a1d7da4ab93efd0c27fc5a37e
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139911546"
Slug: the-top-10-things-to-know-when-running-sql-server-workloads-on-windows-azure-virtual-machines
Title: Windows Azure Virtual Machines에서 SQL Server 워크로드를 실행할 때 알아야 할 상위 10가지 사항
Summary: >-
  이 문서는 최신 상태가 아닙니다. 최신 정보는 Azure Virtual Machines의 SQL Server Azure VM의 SQL Server 대한 가격 책정 세부 정보를 참조하세요.

  의 가용성을 발표했을 때...
Content: >-
  <strong>이 문서는 최신 상태가 아닙니다. 최신 정보는</strong> <a href="https://msdn.microsoft.com/library/azure/jj823132.aspx">Azure Virtual Machines의 SQL Server Azure</a> <a href="https://azure.microsoft.com/en-us/pricing/details/virtual-machines/#sql-server">VM의 SQL Server 대한 가격 책정 세부 정보를</a> 참조하세요.

  <p class="Publishwithline">2012년 6월 Azure Virtual Machines 및 Virtual Network 미리 보기 Windows 가용성을 발표했을 때(<a href="https://azure.microsoft.com/en-us/home/scenarios/infrastructure-services/" target="_blank">Azure Infrastructure Services를 Windows</a> 이 두 서비스 집합이라고 함) 전 세계 조직은 Microsoft SQL Server 워크로드를 테스트하고 미리 보기를 제한으로 푸시하기 시작했습니다. Windows Azure Infrastructure Services를 사용하여 놀라운 작업을 수행할 수 있습니다. 하드웨어를 조달하고 관리할 필요 없이 저렴한 비용으로 다양한 유형의 SQL Server 워크로드를 실행할 수 있는 VM(가상 머신)을 신속하게 배포하는 기능은 광범위합니다. 가상 네트워크에서 복잡한 다중 VM 배포, AD(Active Directory) 지원, SharePoint 지원, 가상 네트워크를 온-프레미스 네트워크 또는 VPN(가상 사설망) 게이트웨이를 사용하여 원격 머신에 다시 연결하는 기능은 IT 상점과 개발자 모두를 위한 오프-프레미스 호스팅 환경으로서 더욱 흥미로울 수 있습니다. Windows Azure Infrastructure Services는 조직이 기존 워크로드 중 일부를 클라우드로 마이그레이션하는 데 사용할 수 있는 디딤돌이며, 동시에 하이브리드 방식으로 Azure를 Windows 최신의 "Platform-as-a-Service" 기능을 활용하는 동시에 변경 없이 클라우드로 마이그레이션할 수 있습니다. 조직에서 간단한 개발 및 테스트 SQL Server 워크로드에서 복잡한 분산 중요 업무용 워크로드에 이르기까지 모든 것을 실행하는 것을 보았습니다. 다음은 그들의 경험에서 배운 몇 가지 사항입니다.</p>


  <ol start="1">
   <li><strong><span style="text-decoration: underline;">SLA를 알아봅니다.</span></strong> 해당 서버를 분리하고 SQL Server 워크로드를 Windows Azure로 이동하기 전에 관련 SLA(<a href="https://azure.microsoft.com/en-us/support/legal/sla/" target="_blank">서비스 수준 계약</a>)를 이해해야 합니다. "동일한 가용성 집합에 둘 이상의 인스턴스가 배포된 모든 인터넷 연결 Virtual Machines의 경우 99.95% 이상의 시간 동안 외부 연결이 보장됩니다."이것은 SQL Server 관점에서 무엇을 의미합니까? 즉, 이 SLA를 적용하려면 SQL Server 실행되는 둘 이상의 VM을 배포하고 모두 동일한 가용성 집합에 추가해야 합니다. 자세한 내용은 <a href="https://azure.microsoft.com/en-us/manage/windows/common-tasks/manage-vm-availability/" target="_blank">Virtual Machines의 가용성 관리를 참조하세요</a> . 또한 가용성 집합의 모든 가상 머신에서 데이터베이스가 동기화되도록 하려면 <a href="https://msdn.microsoft.com/en-us/library/ms190202.aspx" target="_blank">SQL Server 고</a>가용성 솔루션을 구현해야 합니다. 결론은 이러한 워크로드가 온-프레미스에서 실행되는 경우와 마찬가지로 클라우드에서 고가용성을 보장하기 위해 몇 가지 작업을 수행해야 한다는 것입니다. 제대로 구성된 경우 가용성 집합은 업그레이드 및 하드웨어 새로 고침과 같은 유지 관리 작업 중에도 SQL Server 워크로드가 계속 실행되도록 합니다.</li>
   <li><strong><span style="text-decoration: underline;">지원 정책 파악:</span></strong><strong><span style="text-decoration: underline;">
  </span></strong> Windows Azure Virtual Machines에서 SQL Server 실행하는 것은 다른 곳에서 SQL Server 실행하는 것과 매우 비슷하다는 것입니다. 문제 없이 작동하며 애플리케이션을 변경하거나 다양한 SQL Server 기능이 지원되는지 걱정할 필요가 없습니다. 대부분의 SQL Server 기능은 몇 가지 중요한 예외를 제외하고 Windows Azure Infrastructure Services에서 실행할 때 완전히 지원됩니다. SQL Server 버전 지원부터 시작해 보겠습니다. Microsoft는 Windows Azure Infrastructure Services에서 SQL Server 2008 이상 버전에 대한 기술 지원을 제공합니다. SQL Server 2005 이전 버전에서 워크로드를 계속 실행하는 경우 지원을 받으려면 최신 버전으로 업그레이드해야 합니다. 업그레이드하려는 경우 SQL Server 2012로 업그레이드하는 것이 좋습니다. 관리 도구, 개발 도구 및 기본 데이터베이스 엔진에서 Windows Azure에 대한 기본 지원을 통해 "클라우드 준비"로 설계되었습니다. 먼저 고가용성을 살펴보겠습니다. Windows Azure Infrastructure Services에서 SQL Server 배포에 대한 고가용성 솔루션을 구현하는 것에 대해 걱정할 필요가 없다고 생각되는 경우 다시 생각해 보세요. 이전 섹션에서 설명한 대로 SLA에서 다루려면 가상 머신 가용성 집합에서 일종의 데이터베이스 중복성을 구현해야 합니다. 그러나 SQL Server 고가용성 기능에 영향을 주는 몇 가지 제한 사항이 있습니다. 우선 <a href="https://msdn.microsoft.com/en-us/library/ms189134.aspx" target="_blank">SQL Server 장애 조치(failover) 클러스터링</a>이 지원되지 않습니다. <a href="https://msdn.microsoft.com/en-us/library/hh510230.aspx" target="_blank">AlwaysOn 가용성 그룹과</a> 같은 고가용성 구성에서 또는 <a href="https://msdn.microsoft.com/en-us/library/ms189852.aspx" target="_blank">데이터베이스 미러링</a> 또는 <a href="https://msdn.microsoft.com/en-us/library/ms187103.aspx" target="_blank">로그 전달</a>과 같은 레거시 기능을 사용하여 SQL Server 배포하려는 경우 당황하지 마세요. 고가용성을 위해 SQL Server 2012의 AlwaysOn 가용성 그룹 기능을 사용하는 것이 좋지만 이 경로로 이동하는 경우 고려해야 할 몇 가지 고려 사항이 있습니다. <a href="https://msdn.microsoft.com/en-us/library/hh213417.aspx" target="_blank">가용성 그룹 수신기</a> 는 현재 지원되지 않지만 가까운 장래에 이에 대한 지원을 추가할 계획이므로 계속 지켜봐 주시기 바랍니다. 수신기 지원을 기다릴 수 없고 AlwaysOn 가용성 그룹을 계속 사용하려는 경우 해결 방법이 있습니다. 대신 <em>FailoverPartner</em> 연결 문자열 특성을 사용할 수 있습니다. 이 방법은 AlwaysOn 가용성 그룹의 복제본 2개(주 복제본 1개 및 보조 복제본 1개)로 제한되며 읽을 수 있는 보조 복제본의 개념을 지원하지 않는다는 점에 유의해야 합니다. 자세한 내용은 <a href="https://msdn.microsoft.com/en-us/library/ms175484.aspx" target="_blank">데이터베이스 미러링 세션에 커넥트 클라이언트</a>를 참조하세요.</li>

  </ol>

  다음으로, SQL Server 데이터베이스에 대한 스토리지를 구성할 때 적용되는 몇 가지 중요한 고려 사항에 대해 살펴보겠습니다. 일반적으로 단일 데이터 디스크를 VM에 연결하고 이를 사용하여 모든 데이터 및 로그 파일을 저장하는 것이 좋습니다. 더 많은 스토리지 용량 또는 더 나은 성능을 얻기 위해 여러 데이터 디스크에 데이터 및 로그 파일을 분산하기로 결정한 경우 <a href="https://blogs.msdn.com/b/windowsazurestorage/archive/2011/09/15/introducing-geo-replication-for-windows-azure-storage.aspx" target="_blank">지역 복제</a>를 사용하도록 설정하면 안 됩니다. 여러 디스크에서 일관된 쓰기 순서가 보장되지 않으므로 여러 디스크 구성에서 지역 복제를 사용할 수 없습니다.


  마지막으로 <a href="https://msdn.microsoft.com/en-us/library/ms151198.aspx" target="_blank">복제,</a> <a href="https://msdn.microsoft.com/en-us/library/bb522893.aspx" target="_blank">Service Broker</a>, 분산 <a href="https://msdn.microsoft.com/en-us/library/ms191440%28v=SQL.105%29.aspx" target="_blank">트랜잭션</a>, <a href="https://msdn.microsoft.com/en-us/library/ms188721%28v=SQL.105%29.aspx" target="_blank">분산 쿼리</a>, <a href="https://msdn.microsoft.com/en-us/library/ms188279.aspx" target="_blank">연결된 서버</a> 등과 같이 SQL Server 지원하는 다양한 "분산" 기능을 다룹니다. 이러한 모든 항목은 동일한 가상 네트워크에 배포된 SQL Server VM에서 잘 작동해야 하지만, 공용 인터넷 또는 가상 네트워크 VPN 게이트웨이를 통해 해당 경계를 넘기 시작하면 철저히 테스트하는 것이 좋습니다. 이러한 기능은 공용 인터넷이 아닌 온-프레미스 데이터 센터, 언 및 WAN에서 사용하도록 설계되었습니다.


  하드웨어 <a href="https://support.microsoft.com/kb/956893" target="_blank">가상화 환경에서 실행되는 Microsoft SQL Server 제품에 대한 지원 정책을</a> 좀 더 자세히 읽으세요.

  <strong></strong>

  <ul>
   <li><strong><span style="text-decoration: underline;">라이선스를 파악합니다.</span></strong> Windows Azure Infrastructure Services에서 SQL Server 배포에 라이선스를 부여할 수 있는 첫 번째(그리고 가장 쉬운) 방법은 이미지 갤러리에서 미리 빌드된 SQL Server 플랫폼 이미지 중 하나를 사용하여 새 가상 머신을 만드는 것입니다. 이 방법을 사용하면 선택한 SQL Server 버전(Enterprise, 표준 또는 웹)에 따라 <a href="https://azure.microsoft.com/en-us/pricing/details/virtual-machines/">시간당 요금을 지불</a>합니다. 제품 키, 정품 인증 등에 대해 걱정할 필요가 없으며 몇 분 안에 새로 프로비전된 SQL Server VM에 액세스할 수 있습니다. 분당 요금이 부과되며 최소값은 없습니다. 자세한 내용은 <a href="https://azure.microsoft.com/en-us/manage/windows/common-tasks/install-sql-server/">Windows Azure에서 SQL Server Virtual Machine 프로비저닝</a>을 참조하세요. Microsoft는 VM 내부를 살펴보지 않으므로 플랫폼 이미지를 사용하여 프로비전된 VM에서 SQL Server 설치를 취소하는 경우 VM을 삭제하지 않는 한 SQL Server 사용 요금이 청구됩니다. 두 번째 옵션은 "사용자 고유의 VM을 가져오는 것"입니다. 여기에는 자체 Hyper-V VM을 온-프레미스에 빌드하고, SQL Server 설치한 다음, azure에 업로드하는 Windows 작업이 포함됩니다. 이 작업을 수행하는 방법에 대한 지침은 <a href="https://azure.microsoft.com/en-us/manage/windows/common-tasks/upload-a-vhd/">Windows 서버 운영 체제가 포함된 가상 하드 디스크 만들기 및 업로드</a>를 참조하세요. 사용자 고유의 VM을 가져올 때 Windows Server 운영 체제 라이선스 비용은 시간별 컴퓨팅 요금에 기본 제공되지만 SQL Server 같은 다른 서버 제품의 경우는 그렇지 않으며 VM이 Microsoft 라이선스 정책을 준수하는지 확인해야 합니다. 기본적으로 SQL Server 같은 서버 제품은 가상화된 구성 또는 Windows Azure Infrastructure Services와 같은 호스팅 환경에서 실행할 수 있는 라이선스가 없습니다. Microsoft는 프로덕션 워크로드 또는 개발/테스트 워크로드를 실행하는지 여부에 따라 이 시나리오에 대해 다양한 SQL Server 라이선스 옵션을 제공합니다.</li>
  </ul>

  &nbsp;


  프로덕션 SQL Server 워크로드를 실행하려면 소프트웨어 유지 관리를 구매해야 합니다. 자세한 내용은 <a href="https://www.windowsazure.com/en-us/pricing/license-mobility/">Software Assurance를 통한 Microsoft License Mobility</a> 를 참조하세요. 라이선스 관점에서 온-프레미스에 필요한 것과 동일한 SQL Server 버전 및 라이선스 수가 필요합니다. 예를 들어 온-프레미스에서 SQL Server Standard 또는 Enterprise Edition 코어 기반 라이선스를 사용하는 경우 Software Assurance를 사용하여 해당 핵심 라이선스를 Windows Azure로 이동할 수 있습니다. Virtual Machine당 최소 4개의 코어 라이선스가 적용되므로 적절한 크기의 가상 머신을 선택합니다. 라이선스를 온-프레미스 서버에 다시 할당하도록 선택한 경우 90일 동안 기다려야 합니다. 개발/테스트 SQL Server 워크로드를 실행하려면 MSDN Pro, Premium 또는 Ultimate 구독을 구매하는 것이 좋습니다.추가 비용 없이 VM에 MSDN 구독(SQL Server 포함)에 포함된 대부분의 소프트웨어를 설치할 수 있습니다.자세한 내용은 <a href="https://azure.microsoft.com/en-us/pricing/member-offers/msdn-benefits/">MSDN 구독자에 대한 Windows Azure 혜택을 참조하세요</a>.


  고유한 SQL Server VM을 만들기로 결정한 경우 <strong>SysPrep</strong> 유틸리티를 사용하여 SQL Server VM 이미지 준비를 크게 간소화하는 SQL Server 2012 SP1 누적 업데이트에서 발표한 몇 가지 최근 개선 사항을 알고 있어야 합니다. 자세한 내용은 <a href="https://blogs.technet.com/b/scvmm/archive/2013/01/25/expanded-sysprep-support-in-sql-server-2012-sp1-cu2.aspx">SQL Server 2012 SP1 CU2의 확장된 SysPrep 지원을</a> 참조하세요.


  SQL Server AlwaysOn 가용성 그룹 배포의 경우 Windows Azure Infrastructure Services(또는 기타 호스팅 환경)에서 실행되는 SQL Server 배포에는 "무료 수동 장애 조치(failover) 인스턴스" 라이선스 혜택이 적용되지 않습니다. 이 혜택은 온-프레미스 배포, 즉 공유 호스팅 환경을 포함하지 않는 배포에만 적용됩니다. 즉, 모든 복제본에 SQL Server Enterprise 버전의 정식 라이선스 복사본이 필요합니다. 이러한 모든 세부 정보를 빠르게 파악하려면 <a href="https://download.microsoft.com/download/7/3/C/73CAD4E0-D0B5-4BE5-AB49-D5B886A5AE00/SQL_Server_2012_Licensing_Reference_Guide.pdf">SQL Server 2012 라이선싱 가이드</a>를 확인하세요.

  <ul>
   <li><strong><span style="text-decoration: underline;">하드웨어 및 Storage 파악:</span></strong> 이 섹션에서는 CPU, RAM, I/O 및 네트워크 관점에서 Azure 인프라 서비스를 Windows 성능 특성을 살펴봅니다. Microsoft는 Azure Infrastructure Services를 Windows 매우 경쟁력 있는 비용으로 뛰어난 컴퓨팅 및 스토리지 성능을 제공하기 위해 최선을 다하고 있습니다(자세한 내용은 <a href="https://www.windowsazure.com/en-us/pricing/details/virtual-machines/" target="_blank">Virtual Machine 가격 정보</a> 참조). 그러나 클라우드의 핵심 가치 제안은 비용이 많이 드는 전용 큰 철에서 스케일 업하지 않고 공유, 저비용 컴퓨팅 및 스토리지 인프라를 사용하여 스케일 아웃하는 것입니다. 많은 대규모 조직에서 이미 자체 프라이빗 클라우드에서 SQL Server 워크로드의 일부 또는 전부를 가상화하고 있지만, 일부 하드 코어 SQL Server 굳건한 일부는 성능 및 안정성에 대해 여전히 회의적입니다. 레코드의 경우 SQL Server 가상화가 완전히 지원되며 여기에 있습니다. 하지만 비용이 많이 드는 대규모 서버 및 스토리지 하위 시스템을 확장할 때 가능한 VM을 사용하여 동일한 수준의 성능을 달성할 것으로 기대할 수는 없습니다. Windows Azure Virtual Machines는 공유 클러스터의 상용 서버에서 호스트되며, Windows Azure Disks(OS 및 데이터 디스크)는 기본 제공 중복성이 있는 공유 스토리지 서비스인 Windows Azure Storage 사용하여 구현됩니다. CPU 관점에서 가상화에 대한 대가를 지불합니다. IO 관점에서 공유 중복 스토리지에 대한 가격을 지불합니다. 따라서 Azure Infrastructure Services를 Windows 위해 고도로 튜닝된 중요 업무용 SQL Server OLTP 워크로드를 포크하기 전에 성능, 처리량 및 대기 시간에 대한 숙제를 수행해야 합니다. 철저하게 계획하고 테스트하는 경우 대부분의 일반적인 SQL Server 워크로드는 Windows Azure Virtual Machine에서 제대로 실행됩니다. 그러나 성능에 민감한 "스케일 업" 워크로드의 비율은 적지만 이러한 환경에는 적합하지 않습니다.</li>
  </ul>

  &nbsp;


  CPU부터 시작해 보겠습니다. 가상 코어의 클록 속도 및 기타 특성은 어떤 종류의 호스트 서버를 사용하는지에 따라 다소 달라질 수 있습니다. SQL Server 숨쉬는 데 약 4GB의 RAM이 필요하기 때문에 중간 크기의 VM 인스턴스(A2) 이상을 사용해야 합니다. A2 이상의 VM은 전용 가상 코어를 제공하므로 동일한 호스트의 다른 VM과 가상 코어를 공유할 필요가 없습니다. 선택한 VM 크기에 따라 두 개의 가상 코어(A2)에서 8개의 가상 코어(초대형 A4 VM 이상)를 가져올 수 있습니다.


  다음으로 RAM을 살펴보겠습니다. 빅 데이터 집합에 대한 읽기 집약적인 SQL Server 및 Analysis Services 워크로드에는 최적의 성능을 위해 메모리에 있는 모든 데이터를 캐시하는 데 많은 RAM이 필요한 경우가 많습니다. SQL Server 캐시 적중률이 하향 추세인 경우 더 큰 VM 크기로 이동하여 더 많은 RAM을 얻을 수 있습니다. 중간(A2) VM의 3.5GB RAM에서 높은 메모리 A7 VM의 56GB RAM까지 어디서나 얻을 수 있습니다. 비용을 제어하려면 VM 크기를 조정하는 경우 보수적이어야 합니다. 더 작은 크기의 VM에서 워크로드를 테스트하고 성능이 허용되는지 확인합니다. 필요한 경우 나중에 더 큰 VM 크기로 언제든지 업그레이드할 수 있습니다.


  다음으로 스토리지 성능을 살펴보겠습니다. 앞에서 설명한 것처럼 VHD(OS 및 데이터 디스크 모두)는 공유 디스크 하위 시스템의 호스트 서버에 로컬로 캐시되는 특별한 유형의 Windows Azure Storage 페이지 Blob인 Windows Azure Disks를 사용하여 구현됩니다. 로컬 중복성이 기본 제공되고 지역 중복성이 추가 옵션입니다. 로컬로 캐시된 VHD를 지원하는 페이지 Blob은 고속 상호 연결을 통해 REST API를 통해 액세스되는 공유 스토리지 서비스에 원격으로 저장됩니다. 자세한 내용은 데이터 시리즈: Azure 드라이브, 디스크 및 이미지 Windows 살펴보세요. 이제 Azure 디스크에 Windows 성능 특성, 구성 및 동작이 로컬에 연결된 스토리지 또는 SAN과 매우 다르다는 것을 깨달아야 합니다.


  그렇다면 스토리지 용량은 어떨까요? 우선 데이터베이스가 매우 작지 않으면 OS 드라이브에 저장하지 마세요. D: 데이터베이스에 임시 드라이브(tempdb 포함)를 사용하지 마세요. 이 드라이브에 저장된 데이터는 다시 시작한 후 손실될 수 있으며 임시 드라이브는 예측 가능한 성능을 제공하지 않습니다. 단일 데이터 디스크를 VM에 연결하고 이를 사용하여 모든 사용자 데이터베이스를 저장하는 것이 좋습니다. 자세한 내용은 <a href="https://azure.microsoft.com/en-us/manage/windows/how-to-guides/attach-a-disk/" target="_blank">가상 머신에 데이터 디스크를 연결하는 방법을 참조하세요</a> . 데이터 디스크의 크기는 최대 1TB이며, A4 이상의 VM에서 최대 16개의 드라이브를 사용할 수 있습니다. 데이터베이스가 1TB보다 큰 경우 SQL Server <a href="https://msdn.microsoft.com/en-us/library/ms179316%28v=SQL.105%29.aspx" target="_blank">파일 그룹을</a> 사용하여 여러 데이터 디스크에 데이터베이스를 분산할 수 있습니다. 또는 Windows Server 2012 <a href="https://technet.microsoft.com/en-us/library/hh831739.aspx" target="_blank">저장소 공간</a> 사용하여 여러 데이터 디스크를 단일 대용량으로 결합할 수 있습니다. 저장소 공간 Windows Azure Storage 추가 전용 특성과 잘 작동하기 때문에 레거시 OS 스트라이프 기술보다 더 좋습니다. 앞서 섹션 2에서 설명한 것처럼 여러 데이터 디스크를 사용하려는 경우 지역에서 복제를 사용하도록 설정하지 마세요. IOPS(초당 입력/출력 작업 수)는 SQL Server 워크로드에 대한 디스크 성능을 측정하는 데 사용되는 주요 메트릭인 경향이 있습니다. 그렇다면 Windows Azure 디스크에서 얼마나 많은 IOPS를 수행할 수 있을까요? 대답은 IO의 크기 및 액세스 패턴에 따라 달라 집니다. 8KB IO를 수행하는 60/40 읽기/쓰기 비율 워크로드의 경우 목표는 단일 디스크에 최대 500 IOPS를 제공하는 것입니다. 더 높은 위치로 이동해야 합니까? 데이터 디스크를 더 추가하고 데이터베이스 워크로드를 분산합니다. 큰 데이터베이스를 만들거나 복원할 때 <a href="https://msdn.microsoft.com/en-us/library/ms175935%28v=SQL.105%29.aspx" target="_blank">는 즉시 파일 초기화를</a> 사용하여 성능을 향상시켜야 합니다.


  네트워크 대역폭 및 대기 시간과 관련된 마지막 지점입니다. VM은 크기에 따라 일정량의 네트워크 대역폭을 할당합니다. 이 할당은 데이터 전송 및 백업의 성능에 영향을 미칠 수 있으므로 많은 데이터를 이동하려는 경우 더 큰 VM 크기를 사용하는 것이 좋습니다. 공용 엔드포인트 또는 VPN 게이트웨이를 통해 VM에 연결할 때는 공용 인터넷을 통해 인프라에 액세스하고 있음을 기억해야 합니다. VM은 물리적 위치에서 멀리 떨어져 있으며 고급 보안 옵션을 사용하도록 설정된 부하 분산 장치 및 게이트웨이와 같은 정교한 네트워크 인프라 뒤에 있습니다. 이렇게 하면 네트워크 대기 시간이 도입되고 대기 시간이 짧은 네트워크를 사용하는 여러 유형의 작업에 대해 다른 접근 방식이 필요합니다. 예를 들어 큰 데이터베이스를 클라우드로 마이그레이션하는 데 훨씬 더 오래 걸리며 클라우드 스타일 네트워크 대기 시간을 위해 설계되지 않은 클라이언트 애플리케이션이 제대로 작동하지 않을 수 있습니다. 다음 섹션에서는 네트워킹에 대해 자세히 설명합니다.


  VM 크기 및 옵션에 대한 자세한 내용은 <a href="https://msdn.microsoft.com/en-us/library/dn197896.aspx" target="_blank">Virtual Machine Cloud Service 크기를 참조하세요</a>. 성능 모범 사례<a href="https://go.microsoft.com/fwlink/?LinkId=306266" target="_blank">에 대한 자세한 내용은 Windows Azure Virtual Machines의 SQL Server</a> 대한 성능 지침을 참조하세요.

  <ul>
   <li><strong><span style="text-decoration: underline;">네트워크 우선 계획</span></strong> Windows Azure Infrastructure Services는 VM 배포를 위한 다양한 네트워크 연결 옵션을 제공합니다. 실수하는 경우 처음부터 시작할 필요가 없도록 VM을 만들기 전에 먼저 네트워크 구성을 계획해야 합니다. 원격 데스크톱을 사용하여 데스크톱에서 개별 VM에 연결하고 관리할 수 있습니다. 자세한 내용은 <a href="https://azure.microsoft.com/en-us/manage/windows/how-to-guides/log-on-a-windows-vm/" target="_blank">Windows Server를 실행하는 Virtual Machine에 로그온하는 방법을</a> 참조하세요. 공용 인터넷에서 VM에 대한 연결을 허용하려면 엔드포인트를 사용하여 포트를 열 수 있습니다. 자세한 내용은 <a href="https://azure.microsoft.com/en-us/manage/windows/how-to-guides/setup-endpoints/" target="_blank">Virtual Machine과의 통신을 설정하는 방법을 참조하세요</a> . 인터넷을 통해 원격으로 SQL Server 관리하려는 경우 표준 SQL Server 포트 1433을 통해 VM에 액세스할 수 있는 엔드포인트를 만들 수 있지만 이 포트는 해커에게 잘 알려져 있으므로 SQL Server 엔드포인트에 임의 공용 포트를 사용하는 것이 좋습니다. 들어오는 연결을 VM 컬렉션에서 엔드포인트에 자동으로 부하를 분산할 수 있습니다. 자세한 내용은 <a href="https://azure.microsoft.com/en-us/manage/windows/common-tasks/how-to-load-balance-virtual-machines/" target="_blank">Virtual Machines 부하 분산</a> 을 참조하세요. 이는 여러 VMs.In 순서로 프런트 엔드 웹 서버를 확장하여 먼저 <a href="https://azure.microsoft.com/en-us/manage/windows/fundamentals/networking/" target="_blank">Windows Azure Virtual Network</a>를 만든 다음 새 가상 네트워크 내에 VM을 만들어야 하는 VM 간에 전체 연결을 설정하는 시나리오에 유용합니다. 새 VM에 가상 네트워크 구성에 지정된 범위를 사용하여 IP 주소가 자동으로 할당되므로 사용자 고유의 DHCP 서비스를 구현할 필요가 없습니다. 가상 네트워크에는 기본 제공 DNS가 제공되거나 사용자 고유의 DNS 서버를 배포할 수 있습니다. 자세한 내용은 Windows Azure 이름 확인을 참조하세요. 계속하기 전에 이름 확인을 철저히 테스트해야 합니다. 네트워킹 전문 지식이 많지 않은 경우 진행하기 전에 동료가 구성을 검토하여 코너로 돌아가지 않도록 할 수 있습니다.</li>
  </ul>

  &nbsp;


  이제 상황이 정말 흥미로울 수 있습니다. 보안 VPN 게이트웨이를 사용하여 회사 네트워크와 가상 네트워크 간에 사이트 간 연결을 설정할 수 있습니다. 이 작업을 수행하려면 회사 네트워크에 VPN 디바이스가 필요합니다. VPN 게이트웨이를 설정할 때 전용 VPN 디바이스와 소프트웨어 기반 옵션을 모두 지원합니다. 자세한 내용은 <a href="https://azure.microsoft.com/en-us/manage/services/networking/cross-premises-connectivity/" target="_blank">프레미스 간 연결을 위한 Virtual Network 만들기</a> 를 참조하세요. 컴퓨터에서 가상 네트워크로 직접 VPN 연결을 사용하여 지점 및 사이트 간 연결을 설정할 수도 있습니다. 이 연결은 원격 위치에서 가상 네트워크에 액세스해야 하는 개발자 또는 관리자에게 적합합니다. 자세한 내용은 관리 포털에서 지점 및 사이트 간의 VPN 구성을 참조하세요.


  대부분의 Windows 서버 배포는 일반적으로 ID 및 보안을 위해 AD(Active Directory)를 사용합니다. Windows Azure Infrastructure Services는 모든 Active Directory 배포 옵션을 지원합니다. 가상 네트워크의 VM에서만 독립 실행형 AD 배포를 사용하려면 <a href="https://azure.microsoft.com/en-us/manage/services/networking/active-directory-forest/" target="_blank">Windows Azure에 새 Active Directory 포리스트 설치</a>를 참조하세요. VPN 게이트웨이를 구현하는 경우 가상 네트워크의 VM을 회사 Active Directory에 도메인에 가입할 수 있습니다. 이 시나리오에서는 성능 및 안정성 향상을 위해 가상 네트워크에 읽기 전용 AD 도메인 컨트롤러를 배포하는 것이 좋습니다. 이 작업을 수행하는 방법에 대한 지침은 <a href="https://azure.microsoft.com/en-us/manage/services/networking/replica-domain-controller/" target="_blank">Windows Azure Virtual Network에 복제본 Active Directory 도메인 컨트롤러 설치</a>를 참조하세요. 또한 Active Directory Federation Services와 같은 더 강력한 AD 구성이 지원되며 Windows Azure에서 실행되는 VM 및 기타 클라우드 서비스에 걸쳐 있는 하이브리드 ID 시나리오에 대한 지원도 지원됩니다. 자세한 내용은 Windows Azure Active Directory 참조하세요.

  <ul>
   <li><strong><span style="text-decoration: underline;">VM의 표준 시간대를 UTC로 설정</span></strong> VM의 표준 시간대를 UTC로 설정하는 것이 좋습니다. Windows Azure Infrastructure Services는 모든 데이터 센터 및 지역에서 UTC를 사용합니다. UTC 표준 시간대를 사용하면 나중에 잘릴 수 있는 드문 일광 절약 관련 타이밍 문제를 방지할 수 있습니다. 클라이언트는 물론 로컬 표준 시간대를 계속 사용해야 합니다.</li>
   <li><strong><span style="text-decoration: underline;">데이터 및 백업 압축 SQL Server 사용</span></strong>은 최소한의 CPU 오버헤드로 I/O 성능을 향상시키는 데 도움이 되는 <a href="https://technet.microsoft.com/en-us/library/cc280449.aspx" target="_blank">데이터 압축</a> 및 <a href="https://technet.microsoft.com/en-us/library/bb964719.aspx" target="_blank">백업 압축</a> 기능을 지원합니다. 데이터 및 백업을 압축하면 Windows Azure Storage 대한 I/O 작업이 빨라지고 데이터가 공간을 적게 차지합니다.</li>
   <li>SQL Server 2012 서비스 팩 1 누적 업데이트 2<strong><span style="text-decoration: underline;">에서 디스크 대신 Blob Storage 백업</span></strong>하여 Windows Azure Infrastructure Services에서 SQL Server 배포에 편리한 새 백업 시나리오를 사용하도록 설정했습니다. 백업을 저장하기 위해 추가 데이터 디스크를 프로비전하는 대신 azure Blob Storage Windows 사용하여 데이터베이스를 백업하고 복원할 수 있습니다. Blob Storage는 무제한 용량을 제공하며 기본 제공 로컬 중복성 및 선택적 지역 중복성을 제공합니다. 이렇게 하면 데이터 디스크의 소중한 용량을 확보하여 데이터 및 로그 파일에 헌정할 수 있습니다. <a href="https://msdn.microsoft.com/en-us/library/jj919148.aspx">자세한 내용은 SQL Server Azure Blob Storage Service를 Windows 백업 및 복원</a>을 참조하세요. 추가 혜택으로 불필요한 업로드 및 다운로드 작업을 수행하는 귀중한 시간과 대역폭을 낭비하지 않고도 스토리지 계정 및 지역 간에 백업 Blob을 비동기적으로 복사할 수 있습니다.</li>
   <li><strong><span style="text-decoration: underline;">해킹하지 마세요.</span></strong><strong><span style="text-decoration: underline;">
  </span></strong> Azure Infrastructure Services를 Windows VM 및 SQL Server 배포를 적절하게 보호하여 무단 액세스로부터 보호합니다. 해커는 항상 인터넷에서 보안이 좋지 않은 컴퓨터를 인수하고 자신의 목적을 위해 사용하려고합니다. 네트워크 DMZ 뒤에서 온-프레미스 SQL Server 배포를 보호하는 것과 동일한 방식으로 Windows Azure Infrastructure Services에서 SQL Server 배포를 보호하는 것이 좋습니다. RDP 또는 TSQL에 대한 공용 엔드포인트를 열지 마세요. 대신 보안 VPN Gateway를 설정하고 데이터베이스 서버를 직접 관리합니다. ID 및 액세스 제어에 Windows 인증을 사용합니다. SQL 인증을 사용해야 하는 경우 SQL Server 관리를 위해 다른 계정을 만들고, sysadmin 역할에 추가하고, 강력한 암호를 설정한 다음, <em>sa</em> 계정을 사용하지 않도록 설정합니다. 사용하지 않으려는 서비스를 중지하고 사용하지 않도록 설정하여 공격 노출 영역을 최소화합니다. <a href="https://msdn.microsoft.com/en-us/library/bb934049.aspx" target="_blank">TDE(SQL Server 투명한 데이터 암호화)</a>를 사용하여 미사용 데이터, 로그 및 백업 파일을 보호하는 것이 좋습니다. 이러한 파일이 VM 외부에서 복사되면 쓸모가 없습니다.</li>
   <li><strong><span style="text-decoration: underline;">PowerShell 알아보기</span></strong> Windows Azure 관리 포털은 Windows Azure Infrastructure Services에서 VM 배포를 프로비전하고 관리하기 위한 풍부한 그래픽 인터페이스를 제공하지만, 많은 가상 머신을 배포해야 하는 경우 PowerShell을 학습하는 데 시간이 걸립니다. VM 및 가상 네트워크를 프로비전하고 구성하는 PowerShell 스크립트 라이브러리를 개발하여 많은 시간과 노력을 절약할 수 있습니다. 자세한 내용은 <a href="https://blogs.technet.com/b/yungchou/archive/2013/05/20/automating-windows-azure-infrastructure-services-iaas-deployment-with-powershell.aspx" target="_blank">PowerShell을 사용하여 Windows Azure Infrastructure Services(IaaS) 배포 자동화</a>를 참조하세요.</li>
  </ul>

  &nbsp;


  이제 일부 정보로 무장했으므로 Azure Infrastructure Services를 Windows 준비가 된 SQL Server 워크로드를 파악하기 시작하는 것이 좋습니다. 더 작은 워크로드 중 일부를 마이그레이션하여 학습하고 자신감을 얻은 다음, 더 집중적인 워크로드로 이동합니다. 호환성 외에도 Windows Azure Infrastructure Services는 SQL Server 배포의 구성 및 유지 관리에 대한 세부적인 제어를 제공합니다(및 필요). 이는 많은 IT 조직의 판매 포인트이지만, 다른 조직은 혁신에 더 집중할 수 있도록 서버 유지 관리 업무에서 벗어나고자 합니다.


  Windows Azure SQL Database SQL Server 기술을 기반으로 하며 서비스로 제공됩니다. 서버 소프트웨어를 설치 및 관리할 필요가 없으며 고가용성 및 재해 복구와 같은 고급 기능이 기본 제공됩니다. 다른 사용자는 기존 워크로드를 마이그레이션하기 위해 Windows Azure Infrastructure Services에서 SQL Server 실행할 때 제공되는 호환성 및 세분화된 제어를 결합하여 새로운 워크로드에 대한 Windows Azure SQL Database 관리되는 서비스의 민첩성과 이점을 결합하여 두 세계의 장점을 모두 활용하고자 합니다. 이러한 종류의 Windows Azure의 하이브리드 사용은 완전히 지원되며 다른 퍼블릭 클라우드 공급자와 비교할 때 주요 차별화 요소 중 하나가 되었습니다. 이러한 모든 기능에 대한 자세한 내용은 <a href="https://azure.microsoft.com/en-us/home/features/data-management/" target="_blank">데이터 관리를</a> 참조하세요.


  &nbsp;


  <a href="https://blogs.msdn.com/b/rdoherty" target="_blank">로저 도허티</a> Sr. Program Manager Microsoft 고객 자문 팀
