### YamlMime:Yaml
ms.openlocfilehash: 338b2ff332614075b60addc78899a99a1f9f8496
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139899379"
Slug: azure-automation-controlling-runbook-streams-for-testing-and-troubleshooting
Title: 'Azure Automation: 테스트 및 문제 해결을 위한 Runbook 스트림 제어'
Summary: 이 게시물에서는 Runbook을 디버그하고 문제를 해결하는 데 도움이 되는 Runbook 스트림을 제어하기 위한 몇 가지 개념과 모범 사례를 설명합니다.
Content: >-
  <p><strong>중요 참고 사항:&nbsp;</strong> 최신 정보는 <a href="https://azure.microsoft.com/en-us/documentation/articles/automation-runbook-output-and-messages/" target="_blank">Azure Automation의 Runbook 출력 및 메시지</a>와 같은 콘텐츠 문서를 참조하세요.</p>


  <p><a href="https://azure.microsoft.com/en-us/services/automation/" target="_blank">Azure Automation</a>을 사용하여 Runbook을 만들고 실행하는 경우 두 가지 주요 작업은 작성 중에 Runbook을 테스트하고 프로덕션에서 Runbook 작업의 문제를 해결하는 것입니다.&nbsp; 두 경우 모두 실행 중에 발생하는 작업을 배울 수 있도록 유용한 로그 메시지를 생성하려면 Runbook이 필요합니다.&nbsp; 다행히 Azure Automation Runbook을 구동하는 엔진인 PowerShell 워크플로에는 테스트 및 문제 해결 중에 최적의 이점을 위해 제어할 수 있는 여러 메시지 스트림이 있습니다.&nbsp; 이 게시물에서는 Runbook을 디버그하고 문제를 해결하는 데 도움이 되는 Runbook 스트림을 제어하기 위한 몇 가지 개념과 모범 사례를 설명합니다.</p>


  <h2>Azure Automation에서 테스트</h2>


  <p>Azure Automation Runbook 작성 페이지에서 Runbook을 만듭니다.&nbsp; PowerShell 워크플로 코드를 편집하기 위한 창, 테스트 출력을 보기 위한 창 및 활동, Runbook 및 자산을 삽입하기 위한 컨트롤이 있습니다(디버깅을 위한 Runbook 출력 섹션의 아래 스크린샷 참조).&nbsp; Runbook을 작성할 때 주요 지점에서 테스트하여 기능이 예상대로 작동하는지 확인할 수 있습니다. 초안 Runbook에 대한 테스트를 쉽게 시작할 수 있습니다. <strong>테스트 단추를 클릭</strong> 하기만 하면 됩니다.&nbsp; 테스트 작업이 시작되면 출력 창이 나타나고 Runbook의 스트림이 이 창에 기록됩니다.&nbsp; 물론 스트림에 입력한 정보와 사용하는 특정 스트림은 Runbook을 얼마나 잘 디버그할 수 있는지에 매우 중요합니다.&nbsp; 이를 돕기 위해 다음 섹션에서 PowerShell 워크플로에서 사용할 수 있는 다양한 스트림을 제어하는 방법을 보여 줍니다.</p>


  <h2>Runbook 스트림 제어</h2>


  <p>PowerShell 워크플로는 각각 다른 용도로 6개의 다른 스트림에 &ndash; 레코드를 작성하도록 지원합니다. Runbook은 다음 cmdlet을 사용하여 이러한 스트림에 쓸 수 있습니다.</p>


  <ul>
   <li><a href="https://technet.microsoft.com/en-us/library/hh849921.aspx" target="_blank">쓰기 출력</a>

   <ul>
    <li>Runbook 처리에서 발생하는 출력 개체입니다.</li>
    <li>이는 종종 이 Runbook을 호출한 부모 Runbook에서 사용할 반환 데이터로 사용됩니다.</li>
   </ul>
   </li>
   <li><a href="https://technet.microsoft.com/en-us/library/hh849931.aspx" target="_blank">쓰기 경고</a>
   <ul>
    <li>경고 메시지</li>
   </ul>
   </li>
   <li><a href="https://technet.microsoft.com/en-us/library/hh849962.aspx" target="_blank">쓰기 오류</a>
   <ul>
    <li>오류 메시지</li>
    <li>오류는 기본적으로 예외와 &ndash; 다르지만 Runbook 실행을 중지하지 않는 반면, catch되지 않은 예외로 인해 Runbook이 일시 중단됩니다.</li>
   </ul>
   </li>
   <li><a href="https://technet.microsoft.com/en-us/library/hh849951.aspx" target="_blank">Write-Verbose</a>
   <ul>
    <li>일반 메시지 및 디버깅 정보에 대한 자세한 정보 표시 레코드</li>
   </ul>
   </li>
   <li><a href="https://technet.microsoft.com/en-us/library/hh849902.aspx" target="_blank">쓰기 진행률</a>
   <ul>
    <li>진행률 레코드는 Runbook에서 각 작업의 시작과 끝에 워크플로에 의해 자동으로 생성됩니다.</li>
   </ul>
   </li>
   <li><a href="https://technet.microsoft.com/en-us/library/hh849969.aspx" target="_blank">쓰기-디버그</a>
   <ul>
    <li>이는 PowerShell 콘솔 사용을 위한 것이므로 Azure Automation에서는 <strong>사용하지 마세요</strong> .</li>
   </ul>
   </li>
  </ul>


  <p>각 스트림을 사용하는 시기를 학습하여 Runbook 만들기의 제작/디버깅 단계와 프로덕션 Runbook 작업 문제 해결 중에 유용성을 최대화할 수 있습니다. Azure Automation에는 Runbook 스트림 &ndash; Runbook 작성 페이지와 Runbook 작업 페이지를 볼 수 있는 두 가지 주요 위치가 있습니다(아래 스크린샷 참조). Runbook 작성 페이지에서&nbsp; 만들기 및 테스트 중에 Runbook을 디버그할 때 스트림을 보려고 합니다.&nbsp; Runbook 작업 페이지에서 Runbook이 게시되고 프로덕션 환경에서 실행 중인 후 Runbook 작업 문제를 해결할 때 스트림을 보려고 합니다.</p>


  <h2>디버깅을 위한 Runbook 출력</h2>


  <p>Runbook을 작성하는 동안 Runbook을 테스트할 때 기본적으로 출력, 경고 및 오류 스트림만 출력 창에 기록됩니다.&nbsp; 아래 스크린샷에서 다음 동작을 볼 수 있습니다. <img alt="Default stream output" border="0" height="440" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/StreamDefaultTest.png" style="border: 0px currentColor; border-image: none; margin-right: auto; margin-left: auto; float: none;" title="기본 스트림 출력" width="610"> 이러한 세 개의 스트림만 작성된 이유는 스트림에 대해 설정된 기본 설정과 관련이 있습니다(자세한 내용은 <a href="https://technet.microsoft.com/en-us/library/hh847796.aspx" target="_blank">PowerShell 기본 설정 변수</a>에 대한 이 문서 참조).&nbsp; 아래 스크린샷에서 볼 수 있듯이 경고 및 오류에 대한 기본 설정은 계속되고 &ldquo;자세한 내용은 SilentlyContinue&rdquo;입니다&ldquo;.&nbsp;&rdquo; 즉, Write-Verbose cmdlet을 사용하는 경우 cmdlet 호출에 자세한 정보 표시 스위치가 포함되지 않는 한 메시지가 출력 창에 &ndash;기록되지 않습니다. <img alt="Default stream preference settings" border="0" height="219" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/PreferencesInAuthoring.png" style="border: 0px currentColor; border-image: none; margin-right: auto; margin-left: auto; float: none;" title="기본 스트림 기본 설정" width="484"></p>


  <h3>테스트에 대한 기본 스트림 설정 변경</h3>


  <p>테스트하는 동안 자세한 정보 표시 스트림에 대한 기본 기본 설정을 재정의할 수 있습니다.</p>


  <ul>
   <li>출력 창에서 모든 자세한 정보를 보려면 runbook 맨 위에 $VerbosePreference=&rdquo;Continue&rdquo; 를 설정할 수 있습니다.
   <ul>
    <li>&nbsp; 자세한 정보 표시 메시지 선택만 보려면 특정 Write-Verbose 호출(또는 자세한 정보 표시 메시지가 있는 cmdlet)에 -Verbose&rdquo; 스위치를 추가할 &ldquo;수 있습니다.</li>
   </ul>
   </li>
  </ul>


  <p>&nbsp; 아래 스크린샷은 Runbook 및 결과에 설정되는 이 기본 설정을 보여줍니다. <img alt="Updated Verbose stream preference" border="0" height="304" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/UpdatedPreferencesInAuthoring.png" style="border: 0px currentColor; border-image: none; margin-right: auto; margin-left: auto; float: none;" title="업데이트된 자세한 정보 표시 스트림 기본 설정" width="489"> &nbsp; <img alt="Stream test with Verbose stream set to display" border="0" height="505" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/StreamTestVerboseEnabled.png" style="border: 0px currentColor; border-image: none; margin-right: auto; margin-left: auto; float: none;" title="자세한 정보 표시 스트림이 표시되도록 설정된 스트림 테스트" width="610"> <strong>모범 사례:</strong>&nbsp; 작성하는 동안 Azure Automation Runbook 디버깅에 Write-Verbose 사용합니다.&nbsp; 디버그 메시지에 Write-Debug 또는 Write-Output 사용하지 마세요&rsquo;. Write-Debug 대화형 콘솔 전용이며, Write-Output 다른 프로세스에 대한 입력으로 사용되는 출력 개체(예: 이 Runbook을 자식 Runbook으로 인라인으로 호출한 Runbook)에만 사용됩니다. <strong>모범 사례:</strong>&nbsp; 테스트 및 문제 해결을 위해 작업 출력에 표시하려는 일반적인 주석에 Write-Verbose 사용합니다.&nbsp; 다시 말하지만, 이를 위해 Write-Output 사용하지 마십시오. <strong>모범 사례:</strong>&nbsp; Runbook에서 Write-Progress 사용하지 마세요&rsquo;.&nbsp; 진행률 레코드는 테스트 출력 창에 표시되지 않으므로(콘솔 진행률 표시줄에 표시되므로) 디버깅에 유용하지 않습니다.&nbsp; 프로덕션 작업에 대한 다음 섹션에서는 문제 해결 시 진행률 레코드에 약간의 사용이 있을 수 있지만 PowerShell 워크플로 엔진에서 자동으로 생성된 진행률 레코드만 표시됩니다.</p>


  <h2>프로덕션 작업 로그에 대한 Runbook 출력</h2>


  <p>Runbook 작성을 완료하고 프로덕션에서 사용할 수 있도록 게시한 후에는 가능한 Runbook 작업 문제를 해결하는 데 필요한 정보의 양을 고려해야 합니다. 프로덕션 작업(예: 테스트 작업)의 경우 기본적으로 출력, 경고 및 오류 레코드만 각 작업에 대한 데이터베이스에 기록됩니다.&nbsp; 이러한 레코드가 기본적으로 저장되는 이유는 이러한 레코드가 일상적으로 필요한 가장 중요한 정보이기 때문입니다.&nbsp; Runbook 내에서 경고 또는 오류 기본 설정 변수를 &rdquo;SilentlyContinue&rdquo; 로 설정하고 게시하는 경우 Runbook 구성이 이러한 스트림에 대해 로깅을 사용하도록 설정된 경우에도 프로덕션 실행 시 Runbook은 이러한 스트림에 대한 메시지를 출력하지 않습니다. 다음은 출력, 경고 및 오류 레코드가 기본적으로 표시되는 방식을 보여주는 작업의 대시보드 및 기록 페이지에 대한 두 개의 스크린샷입니다.&nbsp; 스토리지 공간을 절약하기 위해 진행률 및 자세한 정보 표시 레코드는 기본적으로 저장되지 않습니다.&nbsp; (자세한 내용은 <a href="https://azure.microsoft.com/blog/2014/06/12/azure-automation-monitoring-and-troubleshooting-your-runbook-jobs-2/" target="_blank">Runbook 모니터링 및 문제 해결</a> 블로그를 참조하세요.) <img alt="Runbook Job Dashboard" border="0" height="568" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/RunbookJobOutputDashboard.png" style="border: 0px currentColor; border-image: none; margin-right: auto; margin-left: auto; float: none;" title="Runbook 작업 대시보드" width="406"> &nbsp; <img alt="Default Runbook Job Streams" border="0" height="274" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/RunbookJobOutputDefault.png" style="border: 0px currentColor; border-image: none; margin-right: auto; margin-left: auto; float: none;" title="기본 Runbook 작업 스트림" width="610"></p>


  <h3>프로덕션 문제 해결을 위한 기본 스트림 설정 변경</h3>


  <p>각 Runbook에 대한 구성 페이지에서 자세한 정보 표시 및 진행률 레코드 로깅에 대한 기본 설정을 변경할 수 있습니다. 로깅을 사용하도록 설정하기 위해 이러한 설정이 변경된 아래 스크린샷을 참조하세요. 이러한 구성 설정은 게시된 Runbook의 프로덕션 실행 중에만 적용되며 Runbook이 초안 모드인 동안 Runbook 작성/테스트 페이지에 적용되지 않습니다. Set-AzureAutomationRunbook cmdlet을 사용하여 이러한 설정을 변경할 수도 있습니다. <strong>모범 사례:</strong>&nbsp; 프로덕션 Azure Automation Runbook 문제 해결을 위해 작업 기록에 표시하려는 일반, 진행률 또는 디버깅 정보에 Write-Verbose 사용합니다. 이 정보에 Write-Debug 또는 Write-Output 사용하지 마세요&rsquo;. <img alt="Runbook Configure Stream Logging" border="0" height="211" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/RunbookConfigureLogging.png" style="border: 0px currentColor; border-image: none; margin-right: auto; margin-left: auto; float: none;" title="Runbook 스트림 로깅 구성" width="352"> 아래 스크린샷에서는 자세한 정보 표시 및 진행률 레코드의 로깅을 사용하도록 설정한 결과를 볼 수 있습니다. <img alt="All Runbook Job Streams" border="0" height="584" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/RunbookJobOutputAllStreams.png" style="border: 0px currentColor; border-image: none; margin-right: auto; margin-left: auto; float: none;" title="모든 Runbook 작업 스트림" width="610"> 이제 작업 기록 페이지에서 훨씬 더 많은 정보를 사용할 수 있음을 알 수 있습니다. 이러한 추가 정보는 Runbook을 사용하는 프로덕션 문제 해결에 꼭 필요할 수 있습니다. <strong>모범 사례:</strong>&nbsp; 자세한 정보 표시 및 진행률 스트림에 대해 <strong>기본 설정 해제</strong> 를 유지하고 문제를 해결해야 하는 경우에만 켭니다. 진행률 레코드는 특히 많습니다.&nbsp; 기본적으로 워크플로 엔진은 활동이 시작될 때 진행률 레코드 1개와 작업이 완료되면 한 개의 진행률 레코드를 워크플로 &ndash; 의 각 활동에 대해 두 개의 진행률 레코드를 씁니다.&nbsp; 문제 해결을 위해 Runbook의 진행률을 추적하기 위해 이 정보가 필요하지 않으면 진행률 로깅이 꺼져 있는지 확인해야 합니다. <strong>모범 사례:</strong>&nbsp; Runbook에서 Write-Progress 사용하지 마세요&rsquo;.&nbsp; PowerShell 워크플로 엔진에서 자동으로 생성되는 진행률 레코드는 문제 해결 중에 진행률을 추적해야 하는 경우 많은 정보를 제공합니다.</p>


  <h2>요약</h2>


  <p>보듯이 Runbook에 대한 로깅 스트림을 쉽게 제어하여 최적의 디버깅 및 문제 해결을 가능하게 합니다.&nbsp; 모범 사례를 고수하면 Runbook 디버깅 및 문제 해결에 대한 문제 없는 제어가 있어야 합니다. 아직 Azure Automation 사용자가 아닌가요? <a href="https://account.windowsazure.com/PreviewFeatures?fid=automation" target="_blank">미리 보기에 등록</a> 한 다음 <a href="https://azure.microsoft.com/en-us/documentation/articles/automation-create-runbook-from-samples/" target="_blank">시작 가이드</a>를 확인하세요.</p>
