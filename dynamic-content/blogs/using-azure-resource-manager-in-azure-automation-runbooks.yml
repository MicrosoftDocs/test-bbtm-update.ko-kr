### YamlMime:Yaml
ms.openlocfilehash: 1ac1601b6f90f8473985a87931e41230cdc4de28
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139906987"
Slug: using-azure-resource-manager-in-azure-automation-runbooks
Title: Azure Automation Runbook에서 Azure Resource Manager 사용
Summary: Azure Automation Runbook에서 Azure Resource Manager 기능을 사용하는 방법에 대한 현재 모범 사례와 이 영역의 향후 계획을 알아봅니다.
Content: >-
  <p><strong>업데이트&nbsp;5 - 2015&nbsp;년 12월 7일 - Azure Automation에서 Azure Resource Manager PowerShell 모듈을 처음부터 출시하기 시작했습니다. 이 블로그 게시물은 이제 만료되었습니다. 대신 <a href="https://azure.microsoft.com/en-us/blog/announcing-azure-resource-manager-support-azure-automation-runbooks/">이 블로그 게시물을</a> 참조하세요.</strong><b></b></p>


  <p><strong>업데이트 1:&nbsp;</strong> 현재 <a href="https://blog.davidebbo.com/2014/12/azure-service-principal.html" target="_blank">서비스 주체</a>를 사용하여 Azure Automation Runbook에서 Azure Resource Manager에 대한 인증을 방지하는 버그가 있습니다. <a href="https://github.com/Azure/azure-powershell/issues/655" target="_blank">여기에서</a> 버그 상태를 따를 수 있지만&nbsp;, 사용자 <a href="https://azure.microsoft.com/blog/2014/08/27/azure-automation-authenticating-to-azure-using-azure-active-directory/" target="_blank">보안 주체가</a> 제대로 작동해야 하는 평균 시간입니다.</p>


  <p><strong>업데이트 2:&nbsp;</strong> 모듈 크기 제한으로 인해 Azure Portal에서 ARM 모듈을 가져오는 데 문제가 있는 경우 모듈을 <font face="Calibri" size="3">가져올 수 있을 만큼 작을 때까지 모듈에서 폴더를 제거한 다음 모듈&nbsp;&rsquo; .psd1 파일에서&rsquo; 이러한 폴더에 대한 참조를 제거합니다&nbsp;</font>. <strong>업데이트</strong><b><strong> 3</strong> - 10/13/2015 </b>- 이제 수정되어야 합니다.</p>


  <p><strong>업데이트 4 - 10/13/2015</strong> - Azure PowerShell 팀은 <a href="https://azure.microsoft.com/en-us/blog/azps-1-0-pre/">Azure PowerShell 모듈이 </a>나란히 작동하도록 업데이트하여 Azure Automation에서 함께 사용할 수 있도록 했습니다. 곧 새 Azure PowerShell 모듈을 Azure Automation의 글로벌 모듈로 즉시 출시할 예정이지만, 이 블로그 게시물의 지침에 따라 ARM cmdlet 사용을 위한 별도의 Automation 계정을 설정하는 대신 여기에서 지침에 따라 Azure(서비스 관리) 및 Azure(Resource Manager) 모듈을 단일&nbsp;Automation 계정에서 나란히 사용할 수 있습니다.</p>


  <p>&nbsp;</p>


  <p>ARM( <a href="https://azure.microsoft.com/en-us/documentation/articles/resource-group-overview/" target="_blank">Azure Resource Manager</a> )의 많은 흥미로운 기능으로 인해 많은 고객이 Azure Automation Runbook 내에서 <a href="https://msdn.microsoft.com/en-us/library/dn654592.aspx" target="_blank">ARM PowerShell cmdlet을</a> 활용하는 방법을 묻고 있습니다.</p>


  <p>현재 <a href="https://msdn.microsoft.com/en-us/library/azure/dn708504.aspx" target="_blank">Azure(서비스 관리) PowerShell cmdlet</a> 및 ARM PowerShell cmdlet은 Azure Automation 계정 내에서 나란히 작동하지 않습니다. 이러한 이유로 Azure Automation에서 ARM cmdlet을 사용하는 현재 모범 사례는 ARM용 및 Azure PowerShell 하나씩 별도의 Automation 계정을 설정하는 것입니다. 프로세스에 ARM 기능과 Azure 서비스 관리 기능이 모두 포함된 경우 <a href="https://msdn.microsoft.com/en-us/library/dn690259.aspx" target="_blank">Start-AzureAutomationRunbook</a> cmdlet(Azure 및 ARM PowerShell 모듈 모두에서 사용 가능)을 사용하여 한 Automation 계정의 Runbook 시작 Runbook을 다른 Automation 계정에 포함할 수 있습니다.</p>


  <p>Azure PowerShell 모듈 대신 ARM PowerShell 모듈을 사용하도록 Automation 계정을 설정하는 방법에 대한 자세한 내용은 아래와 같습니다. 하지만 Azure Automation에서 Azure Resource Manager와 Azure Service Management 기능을 모두 사용할 수 있는 일시적인 방법일 뿐이라는 점도 지적하고 싶습니다. <b>단일 Automation 계정에서 두 모듈을 함께 사용할 수 있는 보다 쉽고 장기적인 솔루션은 &ndash; 여기에서 해당 제안에 대한 세부 정보를 찾을 수 있습니다</b><a href="https://github.com/Azure/azure-powershell/wiki/Deprecation-of-Switch-AzureMode-in-Azure-PowerShell" target="_blank"></a><b>.</b> 이 제안에는 Azure PowerShell cmdlet의 변경 내용이 포함되므로 피드백이 있는 경우 <a href="https://github.com/Azure/azure-powershell/issues/428" target="_blank">여기에서</a> 이미 시작된 토론에 자유롭게 참여하세요.</p>


  <p>이제 Azure Automation에서 Azure Resource Manager cmdlet을 사용하는 방법을 알아보겠습니다. &nbsp;</p>


  <h2>Azure Automation에서 Azure Resource Manager 설정</h2>


  <p>Azure Automation은 현재 기본적으로 ARM cmdlet과 함께 제공하지 않지만 직접 쉽게 가져올 수 있습니다. Azure Automation에서 Runbook은 로컬 환경과 다른 보안 샌드박스에서 실행됩니다. 또한 Runbook을 컴파일하려면 모든 모듈을 로드해야 하며 컴파일 후에는 언로드할 수 없습니다. 따라서 Azure Resource Manager 모듈을 있는 그대로 가져오는 경우 Azure 모듈과 Azure Resource Manager 모듈이 모두 모든 Runbook 작업&rsquo; PowerShell 세션에 로드됩니다. 이러한 이유로 Switch-AzureMode cmdlet은 로컬 PowerShell에 있는 것처럼 Azure Automation에 필요하지 않으며 실제로 cmdlet이 작동하지 않습니다.</p>


  <p>Azure 모듈과 ARM 모듈은 현재 동일한 PowerShell 세션에서 실행되도록 빌드되지 않았으며 동일한 세션에서 실행하면 충돌 및 예기치 않은 동작이 발생할 수 있습니다. 따라서 현재 모범 사례는 ARM용과 Azure PowerShell 하나씩 별도의 Automation 계정을 설정하는 것입니다. 다음&rsquo; 방법을 설명합니다.</p>


  <p>Azure Resource Manager 기능을&rsquo; 위한 별도의 Automation 계정을 만든 후에는 기본적으로 각 Automation 계정에서 제공하는 글로벌 Azure 모듈을 덮어쓰는 방식으로 Azure Resource Manager 모듈을 가져와야 합니다.</p>


  <ol>
   <li>로컬 컴퓨터 설치&nbsp;<a href="https://azure.microsoft.com/en-us/downloads/" style="line-height: 1.5;" target="_blank">Microsoft Azure PowerShell</a>&nbsp;</li>
   <li>ARM PowerShell 모듈 &ndash; 이 설치된 Azure PowerShell 디렉터리로 이동합니다. 일반적으로&nbsp;<i>C:\Program Files (x86)\Microsoft SDKs\Azure\PowerShell\ResourceManager</i></li>
   <li>AzureResourceManager 폴더를 데스크톱에 복사</li>
   <li>방금 Azure에 복사 &ldquo;한 AzureResourceManager 폴더 이름 바꾸기&rdquo;</li>
   <li>이 폴더의 모듈 매니페스트 이름을 AzureResourceManager.psd1&rdquo;에서 &ldquo;Azure.psd1로 &ldquo;바꿉니다.&rdquo;</li>
   <li>새로 이름이 바뀐 Azure 폴더를 압축합니다. 이름이 &ldquo;Azure.zip&rdquo; Azure라는 &ldquo;단일 폴더를 포함해야 합니다.&rdquo;</li>
   <li>Azure Portal에서 ARM(Azure 서비스 관리 아님) 기능을 사용하려는 Azure Automation 계정으로 압축된 모듈을 가져옵니다. <ul>
    <li>자산으로 이동한 다음, 모듈로 이동한 다음 모듈&rdquo; 가져오기를 선택합니다&ldquo;(<a href="https://portal.azure.com" target="_blank">Azure 미리 보기 포털</a>에서 모듈을 추가하면 단추가 대신 모듈&rdquo;&rsquo; 추가라고 함&ldquo;).</li>
    <li>메시지가 표시되면 예를 클릭하여 기존 Azure 모듈을 재정의합니다.&ldquo;&rdquo;</li>
   </ul>
   </li>
   <li>모듈을 가져오고 추출할 시간을 줍니다.</li>
   <li>Azure&rdquo; 모듈을 &ldquo;자세히 살펴보면 이제 모듈이 더 이상 글로벌 Azure(서비스 관리) 모듈이 아니라 Azure Resource Manager 모듈임을 알 수 있습니다.</li>
  </ol>


  <p>&nbsp; <b><img alt="Using Azure Resource Manager in Azure Automation Runbooks" border="0" height="408" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Untitled.png" style="border: 0px currentColor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block;" title="Azure Automation Runbooks" width="610"> </b> &nbsp; <b>Huzzah</b>에서 Azure Resource Manager 사용 이제 Azure Resource Manager 모듈을 새 Azure Automation 계정으로 가져왔으므로 PowerShell ISE에서 사용하는 것과 동일한 방식으로 Runbook의 ARM cmdlet을 사용할 수 있습니다(Switch-AzureMode를 사용할 필요가 없음&rsquo; 제외). Azure(서비스 관리) Automation 계정에서 ARM 기능을 사용해야 하는 경우 Azure 모듈의 Start-AzureAutomationRunbook cmdlet을 사용하여 ARM Automation 계정에서 Runbook을 시작하면 됩니다. 마찬가지로 ARM Automation 계정에서 Azure 서비스 관리 기능을 사용해야 하는 경우 ARM 모듈의 Start-AzureAutomationRunbook cmdlet을 사용하여 Azure(서비스 관리) Automation 계정에서 Runbook을 시작하면 됩니다. &rsquo;Azure Resource Manager는 Azure 서비스 관리&rsquo;처럼 인증서 인증을 지원하지 않으므로&rsquo; <a href="https://azure.microsoft.com/blog/2014/08/27/azure-automation-authenticating-to-azure-using-azure-active-directory/" target="_blank">Azure AD 사용자 또는 서비스 주체</a>를 사용하여 Azure Resource Manager에 인증해야 합니다.</p>


  <p>Azure Automation을 시작하기만 하면 되었나요?&nbsp; <a href="https://aka.ms/Q2p1ap" target="_blank">여기서</a> 서비스에 대해 알아보고 <a href="https://twitter.com/AzureAutomation" target="_blank">Twitter</a>에서 Azure Automation을 따르세요.</p>


  <p>개인적으로 저와 연락하고 싶으신가요? <a href="https://jodoglevy.com/" target="_blank">내 블로그</a>를 통해 연락하거나 <a href="https://twitter.com/jodoglevy" target="_blank">트위터에서</a> 나를 따르세요.</p>
