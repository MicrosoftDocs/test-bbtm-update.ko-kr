### YamlMime:Yaml
ms.openlocfilehash: 3f93c1a6bb441150321a760e082c9960bb2bf6e4
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139897282"
Slug: network-security-groups
Title: 네트워크 보안 그룹
Summary: 지난 주 TechEd Europe에서 Azure 네트워킹 스택에 추가된 주요 기능인 네트워크 보안 그룹의 일반 공급이 발표되었습니다.
Content: >-
  지난 주 TechEd Europe에서 Azure 네트워킹 스택에 추가된 주요 기능인 <a href="https://azure.microsoft.com/blog/2014/10/29/networking-enterprise/">네트워크 보안 그룹의 일반 공급</a>이 발표되었습니다. 네트워크 보안 그룹은 VNet(Virtual Network) 내에서 세분화뿐만 아니라 VNet에서 가상 머신을 수신하거나 송신하는 트래픽에 대한 모든 권한을 제공합니다. 또한 DMZ(비무장 영역)와 같은 시나리오를 구현하여 사용자가 데이터베이스 및 애플리케이션 서버와 같은 백 엔드 서비스를 엄격하게 보호할 수 있도록 합니다.


  &nbsp;

  <h2>사용 사례 및 시나리오</h2>

  다중 계층 애플리케이션 빌드는 클라우드에서 비즈니스 워크플로를 실현하는 일반적인 패턴입니다. 일반적으로 웹 프록시 및 DNS 서버와 같은 프런트 엔드 계층의 엔터티는 인터넷에 노출되는 DMZ에 배치됩니다. 애플리케이션 서버 및 백 엔드 인스턴스와 같은 다른 계층의 기능에는 더 높은 수준의 보안이 필요하므로 DMZ에서 격리됩니다. 이러한 계층은 프런트 엔드의 특정 인스턴스에서만 트래픽을 수신하며 일반적으로 인터넷에 대한 아웃바운드 연결이 없습니다. 네트워크 보안 그룹을 사용하면 이러한 다중 계층 애플리케이션 아키텍처를 Azure에서 호스팅할 수 있습니다.


  아래 다이어그램은 샘플 다중 계층 애플리케이션 배포를 보여 줍니다.


  &nbsp;


  <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/10/30/DMZ.jpg"><img style="padding-top: 0px; padding-left: 0px; padding-right: 0px; border-width: 0px;" title="DMZ" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/DMZ_thumb.jpg" alt="DMZ" width="644" height="320" border="0" /></a>


  네트워크 보안 그룹은 Azure에서 실행되는 서비스 내/외부로 흐르는 네트워크 트래픽을 제어합니다. 네트워크 보안 그룹은 가상 네트워크의 서브넷에 적용할 수도 있으므로 여러 VM에서 액세스 제어 규칙 업데이트를 관리하는 효율적인 메커니즘을 제공합니다. VM의 업데이트 또는 변경 없이 수백 또는 수천 대의 컴퓨터에 대한 액세스 제어 규칙을 몇 초 안에 변경할 수 있습니다.


  인트라넷 트래픽을 분할하는 것 외에도 네트워크 보안 그룹을 사용하여 인터넷으로 들어오고 나가는 트래픽을 제어할 수도 있습니다. 사용자는 단일 액세스 제어 규칙을 사용하여 전체 서브넷에 대한 인터넷 연결을 거부할 수 있습니다.


  &nbsp;

  <h2>VM 및 서브넷 ACL</h2>

  네트워크 보안 그룹은 트래픽 필터를 설명하는 액세스 제어 규칙 집합으로 구성됩니다. 가상 머신 또는 동일한 지역의 서브넷과 연결할 수 있습니다. 네트워크 보안 그룹에 정의된 규칙은 필터로 작동합니다. 수신 경로에서 트래픽이 VM에 들어오기 전에 적용됩니다. 송신 경로에서 트래픽이 VM을 벗어나면 적용됩니다. 즉, 이러한 규칙은 사용자 프로세스 또는 VM에서 실행되는 OS에 의해 변경될 수 없는 인프라 수준에서 적용됩니다. 네트워크 보안 그룹이 서브넷과 연결되면 서브넷의 모든 VM에 적용됩니다. 네트워크 보안 그룹에 대한 변경 내용은 서브넷의 모든 VM에 즉시 적용됩니다.


  네트워크 보안 그룹의 몇 가지 중요한 측면은 다음과 같습니다.

  <ul>
   <li>규칙에는 5개의 튜플(원본 IP, 원본 포트, 대상 IP, 대상 포트, 프로토콜)이 포함됩니다.</li>
   <li>규칙은 상태 저장입니다. 즉, 포트에서 트래픽을 허용하는 인바운드 규칙(예: 포트 80)이 있는 경우 패킷이 동일한 포트에서 흐르도록 아웃바운드 쪽에서 일치하는 규칙이 필요하지 않습니다.</li>
   <li>모든 네트워크 보안 그룹에는 Virtual Network 내의 연결 및 인터넷에 대한 아웃바운드 액세스를 허용하는 기본 규칙이 포함되어 있습니다. 이러한 기본 규칙은 사용자 규칙에 의해 재정의될 수 있습니다.</li>
   <li>규칙은 우선 순위에 따라 처리됩니다. 값이 작음(우선 순위가 더 높음)인 규칙은 더 큰(우선 순위가 낮음) 값이 있는 규칙보다 앞에 처리됩니다.</li>
   <li>Azure는 각각 Virtual Network 외부의 공용 IP 주소 공간과 고객의 전체 네트워크 주소 공간을 참조하는 인터넷 및 VIRTUAL_NETWORK 같은 기본 태그를 제공합니다. 태그는 액세스 제어 규칙의 일부로 사용할 수 있습니다.</li>
  </ul>

  &nbsp;


  네트워크 보안 그룹은 VM 또는 서브넷에 적용할 수 있으며 경우에 따라 둘 다에 적용할 수 있습니다. 서브넷의 VM 간에 트래픽 패턴이 매우 다른 경우 해당 VM에 대한 트래픽을 제어하기 위한 정확한 규칙을 사용하여 개별 네트워크 보안 그룹을 VM에 연결시키는 것이 더 나을 수 있습니다. 서브넷의 VM에 동일한 트래픽 패턴이 있는 경우(일반적으로 해당) 전체 서브넷의 수신 및 송신을 관리하기 위해 트래픽 제어 규칙을 사용하여 서브넷에 네트워크 보안 그룹을 연결해야 할 수 있습니다. 경우에 따라 트래픽의 대부분이 동일하지만 VM 또는 두 가지에 대해 세분화된 제어가 필요한 경우 두 가지 방법의 하이브리드가 가장 좋을 수 있습니다.


  &nbsp;


  <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/10/31/NSGRules.jpg"><img style="padding-top: 0px; padding-left: 0px; padding-right: 0px; border: 0px;" title="NSGRules" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/NSGRules_thumb.jpg" alt="NSGRules" width="532" height="484" border="0" /></a>


  위의 그림과 같이 수신 경로에서 서브넷에 연결된 네트워크 보안 그룹의 규칙이 적용되고 VM에 연결된 네트워크 보안 그룹의 규칙이 적용됩니다(있는 경우). 송신 경로의 반대입니다.


  또한 네트워크 관리자가 서브넷에 대한 네트워크 보안 그룹 규칙을 정의하고 개발자(VM 소유자)가 VM에 대한 네트워크 보안 그룹 규칙을 설명하는 데 적합합니다.


  &nbsp;

  <h2>제한</h2>

  네트워크 보안 그룹은 VNet에서 실행되는 서비스에 대한 네트워크 트래픽에 대한 세분화된 액세스 제어를 제공하기 위해 노력하고 있으며, 해당 목표에 맞게 구독에는 최대 100개의 네트워크 보안 그룹이 있고 각 네트워크 보안 그룹에는 최대 200개의 규칙이 있습니다. 더 많은 규칙 또는 그룹이 필요한 정품 사용 사례가 있는 경우 Microsoft 지원에 문의하여 제한을 늘릴 수 있습니다.


  네트워크 보안 그룹은 지역 VNet의 VM에만 사용할 수 있습니다.기타 상호 운용성 항목은 아래 FAQ 섹션을 참조하세요.


  &nbsp;

  <h2>사용량</h2>

  네트워크 보안 그룹은 현재 Power Shell 및 REST API를 통해서만 노출됩니다.


  &nbsp;

  <pre class="prettyprint">#Create a Network Security Group

  New-AzureNetworkSecurityGroup -Name "MyVNetSG" -Location uswest -Label "Security group for my Vnet in West US"


  #Add, Update Rules to a NSG

  Get-AzureNetworkSecurityGroup -Name "MyVNetSG" | Set-AzureNetworkSecurityRule -Name WEB -Type Inbound -Priority 100 -Action Allow -SourceAddressPrefix 'INTERNET'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '*' -Protocol TCP


  #Delete a rule from NSG

  Get-AzureNetworkSecurityGroup -Name "MyVNetSG" | Remove-AzureNetworkSecurityRule -Name WEB


  #Associate a NSG to a Virtual machine

  Get-AzureVM -ServiceName "MyWebsite" -Name "Instance1" | Set-AzureNetworkSecurityGroupConfig -NetworkSecurityGroupName "MyVNetSG"


  #Remove a NSG from a VM

  Get-AzureVM -ServiceName "MyWebsite" -Name "Instance1" | Remove-AzureNetworkSecurityGroupConfig -NetworkSecurityGroupName "MyVNetSG"


  #Associate a NSG to a subnet

  Get-AzureNetworkSecurityGroup -Name "MyVNetSG" | Set-AzureNetworkSecurityGroupToSubnet -VirtualNetworkName 'VNetUSWest' -SubnetName 'FrontEndSubnet'


  #Remove a NSG from the subnet

  Get-AzureNetworkSecurityGroup -Name "MyVNetSG" | Remove-AzureNetworkSecurityGroupFromSubnet -VirtualNetworkName 'VNetUSWest' -SubnetName 'FrontEndSubnet'


  #Delete a NSG

  Remove-AzureNetworkSecurityGroup -Name "MyVNetSG"


  #Get Details of Network Secuirty group along with rules

  Get-AzureNetworkSecurityGroup -Name "MyVNetSG" -Detailed</pre>

  자세한 내용은 MSDN의 콘텐츠를 참조하세요.


  &nbsp;

  <h2>FAQ</h2>

  1. VM 엔드포인트에서 엔드포인트 ACL을 이미 사용하고 있습니다. 네트워크 보안 그룹도 사용할 수 있나요?

  <blockquote>아니요, 엔드포인트 ACL 또는 네트워크 보안 그룹 중 하나만 사용할 수 있습니다. VM에서 엔드포인트 ACL을 제거하고 VM을 네트워크 보안 그룹에 연결할 수 있습니다.</blockquote>

  2. VM에 여러 NIC가 있는데 네트워크 보안 그룹 규칙이 모든 NIC의 트래픽에 적용될까요?

  <blockquote>아니요, 네트워크 보안 그룹 규칙은 기본 NIC의 트래픽에만 적용됩니다. 나중에 네트워크 보안 그룹을 NIC에 직접 연결하는 기능을 추가할 예정입니다.</blockquote>

  3. 네트워크 보안 그룹을 만들었습니다. 다음 단계는 무엇인가요?

  <blockquote>네트워크 보안 그룹을 만든 후 다음 명령을 실행하여 기본 규칙을 확인합니다.</blockquote>

  <pre class="prettyprint">Get-AzureNetworkSecurityGroup -Name "MyVNetSG" -Detailed</pre>

  <blockquote>기본 규칙이 표시됩니다. 다음 단계로 네트워크 보안 그룹을 VM 또는 서브넷에 연결합니다. 엔터티의 네트워크 트래픽을 제어하는 규칙을 더 추가합니다. 몇 분 내에 적용되는 규칙을 확인합니다(일반적으로 초).</blockquote>

  4. 내 VM에 대한 RDP 엔드포인트를 정의했고 인터넷에서 RDP 포트에 연결하기 위해 액세스 제어 규칙이 필요한가요?

  <blockquote>예, 네트워크 보안 그룹의 기본 규칙은 인터넷에서 포트에 대한 액세스를 허용하지 않습니다. 사용자는 RDP 트래픽을 허용하는 특정 규칙을 만들어야 합니다.</blockquote>
