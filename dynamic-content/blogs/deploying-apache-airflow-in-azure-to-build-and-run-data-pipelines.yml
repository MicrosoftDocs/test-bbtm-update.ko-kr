### YamlMime:Yaml
ms.openlocfilehash: 0867e7375154e8bb39545902776d436d87becbae
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139906833"
Slug: deploying-apache-airflow-in-azure-to-build-and-run-data-pipelines
Title: 데이터 파이프라인을 빌드하고 실행하기 위해 Azure에 Apache Airflow 배포
Summary: 'Apache Airflow는 워크플로를 작성, 예약 및 모니터링하는 데 사용되는 오픈 소스 플랫폼입니다. Airflow는 연산자, 작성 작업을 위한 프로그래밍 가능한 인터페이스, 확장 가능한 분산 아키텍처 및 풍부한 추적 및 모니터링 기능을 포함하는 확장 가능한 프레임워크를 제공하여 cron 유틸리티의 몇 가지 제한 사항을 극복합니다. '
Content: >-
  <p><a href="https://airflow.readthedocs.io/en/latest/project.html" target="_blank">Apache Airflow</a> 는 워크플로를 작성, 예약 및 모니터링하는 데 사용되는 오픈 소스 플랫폼입니다. Airflow는 연산자, 작성 작업을 위한 프로그래밍 가능한 인터페이스, 확장 가능한 분산 아키텍처 및 풍부한 추적 및 모니터링 기능을 포함하는 확장 가능한 프레임워크를 제공하여 cron 유틸리티의 몇 가지 제한 사항을 극복합니다. 2015년 Apache Foundation에 추가된 이후 Airflow는 <a href="https://blog.socialcops.com/technology/data-science/apache-airflow-disease-outbreaks-india/" target="_blank">ETL 파이프라인</a> 및 <a href="https://engineering.siftscience.com/sift-trains-thousands-models-using-apache-airflow/" target="_blank">ML 워크플로</a>를 설계 및 오케스트레이션하기 위해 커뮤니티에서 큰 채택을 했습니다. Airflow에서 워크플로는 DAG(Directed Acyclic Graph)로 정의되어 정의된 작업이 작업 간의 종속성을 관리하여 연달아 실행되도록 합니다.</p>


  <p>Airflow 아키텍처의 간소화된 버전은 다음과 같습니다. UI를 제공하는 웹 서버, MySQL/PostgreSQL 데이터베이스일 수 있는 관계형 메타데이터 저장소, DAG 파일, 스케줄러 및 작업자 프로세스를 저장하는 영구 볼륨으로 구성됩니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/8eeb4b31-1bfd-42ce-b94e-bd030af97825.png"><img alt="Airflow architecture diagram" border="0" height="380" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ba8a473d-3f75-4735-8cf2-7f2cf54e7177.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="공기 흐름 아키텍처 " width="640"></a></p>


  <p>위의 아키텍처는 다음을 포함하여 네 가지 실행 모드로 실행되도록 구현할 수 있습니다.</p>


  <ul>
   <li><strong>순차 실행기 </strong>&ndash; 이 모드는 개발/테스트 또는 데모 용도에 유용합니다. 작업을 직렬화하고 한 번에 하나의 작업만 실행할 수 있습니다.</li>
   <li><strong>로컬 실행기</strong> &ndash; 이 모드는 병렬 처리를 지원하며 중소 규모의 워크로드에 적합합니다. 스케일 아웃을 지원하지 않습니다&rsquo;.</li>
   <li><strong>셀러리 실행기</strong> &ndash; 이는 프로덕션 배포에 기본 설정 모드이며 작업자 수를 확장하는 방법 중 하나입니다. 이렇게 하려면 조정을 위해 RabbitMQ 또는 Redis Broker인 추가 셀러리 백 엔드가 필요합니다.</li>
   <li><strong>Dask 실행기</strong> &ndash; 또한 이 모드를 사용하면 <a href="https://distributed.readthedocs.io/en/latest/" target="_blank">Dask.distributed</a> 라이브러리를 활용하여 스케일 아웃할 수 있으므로 사용자가 분산 클러스터에서 작업을 실행할 수 있습니다.</li>
  </ul>


  <p>위의 아키텍처는 아래와 같이 Azure VM에서 또는 Azure의 관리되는 서비스를 사용하여 구현할 수 있습니다. 프로덕션 배포의 경우 기본 제공 고가용성 및 탄력적 크기 조정 기능을 사용하여 관리되는 서비스를 활용하는 것이 좋습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/62085883-f4dd-4094-994b-b8a0fd0e5745.png"><img alt="Image 2" border="0" height="389" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/520bae1c-a084-4e9e-8fc5-1ce6041538f8.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="이미지 2" width="514"></a></p>


  <p><a href="https://hub.docker.com/r/puckel/docker-airflow/" target="_blank">푸켈&#39;Airflow docker 이미지</a> 에는 자동화된 빌드 및 퍼블릭 DockerHub 레지스트리에 릴리스된 Apache Airflow의 최신 빌드가 포함되어 있습니다. Linux용 Azure App Service는 공용 DockerHub 레지스트리와 통합되며 <a href="https://docs.microsoft.com/en-us/azure/app-service/containers/app-service-linux-ci-cd" target="_blank">지속적인 배포를 통해 Linux 컨테이너에서 Airflow 웹앱을</a> 실행할 수 있습니다. 또한 Azure App Service는 docker compose 및 Kubernetes를 사용하여 셀러리 실행 모드에 유용한 <a href="https://review.docs.microsoft.com/en-us/azure/app-service/containers/app-service-linux-faq#multi-container-with-docker-compose-and-kubernetes" target="_blank">다중 컨테이너 배포</a> 를 허용합니다.</p>


  <p>Azure App Service 및 Azure Database for PostgreSQL 인스턴스를 메타데이터 저장소로 사용하여 Azure에서 Airflow 인스턴스를 신속하게 배포하고 만들 수 있는 Azure <a href="https://github.com/savjani/azure-quickstart-templates/tree/master/101-webapp-linux-airflow-postgresql" target="_blank">빠른 시작 템플릿</a>을 개발했습니다.</p>


  <p><a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fsavjani%2Fazure-quickstart-templates%2Fmaster%2F101-webapp-linux-airflow-postgresql%2Fazuredeploy.json" target="_blank"><img alt="Deploy to Azure icon" border="0" height="34" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ee647314-4cec-4f96-be74-f6df77631bd8.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="Azure에 배포 아이콘" width="161"></a></p>


  <p>빠른 시작 템플릿은 다음 그래픽과 같이 <a href="https://hub.docker.com/r/puckel/docker-airflow/" target="_blank">푸켈/docker-airflow</a> 에서 최신 Docker 컨테이너 이미지를 자동으로 다운로드 및 배포하고 Azure Database for PostgreSQL 서버에서 데이터베이스를 초기화합니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/387ad1c8-1bfe-4251-9a7b-8479c6e16f6b.jpg"><img alt="2018-11-25_18-28-28" border="0" height="771" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/d2d5a783-4116-46b0-9c94-1a247bf4df8e.jpg" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="2018-11-25_18-28-28" width="1676"></a></p>


  <p>Airflow Docker 이미지에 대한 <a href="https://airflow.readthedocs.io/en/latest/howto/set-config.html#setting-configuration-options" target="_blank">환경 변수</a> 는 다음 그래픽과 같이 Azure App Service의 애플리케이션 설정을 사용하여 설정할 수 있습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7d52e331-91ae-431b-bbaf-be4e3d448c86.jpg"><img alt="2018-11-25_18-41-54" border="0" height="726" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/552c0eaa-b035-44af-9ac5-7755c59464cc.jpg" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="2018-11-25_18-41-54" width="1662"></a></p>


  <p>배포에 사용되는 환경 변수는 다음과 같습니다.</p>


  <ul>
   <li><strong></strong> &ndash; AIRFLOW__CORE__SQL_ALCHEMY_CONN Azure Database for PostgreSQL에 연결할 웹앱의 연결 문자열을 설정합니다.</li>
   <li><strong></strong> &ndash; AIRFLOW__CORE__LOAD_EXAMPLES 배포하는 동안 DAG 예제를 로드하려면 true로 설정합니다.</li>
  </ul>


  <p><strong>WEBSITES_ENABLE_APP_SERVICE_STORAGE</strong> 애플리케이션 설정은 true로 설정되며 스케줄러 및 작업자 컨테이너 이미지에 액세스할 수 있는 DAG 파일에 대한 영구 스토리지로 사용할 수 있습니다.</p>


  <p>배포된 후 다음 그래픽과 같이 포트 8080에서 웹 서버 UI를 찾아 DAG 예제를 보고 모니터링할 수 있습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/0492e391-95fe-4b00-b3d1-101add2c6b63.jpg"><img alt="2018-11-25_18-48-04" border="0" height="839" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/12ee025b-6f27-4b7b-8d18-81f7505817c3.jpg" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="2018-11-25_18-48-04" width="1895"></a></p>


  <p>이제 Airflow 연산자를 활용하여 ETL 및 기계 학습 워크플로에 대한 데이터 파이프라인을 오케스트레이션하고 디자인할 준비가 되었습니다.&nbsp;&nbsp;</p>


  <h2>다음 단계</h2>


  <ul>
   <li>위의 템플릿은 테스트 및 개념 증명 연구를 위해 순차적 실행기 모드로 Azure에서 Apache Airflow를 신속하게 실행하고 배포하려는 모든 사용자에게 좋은 빠른 시작 솔루션을 제공합니다. 그러나 템플릿은 엔터프라이즈 프로덕션 배포용으로 설계되지 않았으며 Celery 실행기 모드에서 실행하려면 Azure App Services 및 컨테이너 배포에 대한 전문 지식이 필요합니다. 여기서는 고객을 위해 Azure에서 Airflow의 프로덕션 등급 배포를 간소화하기 위해 Bitnami와 협력했습니다. Bitnamis&rsquo; 다중 계층 Airflow 템플릿에 대한 자세한 내용은 최신 <a href="https://azure.microsoft.com/en-us/blog/bitnami-apache-airflow-multi-tier-now-available-in-azure-marketplace" target="_blank">블로그 게시물을</a> 방문해 드립니다.</li>
   <li>흥미로운 과제를 찾고 있다면 Helm 차트, Azure Database for PostgreSQL 및 RabbitMQ를 사용하여 Azure Kubernetes Services를 사용하여 셀러리 실행기를 사용하여 <a href="https://github.com/mumoshu/kube-airflow" target="_blank">kube-airflow 이미지를</a> 배포할 수 있습니다. 당신이 그것을 개발하고 우리는이 블로그에 연결하는 것이 행복 할 경우 알려주세요.</li>
  </ul>


  <h2>감사의 말</h2>


  <p>마크 볼츠와 짐  Toland가 게시물에 기여한 것에 대해 특별한 감사를 표합니다.</p>
