### YamlMime:Yaml
ms.openlocfilehash: 324a9c8d28d3082d5e79738470e51d3c352ac201
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139898584"
Slug: how-to-disable-ssl-3-0-in-azure-websites-roles-and-virtual-machines
Title: Azure Websites, Roles 및 Virtual Machines에서 SSL 3.0을 사용하지 않도록 설정하는 방법
Summary: Poodle SSL 3.0 취약성으로부터 보호하기 위해 Azure에서 SSL 3.0을 사용하지 않도록 설정하는 방법에 대한 정보를 찾고 있는 경우 이 게시물의 지침을 따르세요.
Content: "Microsoft는 최근 SSL 3.0의 취약성을 해결하는 데 도움이 되는 <a href=\"https://technet.microsoft.com/en-us/library/security/3009008.aspx\">보안 권고 3009008</a> 릴리스했습니다. 이는 SSL 3.0 프로토콜에 영향을 주는 업계 전반의 취약성이며 프로토콜의 Microsoft 또는 Azure 구현에만 해당되지 않습니다. Azure Websites, 역할 및 Windows Virtual Machines는 기본적으로 이 프로토콜을 사용하도록 설정합니다.\n\n서버에서도 SSLv3을 사용하지 않도록 설정할 수 있습니다. 이렇게 하면 모든 연결에서 더 강력한 TLS 프로토콜을 사용할 수 있지만, 고객은 SSL 3.0만 지원하는 레거시 브라우저의 사용자가 더 이상 서버에 연결할 수 없다는 점에 유의해야 합니다.\n\n오늘 고객이 Azure Websites, 역할 및 Virtual Machines에서 SSL 3.0을 사용하지 않도록 설정하는 방법에 대한 지침을 발표했습니다. 고객은 이제 역할 및 Virtual Machines에서 프로토콜을 사용하지 않도록 설정할 수 있습니다. Azure Website의 변경 내용을 허용하는 기능은 고객이 2014년 10월 20일 월요일에 구현할 수 있도록 라이브로 제공됩니다. 이러한 변경 내용을 구현하기 전에 고객이 회귀 위험을 평가하는 것이 좋습니다.\n\n다음은 SSL 3.0 연결을 허용하지 않도록 Azure 웹 사이트, 역할 및 Virtual Machines를 구성하는 데 수행할 수 있는 단계입니다.\n<h2></h2>\n<h2>Azure Websites에서 SSL 3.0 사용 안 함(업데이트!)</h2>\nAzure Websites는 앞에서 언급한 취약성으로부터 고객을 보호하기 위해 기본적으로 모든 사이트에 대해 SSL 3.0을 사용하지 않도록 설정했습니다. 고객은 더 이상 Azure Websites에서 SSL 3.0을 사용하지 않도록 설정하는 작업을 수행할 필요가 없습니다.\n\n&nbsp;\n<h2>Azure 역할에서 SSL 3.0 사용 안 함(웹 역할 또는 작업자 역할)</h2>\nAZURE PAAS(Platform as a Service) 역할에서 기본 운영 체제를 변경하는 가장 좋은 방법은 시작 작업을 사용하고 애플리케이션을 다시 배포하는 것입니다. 이는 모든 역할 인스턴스가 구성을 수신하고 해당 구성이 자동 크기 조정 또는 서비스 복구 작업에서 유지되도록 하는 유일한 방법입니다. 이 구성 변경은 애플리케이션을 다시 배포해야만 수행할 수 있습니다.\n\nVIP가 프로덕션으로 교환되기 전에 애플리케이션이 스테이징 모드에서 회귀를 철저히 테스트하는 것이 좋습니다.\n<h3>1단계: 시작 스크립트를 빌드하고 역할 구성에 배치</h3>\n새 파일 DisableSslv3.cmd를 만들고 각 역할 정의의 시작 디렉터리에 배치합니다.\n<blockquote>업데이트: 필요에 따라 서버에서 SSL 암호 그룹 순서를 설정하도록 스크립트가 업데이트되었습니다.</blockquote>\n<pre class=\"prettyprint\">PowerShell -ExecutionPolicy Unrestricted .\\DisableSslv3.ps1 &gt;&gt; \"%TEMP%\\StartupLog.txt\" 2&gt;&amp;1\n\nEXIT /B 0</pre>\nDisableSslv3.ps1 새 파일을 만들고 각 역할 정의의 시작 디렉터리에 배치합니다.\n<pre class=\"prettyprint\"># You can use the -SetCipherOrder (or -sco) option to also set the TLS cipher \n# suite order. Change the cipherorder variable below to the order you want to set on the \n# server. Setting this requires a reboot to take effect.\n\nParam(\n [parameter(Mandatory=$false)]\n [alias(sco)]\n [switch]$SetCipherOrder)\n\n$regkeys = @(\n\"HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.0\",\n\"HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.0\\Client\",\n\"HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.0\\Server\",\n\"HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.1\",\n\"HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.1\\Client\",\n\"HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.1\\Server\",\n\"HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.2\",\n\"HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.2\\Client\",\n\"HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.2\\Server\",\n\"HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\SSL 2.0\",\n\"HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\SSL 2.0\\Client\",\n\"HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\SSL 2.0\\Server\",\n\"HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\SSL 3.0\",\n\"HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\SSL 3.0\\Client\",\n\"HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\SSL 3.0\\Server\",\n\"HKLM:\\SOFTWARE\\Policies\\Microsoft\\Cryptography\\Configuration\\SSL0010002\"\n)\n$cipherorder = \"TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384_P384,TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256,\"\n$cipherorder += \"TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA_P384,TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA_P256,\"\n$cipherorder += \"TLS_RSA_WITH_AES_256_CBC_SHA256,TLS_RSA_WITH_AES_128_CBC_SHA256,\"\n$cipherorder += \"TLS_RSA_WITH_AES_256_CBC_SHA,TLS_RSA_WITH_AES_128_CBC_SHA,TLS_RSA_WITH_3DES_EDE_CBC_SHA\"\n\n# If any settings are changed, this will change to $True and the server will reboot\n$reboot = $False\n\nFunction Set-CryptoSetting {\n  param (\n    $keyindex,\n    $value,\n    $valuedata,\n    $valuetype,\n    $restart\n  )\n\n  # Check for existence of registry key, and create if it does not exist\n  If (!(Test-Path -Path $regkeys[$keyindex])) {\n    New-Item $regkeys[$keyindex] | Out-Null\n  }\n\n  # Get data of registry value, or null if it does not exist\n  $val = (Get-ItemProperty -Path $regkeys[$keyindex] -Name $value -ErrorAction SilentlyContinue).$value\n\n  If ($val -eq $null) {\n    # Value does not exist - create and set to desired value\n    New-ItemProperty -Path $regkeys[$keyindex] -Name $value -Value $valuedata -PropertyType $valuetype | Out-Null\n    $restart = $True\n  } Else {\n    # Value does exist - if not equal to desired value, change it\n    If ($val -ne $valuedata) {\n      Set-ItemProperty -Path $regkeys[$keyindex] -Name $value -Value $valuedata\n      $restart = $True\n    }\n  }\n\n  If ($SetCpiherOrder) {\n    Set-ItemProperty -Path $regkeys[15] -Name functions -Value $cipherorder\n    $restart = $True\n  }\n  return $restart\n}\n\n# Check for existence of parent registry keys (SSL 2.0 and SSL 3.0), and create if they do not exist\nFor ($i = 9; $i -le 12; $i = $i + 3) {\n  If (!(Test-Path -Path $regkeys[$i])) {\n    New-Item $regkeys[$i] | Out-Null\n  }\n}\n\n# Ensure SSL 2.0 disabled for client\n$reboot = Set-CryptoSetting 10 DisabledByDefault 1 DWord $reboot\n\n# Ensure SSL 2.0 disabled for server\n$reboot = Set-CryptoSetting 11 Enabled 0 DWord $reboot\n\n# Ensure SSL 3.0 disabled for client\n$reboot = Set-CryptoSetting 13 DisabledByDefault 1 DWord $reboot\n\n# Ensure SSL 3.0 disabled for server\n$reboot = Set-CryptoSetting 14 Enabled 0 DWord $reboot\n\n# If any settings were changed, reboot\nIf ($reboot) {\n  Write-Host \"Rebooting now...\"\n  shutdown.exe /r /t 5 /c \"Crypto settings changed\" /f /d p:2:4\n}</pre>\n<h3></h3>\n<h3>2단계: 역할의 서비스 정의에 시작 작업 추가(csdef)</h3>\n<pre class=\"prettyprint\">&lt;ServiceDefinition name=\"MyService\" xmlns=\"\"&gt;\n  &lt;WebRole name=\"WebRole1\"&gt;\n    &lt;Startup&gt;\n      &lt;Task commandLine=\"DisableSslv3.cmd\" executionContext=\"elevated\" taskType=\"simple\"&gt;\n      &lt;/Task&gt;\n    &lt;/Startup&gt;\n  &lt;/WebRole&gt;\n&lt;ServiceDefinition&gt;</pre>\n<h2></h2>\n<h2>Azure Virtual Machines에서 SSL 3.0 사용 안 함</h2>\nAzure 역할(PaaS)에 대해 위에서 제공된 PowerShell 스크립트는 Windows Virtual Machines에서 SSL 3.0을 사용하지 않도록 설정하는 데도 똑같이 효과적입니다. 이 스크립트는 RDP(원격 데스크톱 프로토콜) 또는 선택한 인프라 구성 관리 시스템(예: Puppet 또는 Chef)을 통해 수동으로 배포 및 실행할 수 있습니다.\n\nLinux Virtual Machines에 대한 배포 지침을 따릅니다."
