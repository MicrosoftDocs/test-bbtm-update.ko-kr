### YamlMime:Yaml
ms.openlocfilehash: 8e4c20d2edaad4cab9ae5f83474f568c6ead5459
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139911853"
Slug: how-azure-security-center-detects-a-bitcoin-mining-attack
Title: Azure Security Center에서 비트코인 마이닝 공격을 감지하는 방법
Summary: Azure Security Center는 고객이 글로벌 위협 인텔리전스를 통해 지원되는 고급 분석을 사용하여 수많은 위협에 대처할 수 있도록 지원합니다. 또한 보안 연구원 팀이 직접 작업하는 경우가 많습니다.
Content: >-
  <p>Azure Security Center는 고객이 글로벌 위협 인텔리전스를 통해 지원되는 고급 분석을 사용하여 수많은 위협에 대처할 수 있도록 지원합니다. 또한 보안 연구원 팀은 종종 고객과 직접 협력하여 보안 센터 검색 및 경고 기능을 지속적으로 개선하는 것을 목표로 Microsoft Azure 고객에게 영향을 미치는 보안 인시던트에 대한 인사이트를 얻습니다.</p>


  <p>이전 블로그 게시물&nbsp;&quot;에서 <a href="https://azure.microsoft.com/en-us/blog/how-azure-security-center-helps-reveal-a-cyberattack/">Azure Security Center가 사이버 공격을</a>&quot; 공개하는 데 도움이 되는 방법, 보안 연구원은 Security Center에서 감지한 무차별 암호 대입 공격으로 시작된 하나의 실제 공격 캠페인 단계와 공격을 조사하고 수정하기 위해 취한 단계를 자세히 설명했습니다. 이 게시물&rsquo;에서는 연구원이 Cryptonight라는 잘 알려진 암호화된 마이닝 알고리즘을 활용한 마이닝 활동의 링을 발견하도록 유도하는 Azure Security Center 검색에 초점을 맞춥니다.</p>


  <p>자세한 내용을 알아보기 전에 이 블로그 전체에서 볼 수 있는&rsquo; 몇 가지 용어를 빠르게 설명해 보겠습니다&rsquo;. &ldquo;Cryptocoin Miners&rdquo; 는 마이닝 알고리즘을 사용하여 디지털 통화의 한 형태인 암호화를 생성하거나 &ldquo;채굴&rdquo; 하는 특수한 소프트웨어 클래스입니다. 마이닝 소프트웨어는 영향을 받는 호스트의 네트워크 대역폭뿐만 아니라 CPU(중앙 처리 장치) 또는 GPU(그래픽 처리 장치)와 같은 시스템 하드웨어 리소스를 하이재킹하기 때문에 종종 악성으로 플래그가 지정됩니다. Cryptonight는 특히 호스트&rsquo; CPU에 의존하는 마이닝 알고리즘 중 하나입니다. 조사 결과, 악성 다운로드,&rsquo; 악성 링크가 있는 이메일, 이미 설치된 맬웨어에서 다운로드한 첨부 파일, 피어 투 피어 파일 공유 네트워크 및 금이 간 설치 관리자/번들러를 비롯한 다양한 기술을 통해 설치된 암호화코인 광부를 확인했습니다.</p>


  <h2>초기 Azure Security Center 경고 세부 정보</h2>


  <p>초기 조사는 Azure Security Center가 의심스러운 프로세스 실행을 감지하고 아래와 같은 경고를 만들 때 시작되었습니다. 경고는 검색된 활동의 날짜 및 시간, 영향을 받는 리소스, 구독 정보와 같은 세부 정보를 제공했으며, 이 경우 검색된 것과 같은 해커 도구에 대한 자세한 보고서에 대한 링크를 포함시켰습니다.</p>


  <table border="0" cellpadding="2" cellspacing="0" width="999">
      <tbody>
          <tr>
              <td valign="top" width="499"><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/c89aed15-ffd5-4594-a750-972dfa7548b5.png"><img alt="Suspicious process executed" border="0" height="438" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/d8c54e24-6aab-44d4-82dd-e9d454b275d7.png" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" title="의심스러운 프로세스가 실행됨" width="321"></a></td>
              <td valign="top" width="499"><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/5b1ba836-0a52-4f87-8d77-33156f12daab.png"><img alt="Threat summary" border="0" height="426" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/fd5f79f1-e8a9-4d4f-938d-03843e6214d0.png" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" title="위협 요약" width="328"></a></td>
          </tr>
      </tbody>
  </table>


  <p>우리는 더 깊은 조사를 시작, 초기 손상은 HackTool로 &ldquo;감지 된 의심스러운 다운로드를 통해 했다 밝혀: Win32/Keygen&quot;.&nbsp; 상자의 관리자 중 한 명이 일반적으로 일부 소프트웨어 키를 패치하거나 &quot;해독&quot; 하는 데 사용되는 도구를 다운로드하려고 한 것으로 의심됩니다. 맬웨어는 이러한 도구와 함께 자주 설치되므로 공격자는 백도어와 상자에 액세스할 수 있습니다.</p>


  <ul>
      <li>로그 분석에 따라 공격은 <em>*server$&rdquo;라는&ldquo;</em> 사용자 계정을 만드는 것으로 시작되었습니다.</li>
      <li><em>&ldquo;그러면 *server$&rdquo; 계정이</em> ngm&rdquo;이라는 &quot;예약된 작업을 만들었습니다. 이 작업은 C:\Windows\Temp\n&rdquo; gmtx&quot; 폴더에 &quot;있는kit.bat일괄 &quot; 처리 스크립트를 시작했습니다.</li>
      <li>그런 다음, cryptonight 관련 매개 변수를<em> 사용하여 시작되는servies.exe</em>&ldquo;&nbsp; 명명 &quot; 된 프로세스를 관찰했습니다.</li>
      <li><u>참고</u>: <em>bond007.01</em>&rsquo;은 &lsquo; 이 작업 뒤에 있는 암호화된 사용자&rsquo; 계정을 나타내고 &lsquo;x&rsquo;는 암호를 나타냅니다.</li>
  </ul>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/aa230f28-4341-4f76-b99d-fbc21c3587c9.png"><img alt="Image 1" border="0" height="212" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/8b25670e-79c3-4f19-95f4-21aeb390801a.png" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" title="이미지 1" width="611"></a></p>


  <p>이틀 후 다른 파일 이름으로 동일한 활동을 관찰했습니다. 아래 스크린샷에서 sst.bat 이제 kit.bat 대체되었으며 mstdc.exe servies.exe 대체되었습니다. 동일한 일괄 처리 파일 및 프로세스 실행 주기가 주기적으로 관찰되었습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/5a258c57-bb4b-4958-ab97-c8aad431b16e.png"><img alt="Image 2" border="0" height="249" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/a8090a9e-c18d-49ef-8e36-7ce0e2f7d6f8.png" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" title="이미지 2" width="601"></a></p>


  <p>이러한 .bat 스크립트는 암호화 그물 풀(XCN 또는 상어 동전)에 연결하는 데 사용되고 이러한 연결을 약 1시간마다 다시 시작하는 예약된 작업에 의해 시작된 것으로 보입니다.</p>


  <p><strong>추가 관찰: </strong> 암호화 서비스에 연결하고 암호화를 생성하는 데 사용되는 다운로드한 실행 파일은 원래 32.exe 또는 64.exe &ldquo; 각각mstdc.exe및servies.exe&rdquo; &ldquo; &rdquo; 이름이 바뀝니다. 이러한 실행 파일&rsquo; 명명 체계는 악의적인 이진 파일을 일반 시야에 숨기려는 공격자가 사용하는 이전 기술을 기반으로 합니다. 이 기술은 파일이 합법적인 무해한 Windows 파일 이름처럼 보이도록 하려고 시도합니다.</p>


  <ol>
      <li><strong><u>Mstdc.exe:</u></strong> &ldquo; <em> </em>&rdquo;mstdc.exeWindows 시스템에서 합법적인 실행 파일인<em>msdtc.exe</em>&rdquo;, 즉 Microsoft Exchange 또는 클러스터에 설치된 SQL Server 같은 다양한 애플리케이션에 필요한 Microsoft Distributed Transaction Coordinator와 같습니다&ldquo;.</li>
      <li><u><strong>Servies.exe:</strong></u> 마찬가지로<em>services.exe</em>&rdquo; &ldquo; 합법적인 SCM(서비스 제어 관리자)은 Windows 서비스 프로세스를 시작, 중지 및 상호 작용하는 운영 체제의 Windows NT 제품군에서 특수한 시스템 프로세스입니다. 여기서도 공격자는 비슷한 이진 파일을 사용하여 숨기려고 합니다. &ldquo;<em> </em>&rdquo;Servies.exe그리고 &ldquo;<em>services.exe</em>&rdquo;, 그들은 매우 유사 보인다, 그들은 하지?&rsquo; 공격자에 의해 사용되는 훌륭한 전술.</li>
  </ol>


  <p>타임라인 로그 분석을 수행할 때 VBScript.Encode&rdquo;를 사용하여 &ldquo;<em>test.zip실행하는&lsquo; </em>&rsquo;wscript.exe 비롯한 다른 활동을 기록했습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/e014a477-b785-4db7-a0df-8eb61f6ff95b.png"><img alt="Image 3" border="0" height="306" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/d5886ee6-6cd1-4e6f-823d-ecc8e922a1c2.png" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" title="이미지 3" width="733"></a></p>


  <p>추출에, 그것은 한국에서 IP 주소와 통신 했다 <em>iissstt.dat&rsquo; 파일을 공개&lsquo;</em>. <em>&lsquo;mofcomp.exe&rsquo;</em> 명령은 파일 iisstt.dat를 WMI에 등록하는 것처럼 보입니다. mofcomp.exe 컴파일러는 MOF 문이 포함된 파일을 구문 분석하고 파일에 정의된 클래스 및 클래스 인스턴스를 WMI 리포지토리에 추가합니다.</p>


  <h2>권장되는 수정 및 완화 단계</h2>


  <p>초기 손상은 금이 간 설치 관리자/번들을 통해 맬웨어를 설치한 결과이며, 이로 인해 컴퓨터가 완전히 손상되었습니다. 이를 통해 가능하면 먼저 컴퓨터를 다시 빌드하는 것이 좋습니다. 그러나 이 작업을 즉시 수행할 수 없는 경우가 있으므로 다음 수정 단계를 구현하는 것이 좋습니다.</p>


  <p>1. <u>암호 정책</u>: 영향을 받는 호스트의 모든 사용자에 대한 암호를 재설정하고 암호 정책이 모범 사례를 충족하는지 확인합니다.</p>


  <ul>
      <li><a href="https://technet.microsoft.com/en-us/library/ff741764.aspx">암호 정책 적용 모범 사례</a>&nbsp;</li>
      <li><a href="https://msdn.microsoft.com/en-us/library/cc875839.aspx">보안 암호 선택</a></li>
      <li><a href="https://msdn.microsoft.com/en-us/library/ms851492(v=winembedded.11).aspx">강력한 암호 사용</a></li>
  </ul>


  <p>2. <u>Defender 검사</u>: 잠재적인 맬웨어에 플래그를 지정할 수 있는 Microsoft Antimalware 또는 다른 솔루션을 사용하여 전체 맬웨어 방지 검사를 실행합니다.</p>


  <p>3. <u>소프트웨어 업데이트 고려 사항</u>: OS 및 애플리케이션이 최신 상태로 유지되는지 확인합니다. Azure Security Center는 중요 및 보안 OS 업데이트가 누락된 가상 머신을 식별하는 데 도움이 될 수 있습니다.</p>


  <p>4. <u>OS 취약성 &amp; 버전</u>: OS 구성을 가장 강화된 버전의 OS에 대한 권장 규칙에 맞춥니다. 예를 들어 암호를 저장할 수 없습니다. 클라우드 서비스의 운영 체제(OS) 버전을 OS 제품군에서 사용할 수 있는 최신 버전으로 업데이트합니다. Azure Security Center는 오래된 OS 버전을 실행하는 Cloud Services뿐만 아니라 이러한 권장 사항에 맞지 않는 OS 구성을 식별하는 데 도움이 될 수 있습니다.</p>


  <p>5. <u>백업</u>: 일반 백업은 소프트웨어 업데이트 관리 플랫폼 자체뿐만 아니라 업데이트될 서버에도 중요합니다. 업데이트가 실패하는 경우 롤백 구성이 준비되었는지를 확인하려면 시스템을 정기적으로 백업해야 합니다.</p>


  <p>6. <u>금이 간 소프트웨어 사용 방지</u>: 금이 간 소프트웨어를 사용하면 불법 복제된 소프트웨어와 관련된 맬웨어 및 기타 위협을 통해 가정이나 비즈니스에 원치 않는 위험이 발생합니다. Microsoft는 해당 조직에서 권장하는 대로 금이 간 소프트웨어의 사용을 회피하고 법적 소프트웨어 정책을 따르는 것이 좋습니다.</p>


  <p>자세한 내용은 아래에서 찾을 수 있습니다.</p>


  <ul>
      <li><a href="https://www.microsoft.com/en-us/piracy/industryinfo.aspx">소프트웨어 불법 복제 위험에 대해 교육</a>합니다.</li>
      <li>SIRv13을 읽어 &ldquo; 자세히 알아보세요<a href="https://blogs.technet.microsoft.com/mmpc/2012/10/09/sirv13-be-careful-where-you-go-looking-for-software-and-media-files/">. 소프트웨어 및 미디어 파일을</a>&rdquo; 찾는 위치에 주의하세요.&nbsp;</li>
  </ul>


  <p>7. <u>이메일 알림</u>: 마지막으로 이와 같은 위협이 감지되면 이메일 알림을 보내도록 Azure Security Center를 구성합니다.</p>


  <ul>
      <li>방지 섹션에서 정책 타일을 클릭합니다.</li>
      <li>보안 정책 블레이드에서 전자 메일 경고를 구성할 구독을 선택합니다.</li>
      <li>그러면 보안 정책 블레이드로 연결됩니다. 전자 메일 알림 옵션을 클릭하여 전자 메일 경고를 구성합니다.</li>
  </ul>


  <p>Azure Security Center의 이메일 경고는 아래와 같습니다.</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/9e750a52-c47a-4947-b4ff-ae9f964991da.jpg"><img alt="Notification" border="0" height="465" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/9f691664-9152-4485-9238-0a67c542ee99.jpg" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" title="NotificationTo" width="324"></a> Azure Security Center에 대한 자세한 내용은 다음을 참조하세요.</p>


  <ul>
      <li><a href="https://docs.microsoft.com/en-us/azure/security-center/security-center-detection-capabilities">Azure Security Center 검색 기능</a> &mdash; Azure Security Centers&rsquo; 고급 검색 기능에 대해 알아봅니다.</li>
      <li>Azure Security Center &mdash; <a href="https://docs.microsoft.com/en-us/azure/security-center/security-center-managing-and-responding-alerts">에서 보안 경고 관리 및 대응</a> 보안 경고를 관리하고 대응하는 방법을 알아봅니다.</li>
      <li>Azure Security Center &mdash; <a href="https://docs.microsoft.com/en-us/azure/security-center/security-center-recommendations">에서 보안 권장 사항 관리</a> 권장 사항이 Azure 리소스를 보호하는 데 어떻게 도움이 되는지 알아봅니다.</li>
      <li><a href="https://docs.microsoft.com/en-us/azure/security-center/security-center-monitoring">Azure Security Center</a> &mdash; 의 보안 상태 모니터링 Azure 리소스의 상태를 모니터링하는 방법을 알아봅니다.</li>
      <li>Azure Security Center &mdash; <a href="https://docs.microsoft.com/en-us/azure/security-center/security-center-partner-solutions">를 사용하여 파트너 솔루션 모니터링</a> 파트너 솔루션의 상태를 모니터링하는 방법을 알아봅니다.</li>
      <li><a href="https://docs.microsoft.com/en-us/azure/security-center/security-center-faq">Azure Security Center FAQ</a> &mdash; 서비스 사용에 대한 질문과 대답을 찾습니다.</li>
      <li><a href="https://blogs.msdn.com/b/azuresecurity/">Azure 보안 블로그</a> &mdash; 최신 Azure 보안 뉴스 및 정보를 가져옵니다.</li>
  </ul>
