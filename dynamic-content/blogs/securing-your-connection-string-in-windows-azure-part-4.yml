### YamlMime:Yaml
ms.openlocfilehash: b20bc1687cac4fc42e7a839c4370eb44f729349a
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139900814"
Slug: securing-your-connection-string-in-windows-azure-part-4
Title: 'Windows Azure에서 연결 문자열 보호: 4부'
Summary: '[이 문서는 SQL Azure 팀에서 제공했습니다.] Windows Azure에서 연결 문자열을 보호하는 방법에 대한 여러 부분으로 구성된 블로그 시리즈의 네 번째 부분입니다. 첫 번째 블로그 게시물 (여기)에서 ...'
Content: '<p>[이 문서는 SQL Azure 팀에서 제공했습니다.]</p><p>Windows Azure에서 연결 문자열을 보호하는 방법에 대한 여러 부분으로 구성된 블로그 시리즈의 네 번째 부분입니다. 첫 번째 블로그 게시물(여기에 있음)에서는 <a href="https://msdn.microsoft.com/en-us/library/ee758713.aspx">Windows Azure Certificate Store</a>를 사용하여 보안 연결 문자열을 저장하고 암호 해독하는 공용/프라이빗 키 쌍을 만드는 방법에 대해 설명했습니다. 두 번째 블로그 게시물(여기에 있음)에서는 Windows Azure 관리자가 프라이빗 키를 가져와 Azure를 Windows 방법을 보여 줍니다. 세 번째 블로그 게시물에서 SQL Server 관리자가 공개 키를 사용하여 연결 문자열을 암호화하는 방법을 보여 줍니다. 이 블로그 게시물에서는 개발자의 역할과 암호화된 연결 문자열을 가져오기 위해 웹 역할 프로젝트에 추가해야 하는 코드에 대해 설명합니다.</p>  <p>이 기술에는 웹 개발자의 역할이 있습니다. 그는 공개 키에 액세스할 수 있으며(그러나 사용할 필요는 없음), SQL Server 관리자가 제공한 <b> 암호화된web.config</b> 파일에 액세스할 수 있습니다. 그의 임무는 다음과 같습니다.</p>  <ul>   <li><b>web.config</b>프라이빗 키의 지문을 참조합니다. </li>    <li>공급자 어셈블리(PKCS12ProtectedConfigurationProvider.dl)를 프로젝트에 추가합니다. </li> </ul>  <p>개발자의 역할은 이 기술에서 가장 제한된 역할입니다. 프라이빗 키나 연결 문자열에 액세스할 수 없습니다.</p>  <h2>공급자 다운로드 및 컴파일</h2>  <p>웹 역할 프로젝트에서 참조할 수 있도록 공급자를 컴파일해야 합니다. 상자에 Visual Studio 2008 또는 Visual Studio 2010이 필요합니다. SQL Azure 관리자를 위해 3부에서 설명했습니다. 그러나 개발자는 이에 대한 컴파일된 인스턴트도 필요합니다. 경우에 따라 개발자는 SQL Azure 관리자용으로 컴파일합니다. 경우에 따라 코드가 체크 인되어 모든 빌드로 컴파일됩니다. 회사 가이드 라인을 따릅니다. 컴파일하는 단계는 다음과 같습니다.</p>  <ol>   <li>MSDN 코드 갤러리에서 소스 코드와 함께 .zip 다운로드합니다. </li>    <li>.zip 파일의 모든 항목을 로컬 컴퓨터에 저장합니다. </li>    <li>PKCS12ProtectedConfigurationProvider.sln 파일을 찾아 Visual Studio 사용하여 솔루션으로 엽니다. </li>    <li>도구 메뉴에서 <b>BuildBuild</b> |  <b>솔루션을</b> 선택합니다. </li>    <li><b>PKCS12ProtectedConfigurationProvider\bin\Release </b>디렉터리에 PKCS12ProtectedConfigurationProvider.dll </li>    <li>소스 제어를 사용하는 경우 다른 타사 어셈블리가 웹 역할에 있는 PKCS12ProtectedConfigurationProvider.dll 복사합니다. 이렇게 하면 다른 개발자가 다시 컴파일할 필요가 없습니다. </li> </ol>  <h2>공급자를 사용하도록 Project 업데이트</h2>  <ol>   <li>이 사용자 지정 보호된 구성 공급자에 대한 어셈블리 참조를 웹 역할 프로젝트에 추가합니다. 위에서 빌드한 <strong>PKCS12ProtectedConfigurationProvider.dll</strong> . 이렇게 하려면 웹 역할 프로젝트에서 참조를 마우스 오른쪽 단추로 클릭하고 참조 추가를 클릭합니다. 그런 다음, 사용자 지정 공급자에 대한 재배포 가능 패키지 디렉터리로 이동하여 "Pkcs12CertProtectedConfiguratoinProvider.dll"를 선택합니다. 추가된 참조를 마우스 오른쪽 단추로 클릭하고 속성을 클릭합니다. 참조의 로컬 복사 속성을 True로 설정합니다. 대부분의 경우 이미 True로 설정됩니다. 어셈블리가 Windows Azure에 배포되도록 이 작업이 필요합니다. </li>    <li>Windows Azure Administrator는 Windows Azure Portal에서 프라이빗 키의 지문을 가져옵니다.      <p><a href=""><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="clip_image002" border="0" alt="clip_image002" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/5633.clip_5F00_image002_5F00_thumb.jpg" width="884" height="411"></a></p>      <p>web.config지문을 <b> Windows </b> Azure Portal의 지문으로 바꿉니다. 이 지문은 프라이빗 키의 지문이며 공급자가 연결 문자열의 암호를 해독하는 데 필요합니다.</p>   </li>    <li>새로 추가된 참조를 <b> 사용하여web.config</b> 파일 및 프로젝트 파일을 체크 인합니다. </li> </ol>  <p>이제 배포 패키지를 만들고 Windows Azure에 배포할 준비가 되었습니다. 암호화된 연결 문자열과 PKCS12ProtectedConfigurationProvider.dll 어셈블리가 있는 <b>web.config 파일은 </b>Windows Azure에 배포되고, Windows 인증서 저장소의 프라이빗 키로 작업하며, 공급자는 지문에서 참조하며, 공급자는 코드에 대한 연결 문자열의 암호를 해독할 수 있습니다.</p>  <h2>개발자의 삶</h2>  <p>상황이 더 안전해지면 개발자의 작업이 더 어려워진다는 것을 알게 된 적이 있습니까? 이 기술의 한 가지는 프로덕션 <b>web.config</b> 파일이 개발 패브릭을 실행하는 개발자의 상자에서 작동하지 않는다는 것입니다. 그 이유는 프라이빗 키가 개발자 상자에 없으며web.config암호를 해독하기 위해 프라이빗 키가 필요하기 때문 <b> 입니다. </b> 해결 방법은 개발자의 상자에 프라이빗 키를 설치하지 않는 것입니다. 그러면 연결 문자열이 손상됩니다. 이 솔루션은 개발자가 개발 <b> SQL Azure </b>데이터베이스에 대한 연결 문자열을 포함하는 다른web.config실행하도록 하는 것입니다. 이 버전의 연결 문자열은 암호화할 필요가 없습니다.</p>  <h2>코드 검토</h2>  <p>프로덕션 Windows 실행 중인 모든 코드는web.config대한 액세스 권한이 있는 Azure 서버와 <strong> Windows </strong> Azure 인증서 저장소에서 SQL Azure 연결 문자열에 액세스할 수 있습니다. 예를 들어 이 코드는 다음과 같습니다.</p>  <pre class="csharpcode">Response.Write(<span class="str">&quot;Clear text connection string is: &quot;</span> +                   System.Web.Configuration.WebConfigurationManager.ConnectionStrings                              [<span class="str">&quot;SQLAzureConn&quot;</span>].ConnectionString);</pre>      <p>프로덕션 서버에서 실행하면 연결 문자열이 출력됩니다. 즉, Windows Azure 서버에서 실행되는 모든 코드는 악의적인 개발자가 연결 문자열을 암호화하여 수행한 보안 작업의 무결성을 손상시키지 않도록 보안 코드를 검토해야 합니다. 또한 프로덕션 Windows Azure 서버에 배포할 수 있는 모든 사용자는 연결 문자열을 파악할 수 있습니다.</p>    <h2>요약</h2>    <p>질문, 우려 사항, 의견이 있나요? 아래에 게시하고 우리는 그들을 해결하기 위해 노력할 것입니다.</p>'
