### YamlMime:Yaml
ms.openlocfilehash: a85228a5d373567fa98dd7afb0038959747885a2
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139899099"
Slug: announcing-serverside-encryption-with-customermanaged-keys-for-azure-managed-disks
Title: Azure Managed Disks에 대한 고객 관리형 키를 사용하여 서버 쪽 암호화 발표
Summary: 현재 Azure Managed Disks용 CMK(고객 관리형 키)를 사용하는 SSE(서버 쪽 암호화)에 대한 일반 공급이 발표되었습니다. Azure 고객은 기본적으로 사용하도록 설정된 Managed Disks에 대한 플랫폼 관리형 키를 사용하는 서버 쪽 암호화의 이점을 누릴 수 있습니다.
Content: >-
  <p>현재는 Azure Managed Disks용 CMK(고객 관리형 키)를 사용하여 SSE(서버 쪽 암호화)에 대한 일반 공급에 대한 일반 공급에 대한 발표를&#39;. Azure 고객은 기본적으로 Managed Disks에 <a href="https://azure.microsoft.com/en-us/blog/azure-managed-disks-sse/" target="_blank">대해 플랫폼 관리형 키를</a>&nbsp; 사용하는 SSE의 혜택을 이미 누릴 수 있습니다. CMK를 사용하는 SSE는 규정 준수 요구 사항에 맞게 암호화 키를 제어할 수 있도록 하여 플랫폼 관리형 키를 개선합니다.</p>


  <p>오늘날 고객은 Windows <a href="https://docs.microsoft.com/windows/security/information-protection/bitlocker/bitlocker-overview" target="_blank">BitLocker</a> 기능 및 Linux <a href="https://en.wikipedia.org/wiki/Dm-crypt" target="_blank">dm 암호화</a> 기능을 활용하여 게스트 VM(가상 머신) 내에서 CMK를 사용하여 Managed Disks를 암호화하는 <a href="https://docs.microsoft.com/en-us/azure/security/azure-security-disk-encryption-overview" target="_blank">Azure Disk Encryption</a>을 사용할 수도 있습니다. CMK를 사용하는 SSE는 Azure Storage 서비스의 데이터를 암호화하여 사용자 지정 이미지를 포함한 모든 OS 유형 및 이미지를 VM에 사용할 수 있도록 하여 Azure Disk 암호화를 개선합니다.</p>


  <p>CMK를 사용하는 SSE는 <a href="https://azure.microsoft.com/en-us/services/key-vault/" target="_blank">Azure Key Vault</a>와 통합되어 하드웨어 보안 모듈에서 지원되는 키에 대해 고가용성 및 확장 가능한 보안 스토리지를 제공합니다. <a href="https://docs.microsoft.com/azure/key-vault/key-vault-hsm-protected-keys" target="_blank">BYOK(사용자 고유의 키)</a>를 Key Vault로 가져오거나 Key Vault에서 새 키를 생성할 수 있습니다.</p>


  <h2>키 관리 정보</h2>


  <p>Managed Disks는 사용 가능한 가장 강력한 블록 암호화 중 하나인 256비트 AES(Advanced Encryption Standard) 암호화를 사용하여 투명하게 암호화되고 암호 해독됩니다. Storage 서비스는 봉투 암호화를 사용하여 완전히 투명한 방식으로 암호화 및 암호 해독을 처리합니다. <a href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard" target="_blank">256비트 AES 기반 데이터 암호화 키를 사용하여 데이터를 암호화</a>하며, 이는 Key Vault에 저장된 키를 사용하여 보호됩니다.</p>


  <p>Storage 서비스는 데이터 암호화 키를 생성하고 RSA 암호화를 사용하여 CMK로 암호화합니다. 봉투(Envelope) 암호화를 사용하면 VM에 영향을 주지 않고 규정 준수 정책에 따라 정기적으로 키를 회전(변경)할 수 있습니다. 키를 회전할 때 Storage 서비스는 새 CMK를 사용하여 데이터 암호화 키를 다시 암호화합니다.</p>


  <h2>키에 대한 전체 권한</h2>


  <p>Key Vault에서 키를 완전히 제어할 수 있습니다. Managed Disks는 Key Vault의 키에 액세스하기 위해 Azure Active Directory(Azure AD)에서 <a href="https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/overview" target="_blank">시스템 할당 관리 ID</a>를 사용합니다. Key Vault에 필요한 권한이 있는 관리자는 먼저 키 자격 증명 모음의 Managed Disks에 대한 액세스 권한을 부여하여 데이터 암호화 키를 암호화하고 암호 해독하는 데 키를 사용해야 합니다. 실행 중인 VM에 연결된 디스크의 경우 VM이 실패하도록 키를 사용하지 않도록 설정하거나 키에 대한 액세스 제어를 해지하여 Managed Disks가 키&mdash;에 액세스하지 못하도록 할 수 있습니다. 또한 Key Vault 모니터링을 통해 키 사용량을 추적하여 Managed Disks 또는 기타 신뢰할 수 있는 Azure 서비스만 키에 액세스하도록 할 수 있습니다.</p>


  <h2>CMK를 사용하여 SSE의 가용성</h2>


  <p>CMK를 사용하는 SSE는 Azure Virtual Machines 및 VM 확장 집합에 연결할 수 있는 표준 HDD, 표준 SSD 및 Premium SSD Managed Disks에 사용할 수 있습니다. 울트라 디스크 Storage 지원은 별도로 발표됩니다. CMK를 사용하는 SSE는 이제 모든 공용 및 Azure Government 지역에서 사용하도록 설정되었으며 몇 주 안에 독일(소버린) 및 중국의 지역에서 사용할 수 있습니다.</p>


  <p>Azure Backup을 사용하여 CMK를 사용하여 SSE로 암호화된 Managed Disks를 사용하여 VM을 백업할 수 있습니다. 또한 기본적으로 사용할 수 있는 플랫폼 관리형 키 대신 Key Vault에 저장된 키를 사용하여 Recovery Services 자격 증명 모음의 백업 데이터를 암호화하도록 선택할 수 있습니다. <a href="https://docs.microsoft.com/en-us/azure/backup/backup-azure-security-feature-cloud#encryption-of-backup-data-using-customer-managed-keys" target="_blank">CMK를 사용한 백업 암호화</a>에 대한 자세한 내용은 설명서를 참조하세요.</p>


  <p>Azure Site Recovery를 사용하여 재해 복구를 위해 CMK를 사용하여 SSE로 암호화된 Managed Disks가 있는 Azure 가상 머신을 다른 Azure 지역에 복제할 수 있습니다. Azure에서 CMK를 사용하여 SSE로 암호화된 Managed Disks에 온-프레미스 가상 머신을 복제할 수도 있습니다. <a href="https://docs.microsoft.com/en-us/azure/site-recovery/azure-to-azure-how-to-enable-replication-cmk-disks" target="_blank">CMK를 사용하여 SSE로 암호화된 Managed Disks를 사용하여 가상 머신을 복제하는</a> 방법에 대해 자세히 알아봅니다.</p>


  <h2>시작</h2>


  <p>Managed Disks용 CMK를 사용하여 암호화를 사용하도록 설정하려면 먼저 DiskEncryptionSet이라는 새 리소스 유형의 인스턴스를 만든 다음 Key Vault에 대한 인스턴스 액세스 권한을 부여해야 합니다. DiskEncryptionSet은 Key Vault의 키를 나타내며 동일한 키를 사용하여 많은 디스크, 스냅샷 및 이미지를 암호화하는 데 동일한 키를 다시 사용할 수 있습니다.</p>


  <p>DiskEncryptionSet 인스턴스를 만드는 예제를 살펴보겠습니다&rsquo;.</p>


  <p>1. Key Vault에서 키를 지정하여 DiskEncryptionSet의 인스턴스를 만듭니다.</p>


  <p><code>keyVaultId=$(az keyvault show --name yourKeyVaultName --query [id] -o tsv)</code></p>


  <p><code>keyVaultKeyUrl=$(az keyvault key show --vault-name yourKeyVaultName --name yourKeyName --query [key.kid] -o tsv)</code></p>


  <p><code>az disk-encryption-set create -n yourDiskEncryptionSetName -l WestCentralUS -g yourResourceGroupName --source-vault $keyVaultId --key-url $keyVaultKeyUrl</code></p>


  <p>2. Key Vault에 대한 액세스 권한을 인스턴스에 부여합니다. 인스턴스를 만들 때 시스템은 Azure AD에서 <a href="https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/overview" target="_blank">시스템 할당 관리 ID</a> 를 자동으로 만들고 ID를 인스턴스와 연결합니다. ID는 wrapkey, unwrapkey 및 get과 같은 필수 작업을 수행하려면 Key Vault에 액세스할 수 있어야 합니다.</p>


  <p><code>desIdentity=$(az disk-encryption-set show -n yourDiskEncryptionSetName -g yourResourceGroupName --query [identity.principalId] -o tsv)</code></p>


  <p><code>az keyvault set-policy -n yourKeyVaultName -g yourResourceGroupName --object-id $desIdentity --key-permissions wrapkey unwrapkey get</code></p>


  <p><code>az role assignment create --assignee $desIdentity --role Reader --scope $keyVaultId</code></p>


  <p>디스크, 스냅샷 및 이미지에 대해 DiskEncryptionSet 인스턴스와 연결하여 암호화를 사용하도록 설정할 준비가 된 것입니다. 동일한 DiskEncryptionSet과 연결할 수 있는 리소스 수에는 제한이 없습니다.</p>


  <p>기존 디스크를 사용하도록 설정하는 예제를 살펴보겠습니다&rsquo;.</p>


  <p>1. VM에 연결된 디스크에 대한 암호화를 사용하도록 설정하려면 가상 머신을 중지(할당 취소)해야 합니다.</p>


  <p><code>az vm stop --resource-group MyResourceGroup --name MyVm</code></p>


  <p>2. DiskEncryptionSet 인스턴스와 연결하여 연결된 디스크에 대한 암호화를 사용하도록 설정합니다.</p>


  <p><code>diskEncryptionSetId=$(az disk-encryption-set show -n yourDiskEncryptionSetName -g yourResourceGroupName --query [id] -o tsv)</code></p>


  <p><code>az disk update -n yourDiskEncryptionSetName -g yourResourceGroupName --encryption-type EncryptionAtRestWithCustomerKey --disk-encryption-set $diskEncryptionSetId</code></p>


  <p>3. VM을 시작합니다.</p>


  <p><code>az vm start -g MyResourceGroup -n MyVm</code></p>


  <p><a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/disk-encryption" target="_blank">Managed Disks</a>용 CMK를 사용하여 서버 쪽 암호화를 사용하도록 설정하는 방법에 대한 자세한 지침은 Managed Disks 설명서를 참조하세요.</p>


  <h2>사용자 의견을 보냅니다.</h2>


  <p>CMK를 사용하여 SSE에 대한 피드백을 듣기를 기대합니다. <a href="mailto:AzureDisks@microsoft.com">여기</a>로 이메일을 보내주세요.&nbsp;</p>
