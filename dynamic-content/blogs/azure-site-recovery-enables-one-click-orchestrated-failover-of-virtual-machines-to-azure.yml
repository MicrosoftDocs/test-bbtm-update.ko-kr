### YamlMime:Yaml
ms.openlocfilehash: 9e45ec4943008514b556e1b7733f457636798641
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139913135"
Slug: azure-site-recovery-enables-one-click-orchestrated-failover-of-virtual-machines-to-azure
Title: Azure Site Recovery를 사용하면 Azure에 대한 Virtual Machines의 오케스트레이션된 장애 조치(failover)를 One-Click 수 있습니다.
Summary: Azure Site Recovery의 복구 계획을 사용하면 Azure로 가상 머신을 한 번 클릭으로 복구할 수 있습니다. 워크로드에 맞게 빌드하고 사용자 지정하는 방법을 읽어본다.
Content: >-
  Azure Site Recovery는 Azure에 대한 재해 복구 기능을 사용하여 이제 워크로드를 보호하고 Azure에서 IAAS VM으로 복구할 수 있습니다. Brad Anderson은 6월 19일에<a href="https://aka.ms/DR_to_Azure_Preview"> Azure로 재해 복구 미리 보기를 발표</a> 했습니다. 그 이후로 Azure에서 가상 머신을 보호하고 복구하는 고객과 함께 이 기능을 대량으로 확인했습니다. 서비스를 아직 사용하지 않은 경우 <a href="https://aka.ms/ASR_TechEd_Video">Teched 비디오를</a> 확인하고 <a href="https://aka.ms/Azure_Site_Recovery">서비스에 등록합니다</a>.


  이 짧은 블로그에서는 <em>복구 계획 </em>이라는 Azure Site Recovery 기능을 활용하여 Azure에 대한 재해 복구를 <strong>일관되게 정확</strong>하고 <b>반복 가능</b> 하며 <b>자동화할</b> 수 있는 방법을 살펴보겠습니다. 또한 이 블로그에서는 복구 계획을 빌드하는 방법에 대한 간략한 개요를 제공하고 가상 머신을 Azure로 장애 조치(failover)할 때 주의해야 하는 몇 가지 흥미로운 활동에 대한 지침을 제공합니다.


  Azure는 사용자가 장애 조치(failover)된 가상 머신을 보는 방식과 가상 머신과 상호 작용하는 방식을 변경합니다. 그러나 Site Recovery 팀은 Azure로 장애 조치(failover) 환경이 직관적이고 간단하게 유지되도록 하기 위해 매우 열심히 노력했습니다. 우리의 목표는 동일하게 유지: <strong>원클릭 재해 복구</strong>.또한 Azure로의 재해 복구 환경은  <a href="https://blogs.technet.com/b/scvmm/archive/2014/03/03/hyper-v-recovery-manager-recovery-plan-series-part-1.aspx">애플리케이션을 다른 VMM 사이트</a> 로 복구하는 환경과 유사하게 유지되도록 했습니다. 말할 필요도 없이 Azure에 대한 복구 계획은 계획된 장애 조치(failover) 및 계획되지 않은 장애 조치(failover)뿐만 아니라 테스트 장애 조치(failover)를 사용하는 DR 드릴에도 사용할 수 있습니다.


  Azure에 대한 복구 계획은 사용자의 다음 요구 사항을 계속 해결합니다.

  <ol>
   <li>함께 장애 조치(failover)되는 가상 머신 그룹 정의</li>
   <li>애플리케이션이 정확하게 작동하도록 가상 머신 간의 종속성 정의</li>
   <li>가상 머신 장애 조치(failover) 이외의 작업도 수행할 수 있도록 사용자 지정 수동 작업과 함께 복구 자동화</li>
  </ol>

  &nbsp;


  <strong>복구 계획 만들기</strong>


  환경을 안내하기 위해 '<i>BackendSQL</i>', '<i>MiddlewareApp</i>' 및 '<i>FrontendIIS</i>'로 구성된 간단한 3계층 가상화된 애플리케이션을 살펴보겠습니다. 필요한 경우 애플리케이션을 Azure로 복구할 수 있도록 복구 계획을 만들어 보겠습니다. 이름을 '<i>FinanceAppRecovery</i>'로 지정하겠습니다.

  <table border="1" cellspacing="0" cellpadding="0">

  <tbody>

  <tr>

  <td valign="top" width="312"> <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/07/01RP-Create-first-page.png"><img class="alignnone size-medium wp-image-166331" alt="01RP Create first page" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/01RP-Create-first-page-550x369.png" width="550" height="369" /></a></td>

  <td valign="top" width="312"> <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/07/02RP-Create-second-page.png"><img class="alignnone size-medium wp-image-166341" alt="02RP Create second page" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/02RP-Create-second-page-535x369.png" width="535" height="369" /></a></td>

  </tr>

  <tr>

  <td valign="top" width="312">

  <ul>
   <li>새 복구 계획을 만듭니다.</li>
   <li>복구 계획에 이름을 지정합니다.</li>
   <li>원본을 VMM 서버로 지정하고 대상을 Microsoft Azure</li>
  </ul>

  </td>

  <td valign="top" width="312">

  <ul>
   <li>복구 계획에 애플리케이션의 가상 머신 추가</li>
  </ul>

  </td>

  </tr>

  </tbody>

  </table>

  &nbsp;


  <strong>복구 계획 사용자 지정</strong>


  간단한 3계층 애플리케이션은 아래와 같이 시각화할 수 있습니다. 프런트 엔드 서버는 미들웨어 및 SQL 서버에 따라 달라집니다. 미들웨어 서버도 SQL 서버에 따라 달라집니다. 애플리케이션이 올바르게 표시되도록 하려면 종속성이 올바르게 모델링되었는지 확인해야 합니다. 이렇게 하면 모델링하는 종속성을 적용하는 가상 머신이 복구됩니다.


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/three-tier.png"><img class="alignnone size-full wp-image-166414" alt="three tier" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/three-tier.png" width="179" height="174" /></a>


  애플리케이션에서 이러한 종속성은 <em>그룹을</em> 사용하여 정의할 수 있습니다. 연습을 위해 사용자는 애플리케이션의 각 계층에 하나씩 세 개의 그룹을 만들고 가상 머신을 올바른 그룹으로 이동합니다. 이 예제에서는 '<i>BackendSQL</i>'을 그룹 1에, '<i>MiddlewareApp</i>'을 그룹 2에, '<i>FrontendIIS</i>'를 그룹 3에 배치합니다. 이렇게 하면 애플리케이션 온-프레미스를 종료하는 동안 그룹 3이 먼저 종료되고 그룹 2 가상 머신이 꺼집니다. 그룹 1 VM은 결국 꺼집니다. 이렇게 하면 종료하는 동안 데이터가 손실되지 않습니다.

  <table border="1" cellspacing="0" cellpadding="0">

  <tbody>

  <tr>

  <td valign="top" width="312"> <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/07/04-add-group.png"><img class="alignnone size-medium wp-image-166361" alt="04 add group" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/04-add-group-396x369.png" width="396" height="369" /></a></td>

  <td valign="top" width="312"> <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/07/05-move-VM.png"><img class="alignnone size-medium wp-image-166371" alt="05 move VM" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/05-move-VM-374x369.png" width="374" height="369" /></a></td>

  </tr>

  <tr>

  <td valign="top" width="312">

  <ul>
   <li> 작업 표시줄의 '그룹' 단추를 사용하여 새 그룹 추가</li>
  </ul>

  </td>

  <td valign="top" width="312">

  <ul>
   <li> 그룹이 추가된 경우 가상 머신을 선택하고 필요한 그룹으로 'Virtual Machine 이동'을 선택합니다.</li>
  </ul>

  </td>

  </tr>

  </tbody>

  </table>

  또한 부팅 순서는 그룹의 순서대로 오케스트레이션됩니다. 그룹 1 가상 머신이 먼저 부팅되고 그룹 2와 마지막으로 그룹 3이 부팅됩니다. 이는 백 엔드 가상 머신이 백 엔드 가상 머신에 의존하는 VM 앞에 오도록 하기 위한 것입니다. 이 예제에서 그룹 3에서 '<i>FrontendIIS</i>' 가상 머신이 부팅되면 '<i>BackendSQL</i>' 및 '<i>MiddlewareApp</i>'에 의존하는 VM도 모두 Azure에서 작동 및 실행됩니다.

  <table border="1" cellspacing="0" cellpadding="0">

  <tbody>

  <tr>

  <td valign="top" width="623"> <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/07/financerecovery.png"><img class="alignnone size-medium wp-image-166274" alt="financerecovery" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/financerecovery-636x360.png" width="636" height="360" /></a></td>

  </tr>

  <tr>

  <td valign="top" width="623">위의 이미지는 복구 계획을 만들 때 3계층 애플리케이션이 어떻게 보이는지 보여 줍니다.</td>

  </tr>

  </tbody>

  </table>

  <strong>장애 조치(failover) 시작</strong>


  장애 조치(failover)를 시작하면 계획은 Azure의 가상 머신을 <a href="https://azure.microsoft.com/en-us/services/virtual-machines/">IAAS 가상 머신</a>으로 복구합니다. 또한 이 계획은 종속성을 준수하고 VM이 올바른 순서로 수행되도록 합니다. 가상 머신은 <a href="https://msdn.microsoft.com/en-us/library/azure/dn788907.aspx">네트워크 매핑</a> 입력을 기반으로 가상 네트워크에 연결됩니다.

  <table border="1" cellspacing="0" cellpadding="0">

  <tbody>

  <tr>

  <td valign="top" width="623"> <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/07/07-recoveryjob.png"><img class="alignnone size-medium wp-image-166444" alt="07 recoveryjob" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/07-recoveryjob-601x369.png" width="601" height="369" /></a></td>

  </tr>

  <tr>

  <td valign="top" width="623">장애 조치(failover)를 시작한 후 작업 페이지로 이동하여 진행 상황을 확인할 수 있습니다. 작업 페이지에는 세분화된 진행률이 표시되고 실행 중에 오류가 있는지 알 수 있습니다.</td>

  </tr>

  </tbody>

  </table>

  장애 조치(failover)가 완료되면 <em>FinanceAppRecovery</em> 클라우드 서비스가 만들어진 것을 볼 수 있습니다. 애플리케이션에 배포된 인스턴스를 확인하려면 3개의 가상 머신이 IAAS 컴퓨터로 복구되었으며 사용할 준비가 되었음을 확인할 수 있습니다.

  <table border="1" cellspacing="0" cellpadding="0">

  <tbody>

  <tr>

  <td valign="top" width="623"> <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/07/08-cloud-service-instace.png"><img class="alignnone size-medium wp-image-166464" alt="08 cloud service instace" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/08-cloud-service-instace-636x212.png" width="636" height="212" /></a></td>

  </tr>

  <tr>

  <td valign="top" width="623">이제 가상 머신이 Azure에서 복구됩니다. 이제 IAAS VM인 것처럼 상호 작용할 수 있습니다.</td>

  </tr>

  </tbody>

  </table>

  복구 계획은 이제 '커밋 대기 중' 상태입니다. 장애 조치(failover)가 완료되도록 계획을 커밋해야 합니다.


  준비가 되면 <a href="https://aka.ms/Azure_Site_Recovery">Azure Site Recovery 제품 페이지를 </a> 확인하고 <a href="https://aka.ms/Azure_Free_Trial">Azure 평가판을 등록 </a>하여 시작합니다. 문제를 발견하거나 다른 사용자와 소통하려는 경우 <a href="https://aka.ms/ASR_MSDN_Forum">MSDN의 Azure Site Recovery 포럼을</a> 방문하세요. 우리는 지속적으로 새로운 기능을 개선하고 사용하도록 설정하고 있습니다 - <a href="https://aka.ms/ASR_Engage">당신의 목소리를 들으세요! </a>


  <strong>여기에 몇 가지 빠른 FAQ가 있습니다 당신은 붙어 또는 궁금해하는 경우 왜 -does-it-work-that-way?</strong>


  <strong>Q1. "이름에 문자, 숫자 및 하이픈만 포함될 수 있습니다. 문자로 시작하고 문자 또는 숫자로 끝나야 합니다. ", 복구 계획을 만들 때 다른 VMM 사이트로 복구하는 계획을 만들었을 때 이 작업을 수행하지 못했습니다.</strong>


  <img class="alignnone size-medium wp-image-166284" alt="name and target" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/name-and-target-636x86.png" width="636" height="86" />


  <strong>Ans.</strong> 복구 계획이 Azure로 장애 조치(failover)되면 복구 계획과 동일한 이름으로 <a href="https://azure.microsoft.com/en-us/documentation/services/cloud-services/">클라우드 서비스가</a> 생성되고 복구된 VM이 배포됩니다. 계획의 VM이 속한 네트워크와 동일한 선호도 그룹에 만들어집니다. 클라우드 서비스 이름은 가상 머신에 도달하는 데 사용할 수 있는 전역 퍼블릭 엔드포인트입니다. 복구 계획 이름이 'FinanceApplication'인 경우 클라우드 서비스는 하위 도메인 financeapplication.cloudapp.net 생성합니다. 복구 계획을 VMM으로 장애 조치(failover)하면 클라우드 서비스가 삭제됩니다.


  <strong>Q2. 단일 복구 계획에서 VM 수에 제한이 있나요?</strong>


  <strong>Ans.</strong> 단일 클라우드 서비스에는 50개 이상의 가상 머신이 있을 수 없습니다. 따라서 복구 계획에 추가할 수 있고 50으로 설정된 VM 수에 대한 제한도 있습니다.


  <strong>Q3. 구독당 <a href="https://azure.microsoft.com/en-us/documentation/articles/azure-subscription-service-limits/">20개의 클라우드 서비스</a> 로 제한됩니다. 20개 이상의 복구 계획을 만들 수 없음을 의미하나요?</strong>


  <strong>Ans.</strong> 클라우드 서비스 수 제한은 만들 수 있는 복구 계획의 수를 제한하지 않습니다. 그러나 20개 이상의 복구 계획을 장애 조치(failover)할 수는 없습니다. Azure 고객 지원의 도움을 받아 인시던트를 열어 클라우드 서비스 수를 늘릴 수 있습니다.


  <strong>Q4. 포트 80에서 웹 페이지를 제공하는 VM이 있습니다. 그러나 Azure로 장애 조치(failover) 후 포트 80을 통해 VM에 연결할 수 없습니다. 나는 또한 그것에 RDP 수 없습니다. 이 기능을 사용하도록 설정하기 위해 더 많은 작업을 수행해야 하나요?</strong>


  <strong>Ans.</strong> Azure로 장애 조치된 VM은 인터넷을 통해 직접 액세스할 수 없습니다. 액세스를 허용하도록 엔드포인트를 구성해야 합니다. <a href="https://azure.microsoft.com/en-us/documentation/articles/virtual-machines-set-up-endpoints/">이 자습서</a>에 따라 엔드포인트를 구성하는 방법을 이해합니다.


  <strong>Q5. RDP(원격 데스크톱) 엔드포인트를 구성했지만 가상 머신에 연결할 수 없습니다. 무엇이 잘못되었을 수 있을까요?</strong>


  <strong>Ans.</strong> 장애 조치(failover) 전에 가상 머신에서 RDP 포트를 사용하도록 설정했나요? Windows 설정에서 구성하지 않은 경우 VM에 액세스할 수 없습니다. 다른 컴퓨터가 원격 데스크톱을 사용하여 컴퓨터에 <a href="https://windows.microsoft.com/en-IN/windows7/allow-someone-to-connect-to-your-computer-using-remote-desktop-connection">연결할 수 있도록 허용했는지</a> 확인합니다.

  <div></div>
