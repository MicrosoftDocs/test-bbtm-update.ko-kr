### YamlMime:Yaml
ms.openlocfilehash: d217c6236a17726c6049db175513993bed311043
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139906011"
Slug: details-of-the-february-22nd-2013-windows-azure-storage-disruption
Title: 2013년 2월 22일 Windows Azure Storage 중단에 대한 세부 정보
Summary: 2013년 2월 22일 오후 12시 29분 PST에서 HTTPS를 사용하여 Windows Azure Storage Blob, 테이블 및 큐에 액세스하는 고객에게 영향을 주는 모든 지역에서 서비스 중단이 있었습니다.
Content: '<p>2013년 2월 22일 오후 12시 29<sup>분</sup> PST에서 HTTPS를 사용하여 Windows Azure Storage Blob, 테이블 및 큐에 액세스하는 고객에게 영향을 주는 모든 지역에서 서비스 중단이 있었습니다. 가용성은 2013년 2월 23일 오전 00:09 PST에 의해 전 세계적으로 복원되었습니다.</p>  <p>영향을 받는 고객에게 서비스 중단에 대해 사과하고 아래에 설명된 대로 해당 고객에게 서비스 크레딧을 사전에 발급하고 있습니다.</p>  <p>중단과 관련된 구성 요소, 중단의 근본 원인, 복구 프로세스, 이 사례에서 배운 내용&rsquo; 및&rsquo; 고객의 서비스 안정성을 개선하기 위해 수행하는 작업에 대한 자세한 정보를 제공하고 있습니다.</p>  <p><strong>Windows Azure 개요</strong></p>  <p>서비스 중단의 세부 정보를 자세히 알아보고 발생한&rsquo; 상황에 대한 더 나은 컨텍스트를 제공하기 전에 먼저 이 이벤트와 연결된 Windows Azure의 내부 구성 요소에 대한 정보를 공유하려고 합니다.</p>  <p>Windows Azure는 전 세계 다양한 데이터 센터 및 지리적 지역에서 많은 클라우드 서비스를 실행합니다. Windows Azure Storage Windows Azure에서 클라우드 서비스로 실행됩니다. 스탬프라고 하는 지리적 지역당 여러 물리적 스토리지 서비스 배포가 있습니다. 각 스토리지 스탬프에는 여러 스토리지 노드 랙이 있습니다.</p>  <p>Windows Azure 패브릭 컨트롤러는 하드웨어를 관리하고, 리소스 할당, 배포 및 업그레이드 기능 및 Windows Azure 플랫폼에서 클라우드 서비스에 대한 관리를 제공하는 리소스 프로비저닝 및 관리 계층입니다.</p>  <p>Windows Azure는 Secret Store라는 내부 서비스를 사용하여 서비스를 실행하는 데 필요한 인증서를 안전하게 관리합니다. 이 내부 관리 서비스는 시스템의 플랫폼 및 고객 인증서의 스토리지, 배포 및 업데이트를 자동화합니다. 이 내부 관리 서비스는 직원이 규정 준수 및 보안 목적으로 비밀에 직접 액세스할 수 없도록 시스템에서 인증서 처리를 자동화합니다.</p>  <p><strong>근본 원인 분석</strong></p>  <p>Windows Azure Storage 고유한 SSL(Secure Socket Layer) 인증서를 사용하여 각 기본 스토리지 유형(Blob, 테이블 및 큐)에 대한 고객 데이터 트래픽을 보호합니다. 인증서는 HTTPS를 통해 고객 계정(예: myaccount.blob.core.windows.net)을 나타내는 모든 하위 도메인에 대한 트래픽 암호화를 허용합니다. 내부 및 외부 서비스는 이러한 인증서를 활용하여 스토리지 시스템과의 트래픽을 암호화합니다. 인증서는 비밀 저장소에서 시작되고 각 Windows Azure Storage 노드에 로컬로 저장되며 패브릭 컨트롤러에 의해 배포됩니다. Blob, 테이블 및 큐에 대한 인증서는 모든 지역 및 스탬프에 대해 동일했습니다.</p>  <p>지난 주에 작동 중인 인증서의 만료 시간은 다음과 같습니다.</p>  <ul>  <li>*.blob.core.windows.net&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2013년 2월 22일 금요일 오후 12:29:53 PST</li>  <li>*.queue.core.windows.net&nbsp;&nbsp;&nbsp; 2013년 2월 22일 금요일 오후 12:31:22 PST</li>  <li>*.table.core.windows.net&nbsp;&nbsp;&nbsp; 프리데이, 2013년 2월 22일 오후 12:32:52 PST</li>  </ul>  <p>인증서 만료 시간에 도달하면 인증서가 잘못되어 스토리지 서버와 함께 HTTPS를 사용하는 연결에 대한 거부 메시지가 표시됩니다. 전체에서 HTTP 트랜잭션은 여전히 작동했습니다.</p>  <p>인증서가 만료되어 고객에게 직접적인 영향을 주지만 이러한 인증서를 유지 관리하고 모니터링하는 절차의 분석이 근본 원인이었습니다. 또한 인증서는 지역 간에 동일하고 일시적으로 서로 가깝기 때문에 스토리지 시스템에 대한 단일 실패 지점이었습니다.</p>  <p><strong>Storage 인증서가 업데이트되지 않은 방법에 대한 세부 정보</strong></p>  <p>컨텍스트의 경우 비밀 저장소의 정상적인 작업의 일부로 관리되는 인증서에 대해 매주 검사가 수행됩니다. 보류 중인 만료에 대한 경고는 180일 전에 서비스를 관리하는 팀에 전송됩니다. 이 시점부터 비밀 저장소는 인증서를 소유한 팀에 알림을 보냅니다. 그런 다음, 알림을 받으면 인증서를 새로 고치고, 배포가 예약된 서비스의 새 빌드에 업데이트된 인증서를 포함하고, Secret Stores&rsquo; 데이터베이스에서 인증서를 업데이트합니다. 이 프로세스는 Windows Azure의 여러 서비스에서 매월 수백 번 정기적으로 발생합니다.</p>  <p>이 경우 비밀 저장소 서비스는 Windows Azure Storage 서비스 팀에 위에서 언급한 SSL 인증서가 지정된 날짜에 만료될 것이라고 알렸습니다. 2013년 1월 7<sup>일</sup> 스토리지 팀은 비밀 저장소의 인증서 3개를 업데이트하고 이후 서비스 릴리스에 포함했습니다. 그러나 팀은 인증서 업데이트를 포함하는 릴리스로 스토리지 서비스 릴리스에 플래그를 지정하지 못했습니다. 그 후 중요한 인증서 업데이트 시간이 포함된 스토리지 서비스의 릴리스가 더 높은 우선 순위로 플래그가 지정된 업데이트 뒤에 지연되었으며 인증서 만료 기한을 충족하기 위해 시간에 배포되지 않았습니다. 또한 인증서가 비밀 저장소에서 이미 업데이트되었기 때문에 팀에 추가 경고가 표시되지 않았으며 이는 경고 시스템의 차이였습니다.</p>  <p><strong>Storage 서비스 복구</strong></p>  <p>이 인시던트는 정상 모니터링을 통해 오후 12시 44분에 PST에서 발견되었으며 만료된 인증서가 원인으로 진단되었습니다. 오후 13시 15분 PST까지 엔지니어링 팀은 이 문제를 심사하고 여러 작업 스트림을 설정하여 서비스를 복원하는 가장 빠른 경로를 결정했습니다.</p>  <p>정상적인 작업 중에 패브릭 컨트롤러는 노드를 목표 상태라고도 하는 &ldquo;원하는 상태로&rdquo; 구동합니다. 서비스의 서비스 정의는 배포의 원하는 상태를 제공하므로 패브릭 컨트롤러가 배포의 일부인 노드(서버)의 목표 상태를 확인할 수 있습니다. 서비스 정의는 엔드포인트, 구성 및 실패/업데이트 도메인이 있는 역할 인스턴스뿐만 아니라 코드, VHD(가상 하드 디스크) 이름, 인증서 지문 등과 같은 다른 아티팩트 참조로 구성됩니다.</p>  <p>정상 작업 중에 지정된 서비스는 새 인증서를 포함하도록 빌드를 업데이트한 다음, 패브릭 컨트롤러가 업데이트 도메인을 체계적으로 탐색하고 모든 노드에 서비스를 배포하여 서비스를 배포하도록 합니다. 이 프로세스는 외부 고객이 원활한 업데이트를 경험하고 게시된 SLA(서비스 수준 계약)를 충족하는 방식으로 소프트웨어를 업데이트하도록 설계되었습니다. 이 작업 중 일부는 병렬로 실행되지만 전역 서비스에 업데이트를 배포하는 전체 시간은 몇 시간입니다.</p>  <p>이 HTTPS 서비스 중단 중에는 HTTP를 사용하여 데이터에 액세스하는 고객을 위해 Windows Azure Storage 서비스가 계속 작동했으며 일부 고객은 일시적으로 HTTP로 이동하여 HTTPS 문제를 신속하게 완화했습니다. 다른 사용자를 위해 서비스를 복원하는 동안 HTTP를 사용하는 고객에게 영향을 주지 않도록 주의했습니다.</p>  <p>HTTPS 서비스를 복원하는 몇 가지 옵션을 검사한 후 두 가지 방법이 선택되었습니다. 1) 각 스토리지 노드에서 인증서 업데이트 및 2) 스토리지 서비스의 전체 업데이트. 고객 서비스를 최대한 빠르게 복원하는 데 최적화된 첫 번째 방법입니다.</p>  <p><strong>1)&nbsp;&nbsp;&nbsp;&nbsp; </strong><strong>인증서 업데이트</strong></p>  <p>개발 팀은 수정 방법의 유효성을 검사하고 서비스를 복원하기 위해 인증서를 업데이트하는 데 필요한 수동 단계를 수행했습니다. 이 프로세스는 패브릭 컨트롤러가 노드를 목표 상태로 반환하려고 하여 복잡해졌습니다. 인증서를 성공적으로 업데이트한 프로세스는 오후 18시 22분 PST에 의해 개발 및 테스트되었습니다. 이전 중단의 주요 학습은 다른 서비스에 영향을 줄 수 있는 합병증 또는 보조 중단을 방지하기 위해 수정 사항을 충분히 테스트하고 유효성을 검사하는 데 시간을 할애하는 것이었습니다. 수정을 테스트하는 동안 프로덕션 배포에 대해 유효성을 검사하기 전에 몇 가지 문제가 발견되고 수정되었습니다.</p>  <p>자동화된 업데이트 프로세스의 유효성이 검사되면 19:20 PST에 미국 서부 데이터 센터의 스토리지 노드에 적용하여 오후 20시 50분에 서비스를 성공적으로 복원했습니다. 그런 다음 전역적으로 모든 스토리지 노드에 롤아웃했습니다. 이 프로세스는 오후 22시 45분 PST에 완료되고 대부분의 고객에게 HTTPS 서비스를 복원했습니다. 추가 모니터링 및 유효성 검사가 수행되었으며 Azure 대시보드는 2013년 2월 23<sup>일</sup> 오전 00:09 PST에 녹색으로 표시되었습니다.</p>  <p><strong>2) 업데이트 완료</strong></p>  <p>인증서 업데이트와 동시에 업데이트된 인증서를 사용하여 스토리지 서비스의 전체 업데이트가 예약되어 전 세계에 배포되었습니다. 이 업데이트의 목적은 모든 스토리지 노드에 대한 최종 및 올바른 목표 상태를 제공하고 시스템이 일정하고 정상적인 상태인지 확인하는 것이었습니다. 이 프로세스는 2월 22<sup>일</sup> 오후 23:00 PST에 시작되어 2월 23<sup>일</sup> 오후 19:59 PST에 완료되었으며 설계대로 고객의 가용성 SLA에 영향을 주지 않았습니다.</p>  <p><strong>서비스 개선</strong></p>  <p>인시던트가 발생한 후에는 항상 시간을 내어 인시던트를 분석하고 엔지니어링, 운영 및 통신을 개선할 수 있는 방법을 살펴봅니다. 가능한 한 많은 것을 배우기 위해 근본 원인 분석을 수행하고 인시던트 모든 측면을 분석하여 고객을 위한 플랫폼의 안정성을 개선합니다.</p>  <p>이 분석은 인시던트 수명 주기의 각 부분과 그 이전의 엔지니어링 프로세스를 살펴보면서 네 가지 주요 영역으로 구성됩니다.</p>  <ul>  <li><strong>검색</strong> &ndash; 오류를 신속하게 표시하고 복구의 우선 순위를 지정하는 방법</li>  <li><strong>복구</strong> &ndash; 복구 시간을 줄이고 고객에게 미치는 영향을 줄이는 방법</li>  <li><strong>예방</strong> &ndash; 시스템이 오류를 방지, 격리 및/또는 복구할 수 있는 방법</li>  <li><strong>응답</strong> &ndash; 인시던트 중에 고객을 지원하는 방법</li>  </ul>  <p><strong>검색</strong></p>  <p>인증서가 프로덕션에서 만료되지 않도록 비밀 저장소뿐만 아니라 프로덕션 엔드포인트도 포함하도록 인증서 만료 모니터링을 확장할 예정입니다.</p>  <p><strong>복구</strong></p>  <p>복구 프로세스가 올바르게 작동했지만 배포 메커니즘의 성능과 안정성을 개선하기 위해 계속 노력하고 있습니다.</p>  <p>이와 같은 인시던트가 다시 발생할 경우 중요한 인증서 업데이트를 수행하고 이러한 메커니즘을 정기적으로 실행하여 더 빠른 대응을 제공하기 위한 특정 메커니즘을 마련합니다.</p>  <p><strong>방지</strong></p>  <p>프로덕션에 배포된 향후 만료 인증서의 검색을 개선할 것입니다. 만료 날짜까지 3개월 미만인 모든 프로덕션 인증서는 운영 인시던트를 생성하며 서비스 영향 이벤트인 것처럼 처리되고 추적됩니다.</p>  <p>또한 인증서 업데이트를 포함하는 서비스 빌드가 올바르게 추적되고 우선 순위가 지정되도록 연결된 수동 프로세스를 자동화합니다.&nbsp; 그 동안 인증서와 관련된 모든 수동 프로세스를 팀과 함께 검토했습니다.</p>  <p>인증서를 검토하고 서비스, 지역 및 시간에 걸쳐 인증서를 분할할 수 있는 기회를 찾아서 catch되지 않은 만료로 인해 광범위한 동시 이벤트가 생성되지 않습니다. 또한 시스템을 계속 검토하고 단일 실패 지점을 해결할 것입니다.</p>  <p><strong>Response</strong></p>  <p>Windows Azure 서비스 대시보드에 대한 다단계 장애 조치(failover) 절차는 예상대로 작동했으며 인시던트에서 고객에게 중요한 업데이트를 제공했습니다. 인시던트 기간 동안 59개의 진행률 업데이트가 있었지만 문제 및 업데이트에 대한 정확한 ETA를 제공하는 기능을 계속 구체화할 것입니다.</p>  <p>Windows Azure <a href="https://azure.microsoft.com/en-us/support/service-dashboard/" target="_blank">대시보드</a>에 우리가 알고 있는 것을 실시간으로 게시하기 위해 최선을 다하며 고객 커뮤니케이션을 개선하는 방법을 지속적으로 모색할 것입니다.</p>  <p><strong>서비스 크레딧</strong></p>  <p>우리는 이 서비스 중단이 영향을 받는 고객에게 상당한 영향을 미쳤다는 것을 알고 있습니다. 이 이벤트의 특성과 기간으로 인해 영향을 받는 고객에게 <strong>SLA 크레딧을 사전에 제공합니다</strong> . 크레딧은 영향을 받은 모든 서비스를 다룹니다. 중단 시 다음과 같은 영향을 받는 서비스를 실행한 고객은 영향을 받는 청구 기간 동안 이러한 서비스와 관련된 모든 요금에 대해 25%의 서비스 크레딧을 받게 됩니다.</p>  <ul>  <li>Storage</li>  <li>Mobile Services</li>  <li>Service Bus</li>  <li>Media Services</li>  <li>웹 사이트</li>  </ul>  <p>또한 영향을 받는 고객은 데이터 전송 사용량에 대해 25%의 크레딧을 받게 됩니다. 크레딧은 SLA에 따라 계산되며 후속 청구서에 반영됩니다. 추가 질문이 있는 고객은 Windows Azure <a href="https://azure.microsoft.com/support/?WT.mc_id=cmp_pst001_blg_post0072" target="_blank">지원에</a> 문의하여 자세한 내용을 확인할 수 있습니다.</p>  <p><strong>결론</strong></p>  <p>Windows Azure 팀은 앞으로 몇 주 동안 위에 설명된 결과를 계속 검토하고 서비스를 지속적으로 개선하기 위한 모든 조치를 취할 것입니다.</p>  <p>이 중단이 고객에게 미친 영향을 진심으로 사과하고 후회합니다. 우리는 고가용성 서비스를 제공하기 위해 부지런히 노력할 것입니다.</p>  <p>&nbsp;-Mike</p>'
