### YamlMime:Yaml
ms.openlocfilehash: d873aecd86477328cc8da0d341dd3636f18b6888
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/11/2022
ms.locfileid: "139912330"
Slug: uniqueidentifier-and-clustered-indexes
Title: Uniqueidentifier 및 클러스터형 인덱스
Summary: '[이 문서는 SQL Azure 팀에서 제공했습니다.] 저는 SQL SERVER 고유 식별자 데이터 형식인 GUID를 좋아합니다. 모든 항목, 도메인 이름, 고유한 오류 메시지 및 기본 키에 사용합니다.'
Content: <p>[이 문서는 SQL Azure 팀에서 제공했습니다.]</p><p>저는 SQL SERVER <a href="https://msdn.microsoft.com/en-us/library/ms190215.aspx" mce_href="https://msdn.microsoft.com/en-us/library/ms190215.aspx"><b>고유 식별자</b></a> 데이터 형식인 GUID를 좋아합니다. 모든 항목, 도메인 이름, 고유한 오류 메시지 및 데이터베이스 테이블의 기본 키 등에 사용합니다. -- 시작하지 마세요. 약 2년 전에 병합할 수 있는 고유한 기능 때문에 기본 키에 <b>uniqueidentifier</b> 를 사용하기 시작했습니다. </p>  <h2>병합</h2>  <p>NewId() 명령을 사용하여 SQL Server GUID를 만들면 전체 우주에서 고유하게 됩니다. 즉, 동일한 스키마를 사용하는 두 개의 데이터베이스가 동일한 테이블에 행 추가의 연결이 완전히 끊어진 경우 <b>uniqueidentifier</b> 의 기본 키를 사용하면 기본 키가 충돌하지 않도록 합니다. 이에 비해 두 데이터베이스에 테이블의 기본 키로 ID 정수 열이 있는 경우 두 테이블에 동일한 기본 키를 삽입할 가능성이 매우 높습니다.</p>  <p>병합과 어떤 관련이 있나요? uniqueidentifier를 기본 키로 사용하는 경우 연결이 끊긴 데이터베이스의 테이블을 서로 병합하는 것은 매우 쉽습니다. 반면에 ID 정수 기본 키 간에 병합하고 해당 기본 키에 대한 외래 키 참조를 업데이트할 때 충돌을 해결하기가 훨씬 어렵습니다.</p>  <h2>클러스터링 및 uniqueidentifier</h2>  <p><b>uniqueidentifier</b> 열에 클러스터형 인덱스를 만들고 <a href="https://msdn.microsoft.com/en-us/library/ms190348.aspx" mce_href="https://msdn.microsoft.com/en-us/library/ms190348.aspx">NEWID()</a>를 사용하여 GUID를 생성하는 것은 좋지 않습니다. 그 이유는 <b>NEWID()</b>가 순차적이지 않은 순서로 GUID를 생성하고 SQL Server 클러스터형 인덱스를 순차적으로 주문하기 때문입니다. 작동합니다. SQL Server uniqueidentifier 열을 중심으로 클러스터형 인덱스를 작성할 수 있지만 SQL Server 불필요한 작업을 수행하고 성능이 저하됩니다. 그 이유는 클러스터형 인덱스의 중간에 데이터를 삽입하는 경우(순차적 순서가 벗어난) SQL Server 클러스터를 다시 정렬하여 데이터를 위한 공간을 확보하기 때문입니다.</p>  <p>그렇다면 좋은 생각이 아니라면 사람들은 왜 그렇게 할까요? SQL Server SQL Server Management Studio 기본 키로 열을 할당하면 해당 열의 데이터 형식에 관계없이 자동으로 클러스터형 인덱스가 생성됩니다. 따라서 uniqueidentifier 데이터 형식을 기본 키로 사용하는 테이블을 원하는 경우 해당 인덱스가 클러스터되지 않은 인덱스로 변경해야 합니다.</p>  <p>비클러스터형 인덱스는 행이 테이블에 삽입될 때 데이터를 다시 정렬하지 않으므로 비순차적 데이터의 삽입에 클러스터형 인덱스의 성능에 영향을 주지 않습니다.</p>  <h2>함께 SQL Azure 온다</h2>  <p>기본 키에 대한 <b>uniqueidentifier</b> 데이터 형식을 좋아하고 기본 키에 클러스터되지 않은 인덱스를 만드는 경우 테이블에 대한 클러스터형 인덱스도 선택해야 합니다. 그 이유는 SQL Azure 모든 테이블에 클러스터형 인덱스가 하나만 필요하기 때문입니다. 그러나 SQL Azure 클러스터형 인덱스가 필요하다고 해서 기본 키 열이 되어야 하는 것은 아닙니다.</p>  <h2>클러스터형 인덱스 선택</h2>  <p>클러스터형 인덱스를 선택하기 위한 몇 가지 전략이 있습니다. 가장 쉽고 가장 좋은 것 중 하나는 <b>데이터 형식 날짜/시간의</b> 다른 열을 추가하고 클러스터형 인덱스로 해당 열을 사용하는 것입니다. 수행해야 할 일은 다음과 같습니다.</p>  <p>1.열을 데이터 형식 <b>날짜/시간으로</b> 추가</p>  <p>2.일반적으로 <b>날짜</b>라고 합니다.</p>  <p>3. 기본값을 GetDate()로 설정합니다. </p>  <p>4. Null이 아닌지 확인합니다.</p>  <p>5. 데이터를 삽입하기 전에 클러스터형 인덱스 만들기</p>  <p><b>열에 GetDate()</b>의 기본값을 추가하면 행이 열에 자동으로 삽입된 날짜와 시간이 기록됩니다. 이렇게 하면 행의 데이터가 테이블 데이터의 끝에 삽입됩니다. 클러스터를 다시 정렬할 수 없습니다. 데이터를 끝에 추가하면 삽입에 대한 최상의 성능이 보장됩니다.</p>  <p>클러스터형 인덱스에 대한 또 다른 좋은 선택은 대부분의 select 문에서 테이블의 순서를 반영하는 열입니다. 예를 들어 범주라는 테이블이 있고 <b>ordervalue</b> 라는 정수 열이 있고 항상 <b>SELECT ... ORDER BY [ordervalue]</b> 이면 클러스터형 인덱 <b>스 주문값</b> 을 만드는 것이 좋습니다. 그 이유는 다음과 같습니다. 클러스터에 비순차적 <b>순서값</b> 을 삽입하는 성능이 저하되더라도 데이터를 호출할 때는 워크로드 특성에 따라 행이 클러스터에서 순차적으로 읽기 때문에 성능상의 이점을 얻을 수 있습니다.</p>  <h2>NEWSEQUENTIALID()</h2>  <p>SQL Azure 지원되지 않는 <a href="https://msdn.microsoft.com/en-us/library/ms189786.aspx" mce_href="https://msdn.microsoft.com/en-us/library/ms189786.aspx"><b>NEWSEQUENTIALID()</b></a> 함수를 언급하지 않은 경우 다시 설명합니다. <b>NEWID()</b> 함수가 <b>NEWSEQUENTIALID()</b> 함수보다 고유한 비순차적 <b>uniqueidentifier</b>를 생성하는 경우 고유 순차<b>적 uniqueidentifier</b>를 생성합니다. <b>NEWSEQUENTIALID()</b> 함수의 유일한 비결은 GUID가 컴퓨터의 네트워크 카드에 따라 부분적으로 생성된다는 것입니다.</p>  <p>즉<strong>, uniqueidentifier</strong>를 기본 키 열로 성공적으로 사용하고 해당 기본 키 열을 SQL Server 데 필요한 클러스터형 인덱스로 사용할 수 있습니다. <b>NEWSEQUENTIALID()</b> 함수 열을 사용하여 해당 열을 채우는 한 </p>  <p>개인 정보 보호가 중요한 경우에는 이 함수를 사용하지 마십시오. 다음번에 생성되는 GUID 값을 추측할 수 있으므로 이 GUID와 관련된 데이터에 액세스할 수 있습니다. 예를 들어 웹 브라우저에서 쿼리 문자열의 테이블에 기본 키를 전달하는 경우입니다. 자세한 내용은 <a href="https://msdn.microsoft.com/en-us/library/ms189786.aspx" mce_href="https://msdn.microsoft.com/en-us/library/ms189786.aspx">MSDN</a> 을 참조하세요.</p>  <p>그러나 <b>NEWSEQUENTIALID()</b> 함수는 SQL Azure 지원하지 않습니다. 사용하려고 하면 다음 오류가 발생합니다.</p>  <p><font color="#ff0000">메시지 40511, 수준 15, 상태 1, 줄 1</font></p>  <p><font color="#ff0000">기본 제공 함수 'NEWSEQUENTIALID'는 이 버전의 SQL Server 지원되지 않습니다.</font></p>  <h4>마이그레이션</h4>  <p>기존 SQL Server 데이터베이스를 SQL Azure 마이그레이션하는 경우 <b>uniqueidentifier</b> 데이터 형식을 기본 키로 성공적으로 사용하려면 이러한 작업을 수행해야 합니다.</p>  <ul>  <li><b>NEWSEQUENTIALID()에서 NEWID()</b>로 GUID 생성 변환 <b></b></li>  <li><b>uniqueidentifier</b> 데이터 형식 열에서 클러스터형 인덱스를 모두 제거합니다. 이렇게 하면 마이그레이션할 수 없으므로 성능이 향상됩니다.</li>  <li>열을 선택하거나 열을 추가하여 클러스터형 인덱스를 작성합니다(위의 권장 사항 참조).</li></ul>  <p>질문, 우려 사항, 의견이 있나요? 아래에 게시하고 우리는 그들을 해결하기 위해 노력할 것입니다.</p>
