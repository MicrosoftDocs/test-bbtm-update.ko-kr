{
    "Slug": "a-new-way-to-send-custom-metrics-to-azure-monitor",
    "Title": "Azure Monitor에 사용자 지정 메트릭을 보내는 새로운 방법",
    "Summary": "In today’s world of modern applications, metrics play a key role in helping you understand how your apps, services, and the infrastructure they run on, are performing. They can help you detect, investigate, and diagnose issues when they crop up. To provide you this level of visibility Azure has made resource-level platform metrics available via Azure Monitor.",
    "Content": "<p>오늘날의&rsquo; 최신 애플리케이션 환경에서 메트릭은 앱, 서비스 및 실행되는 인프라의 성능을 이해하는 데 중요한 역할을 합니다. 자르기 시 문제를 감지, 조사 및 진단하는 데 도움이 될 수 있습니다. 이러한 수준의 가시성을 제공하기 위해 Azure는 <a href=\"https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview\">Azure Monitor</a><a href=\"https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-supported-metrics\">를 통해 리소스 수준 플랫폼 메트릭을</a> 사용할 수 있게 되었습니다. 그러나 많은 사용자가 더 많은 메트릭을 수집하고 하이브리드 환경에서 실행 중인 리소스 및 애플리케이션에 대한 심층적인 인사이트를 활용해야 합니다.</p>\n\n<p>이를 위해 <a href=\"https://docs.microsoft.com/azure/application-insights/app-insights-overview\">애플리케이션 Insights</a> SDK를 통해 앱에서 사용자 지정 메트릭을 보낼 수 있습니다. 오늘 Azure Monitor에서 사용자 지정 메트릭의 공개 미리 보기를 발표하게 되어 기쁩니다. 이제 Azure 리소스에 대해 어디서나 수집된 메트릭을 제출할 수 있습니다. 이러한 메트릭은 리소스에 대한 메모리 사용률과 같은 추가 성능 지표일 수 있습니다. 또는 페이지 로드 시간과 같이 애플리케이션에서 내보낸 비즈니스 관련 메트릭입니다. <a href=\"https://aka.ms/AzureMonitor/FullStackMonitoring\">이제 Azure Monitor의 통합 메트릭 환경</a>의 일부로 다음을 수행할 수 있습니다.</p>\n\n<ul>\n <li>최대 10개의 차원으로 사용자 지정 메트릭 보내기</li>\n <li>네임스페이스를 사용하여 메트릭 분류 및 분리</li>\n <li>Azure Monitor를 통해 통합된 메트릭 및 경고 환경 활용 <ul>\n  <li>Azure Portal의 차트 및 대시보드에서 리소스&rsquo; 플랫폼 메트릭과 함께 사용자 지정 메트릭 그리기</li>\n  <li>플랫폼 메트릭과 동일한 <a href=\"https://docs.microsoft.com/rest/api/monitor/metrics/list\">REST API</a> 집합을 통해 사용자 지정 메트릭에 액세스</li>\n  <li>Azure Monitor에 내보낸 사용자 지정 메트릭에 대한 경고 규칙을 작성하고 구성합니다. 메트릭에 있는 모든 차원을 필터링할 수 있도록 추가된 지원</li>\n </ul>\n </li>\n <li>1분 단위로 유지되는 사용자 지정 메트릭의 보존 3개월</li>\n</ul>\n\n<p>다음과 같은 몇 가지 방법으로 사용자 지정 메트릭을 Azure Monitor에 보낼 수 있습니다.</p>\n\n<ul>\n <li>새 <a href=\"https://docs.microsoft.com/en-us/rest/api/monitor/metrics%20(data%20plane)\">사용자 지정 메트릭 REST API를 통해 메트릭</a> 보내기</li>\n <li>WINDOWS 진단 확장(WAD)을 통해 <a href=\"https://docs.microsoft.com/azure/monitoring-and-diagnostics/azure-diagnostics\">Windows</a> VM에서 메트릭 게시</li>\n <li><a href=\"https://docs.influxdata.com/telegraf\">InfluxData Telegraf 에이전트</a>를 사용하여 Linux VM에서 메트릭 게시</li>\n <li><a href=\"https://docs.microsoft.com/azure/application-insights/app-insights-api-custom-events-metrics\">애플리케이션 Insights SDK</a>를 사용하여 애플리케이션 계측</li>\n</ul>\n\n<p>Azure Monitor에 사용자 지정 메트릭을 내보내는 방법을 알아보려면 계속 읽어보세요.</p>\n\n<h2>Windows VM에서 메트릭 내보내기</h2>\n\n<p>많은 사용자가 Azure VM 및 클래식 Cloud Services Azure Diagnostics 확장(Windows 및 Linux)을 사용하여 자세한 게스트 OS 수준 성능 데이터를 수집합니다. 이전에는 이러한 진단 확장을 통해 데이터를 Storage 테이블에 보낼 수 있었고 이러한 게스트 OS 메트릭을 기반으로 제한된 메트릭 환경 집합을 지원했습니다.</p>\n\n<p>오늘&rsquo; 릴리스의 일부로 성능 카운터를 Azure Monitor에 직접 보낼 수 있는 옵션을 갖도록 Windows 진단 확장을 업그레이드했습니다. 즉, Azure Monitor 환경 및 REST API를 통해 게스트 OS 메트릭을 직접 Windows 차원을 차트, 경고, 쿼리 및 필터링할 수 있습니다. <a href=\"https://aka.ms/VM/Windows-DiagExt-to-AzureMonitor\">진단 확장을 설치하고 구성하는</a> 방법에 대한 연습을 게시했습니다. Linux 진단 확장을 사용하여 Azure Monitor에 게스트 OS 메트릭을 보내는 것은 현재 사용할 수 없지만 곧 제공될 예정입니다.</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/0c7b2772-2bc9-4168-a10d-a2de073a8ddf.jpg\"><img alt=\"Azure%20Monitor%20-%20VM%20Guest%20and%20Platform%20Metrics\" border=\"0\" height=\"821\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3fa4face-8f47-422f-b3a6-1a5a674d72bd.jpg\" style=\"border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;\" title=\"Azure%20Monitor%20-%20VM%20Guest%20and%20Platform%20Metrics\" width=\"1406\"></a></p>\n\n<p align=\"center\"><em>Windows Virtual Machine에 대해 나란히 그려진 게스트 OS 메트릭(&lsquo;메모리/% 커밋 바이트&rsquo;) 및 플랫폼 메트릭(&lsquo;CPU&rsquo; 백분율)을 보여 주는 차트</em></p>\n\n<h2 align=\"left\">InfluxDatas&rsquo; Telegraf 플러그 인 에이전트를 사용하여 Linux VM에서 메트릭 내보내기</h2>\n\n<p>&rsquo;Linux VM에서 실행되는 워크로드에 대한 메트릭을 수집할 수 있는 다양한 오픈 소스 모니터링 도구 에코시스템이 있습니다. <a href=\"https://docs.influxdata.com/telegraf/v1.7/\">Telegraf</a> 는 이러한 인기 있는 오픈 소스 에이전트 중 하나입니다. 이 때문에 Azure Monitor와의 통합을 구축하기 위해 이 에이전트의 뒤에 있는 팀인 <a href=\"https://www.influxdata.com/\">InfluxData</a>의 파트너와 협력했습니다.</p>\n\n<p>Telegraf는 VM에서 실행되는 항목&rsquo;에 따라 150개가 넘는 다른 원본에서 메트릭을 수집할 수 있도록 하는 오픈 소스 플러그 인 기반 에이전트입니다. 이러한 플러그 인의 대부분은 커뮤니티에서 제공되므로 앞으로 몇 달 안에 더 많은 수집기 에이전트를 사용할 수 있게 될 것으로 예상할 수 있습니다. 플러그 인을 출력한 다음, 에이전트가 선택한 대상에 작성하도록 설정합니다. 에이전트는 사용자 지정 메트릭 REST API와 직접 통합되었으며 이제 새로운 &ldquo;Azure Monitor 출력 플러그 인&rdquo;을 지원합니다. 이렇게 하면 Telegraf 에이전트를 설치하고 워크로드에 대한 메트릭을 수집할 수 있습니다(예: MySQL, NGINX 등) Linux VM에서 실행되고 Azure Monitor에 사용자 지정 메트릭으로 게시되도록 합니다. 이 작업을 직접 설정하는 방법에 대한 <a href=\"https://aka.ms/AzureMonitor/Telegraf-to-AzureMonitor\">빠른 연습</a> 은 다음과 같습니다.</p>\n\n<h2>애플리케이션 Insights SDK 내보낸 메트릭에 대한 통합 환경</h2>\n\n<p>Application Insights&rsquo; 일환으로 항상 Application Insights SDK를 사용하여 코드를 계측하여 애플리케이션에 대한 인사이트를 수집하고 이를 사용자 지정 메트릭으로 내보낼 수 있었습니다. 여기에서 차원을 분할하고 필터링하는 기능을 사용하여 이러한 메트릭에 대해 경고하고 차트를 그릴 수 있었습니다. 현재 차원에 대해서도 경고할 수 있습니다. 애플리케이션 Insights 내보낸 모든 표준 메트릭에 대해 자동으로 사용할 수 있습니다. 사용자 지정 메트릭에 대한 차원에 대한 경고를 사용하도록 설정하려면 애플리케이션 Insights 구성 요소<a href=\"https://aka.ms/AppInsights/DimensionalAlerting\">에 대한 간단한 옵트인 환경</a>이 있습니다.</p>\n\n<h2>가격 책정</h2>\n\n<p>모든 리소스 수준 플랫폼 메트릭은 계속 무료로 사용할 수 있습니다. Azure 리소스에 대해 내보낸 사용자 지정 메트릭은 계량됩니다. 사용자 지정 메트릭은 매월 처음 150MB에 대해 무료이며, 그 후에는 수집된 데이터 볼륨에 따라 계량될 수 있습니다.</p>\n\n<p>애플리케이션 Insights 고객은 변경 없이 현재 애플리케이션 Insights 가격 책정 모델을 기반으로 계속 계량됩니다. 사용자 지정 메트릭에 차원 경고를 사용하도록 설정하는 것은 완전히 선택 사항입니다. 이 기능을 옵트인하는 것은 사용자 지정 메트릭 계량의 적용을 받습니다.</p>\n\n<p><a href=\"https://azure.microsoft.com/pricing/details/monitor/\">이러한 기능의 가격 책정에 대한 자세한 내용은 여기에서 확인할 수 있습니다</a>.</p>\n\n<h2>요약</h2>\n\n<p>Azure는 이미 Azure Monitor를 통해 플랫폼 메트릭을 사용하여 리소스의 성능을 파악할 수 있습니다. 이제 애플리케이션 및 리소스에 대한 사용자 지정 메트릭을 Azure Monitor에 내보내 이러한 메트릭을 보완할 수 있습니다. 이 초기 릴리스에 대해 기쁘게 생각하고 있으며, 향후 몇 달 동안 더 많은 Azure 지역에서 이 기능을 계속 사용할 수 있게 되었으며, 더 많은 기능을 추가하고, Azure Monitor의 다른 기능을 통해 사용자 지정 메트릭을 활용할 수 있게 될 것입니다. 이 것을 시도해 볼 때 여러분의 의견을 듣고 싶습니다. 의견을 삭제하거나 <a href=\"https://feedback.azure.com/forums/231545-diagnostics-and-monitoring\">사용자 음성</a> 으로 이동하여 의견을 알려주세요!</p>\n"
}