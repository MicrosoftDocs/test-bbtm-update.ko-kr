{
    "Slug": "a-fintech-startup-pivots-to-azure-cosmos-db",
    "Title": "핀테크 스타트업이 Azure Cosmos DB로 피벗",
    "Summary": "The right technology choices can accelerate success for a cloud born business. This is true for the fintech start-up clearTREND Research. Their solution architecture team knew one of the most important decisions would be the database decision between SQL or NoSQL.",
    "Content": "<p>올바른 기술 선택은 클라우드에서 태어난 비즈니스의 성공을 가속화할 수 있습니다. 핀테크 스타트업 <a href=\"https://cleartrendresearch.com/\" target=\"_blank\">클리어트렌드 리서치</a>에도 마찬가지입니다. 솔루션 아키텍처 팀은 가장 중요한 결정 중 하나가 SQL 또는 NoSQL 간의 데이터베이스 결정이라는 것을 알고 있습니다. 연구, 실험 및 많은 디자인 반복 후 팀은 Microsoft <a href=\"https://azure.microsoft.com/en-us/services/cosmos-db/?WT.mc_id=ms-docs-kbaroni\" target=\"_blank\">Azure Cosmos DB</a>에 배포하기로 결정하게 되어 매우 기뻤습니다. 이 블로그는 그들의 결정이 어떻게 이루어졌는지에 관한 것입니다.</p>\n\n<p>데이터 및 AI는 클라우드 비즈니스 기회의 급증을 주도하고 있으며, 신중한 평가를 받을 만한 한 가지 기술 결정은 클라우드 데이터베이스의 선택입니다. 관계형 데이터베이스는 계속해서 인기를 끌고 있으며 클라우드 기반 솔루션으로 상당한 수요를 유도하지만 NoSQL 데이터베이스는 분산된 글로벌 규모 솔루션에 적합합니다.</p>\n\n<p>파트너 clearTREND의 경우 <a href=\"https://azuremarketplace.microsoft.com/en-us/marketplace/apps/cleartrend.cleartrend_research?tab=Overview\" target=\"_blank\">금융 추세 엔진</a> 을 상용화하고 개인 및 전문가에게 구독 투자 서비스를 제공하는 것이 계획이었습니다. clearTRENDs&rsquo; SaaS 솔루션을 담당하는 팀은 수년 동안 클라우드 기반 솔루션을 구현해 온 소프트웨어 개발자 및 설계자의 베테랑 팀입니다. 그들은 비즈니스 기회를 이해하고 데이터베이스 기술 옵션을 더 잘 이해하고 싶었습니다. 실사를 통해 아키텍처가 비즈니스 우선 순위로 변형되고 데이터 세트가 구체화되었습니다. 많은 연구 및 실습 실험 끝에 아키텍처 팀은 솔루션에 가장 적합한 Azure Cosmos DB를 결정했습니다.</p>\n\n<p>특히 금융 업계에서 비즈니스 모델은 공격을 받고 있습니다. Cosmos DB는 비즈니스가 더 빠르게 혁신하고 기회를 전략적 이점으로 전환할 수 있도록 조정, 발전 및 허용할 수 있는 기술입니다.&nbsp;</p>\n\n<h2>Azure Cosmos DB를 선택해야 하는 6가지 이유</h2>\n\n<p>다음은 clearTREND 팀이 Azure Cosmos DB를 선택한 이유입니다.</p>\n\n<ol>\n    <li><strong>스키마 디자인은 훨씬 쉽고 유연합니다</strong>. 민첩한 개발 방법론을 사용하면 스키마가 자주 변경되고 변경 내용을 빠르고 안전하게 구현하는 기능이 큰 장점입니다. Azure Cosmos DB는 스키마에 구애받지 않으므로 데이터를 사용하는 방법에 대한 유연성이 매우 빠집니다.</li>\n    <li><strong>데이터베이스 읽기 및 쓰기는 매우 빠릅니다</strong>. Azure Cosmos DB는 SLA(<a href=\"https://azure.microsoft.com/en-us/support/legal/sla/cosmos-db/v1_0/?WT.mc_id=ms-docs-kbaroni\" target=\"_blank\">서비스 수준 계약</a>)로 지원되는 10밀리초 미만의 읽기 및 쓰기를 제공할 수 있습니다.</li>\n    <li><strong>쿼리는 번개처럼 빠르게 실행되며 자동 인덱싱은 게임 체인저입니다</strong>. 기본 또는 파티션 키를 기반으로 하는 읽기 및 쓰기는 빠르지만 많은 NoSQL 구현의 경우 키가 없는 문서 특성에 대해 실행되는 쿼리의 성능이 떨어집니다. 보조 인덱싱은 관리 및 유지 관리 부담일 수 있습니다. 기본적으로 Azure Cosmos DB는 문서의 모든 특성을 자동으로 인덱싱하므로 데이터가 로드되는 즉시 쿼리 성능이 최적화됩니다. 자동 인덱싱의 또 다른 이점은 스키마 및 인덱스가 완전히 동기화되어 보조 인덱스에 가동 중지 시간 또는 관리 없이 스키마 변경 내용을 신속하게 구현할 수 있다는 것입니다.</li>\n    <li><strong>신중한 디자인을 통해 Azure Cosmos DB는 매우 비용 효율적일 수 있습니다</strong>. Azure Cosmos DB 비용 모델은 컬렉션 수, 분할 키, 인덱스 전략, 문서 크기 및 문서 수를 통해 데이터베이스를 설계하는 방법에 따라 달라집니다. Azure Cosmos DB에 대한 가격 책정은 예약된 리소스를 기반으로 하며, 이러한 리소스를 요청 단위 또는 RU라고 하며 <a href=\"https://docs.microsoft.com/en-us/azure/cosmos-db/request-units/?WT.mc_id=ms-docs-kbaroni\" target=\"_blank\">Azure Cosmos DB</a>&rdquo; 설명서의 요청 단위에 설명 &ldquo; 되어 있습니다. clearTREND 스키마 디자인은 단일 문서 컬렉션으로 구현되며 Azure Cosmos DB를 비롯한 Azure에서 솔루션의 전체 비용은 저렴한 월별 가격으로 제공됩니다. 이 서비스는 관리되는 데이터베이스 서비스이므로 월별 비용에는 지원, 99.999% 고가용성, 읽기 및 쓰기 성능을 위한 SLA, 자동 분할, 기본적으로 암호화된 데이터 및 자동 백업이 포함됩니다.</li>\n    <li><strong>프로그래밍 방식으로 워크로드 버스트의 용량 크기를 조정합니다</strong>. clearTREND 워크로드에는 예측 가능한 일일 버스트 패턴이 있으며 RU를 프로그래밍 방식으로 조정할 수 있습니다. 복잡한 처리 또는 더 높은 처리량 요구 사항을 충족하기 위해 추가 컴퓨팅 리소스가 필요한 경우 RU를 늘릴 수 있습니다. 처리가 완료되면 RU가 다시 조정됩니다. 이러한 탄력성은 워크로드 요구에 비용 효율적으로 적응하기 위해 Azure Cosmos DB의 크기를 조정할 수 있습니다.</li>\n    <li><strong>푸시 단추 전역 분산 데이터</strong>입니다. 솔루션의 향후 확장성을 위해 설계하는 것은 까다로울 수 있으며, 솔루션이 초기 비전을 넘어 성장함에 따라 기술 및 디자인 선택은 비효율적일 수 있습니다. Azure Cosmos DB의 장점은 몇 번의 클릭만으로 전역적으로 구성되고 대규모로 확장된 솔루션이 될 수 있다는 것입니다. 클라우드 규모의 NoSQL 분산 데이터베이스를 설정하고 관리하는 운영상의 복잡성은 없습니다.</li>\n</ol>\n\n<h2>Azure Cosmos DB에 대한 디자인 및 구현 팁</h2>\n\n<p>Azure Cosmos DB를 접하는 경우 솔루션을 디자인하고 구현할 때 고려해야 할 clearTREND 팀의 몇 가지 팁은 다음과 같습니다.&nbsp;&nbsp;</p>\n\n<ul>\n    <li><strong>쿼리 및 API 최적화를 중심으로 스키마를 디자인합니다</strong>. NoSQL 데이터베이스에 대한 스키마 디자인은 RDBMS(관계형 데이터베이스 관리 시스템) 데이터베이스만큼이나 중요하지만&rsquo; 서로 다릅니다. NoSQL 데이터베이스에는 미리 정의된 테이블 구조가 필요하지 않지만&rsquo; 관계 표시 및 포함 위치와 방법을 인식하면서 문서 스키마를 구성하고 정의하는 것에 대해 의도적으로 해야 합니다. 스키마 디자인을 안내하기 위해 clearTREND 팀은 솔루션&rsquo; API에서 작성하고 검색하는 데이터 요소를 기반으로 데이터를 그룹화합니다.</li>\n    <li><strong>유연한 파티션 키를 구현합니다.</strong> Cosmos DB에서는 10GB를 넘는 문서 컬렉션을 만들 때 파티션 키를 지정해야 합니다. 파티션 키를 결정하는 것은 처음에는 파티션 키에 대한 최적의 선택이 무엇인지 명확하지 않을 수 있기 때문에 까다로울 수 있습니다. 데이터 범주, 지리적 지역, 식별자 또는 날짜 표시줄(예: 매월 또는 매년)이어야 하나요? 제대로 디자인되지 않은 파티션 키는 파티션 간에 작업을 균등하게 분산하는 대신 단일 파티션에서 읽기 및 쓰기 작업을 집중시키는 핫 스폿&rsquo;이라는 &lsquo;성능 병목 상태를 만들 수 있습니다.&nbsp; 데이터베이스의 파티션 키가 변경되면 기본 데이터가 새 컬렉션에 복사되고 다시 인덱싱될 때 애플리케이션 가용성에 영향을 줄 수 있는 다시 인덱싱 작업이 필요합니다.&nbsp;&nbsp;<br>\n&nbsp;<br>\nclearTrend 팀은 데이터베이스 다시 인덱싱 작업의 필요성을 완화하기 위해 파티션 키 디자인에 유연성을 구축했습니다.&nbsp; 해당 시나리오의 경우 문서 컬렉션의 공통 필드는 형식이며 각 형식에는 자체 스키마가 있습니다.&nbsp; 디자인하는 동안 최적의 파티션 키가 문서 유형에 따라 다를 수 있음을 깨달았습니다.&nbsp; 형식이 파티션 키 값 중 하나가 되었습니다.&nbsp; 파티션 키의 두 번째 값에 대해 팀은 논리 필드를 문자열로 정의하고 <strong>PartitionID</strong>라는 이름을 지정했습니다.&nbsp; <strong>PartitionID</strong> 의 개념은 처음에는 하나의 값(예: 클라이언트 식별자)으로 설정하고 나중에 &ndash; 보다 효율적인 키 값이 프로그래밍 방식으로 새 값 &ndash; 으로 바뀐 경우 설정할 수 있다는 것입니다.&nbsp;&nbsp; 이 방법을 사용하면 파티션 키의 논리적 정의는 변경되지 않지만 파티션 키 값은 변경 될 수 있습니다.&nbsp;&nbsp; CosmosDB는 파티션 키를 다시 해시하고 올바른 논리 파티션의 항목을 다시 찾아야 하지만 컬렉션에 있는 문서의 하위 집합만 영향을 받을 때 데이터베이스 전체 다시 인덱싱 작업을 피하는 데 사용할 수 있습니다.</li>\n    <li><strong>단일 컬렉션을 기반으로 스키마 디자인을 고려</strong>합니다. 일반적인 디자인 전략은 컬렉션당 하나의 문서 형식을 사용하는 것이지만 여러 문서 형식을 단일 컬렉션에 저장하는 이점이 있습니다. 컬렉션은 분할 및 인덱싱의 기초이므로 여러 문서 형식을 단일 컬렉션에 저장하는 것이 직관적이지 않을 수 있습니다. 그러나 필요한 컬렉션 간 작업 없이 기능을 최대화하고 전체 비용을 최소화할 수 있습니다. 이는 단일 컬렉션이 여러 컬렉션보다 저렴하기 때문입니다. clearTREND 솔루션에는 7가지 문서 유형이 있으며 모두 단일 컬렉션에 저장됩니다. 이 방법은 모든 문서가 파생되는 <strong>문서 형식</strong> 이라는 열거형 필드로 구현됩니다. 모든 문서에는 7가지 문서 형식 중 하나에 해당하는 문서 형식 속성이 있습니다.&nbsp;&nbsp;&nbsp;&nbsp;</li>\n    <li><strong>복잡한 쿼리 및 저장 프로시저 작업의 RU 비용을 이해하여 스키마 디자인을 조정합니다</strong>. 복잡한 쿼리 및 저장 프로시저에 대한 비용을 예상하기 어려울 수 있습니다. 특히 Azure Cosmos DB에서 작업을 실행하는 데 필요한 읽기 또는 쓰기 수를 미리 모르는 경우&rsquo; 그렇습니다. 복잡한 작업에 대한 메트릭 및 비용(RU)을 캡처하고 정보를 사용하여 스키마 디자인을 간소화합니다. 이러한 메트릭을 캡처하는 한 가지 방법은 Azure Portal Azure <a href=\"https://docs.microsoft.com/en-us/azure/cosmos-db/monitor-accounts/?WT.mc_id=ms-docs-kbaroni\" target=\"_blank\">Cosmos DB 대시보드</a>에서 쿼리 또는 저장 프로시저를 실행하는 것입니다.</li>\n    <li><strong>단순 또는 계산된 식을 문서 속성으로 포함하는 것이 좋습니다</strong>. 개수, 합계, 최소값 및 최대값과 같은 간단한 집계를 계산해야 하는 요구 사항이 있거나 간단한 부울 논리 식을 평가해야 하는 경우 식을 기본 문서 클래스의 속성으로 정의하는 것이 좋습니다. 예를 들어 로깅 애플리케이션에는 조건을 평가하고 작업이 성공했는지 여부를 확인하는 논리가 있을 수 있습니다. 논리가 아래와 같은 간단한 부울 식인 경우 클래스 정의에 포함하는 것이 좋습니다.</li>\n</ul>\n\n<pre>\npublic class LogStatus\n{\n    // C# example of a Boolean expression embedded in a class definition\n      public bool Failed =&gt; !((WasReadSuccessful &amp;&amp; WasOptimizationSuccssful &amp;&amp; StatusMsg == &ldquo;Success&rdquo;) ||\n(WasReadSuccessful &amp;&amp; !IsDataCurrent));\n      public string StatusMsg {get; set;}\n      public bool WasReadSuccessful {get; set;}\n      public bool WasOptimizationSuccessful {get;set}\n      public bool IsDataCurrent {get;set}\n  }</pre>\n\n<p><strong>실패를 </strong>보여 주는 명령 필드는 읽기 전용 계산 속성으로 정의됩니다. 데이터베이스 사용량이 주로 읽기 집약적이면 식이 평가 및 저장되거나 문서가 작성될 때 전체 RU 비용을 줄일 수 있습니다. 이는 문서를 쿼리할 때마다 비용을 절감하는 대안입니다.&nbsp;</p>\n\n<ul>\n    <li><strong>참조 무결성은 애플리케이션 계층에서 구현됩니다</strong>. 참조 무결성을 사용하면 데이터 요소 간의 관계가 유지되고 RDBMS 참조 무결성이 키를 통해 적용됩니다. 예를 들어 RDBMS는 기본 키와 외신 키를 사용하여 제품을 주문하기 전에 제품이 있는지 확인합니다. 참조 무결성이 요구 사항이며 데이터 종속성을 모니터링하고 적용해야 하는 경우 애플리케이션 계층에서 수행해야 합니다. 참조 및 데이터 무결성 테스트에 대해 엄격해야 합니다.</li>\n    <li><strong>애플리케이션 Insights 사용하여 Azure Cosmos DB 활동을 모니터링합니다</strong>. <a href=\"https://docs.microsoft.com/en-us/azure/application-insights/app-insights-overview/?WT.mc_id=ms-docs-kbaroni\" target=\"_blank\">애플리케이션 Insights</a> 원격 분석 서비스이며 이 솔루션은 Azure Cosmos DB 활동에 대한 자세한 성능, 가용성 및 사용량 정보를 수집하고 보고하는 데 사용되었습니다. <a href=\"https://azure.microsoft.com/en-us/services/functions/?WT.mc_id=ms-docs-kbaroni\" target=\"_blank\">Azure Functions</a> <a href=\"https://docs.microsoft.com/en-us/azure/application-insights/app-insights-metrics-explorer/?WT.mc_id=ms-docs-kbaroni\" target=\"_blank\">메트릭 탐색기를</a> 사용하여 Azure Cosmos DB와 애플리케이션 Insights 통합하고 <a href=\"https://docs.microsoft.com/en-us/dotnet/api/microsoft.applicationinsights.telemetryclient?view=azure-dotnet/?WT.mc_id=ms-docs-kbaroni\" target=\"_blank\">TelemetryClient.GetMetric()</a><strong></strong>을 사용하여 <a href=\"https://docs.microsoft.com/en-us/azure/application-insights/app-insights-api-custom-events-metrics/?WT.mc_id=ms-docs-kbaroni\" target=\"_blank\">사용자 지정 이벤트를</a> 캡처하는 기능을 제공했습니다.</li>\n</ul>\n\n<blockquote>\n<p>&ldquo;AppInsights와의 통합은 환상적&hellip;입니다.&rdquo; 팀 밀러, 수석 컨설턴트 &ndash; 스카이라인 기술</p>\n</blockquote>\n\n<ul>\n</ul>\n\n<h2>권장하는 다음 단계</h2>\n\n<p>NoSQL은 클라우드에서 데이터베이스 솔루션을 구현하는 방식을 빠르게 전환하는 패러다임입니다. 개발자든 데이터베이스 전문가이든 Azure Cosmos DB는 클라우드 데이터베이스 환경에서 점점 더 중요한 플레이어이며 솔루션의 게임 체인저가 될 수 있습니다. 아직 개발하지 않은&rsquo; 경우 Azure Cosmos DB의 이점과 기능을 소개합니다. <a href=\"https://azure.microsoft.com/en-us/blog/a-technical-overview-of-azure-cosmos-db/?WT.mc_id=ms-docs-kbaroni\" target=\"_blank\">설명서를</a> 살펴보고 <a href=\"https://github.com/Azure-Samples/documentdb-dotnet-todo-app\" target=\"_blank\">샘플 GitHub 애플리케이션</a>을 해부하고 디자인 패턴에 대해 자세히 알아보세요.</p>\n\n<ul>\n    <li><a href=\"https://www.skylinetechnologies.com/Case-Studies/fintech-startup-commercializes-internal-saas-tool\" target=\"_blank\">Fintech Startup은 내부 도구를 SaaS 제품으로 상용화</a>합니다.</li>\n    <li><a href=\"https://azuremarketplace.microsoft.com/en-us/marketplace/apps/cleartrend.cleartrend_research?tab=Overview\" target=\"_blank\">세계&rsquo; 최초의 클라우드 기반 재무 추세 엔진인 clearTREND를 발견</a>하세요.</li>\n    <li><a href=\"https://azure.microsoft.com/en-us/try/cosmosdb/?WT.mc_id=ms-docs-kbaroni\" target=\"_blank\">Azure Cosmos DB를 무료로 사용해 보세요</a>. 제한된 시간, 전체 서비스 환경을 얻을 수 있습니다. 사용해 보세요. 자습서 또는 데모를 실행하고 필요한 Azure 계정 또는 신용 카드 없이 빠른 시작을 단계별로 실행합니다.</li>\n    <li>개발자인 경우 <a href=\"https://docs.microsoft.com/en-us/azure/cosmos-db/local-emulator/?WT.mc_id=ms-docs-kbaroni\" target=\"_blank\">Azure Cosmos DB 에뮬레이터를 사용해 보세요</a>. Azure 구독을 만들거나 비용을 발생시키지 않고 로컬에서 애플리케이션을 개발하고 테스트합니다. 애플리케이션이 작동하면 Azure Cosmos DB를 사용하도록 전환합니다.</li>\n</ul>\n\n<h2>파트너 clearTREND 및 Skyline Technologies에 감사드립니다!</h2>\n\n<p>Microsoft를 위해 일하는 가장 좋은 점 중 하나는 고객 및 파트너와 함께 작업하고 기술을 구현하기 위한 창의적인 접근 방식에 대해 배울 수 있는 기회입니다. clearTREND 솔루션을 설계하고 구현한 팀은 <a href=\"https://www.skylinetechnologies.com/\" target=\"_blank\">Skyline Technologies</a>를 사용하는 설계자 및 개발자입니다. 비즈니스 클라이언트에 대한 열정과 복잡한 기술 문제를 해결하는 데 열정을 가지고 있는 이들은 매우 초기 클라우드 채택자였습니다. 팀 <a href=\"https://www.linkedin.com/in/timrmiller\" target=\"_blank\">밀러</a>, <a href=\"https://www.linkedin.com/in/greglevenhagen/\" target=\"_blank\">그렉 레벤하겐</a>, <a href=\"https://www.linkedin.com/in/mikelauer/\" target=\"_blank\">마이클 라우어</a> 등 이 노력에 시간을 내준 팀원들에게 특히 감사드립니다. 그것은&rsquo; 당신과 함께 일하는 기쁨이었다.</p>\n"
}